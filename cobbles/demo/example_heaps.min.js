(function(pl){function J(a,b){var c=Object.create(a),d;for(d in b)c[d]=b[d];b.toString!==Object.prototype.toString&&(c.toString=b.toString);return c}function bh(a){return a instanceof Array?z.iter(a):a.iterator()}function K(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=ql++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=b.bind(a),a.hx__closures__[b.__id__]=c);return c}var p={},m=function(){return Ba.__string_rec(this,"")},M=M||{},s,Ze=function(a,
b){this.r=RegExp(a,b.split("u").join(""))};p.EReg=Ze;Ze.__name__="EReg";Ze.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new n("EReg::matched");},matchedPos:function(){if(null==this.r.m)throw new n("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){this.r.lastIndex=
b;this.r.m=this.r.exec(0>c?a:z.substr(a,0,b+c));if(b=null!=this.r.m)this.r.s=a;return b}if(c=this.match(0>c?z.substr(a,b,null):z.substr(a,b,c)))this.r.s=a,this.r.m.index+=b;return c},__class__:Ze};var z=function(){};p.HxOverrides=z;z.__name__="HxOverrides";z.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>f?"0"+f:""+f)};z.strDate=
function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw new n("Invalid date format : "+a);}};z.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};z.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==
b)c=a.length+c;else return"";return a.substr(b,c)};z.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};z.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var ch=function(){};p.Lambda=ch;ch.__name__="Lambda";ch.array=function(a){var b=[];for(a=bh(a);a.hasNext();){var c=a.next();b.push(c)}return b};Math.__name__="Math";var xa=function(){};p.Reflect=xa;xa.__name__="Reflect";xa.field=
function(a,b){try{return a[b]}catch(c){return null}};xa.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&("hx__closures__"!=d&&c.call(a,d))&&b.push(d)}return b};xa.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1};xa.compare=function(a,b){return a==b?0:a>b?1:-1};xa.compareMethods=function(a,b){return a==b?!0:!xa.isFunction(a)||!xa.isFunction(b)?!1:a.scope==b.scope&&a.method==b.method?null!=a.method:!1};xa.isEnumValue=
function(a){return null!=a?null!=a.__enum__:!1};xa.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var ve=function(){};p.Safety=ve;ve.__name__="Safety";ve.or=function(a,b){return null==a?b:a};ve.orGet=function(a,b){return null==a?b():a};ve.sure=function(a){if(null==a)throw new n(new Rb("Null pointer in .sure() call"));return a};ve.unsafe=function(a){return a};ve.check=function(a,b){return null!=a?b(a):!1};ve.let=function(a,b){return null==a?null:
b(a)};ve.run=function(a,b){null!=a&&b(a)};ve.apply=function(a,b){null!=a&&b(a);return a};var r=function(){};p.Std=r;r.__name__="Std";r.string=function(a){return Ba.__string_rec(a,"")};r.parseInt=function(a){a=parseInt(a,a&&"0"==a[0]&&("x"==a[1]||"X"==a[1])?16:10);return isNaN(a)?null:a};r.random=function(a){return 0>=a?0:Math.floor(Math.random()*a)};var Bb=function(){this.b=""};p.StringBuf=Bb;Bb.__name__="StringBuf";Bb.prototype={__class__:Bb};var ga=function(){};p.StringTools=ga;ga.__name__="StringTools";
ga.htmlEscape=function(a,b){for(var c="",d=0;d<a.length;){var e=a.charCodeAt(d++);55296<=e&&56319>e&&(e=e-55232<<10|a.charCodeAt(d++)&1023);switch(e){case 34:c=b?c+"&quot;":c+String.fromCodePoint(e);break;case 38:c+="&amp;";break;case 39:c=b?c+"&#039;":c+String.fromCodePoint(e);break;case 60:c+="&lt;";break;case 62:c+="&gt;";break;default:c+=String.fromCodePoint(e)}}return c};ga.startsWith=function(a,b){return a.length>=b.length?z.substr(a,0,b.length)==b:!1};ga.endsWith=function(a,b){var c=b.length,
d=a.length;return d>=c?z.substr(a,d-c,c)==b:!1};ga.isSpace=function(a,b){var c=z.cca(a,b);return 8<c&&14>c?!0:32==c};ga.ltrim=function(a){for(var b=a.length,c=0;c<b&&ga.isSpace(a,c);)++c;return 0<c?z.substr(a,c,b-c):a};ga.rtrim=function(a){for(var b=a.length,c=0;c<b&&ga.isSpace(a,b-c-1);)++c;return 0<c?z.substr(a,0,b-c):a};ga.trim=function(a){return ga.ltrim(ga.rtrim(a))};ga.hex=function(a,b){for(var c="";!(c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4,!(0<a)););if(null!=b)for(;c.length<b;)c="0"+c;return c};
var ha=function(){};p.Type=ha;ha.__name__="Type";ha.createInstance=function(a,b){return new (Function.prototype.bind.apply(a,[null].concat(b)))};ha.createEnum=function(a,b,c){var d=xa.field(a,b);if(null==d)throw new n("No such constructor "+b);if(xa.isFunction(d)){if(null==c)throw new n("Constructor "+b+" need parameters");return d.apply(a,c)}if(null!=c&&0!=c.length)throw new n("Constructor "+b+" does not need parameters");return d};ha.createEnumIndex=function(a,b,c){var d=a.__constructs__[b];if(null==
d)throw new n(b+" is not a valid enum constructor index");return ha.createEnum(a,d,c)};ha.enumEq=function(a,b){if(a==b)return!0;try{var c=a.__enum__;if(null==c||c!=b.__enum__||a._hx_index!=b._hx_index)return!1;for(var d=M[c],e=d[d.__constructs__[a._hx_index]].__params__,c=0;c<e.length;){var f=e[c];++c;if(!ha.enumEq(a[f],b[f]))return!1}}catch(g){return!1}return!0};ha.enumParameters=function(a){var b=M[a.__enum__],b=b[b.__constructs__[a._hx_index]].__params__;if(null!=b){for(var c=[],d=0;d<b.length;){var e=
b[d];++d;c.push(a[e])}return c}return[]};var H=function(a){this.nodeType=a;this.children=[];this.attributeMap=new ia};p.Xml=H;H.__name__="Xml";H.parse=function(a){return we.parse(a)};H.createElement=function(a){var b=new H(H.Element);if(b.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+b.nodeType);b.nodeName=a;return b};H.createPCData=function(a){var b=new H(H.PCData);if(b.nodeType==H.Document||b.nodeType==H.Element)throw new n("Bad node type, unexpected "+b.nodeType);
b.nodeValue=a;return b};H.createCData=function(a){var b=new H(H.CData);if(b.nodeType==H.Document||b.nodeType==H.Element)throw new n("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};H.createComment=function(a){var b=new H(H.Comment);if(b.nodeType==H.Document||b.nodeType==H.Element)throw new n("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};H.createDocType=function(a){var b=new H(H.DocType);if(b.nodeType==H.Document||b.nodeType==H.Element)throw new n("Bad node type, unexpected "+
b.nodeType);b.nodeValue=a;return b};H.createProcessingInstruction=function(a){var b=new H(H.ProcessingInstruction);if(b.nodeType==H.Document||b.nodeType==H.Element)throw new n("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};H.createDocument=function(){return new H(H.Document)};H.prototype={get:function(a){if(this.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+this.nodeType);var b=this.attributeMap;return null!=L[a]?b.getReserved(a):b.h[a]},set:function(a,
b){if(this.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+this.nodeType);var c=this.attributeMap;null!=L[a]?c.setReserved(a,b):c.h[a]=b},exists:function(a){if(this.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+this.nodeType);var b=this.attributeMap;return null!=L[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},attributes:function(){if(this.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.keys()},
elements:function(){if(this.nodeType!=H.Document&&this.nodeType!=H.Element)throw new n("Bad node type, expected Element or Document but found "+this.nodeType);for(var a=[],b=0,c=this.children;b<c.length;){var d=c[b];++b;d.nodeType==H.Element&&a.push(d)}return z.iter(a)},elementsNamed:function(a){if(this.nodeType!=H.Document&&this.nodeType!=H.Element)throw new n("Bad node type, expected Element or Document but found "+this.nodeType);for(var b=[],c=0,d=this.children;c<d.length;){var e=d[c];++c;var f;
if(e.nodeType==H.Element){if(e.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+e.nodeType);f=e.nodeName==a}else f=!1;f&&b.push(e)}return z.iter(b)},firstElement:function(){if(this.nodeType!=H.Document&&this.nodeType!=H.Element)throw new n("Bad node type, expected Element or Document but found "+this.nodeType);for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;if(c.nodeType==H.Element)return c}return null},addChild:function(a){if(this.nodeType!=H.Document&&this.nodeType!=
H.Element)throw new n("Bad node type, expected Element or Document but found "+this.nodeType);null!=a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this},removeChild:function(a){if(this.nodeType!=H.Document&&this.nodeType!=H.Element)throw new n("Bad node type, expected Element or Document but found "+this.nodeType);return z.remove(this.children,a)?(a.parent=null,!0):!1},toString:function(){return eg.print(this)},__class__:H};var Me=M["cobbles.Alignment"]={__ename__:!0,__constructs__:["Start",
"Center","End"],Start:{_hx_index:0,__enum__:"cobbles.Alignment",toString:m},Center:{_hx_index:1,__enum__:"cobbles.Alignment",toString:m},End:{_hx_index:2,__enum__:"cobbles.Alignment",toString:m}};Me.__empty_constructs__=[Me.Start,Me.Center,Me.End];var fg=function(){};p["cobbles.Debug"]=fg;fg.__name__="cobbles.Debug";fg.warning=function(a,b){Sb.trace(a,b)};var Hc=M["cobbles.Direction"]={__ename__:!0,__constructs__:["LeftToRight","RightToLeft","TopToBottom","BottomToTop"],LeftToRight:{_hx_index:0,__enum__:"cobbles.Direction",
toString:m},RightToLeft:{_hx_index:1,__enum__:"cobbles.Direction",toString:m},TopToBottom:{_hx_index:2,__enum__:"cobbles.Direction",toString:m},BottomToTop:{_hx_index:3,__enum__:"cobbles.Direction",toString:m}};Hc.__empty_constructs__=[Hc.LeftToRight,Hc.RightToLeft,Hc.TopToBottom,Hc.BottomToTop];var gg=function(){};p["cobbles.Disposable"]=gg;gg.__name__="cobbles.Disposable";gg.prototype={__class__:gg};var tc=function(a,b){null==a&&(a="");this.message=a;this.previous=b;this.stack=ab.callStack();this.stack.shift()};
p["haxe.Exception"]=tc;tc.__name__="haxe.Exception";tc.wrap=function(a,b){return a instanceof tc?a:new tc(r.string(a))};tc.prototype={toString:function(){for(var a="",b=this,c=null;null!=b;)a=null==c?"Exception: "+b.message+"\nStack:"+ab.toString(b.stack)+a:"Exception: "+b.message+"\nStack:"+ab.toString(Uc.subtract(b.stack,c.stack))+"\n\nNext "+a,c=b,b=b.previous;return a},setStack:function(a){this.stack=a;return this},__class__:tc};var xe=function(a,b){tc.call(this,a,b)};p["cobbles.Exception"]=xe;
xe.__name__="cobbles.Exception";xe.__super__=tc;xe.prototype=J(tc.prototype,{__class__:xe});var kl=function(){};p["cobbles.MacroUtil"]=kl;kl.__name__="cobbles.MacroUtil";var sd=M["cobbles.Orientation"]={__ename__:!0,__constructs__:["HorizontalTopBottom","VerticalLeftRight","VerticalRightLeft"],HorizontalTopBottom:{_hx_index:0,__enum__:"cobbles.Orientation",toString:m},VerticalLeftRight:{_hx_index:1,__enum__:"cobbles.Orientation",toString:m},VerticalRightLeft:{_hx_index:2,__enum__:"cobbles.Orientation",
toString:m}};sd.__empty_constructs__=[sd.HorizontalTopBottom,sd.VerticalLeftRight,sd.VerticalRightLeft];var dh=function(){};p["cobbles.Runtime"]=dh;dh.__name__="cobbles.Runtime";dh.loadEmscripten=function(){var a=xb.emscriptenModuleName;return new Promise(function(b,c){Sb.trace("Loading Emscripten runtime",{fileName:"src/cobbles/Runtime.hx",lineNumber:18,className:"cobbles.Runtime",methodName:"loadEmscripten"});cobbles_runtime().then(function(c){dh.emscriptenLoadCallback(a,b,c)})})};dh.emscriptenLoadCallback=
function(a,b,c){delete c.then;Sb.trace("Binding functions",{fileName:"src/cobbles/Runtime.hx",lineNumber:38,className:"cobbles.Runtime",methodName:"emscriptenLoadCallback"});window[a]=c;cobbles_bind(xa.field(window,a));Sb.trace("Loaded Emscripten runtime",{fileName:"src/cobbles/Runtime.hx",lineNumber:48,className:"cobbles.Runtime",methodName:"emscriptenLoadCallback"});b(!0)};var kc=function(){this.fontTable=new Yb;this.markupParser=new Ci;this.lineBreakingAlgorithm=new eh};p["cobbles.TextConfig"]=
kc;kc.__name__="cobbles.TextConfig";kc.instance=function(){null==kc._instance&&(kc._instance=new kc);return kc._instance};kc.prototype={__class__:kc};var Fi=function(a){this.config=null!=a?a:kc.instance();this.textSource=new Di(this.config.lineBreakingAlgorithm);this.shaper=new fh;this.layout=new Ei(this.config.fontTable,this.textSource,this.shaper)};p["cobbles.TextInput"]=Fi;Fi.__name__="cobbles.TextInput";Fi.prototype={get_font:function(){return this.textSource.defaultTextProperties.fontKey},set_font:function(a){return this.textSource.defaultTextProperties.fontKey=
a},get_fontSize:function(){return this.textSource.defaultTextProperties.get_fontPointSize()},set_fontSize:function(a){return this.textSource.defaultTextProperties.set_fontPointSize(a)},get_language:function(){return this.textSource.defaultTextProperties.language},set_language:function(a){return this.textSource.defaultTextProperties.language=a},get_script:function(){return this.textSource.defaultTextProperties.script},set_script:function(a){return this.textSource.defaultTextProperties.script=a},get_textDirection:function(){return this.textSource.defaultTextProperties.direction},
set_textDirection:function(a){return this.textSource.defaultTextProperties.direction=a},get_color:function(){return this.textSource.defaultTextProperties.color},set_color:function(a){return this.textSource.defaultTextProperties.color=a},get_orientation:function(){return this.layout.orientation},set_orientation:function(a){return this.layout.orientation=a},get_alignment:function(){return this.layout.alignment},set_alignment:function(a){return this.layout.alignment=a},get_lineBreakLength:function(){return this.layout.point64ToPixel(this.layout.lineBreakLength)},
set_lineBreakLength:function(a){this.layout.lineBreakLength=this.layout.pixelToPoint64(a);return a},get_lineSpacing:function(){return this.layout.relativeLineSpacing},set_lineSpacing:function(a){return this.layout.relativeLineSpacing=a},get_resolution:function(){return this.layout.resolution},clearText:function(){this.textSource.clear();this.layout.clearLines()},addLineBreak:function(a){null==a&&(a=1.2);this.flushPendingText();this.textSource.addLineBreak(a)},addInlineObject:function(a){this.flushPendingText();
this.textSource.addInlineObject(a)},addText:function(a){this.flushPendingText();var b=this.textSource.defaultTextProperties.copy();return this._pendingText=new Gi(a,b,this.config.fontTable)},flushPendingText:function(){null!=this._pendingText&&(this.textSource.addText(this._pendingText.text,this._pendingText.properties),this._pendingText=null)},addMarkup:function(a){this.config.markupParser.parse(new Hi(this),a)},layoutText:function(){null!=this._pendingText&&(this.textSource.addText(this._pendingText.text,
this._pendingText.properties),this._pendingText=null);this.layout.layout()},__class__:Fi};var Gi=function(a,b,c){this.text=a;this.properties=b;this.fontTable=c};p["cobbles.TextInputTextFI"]=Gi;Gi.__name__="cobbles.TextInputTextFI";Gi.prototype={font:function(a){this.properties.fontKey=a;return this},detectFont:function(){if(""!=this.text){for(var a=this.fontTable,b=this.text,c=0,d=b.length,e=0;0>e&&c<d;){var f=b.charCodeAt(c),c=c+(!(55296<=f&&56319>=f)?1:2);++e}b=ja.codePointAt(b,c);this.properties.fontKey=
a.findByCodePoint(b)}return this},detectScript:function(){var a=Bk.guessScript(this.text);this.properties.script=a.script;this.properties.direction=a.direction;return this},fontSize:function(a){this.properties.set_fontPointSize(a);return this},color:function(a){this.properties.color=a;return this},direction:function(a){this.properties.direction=a;return this},language:function(a){this.properties.language=a;return this},script:function(a){this.properties.script=a;return this},data:function(a,b){this.properties.data.set(a,
b);return this},__class__:Gi};var ll=function(){};p["cobbles.algorithm.BidiAlgorithm"]=ll;ll.__name__="cobbles.algorithm.BidiAlgorithm";var al=function(){};p["cobbles.algorithm.CharTools"]=al;al.__name__="cobbles.algorithm.CharTools";al.isInRange=function(a,b,c){if(!(0<=b&&1114111>=b&&!(55296<=b&&56319>=b)&&!(56320<=b&&57343>=b)))throw new n(new ye(b));if(a>=b){if(!(0<=c&&1114111>=c&&!(55296<=c&&56319>=c)&&!(56320<=c&&57343>=c)))throw new n(new ye(c));return a<=c}return!1};var Ii=function(){};p["cobbles.algorithm.LineBreakingAlgorithm"]=
Ii;Ii.__name__="cobbles.algorithm.LineBreakingAlgorithm";Ii.prototype={__class__:Ii};var Ic=M["cobbles.algorithm.LineBreakRule"]={__ename__:!0,__constructs__:["Mandatory","Opportunity","Prohibited","Unspecified"],Mandatory:{_hx_index:0,__enum__:"cobbles.algorithm.LineBreakRule",toString:m},Opportunity:{_hx_index:1,__enum__:"cobbles.algorithm.LineBreakRule",toString:m},Prohibited:{_hx_index:2,__enum__:"cobbles.algorithm.LineBreakRule",toString:m},Unspecified:{_hx_index:3,__enum__:"cobbles.algorithm.LineBreakRule",
toString:m}};Ic.__empty_constructs__=[Ic.Mandatory,Ic.Opportunity,Ic.Prohibited,Ic.Unspecified];var Ji=function(a,b){this.script=a;this.direction=b};p["cobbles.algorithm.StringScriptResult"]=Ji;Ji.__name__="cobbles.algorithm.StringScriptResult";Ji.prototype={__class__:Ji};var Bk=function(){};p["cobbles.algorithm.ScriptGuesser"]=Bk;Bk.__name__="cobbles.algorithm.ScriptGuesser";Bk.guessScript=function(a){var b=xb.getCobblesPointer();a=cobbles.guess_string_script(b,Ib.toNativeString(a));b=""+String.fromCodePoint(a>>
24&127);b+=String.fromCodePoint(a>>16&127);b+=String.fromCodePoint(a>>8&127);b+=String.fromCodePoint(a&127);return new Ji(b,1==(a>>31&1)?Hc.RightToLeft:Hc.LeftToRight)};var eh=function(){};p["cobbles.algorithm.SimpleLineBreaker"]=eh;eh.__name__="cobbles.algorithm.SimpleLineBreaker";eh.__interfaces__=[Ii];eh.prototype={getBreaks:function(a,b){for(var c=[],d=0,e=!1,f=bh(a);f.hasNext();){var g=f.next();0==d&&b?c.push(Ic.Prohibited):this.isMandatory(g,0)?c.push(Ic.Mandatory):this.isSpace(g)?(c.push(Ic.Unspecified),
e=!0):e||this.isCJK(g)?(c.push(Ic.Opportunity),e=!1):c.push(Ic.Unspecified);++d}return c},isMandatory:function(a,b){return 10==a&&13!=b||13==a?!0:133==a},isSpace:function(a){return(32!=a?12288==a:1)||8192<=a&&8203>=a||9==a?!0:173==a},isCJK:function(a){return 11904<=a&&12287>=a||12352<=a&&12447>=a||12450<=a&&12538>=a||13312<=a&&19903>=a||19968<=a&&40959>=a?!0:63744<=a?64255>=a:!1},__class__:eh};var Ki=function(a,b){this.key=a;this.value=b};p["cobbles.ds._Cache.CacheNode"]=Ki;Ki.__name__="cobbles.ds._Cache.CacheNode";
Ki.prototype={__class__:Ki};var Nc=function(){};p["haxe.IMap"]=Nc;Nc.__name__="haxe.IMap";Nc.prototype={__class__:Nc};var hg=function(a,b){null==a&&(a=256);this._count=0;this.maxSize=a;this._map=b};p["cobbles.ds.Cache"]=hg;hg.__name__="cobbles.ds.Cache";hg.__interfaces__=[Nc];hg.prototype={unshiftNode:function(a){this._head=null!=this._head?this._head.previous=a:this._tail=a},unlinkNode:function(a){var b=a.previous;a=a.next;null!=b?b.next=a:this._head=a;null!=a?a.previous=b:this._tail=b},get:function(a){a=
this._map.get(a);return null!=a?(this.unlinkNode(a),this.unshiftNode(a),a.value):null},set:function(a,b){var c=this._map.get(a);if(null!=c)this.unlinkNode(c),this.unshiftNode(c),c.value=b;else if(c=new Ki(a,b),this.unshiftNode(c),this._map.set(a,c),this._count+=1,this._count>this.maxSize){c=this._tail;if(null==c)throw new n(new Rb("Null pointer in .sure() call"));this.remove(c.key)}},exists:function(a){return this._map.exists(a)},remove:function(a){var b=this._map.get(a);null!=b&&(this.unlinkNode(b),
this._count-=1);return this._map.remove(a)},keys:function(){return this._map.keys()},iterator:function(){return new Li(this._map)},keyValueIterator:function(){return new Mi(this._map)},copy:function(){throw new n("not implemented");},toString:function(){return this._map.toString()},__class__:hg};var Li=function(a){this._map=a;this._keyIterator=a.keys()};p["cobbles.ds._Cache.CacheValueIterator"]=Li;Li.__name__="cobbles.ds._Cache.CacheValueIterator";Li.prototype={hasNext:function(){return this._keyIterator.hasNext()},
next:function(){var a=this._map.get(this._keyIterator.next());if(null==a)throw new n(new Rb("Null pointer in .sure() call"));return a.value},__class__:Li};var Mi=function(a){this._map=a;this._keyIterator=a.keys()};p["cobbles.ds._Cache.CacheKeyValueIterator"]=Mi;Mi.__name__="cobbles.ds._Cache.CacheKeyValueIterator";Mi.prototype={hasNext:function(){return this._keyIterator.hasNext()},next:function(){var a=this._map.get(this._keyIterator.next());if(null==a)throw new n(new Rb("Null pointer in .sure() call"));
return{key:a.key,value:a.value}},__class__:Mi};var ce=function(){this.hash=0;this.hash=ce.OFFSET_BASIS};p["cobbles.ds.FNV1aHasher"]=ce;ce.__name__="cobbles.ds.FNV1aHasher";ce.prototype={reset:function(){this.hash=ce.OFFSET_BASIS},addByte:function(a){this.hash^=a;this.hash=this.hash*ce.PRIME&-1},addInt:function(a){this.addByte(a>>24&255);this.addByte(a>>16&255);this.addByte(a>>8&255);this.addByte(a&255)},get:function(){return this.hash},__class__:ce};var gh=function(){this.flipFlop=!1;this.hasherImplHigh=
new ce;this.hasherImplLow=new ce};p["cobbles.ds.Hasher"]=gh;gh.__name__="cobbles.ds.Hasher";gh.prototype={reset:function(){this.hasherImplHigh.reset();this.hasherImplLow.reset()},addByte:function(a){this.flipFlop?this.hasherImplHigh.addByte(a):this.hasherImplLow.addByte(a);this.flipFlop=!this.flipFlop},addBytes:function(a){for(var b=0,c=a.length;b<c;){var d=b++;this.addByte(a.b[d])}},addInt:function(a){this.flipFlop?this.hasherImplHigh.addInt(a):this.hasherImplLow.addInt(a);this.flipFlop=!this.flipFlop},
addInt64:function(a){this.addInt(a.high);this.addInt(a.low)},get:function(){return new de(this.hasherImplHigh.get(),this.hasherImplLow.get())},addString:function(a){for(var b=0,c=a.length;b<c;){var d=b++,d=a.charCodeAt(d);if(d!=d)break;this.addInt(d)}},__class__:gh};var Ne=function(){this.data=new oa};p["cobbles.ds.Int64Map"]=Ne;Ne.__name__="cobbles.ds.Int64Map";Ne.__interfaces__=[Nc];Ne.prototype={get:function(a){var b=this.data.h[a.high];return null!=b?b.h[a.low]:null},set:function(a,b){var c=this.data.h[a.high];
null==c&&(c=new oa,this.data.h[a.high]=c);c.h[a.low]=b},exists:function(a){var b=this.data.h[a.high];return null!=b?b.h.hasOwnProperty(a.low):!1},remove:function(a){var b=this.data.h[a.high];return null!=b?b.remove(a.low):!1},keys:function(){for(var a=[],b=this.data.keys();b.hasNext();){var c=b.next(),d=this.data.h[c];if(null==d)throw new n(new Rb("Null pointer in .sure() call"));for(d=d.keys();d.hasNext();){var e=d.next(),e=new de(c,e);a.push(e)}}return z.iter(a)},iterator:function(){for(var a=[],
b=this.data.keys();b.hasNext();){var c=b.next(),c=this.data.h[c];if(null==c)throw new n(new Rb("Null pointer in .sure() call"));for(c=c.iterator();c.hasNext();){var d=c.next();a.push(d)}}return z.iter(a)},keyValueIterator:function(){for(var a=[],b=new dd(this.data);b.hasNext();)for(var c=b.next(),d=new dd(c.value);d.hasNext();){var e=d.next(),f=new de(c.key,e.key);a.push({key:f,value:e.value})}return z.iter(a)},copy:function(){for(var a=new Ha,b=this.keys();b.hasNext();){var c=b.next(),d=this.get(c);
if(null==d)throw new n(new Rb("Null pointer in .sure() call"));a.set(c,d)}return a},toString:function(){return this.data.toString()},__class__:Ne};var ml=function(){};p["cobbles.ds.MapTools"]=ml;ml.__name__="cobbles.ds.MapTools";var ed=M["cobbles.example.heaps.DemoMode"]={__ename__:!0,__constructs__:["LeftText","CenterText","RightText","RightToLeftMode"],LeftText:{_hx_index:0,__enum__:"cobbles.example.heaps.DemoMode",toString:m},CenterText:{_hx_index:1,__enum__:"cobbles.example.heaps.DemoMode",toString:m},
RightText:{_hx_index:2,__enum__:"cobbles.example.heaps.DemoMode",toString:m},RightToLeftMode:{_hx_index:3,__enum__:"cobbles.example.heaps.DemoMode",toString:m}};ed.__empty_constructs__=[ed.LeftText,ed.CenterText,ed.RightText,ed.RightToLeftMode];var Ni=function(a){this.extraText="";this.demoMode=ed.LeftText;this.counter=0;this.cobbles=new Fi;for(var b=0;b<a.length;){var c=a[b];++b;Sb.trace("Load "+c.name,{fileName:"example/heaps/src/cobbles/example/heaps/DemoText.hx",lineNumber:35,className:"cobbles.example.heaps.DemoText",
methodName:"new"});c=null!=c.data?kc.instance().fontTable.openBytes(c.data):kc.instance().fontTable.openFile(c.name);null==this.defaultFont&&(this.defaultFont=c)}this.cobbles.set_lineBreakLength(0);this.cobbles.set_font(this.defaultFont);this.cobbles.set_fontSize(24);this.cobbles.set_color(-1);a=new hh(512,512);this.renderer=new ih(kc.instance().fontTable,a);this.tileGroup=this.renderer.newTileGroup();this.texture=this.renderer.textureAtlas.texture};p["cobbles.example.heaps.DemoText"]=Ni;Ni.__name__=
"cobbles.example.heaps.DemoText";Ni.prototype={addDefaultText:function(){var a=z.dateStr(new Date);this.cobbles.addText(""+a+" "+this.counter);this.cobbles.addLineBreak(2);this.cobbles.addText("The quick brown fox jumps over the lazy dog. ");this.cobbles.addMarkup("<span size='40pt' color='#ff3333'>Hel\u035clo<br/>wo\u030erld! <sa>\u064a\u0648\u0646\u064a\u0643\u0648\u062f</sa></span>");this.cobbles.addText("\u6211\u80fd\u541e\u4e0b\u73bb\u7483\u800c\u4e0d\u4f24\u8eab\u4f53\u3002").script("Hans").language("zh-Hans").detectFont();
this.cobbles.addText("\u79c1\u306f\u30ac\u30e9\u30b9\u3092\u98df\u3079\u3089\u308c\u307e\u3059\u3002\u305d\u308c\u306f\u79c1\u3092\u50b7\u3064\u3051\u307e\u305b\u3093\u3002").script("Jpan").language("ja").detectFont();this.cobbles.addText("\ub098\ub294 \uc720\ub9ac\ub97c \uba39\uc744 \uc218 \uc788\uc5b4\uc694. \uadf8\ub798\ub3c4 \uc544\ud504\uc9c0 \uc54a\uc544\uc694. ").script("Kore").language("ko").detectFont();this.cobbles.addText("\u042f \u043c\u043e\u0433\u0443 \u0435\u0441\u0442\u044c \u0441\u0442\u0435\u043a\u043b\u043e, \u043e\u043d\u043e \u043c\u043d\u0435 \u043d\u0435 \u0432\u0440\u0435\u0434\u0438\u0442. ").detectScript().detectFont();
this.cobbles.addText("T\u00f4i c\u00f3 th\u1ec3 \u0103n th\u1ee7y tinh m\u00e0 kh\u00f4ng h\u1ea1i g\u00ec. ").detectScript().detectFont();this.cobbles.addText("\u0623\u0646\u0627 \u0642\u0627\u062f\u0631 \u0639\u0644\u0649 \u0623\u0643\u0644 \u0627\u0644\u0632\u062c\u0627\u062c \u0648 \u0647\u0630\u0627 \u0644\u0627 \u064a\u0624\u0644\u0645\u0646\u064a. ").detectScript().detectFont();this.cobbles.addText("\u05d0\u05e0\u05d9 \u05d9\u05db\u05d5\u05dc \u05dc\u05d0\u05db\u05d5\u05dc \u05d6\u05db\u05d5\u05db\u05d9\u05ea \u05d5\u05d6\u05d4 \u05dc\u05d0 \u05de\u05d6\u05d9\u05e7 \u05dc\u05d9. ").script("Hebr").direction(Hc.RightToLeft).detectFont()},
setExtraText:function(a){this.extraText=a},update:function(){this.cobbles.clearText();this.addDefaultText();this.cobbles.addText(this.extraText).detectFont().detectScript();this.cobbles.layoutText();this.renderer.renderTileGroup(this.cobbles.layout,this.tileGroup);var a=Pa.getInstance().get_width();switch(this.demoMode._hx_index){case 0:a=this.tileGroup;a.posChanged=!0;a.x=0;break;case 1:var b=this.tileGroup,a=Math.round((a-this.cobbles.layout.point64ToPixel(this.cobbles.layout.boundingWidth))/2);
b.posChanged=!0;b.x=a;break;case 2:case 3:b=this.tileGroup,a-=this.cobbles.layout.point64ToPixel(this.cobbles.layout.boundingWidth),b.posChanged=!0,b.x=a}this.counter+=1},switchMode:function(){switch(this.demoMode._hx_index){case 0:this.cobbles.set_alignment(Me.Center);this.demoMode=ed.CenterText;break;case 1:this.cobbles.set_alignment(Me.End);this.demoMode=ed.RightText;break;case 2:this.cobbles.set_alignment(Me.End);this.cobbles.set_textDirection(Hc.RightToLeft);this.demoMode=ed.RightToLeftMode;
break;case 3:this.cobbles.set_alignment(Me.Start),this.cobbles.set_textDirection(Hc.LeftToRight),this.demoMode=ed.LeftText}},setWidth:function(a){this.cobbles.set_lineBreakLength(a)},__class__:Ni};var ig=function(){};p["h3d.IDrawable"]=ig;ig.__name__="h3d.IDrawable";ig.prototype={__class__:ig};var fd=function(){var a=this,b=na.CURRENT;null!=b?(this.engine=b,b.onReady=K(this,this.setup),ee.delay(K(this,this.setup),0)):X.start(function(){b=new na;a.engine=b;b.onReady=K(a,a.setup);b.init()})};p["hxd.App"]=
fd;fd.__name__="hxd.App";fd.__interfaces__=[ig];fd.staticHandler=function(){};fd.prototype={onResize:function(){},setScene:function(a,b){null==b&&(b=!0);var c=a instanceof gd?a:null,d=a instanceof hd?a:null;null!=c&&this.sevents.removeScene(this.s2d);null!=d&&this.sevents.removeScene(this.s3d);this.sevents.addScene(a);if(b)if(null!=c)this.s2d.dispose();else if(null!=d)this.s3d.dispose();else throw new n("Can't dispose previous scene");null!=c&&(this.s2d=c);null!=d&&(this.s3d=d)},setScene2D:function(a,
b){null==b&&(b=!0);this.sevents.removeScene(this.s2d);this.sevents.addScene(a,0);b&&this.s2d.dispose();this.s2d=a},render:function(a){this.s3d.render(a);this.s2d.render(a)},setup:function(){var a=this,b=!1;this.engine.onReady=fd.staticHandler;this.engine.onResized=function(){if(null!=a.s2d&&(a.s2d.checkResize(),b))a.onResize()};this.s3d=new hd;this.s2d=new gd;this.sevents=new Oi;this.sevents.addScene(this.s2d);this.sevents.addScene(this.s3d);this.loadAssets(function(){b=!0;a.init();da.skip();a.mainLoop();
X.setLoop(K(a,a.mainLoop));w.initialize()})},dispose:function(){this.engine.onResized=fd.staticHandler;this.engine.onContextLost=fd.staticHandler;this.isDisposed=!0;this.s2d.dispose();this.s3d.dispose();this.sevents.dispose()},loadAssets:function(a){a()},init:function(){},mainLoop:function(){da.update();this.sevents.checkEvents();if(!this.isDisposed&&(this.update(da.dt),!this.isDisposed)){var a=da.dt;this.s2d.setElapsedTime(a);this.s3d.setElapsedTime(a);this.engine.render(this)}},update:function(a){},
__class__:fd};var $e=function(){fd.call(this)};p["cobbles.example.heaps.HeapsExample"]=$e;$e.__name__="cobbles.example.heaps.HeapsExample";$e.main=function(){dh.loadEmscripten().then(function(a){Sb.trace("Starting Heaps",{fileName:"example/heaps/src/cobbles/example/heaps/HeapsExample.hx",lineNumber:46,className:"cobbles.example.heaps.HeapsExample",methodName:"main"});return new $e})};$e.__super__=fd;$e.prototype=J(fd.prototype,{init:function(){fd.prototype.init.call(this);this.demoText=new Ni(this.loadedFonts);
var a=new jg(Ga.fromTexture(this.demoText.texture),this.s2d);a.posChanged=!0;a.y=30;a.alpha=0.5;a=this.demoText.tileGroup;a.posChanged=!0;a.y=30;this.s2d.addChild(this.demoText.tileGroup);this.demoText.update();a=jh.get();a=this.fpsText=new kh(a,this.s2d);a.posChanged=!0;a.scaleX*=2;a.posChanged=!0;a.scaleY*=2;Pa.getInstance().addResizeEvent(K(this,this.resizeCallback));Pa.getInstance().addEventTarget(K(this,this.eventCallback));this.demoText.setWidth(this.s2d.width)},loadAssets:function(a){var b=
this,c=[];window.demoLoadAllFonts&&(c=["resource/fonts/noto/NotoSans-Regular.ttf","resource/fonts/noto/NotoSansArabic-Regular.ttf","resource/fonts/noto/NotoSansCJKsc-Regular.otf"]);c.push("resource/fonts/liberation/LiberationSerif-Regular.ttf");this.loadedFonts=[];var d=function(){if(0==c.length)a();else{var e=c.shift(),f=new Pi(e);f.onLoaded=function(a){Sb.trace("Loaded "+e+".",{fileName:"example/heaps/src/cobbles/example/heaps/HeapsExample.hx",lineNumber:90,className:"cobbles.example.heaps.HeapsExample",
methodName:"loadAssets"});b.loadedFonts.push({name:e,data:a});d()};Sb.trace("Loading "+e+"..",{fileName:"example/heaps/src/cobbles/example/heaps/HeapsExample.hx",lineNumber:95,className:"cobbles.example.heaps.HeapsExample",methodName:"loadAssets"});f.load()}};d()},update:function(a){this.demoText.update();this.fpsText.set_text("FPS "+(da.fps()|0)+". WIP. Resize window. Click to change mode.")},resizeCallback:function(){this.demoText.setWidth(Pa.getInstance().get_width())},eventCallback:function(a){a.kind==
ca.EPush&&this.demoText.switchMode()},__class__:$e});var af=function(a,b,c){null==c&&(c=0);this.width=this.height=this.horizontalResolution=this.verticalResolution=0;this._isDisposed=!1;var d=new gh;if(null!=a)c=cobbles.open_font_file(xb.getCobblesPointer(),Ib.toNativeString(a),c),d.addString(a);else if(null!=b)this._bytesPointer=Ib.toNativeBytes(b),c=cobbles.open_font_bytes(xb.getCobblesPointer(),this._bytesPointer,b.length,c),d.addBytes(b);else throw new n("path or bytes must be given");if(null==
c)throw new n(new xe("Failed to initialize font struct"));if(null==c)throw new n(new Rb("Null pointer in .sure() call"));a=this.fontPointer=c;if(null==a)throw new n(new Rb("Null pointer in .sure() call"));a=cobbles.font_get_error(a);if(0!=a)throw new n(new xe("Failed load font, FT error "+a));this.hashCode64=d.get();this.setPointSize(16)};p["cobbles.font.Font"]=af;af.__name__="cobbles.font.Font";af.__interfaces__=[gg];af.prototype={dispose:function(){if(!this._isDisposed)if(this._isDisposed=!0,cobbles.font_close(this.fontPointer),
null!=this._bytes&&null!=this._bytesPointer)Ib.releaseNativeBytes(this._bytes,this._bytesPointer,!1),this._bytesPointer=this._bytes=null;else if(null!=this._bytesPointer){var a=new N(new ArrayBuffer(0));Ib.releaseNativeBytes(a,this._bytesPointer,!1);this._bytesPointer=null}},isDisposed:function(){return this._isDisposed},getGlyphID:function(a){var b=this.fontPointer;if(null==b)throw new n(new Rb("Null pointer in .sure() call"));return cobbles.font_get_glyph_id(b,a)},setPointSize:function(a,b){null==
b&&(b=72);this.setSize(0,64*a|0,0,b|0)},setSize:function(a,b,c,d){var e=this.fontPointer;if(null==e)throw new n(new Rb("Null pointer in .sure() call"));cobbles.font_set_size(e,a,b,c,d);e=cobbles.font_get_error(e);if(0!=e)throw new n(new xe("Failed setting size, FT error "+e));this.width=a;this.height=b;this.verticalResolution=d;this.horizontalResolution=c},getGlyphBitmap:function(a){var b=this.fontPointer;if(null==b)throw new n(new Rb("Null pointer in .sure() call"));cobbles.font_load_glyph(b,a);
var c=cobbles.font_get_error(b);if(0!=c)throw new n(new xe("Failed loading glyph "+a+", FT error "+c));a=new N(new ArrayBuffer(16));c=Ib.toNativeBytes(a,!1);cobbles.font_get_glyph_info(b,c);Ib.releaseNativeBytes(a,c);var d=a.getInt32(0),e=a.getInt32(4),f=new N(new ArrayBuffer(d*e));0<f.length&&(c=Ib.toNativeBytes(f,!1),cobbles.font_get_glyph_bitmap(b,c),Ib.releaseNativeBytes(f,c));return new Qi(d,e,f,a.getInt32(8),a.getInt32(12))},__class__:af};var Ck={};p["cobbles.font._FontTable.FontKey_Impl_"]=
Ck;Ck.__name__="cobbles.font._FontTable.FontKey_Impl_";Ck._new=function(a){return a};Ck.toIndex=function(a){return a};var Yb=function(){this._isDisposed=!1;this.fonts=[];this.fontKeys=[]};p["cobbles.font.FontTable"]=Yb;Yb.__name__="cobbles.font.FontTable";Yb.__interfaces__=[gg];Yb.get_notdefFont=function(){null==Yb._notdefFontKey&&(Yb._notdefFontKey=-1,Yb._notdefFont=new af(null,lh.getBytes("resource/fonts/adobe-notdef/AND-Regular.otf")));return Yb._notdefFontKey};Yb.prototype={dispose:function(){for(var a=
0,b=this.fonts;a<b.length;){var c=b[a];++a;c.isDisposed()||c.dispose()}this._isDisposed=!0},isDisposed:function(){return this._isDisposed},addFont:function(a){var b=this.fonts.length;this.fonts.push(a);this.fontKeys.push(b);return b},getFont:function(a){if(a!=Yb.get_notdefFont())return this.fonts[a];a=Yb._notdefFont;if(null==a)throw new n(new Rb("Null pointer in .sure() call"));return a},openFile:function(a){a=new af(a);return this.addFont(a)},openBytes:function(a){a=new af(null,a);return this.addFont(a)},
findByCodePoint:function(a,b){for(var c=null!=b?b:this.fontKeys,d=0,e=c.length;d<e;){var f=d++,g=c[f];if(0!=this.fonts[f].getGlyphID(a))return g}return Yb.get_notdefFont()},__class__:Yb};var Qi=function(a,b,c,d,e){this.width=a;this.height=b;this.data=c;this.left=d;this.top=e};p["cobbles.font.GlyphBitmap"]=Qi;Qi.__name__="cobbles.font.GlyphBitmap";Qi.prototype={__class__:Qi};var Ri=function(){};p["cobbles.layout.InlineObject"]=Ri;Ri.__name__="cobbles.layout.InlineObject";Ri.prototype={__class__:Ri};
var fe=M["cobbles.layout.ShapedItem"]={__ename__:!0,__constructs__:["PenRunItem","InlineObjectItem","LineBreakItem"],PenRunItem:(s=function(a){return{_hx_index:0,penRun:a,__enum__:"cobbles.layout.ShapedItem",toString:m}},s.__params__=["penRun"],s),InlineObjectItem:(s=function(a){return{_hx_index:1,inlineObject:a,__enum__:"cobbles.layout.ShapedItem",toString:m}},s.__params__=["inlineObject"],s),LineBreakItem:(s=function(a){return{_hx_index:2,spacing:a,__enum__:"cobbles.layout.ShapedItem",toString:m}},
s.__params__=["spacing"],s)};fe.__empty_constructs__=[];var Ei=function(a,b,c){this.boundingWidth=this.boundingHeight=0;this.resolution=72;this.relativeLineSpacing=1.2;this.orientation=sd.HorizontalTopBottom;this.alignment=Me.Start;this.lineBreakLength=0;this.fontTable=a;this.textSource=b;this.shaper=c;this.lines=[];this.currentLine=new kg;this.clearLines()};p["cobbles.layout.Layout"]=Ei;Ei.__name__="cobbles.layout.Layout";Ei.prototype={pointToPixel:function(a){return Math.round(a/72*this.resolution)},
point64ToPixel:function(a){return Math.round(a/64/72*this.resolution)},pixelToPoint:function(a){return Math.round(72*(a/this.resolution))},pixelToPoint64:function(a){return Math.round(4608*(a/this.resolution))},relativeToAbsoluteLineSpacing:function(a){return Math.round(this.textSource.defaultTextProperties.fontSize*a)},layout:function(){var a=this.shapeTextRuns(this.textSource.items);0<this.lineBreakLength&&0<this.textSource.lineBreakRules.length&&(a=this.processLineBreaking(a));this.convertShapedItemsToLines(a);
this.calculateBoundingSize();this.alignLines();switch(this.textSource.defaultTextProperties.direction._hx_index){case 1:case 3:this.reverseLineRunOrder()}},clearLines:function(){this.lines.length=0;this.currentLine=new kg;this.currentLine.spacing=this.relativeToAbsoluteLineSpacing(this.relativeLineSpacing);this.lines.push(this.currentLine)},shapeTextRuns:function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;switch(d._hx_index){case 0:b.push(fe.PenRunItem(this.shapeTextRun(d.textRun)));break;case 1:d=
this.relativeToAbsoluteLineSpacing(d.relativeSpacing);b.push(fe.LineBreakItem(d));break;case 2:b.push(fe.InlineObjectItem(d.inlineObject))}}return b},shapeTextRun:function(a){var b=this.fontTable.getFont(a.fontKey);b.setSize(0,a.fontSize,0,this.resolution);var c=this.textSource.codePoints.slice(a.codePointIndex,a.codePointIndex+a.codePointCount);this.shaper.setCodePoints(c);this.shaper.setDirection(a.direction);this.shaper.setFont(b);this.shaper.setScript(a.script,a.language);b=this.shaper.shape();
switch(a.direction._hx_index){case 1:case 3:c=!0;break;default:c=!1}return new mh(a.fontKey,a.fontSize,a.script,a.color,b,a.codePointIndex,c,a.data)},processLineBreaking:function(a){for(var b=this,c=new Si(this),d=[],e=function(){c.flush(d);var a=fe.LineBreakItem(b.getDefaultSpacing());d.push(a)};;){var f=a.shift();if(null==f)break;switch(f._hx_index){case 0:c.pushPenRun(f.penRun);c.isLineOverflown()&&(c.popOverflowedItems(a),e());break;case 1:f=f.inlineObject;c.willInlineObjectOverflowLine(f)&&e();
c.pushInlineObject(f);c.isLineOverflown()&&e();break;case 2:c.flush(d),d.push(f)}}c.flush(d);return d},addLayoutLineInlineObject:function(a){var b;b=this.orientation==sd.HorizontalTopBottom?a.getWidth():a.getHeight();this.currentLine.items.push(bl.InlineObjectItem(a));this.increaseCurrentLineLength(b)},addRunToCurrentLine:function(a){this.currentLine.items.push(bl.PenRunItem(a));this.currentLine.length=this.orientation==sd.HorizontalTopBottom?this.currentLine.length+a.get_width():this.currentLine.length+
a.get_height()},increaseCurrentLineLength:function(a){this.currentLine.length+=a},addLayoutLineBreak:function(a){this.currentLine=new kg;this.lines.push(this.currentLine);this.currentLine.spacing=null==a?this.getDefaultSpacing():a},getDefaultSpacing:function(){return this.relativeToAbsoluteLineSpacing(this.relativeLineSpacing)},convertShapedItemsToLines:function(a){for(var b=0;b<a.length;){var c=a[b];++b;switch(c._hx_index){case 0:this.addRunToCurrentLine(c.penRun);break;case 1:this.addLayoutLineInlineObject(c.inlineObject);
break;case 2:this.addLayoutLineBreak(c.spacing)}}},alignLines:function(){switch(this.orientation._hx_index){case 0:this.alignHorizontalLines();break;case 1:case 2:this.alignVerticalLines()}},alignHorizontalLines:function(){for(var a=0,b=0,c=this.lines;b<c.length;){var d=c[b];++b;switch(this.alignment._hx_index){case 0:d.x=0;break;case 1:d.x=Math.round((this.boundingWidth-d.length)/2);break;case 2:d.x=this.boundingWidth-d.length}a+=d.spacing;d.y=a}},alignVerticalLines:function(){for(var a=0,b=0,c=
this.lines;b<c.length;){var d=c[b];++b;switch(this.alignment._hx_index){case 0:d.y=0;break;case 1:d.y=Math.round((this.boundingHeight-d.length)/2);break;case 2:d.y=this.boundingHeight-d.length}a+=d.spacing;d.x=this.orientation==sd.VerticalLeftRight?a:this.boundingWidth-a}},calculateBoundingSize:function(){for(var a=this.boundingHeight=this.boundingWidth=0,b=this.lines;a<b.length;){var c=b[a];++a;this.orientation==sd.HorizontalTopBottom?(c.length>this.boundingWidth&&(this.boundingWidth=c.length),this.boundingHeight+=
c.spacing):(c.length>this.boundingHeight&&(this.boundingHeight=c.length),this.boundingWidth+=c.spacing)}this.orientation==sd.HorizontalTopBottom?this.boundingHeight+=Math.round(0.5*this.textSource.defaultTextProperties.fontSize*this.relativeLineSpacing):this.boundingWidth+=Math.round(0.5*this.textSource.defaultTextProperties.fontSize*this.relativeLineSpacing)},reverseLineRunOrder:function(){for(var a=0,b=this.lines;a<b.length;){var c=b[a];++a;c.items.reverse()}},__class__:Ei};var bl=M["cobbles.layout.LayoutLineItem"]=
{__ename__:!0,__constructs__:["PenRunItem","InlineObjectItem"],PenRunItem:(s=function(a){return{_hx_index:0,penRun:a,__enum__:"cobbles.layout.LayoutLineItem",toString:m}},s.__params__=["penRun"],s),InlineObjectItem:(s=function(a){return{_hx_index:1,inlineObject:a,__enum__:"cobbles.layout.LayoutLineItem",toString:m}},s.__params__=["inlineObject"],s)};bl.__empty_constructs__=[];var kg=function(){this.length=this.spacing=this.x=this.y=0;this.items=[]};p["cobbles.layout.LayoutLine"]=kg;kg.__name__="cobbles.layout.LayoutLine";
kg.prototype={__class__:kg};var Ti=function(){this.index=this.emergencyIndex=-1};p["cobbles.layout._LayoutLineBreaker.ItemBreakInfo"]=Ti;Ti.__name__="cobbles.layout._LayoutLineBreaker.ItemBreakInfo";Ti.prototype={reset:function(){this.emergencyIndex=this.index=-1},__class__:Ti};var Si=function(a){this.lineLength=0;this.layout=a;this.lineBuffer=[];this.breakOpportunity=new Ti};p["cobbles.layout.LayoutLineBreaker"]=Si;Si.__name__="cobbles.layout.LayoutLineBreaker";Si.prototype={willPenRunOverflowLine:function(a){return this.willOverflowLine(this.getPenRunLength(a))},
willInlineObjectOverflowLine:function(a){return this.willOverflowLine(this.getInlineObjectLength(a))},isLineOverflown:function(){return this.willOverflowLine(0)},willOverflowLine:function(a){return 0<this.layout.lineBreakLength?this.lineLength+a>this.layout.lineBreakLength:!1},getPenRunLength:function(a){return this.layout.orientation==sd.HorizontalTopBottom?a.get_width():a.get_height()},getInlineObjectLength:function(a){return this.layout.orientation==sd.HorizontalTopBottom?a.getWidth():a.getHeight()},
flush:function(a){for(var b=0,c=this.lineBuffer;b<c.length;){var d=c[b];++b;a.push(d)}this.lineBuffer=[];this.lineLength=0;this.breakOpportunity.reset()},pushPenRun:function(a){this.lineBuffer.push(fe.PenRunItem(a));this.lineLength+=this.getPenRunLength(a)},getGlyphAdvance:function(a){return this.layout.orientation==sd.HorizontalTopBottom?a.advanceX:a.advanceY},pushInlineObject:function(a){this.lineBuffer.push(fe.InlineObjectItem(a));this.lineLength+=this.getInlineObjectLength(a)},popOverflowedItems:function(a){this.scanForBreakOpportunities();
var b=[],c=[],d=0,e;if(0<=this.breakOpportunity.index)e=this.breakOpportunity.index;else if(0<=this.breakOpportunity.emergencyIndex)e=this.breakOpportunity.emergencyIndex;else return;for(var f=0,g=this.lineBuffer;f<g.length;){var h=g[f];++f;switch(h._hx_index){case 0:var k=h.penRun,l;l=k;for(var O=-1,t=0,x=l.glyphShapes.length;t<x;){var n=t++,n=l.rtl?l.glyphShapes.length-1-n:n;d==e&&(O=n);d+=1}l=O;0<=l?k.rtl?(c.push(fe.PenRunItem(k.slice(0,l+1))),b.push(fe.PenRunItem(k.slice(l+1,k.glyphShapes.length)))):
(b.push(fe.PenRunItem(k.slice(0,l))),c.push(fe.PenRunItem(k.slice(l,k.glyphShapes.length)))):d>e?c.push(h):b.push(h);break;case 1:d>e?c.push(h):b.push(h)}}c.reverse();for(d=0;d<c.length;)e=c[d],++d,a.unshift(e);this.lineBuffer=b},scanForBreakOpportunities:function(){this.breakOpportunity.reset();for(var a=0,b=this.layout.textSource.lineBreakRules,c=0,d=0,e=this.lineBuffer;d<e.length;){var f=e[d];++d;switch(f._hx_index){case 0:for(var f=f.penRun,g=0,h=f.glyphShapes.length;g<h;){var k=g++,l=f.glyphShapes[f.rtl?
f.glyphShapes.length-1-k:k],k=this.getGlyphAdvance(l),l=l.textIndex+f.textOffset;a<this.layout.lineBreakLength?(b[l]==Ic.Opportunity&&(this.breakOpportunity.index=c),this.breakOpportunity.emergencyIndex=c):0>this.breakOpportunity.emergencyIndex&&(this.breakOpportunity.emergencyIndex=c);a+=k;c+=1}break;case 1:this.breakOpportunity.index=c}if(a>this.lineLength&&0<=this.breakOpportunity.index&&0<=this.breakOpportunity.emergencyIndex)break}0==this.breakOpportunity.index&&(this.breakOpportunity.index=
-1);0==this.breakOpportunity.emergencyIndex&&(this.breakOpportunity.emergencyIndex=-1)},__class__:Si};var mh=function(a,b,c,d,e,f,g,h){this.fontKey=a;this.fontSize=b;this.script=c;this.color=d;this.glyphShapes=e;this.textOffset=f;this.rtl=g;this.data=h};p["cobbles.layout.PenRun"]=mh;mh.__name__="cobbles.layout.PenRun";mh.prototype={get_width:function(){for(var a=0,b=0,c=this.glyphShapes.length;b<c;)var d=b++,a=a+this.glyphShapes[d].advanceX;return a},get_height:function(){for(var a=0,b=0,c=this.glyphShapes.length;b<
c;)var d=b++,a=a+this.glyphShapes[d].advanceY;return a},slice:function(a,b){if(0>a||b>this.glyphShapes.length||a>b)throw new n("invalid index range "+a+" "+b);var c=Array(b-a);Ui.blit(this.glyphShapes,a,c,0,c.length);return new mh(this.fontKey,this.fontSize,this.script,this.color,c,this.textOffset,this.rtl,this.data)},__class__:mh};var nh=function(){this.script="Latn";this.language="en";this.direction=Hc.LeftToRight;this.color=-16777216;this.fontSize=1024;this.fontKey=Yb.get_notdefFont();this.data=
new ia};p["cobbles.layout.TextProperties"]=nh;nh.__name__="cobbles.layout.TextProperties";nh.prototype={get_fontPointSize:function(){return this.fontSize/64},set_fontPointSize:function(a){this.fontSize=64*a|0;return a},copy:function(){var a=new nh;a.color=this.color;a.direction=this.direction;a.fontSize=this.fontSize;a.fontKey=this.fontKey;a.script=this.script;a.data=this.data.copy();return a},__class__:nh};var oh=function(a,b,c,d,e,f,g,h,k){this.codePointIndex=a;this.codePointCount=b;this.fontKey=
c;this.fontSize=d;this.color=e;this.direction=f;this.language=g;this.script=h;this.data=k};p["cobbles.layout.TextRun"]=oh;oh.__name__="cobbles.layout.TextRun";oh.prototype={copy:function(){return new oh(this.codePointIndex,this.codePointCount,this.fontKey,this.fontSize,this.color,this.direction,this.language,this.script,this.data)},__class__:oh};var Dk=M["cobbles.layout.TextSourceItem"]={__ename__:!0,__constructs__:["RunItem","LineBreakItem","InlineObjectItem"],RunItem:(s=function(a){return{_hx_index:0,
textRun:a,__enum__:"cobbles.layout.TextSourceItem",toString:m}},s.__params__=["textRun"],s),LineBreakItem:(s=function(a){return{_hx_index:1,relativeSpacing:a,__enum__:"cobbles.layout.TextSourceItem",toString:m}},s.__params__=["relativeSpacing"],s),InlineObjectItem:(s=function(a){return{_hx_index:2,inlineObject:a,__enum__:"cobbles.layout.TextSourceItem",toString:m}},s.__params__=["inlineObject"],s)};Dk.__empty_constructs__=[];var Di=function(a){this.lineBreaker=null!=a?Tb.Some(a):Tb.None;this.items=
[];this.codePoints=[];this.lineBreakRules=[];this.defaultTextProperties=new nh};p["cobbles.layout.TextSource"]=Di;Di.__name__="cobbles.layout.TextSource";Di.prototype={addInlineObject:function(a){this.items.push(Dk.InlineObjectItem(a));this.codePoints.push(65532)},addText:function(a,b){null==b&&(b=this.defaultTextProperties);var c=ph.toCodePoints(a),d=this.lineBreaker;switch(d._hx_index){case 0:this.addWithMandatoryBreaks(d.v,c,b);break;case 1:this.addRunFromProperties(c,b)}},addRunFromProperties:function(a,
b){var c=new oh(this.codePoints.length,a.length,b.fontKey,b.fontSize,b.color,b.direction,b.language,b.script,b.data);this.items.push(Dk.RunItem(c));for(c=0;c<a.length;){var d=a[c];++c;this.codePoints.push(d)}},addWithMandatoryBreaks:function(a,b,c){a=a.getBreaks(b,!1);for(var d=0,e=0,f=a.length;e<f;){var g=e++;a[g]==Ic.Mandatory?(d=b.slice(d,g),this.addRunFromProperties(d,c),this.addLineBreak(),d=g+1):this.lineBreakRules.push(a[g])}0!=d&&(b=b.slice(d,a.length));this.addRunFromProperties(b,c)},addLineBreak:function(a){null==
a&&(a=1.2);this.items.push(Dk.LineBreakItem(a))},clear:function(){this.items=[];this.codePoints=[];this.lineBreakRules=[]},__class__:Di};var bf=function(){};p["cobbles.markup.ElementHandler"]=bf;bf.__name__="cobbles.markup.ElementHandler";bf.prototype={__class__:bf};var qh=function(){};p["cobbles.markup.BRHandler"]=qh;qh.__name__="cobbles.markup.BRHandler";qh.__interfaces__=[bf];qh.prototype={handleElementStart:function(a,b){a.addLineBreak()},handleElementEnd:function(a,b){},__class__:qh};var rh=
function(a,b){null==b&&(b=0);null==a&&(a=0);this.width=a;this.height=b;this.properties=new ia};p["cobbles.markup.MarkupObject"]=rh;rh.__name__="cobbles.markup.MarkupObject";rh.__interfaces__=[Ri];rh.prototype={getWidth:function(){return this.width},getHeight:function(){return this.height},__class__:rh};var Ci=function(){var a=new sh;this.textNodeHandler=a;var b=new ia,c=new qh;null!=L.br?b.setReserved("br",c):b.h.br=c;c=new th;null!=L.object?b.setReserved("object",c):b.h.object=c;null!=L.sa?b.setReserved("sa",
a):b.h.sa=a;a=new uh;null!=L.span?b.setReserved("span",a):b.h.span=a;this.elementHandlers=b};p["cobbles.markup.MarkupParser"]=Ci;Ci.__name__="cobbles.markup.MarkupParser";Ci.prototype={parse:function(a,b){var c=H.parse(b);this.processNode(a,c)},processNode:function(a,b){switch(b.nodeType){case 0:this.processElement(a,b);break;case 1:case 2:this.handleTextNode(a,b);break;case 6:if(b.nodeType!=H.Document&&b.nodeType!=H.Element)throw new n("Bad node type, expected Element or Document but found "+b.nodeType);
for(var c=z.iter(b.children);c.hasNext();){var d=c.next();this.processNode(a,d)}}},processElement:function(a,b){this.handleElementStart(a,b);if(b.nodeType!=H.Document&&b.nodeType!=H.Element)throw new n("Bad node type, expected Element or Document but found "+b.nodeType);for(var c=z.iter(b.children);c.hasNext();){var d=c.next();this.processNode(a,d)}this.handleElementEnd(a,b)},handleTextNode:function(a,b){this.textNodeHandler.handleTextNode(a,b)},handleElementStart:function(a,b){if(b.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+
b.nodeType);var c=b.nodeName,d=this.elementHandlers,c=null!=L[c]?d.getReserved(c):d.h[c];null!=c&&c.handleElementStart(a,b)},handleElementEnd:function(a,b){if(b.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+b.nodeType);var c=b.nodeName,d=this.elementHandlers,c=null!=L[c]?d.getReserved(c):d.h[c];null!=c&&c.handleElementEnd(a,b)},__class__:Ci};var th=function(){};p["cobbles.markup.ObjectHandler"]=th;th.__name__="cobbles.markup.ObjectHandler";th.__interfaces__=[bf];th.prototype=
{handleElementStart:function(a,b){for(var c=new rh,d=b.attributes();d.hasNext();){var e=d.next(),f=b.get(e),g=c.properties;null!=L[e]?g.setReserved(e,f):g.h[e]=f;if("width"==e)switch(g=id.parseFontPoints(f),g._hx_index){case 0:c.width=Math.round(64*g.v)}if("height"==e)switch(e=id.parseFontPoints(f),e._hx_index){case 0:c.height=Math.round(64*e.v)}}a.addInlineObject(c)},handleElementEnd:function(a,b){},processObject:function(a){return a},__class__:th};var id=function(){};p["cobbles.markup.ParseUtil"]=
id;id.__name__="cobbles.markup.ParseUtil";id.parseColor=function(a){if(ga.startsWith(a,"#")&&7==a.length){if(a=r.parseInt("0x"+z.substr(a,1,null)),null!=a)return Tb.Some(a|-16777216)}else if(ga.startsWith(a,"#")&&9==a.length&&(a=r.parseInt("0x"+z.substr(a,1,null)),null!=a))return Tb.Some(a);return Tb.None};id.parseDirection=function(a){switch(a){case "btt":return Tb.Some(Hc.BottomToTop);case "ltr":return Tb.Some(Hc.LeftToRight);case "rtl":return Tb.Some(Hc.RightToLeft);case "ttb":return Tb.Some(Hc.TopToBottom);
default:return Tb.None}};id.parseFontPoints=function(a){parseFloat(z.substr(a,0,-2));return ga.endsWith(a,"pt")&&(a=parseFloat(z.substr(a,0,-2)),!isNaN(a))?Tb.Some(a):Tb.None};var Vi=function(){};p["cobbles.markup.TextNodeHandler"]=Vi;Vi.__name__="cobbles.markup.TextNodeHandler";Vi.prototype={__class__:Vi};var sh=function(){this.isolateLevel=0};p["cobbles.markup.ScriptAutoHandler"]=sh;sh.__name__="cobbles.markup.ScriptAutoHandler";sh.__interfaces__=[bf,Vi];sh.prototype={handleTextNode:function(a,
b){if(b.nodeType==H.Document||b.nodeType==H.Element)throw new n("Bad node type, unexpected "+b.nodeType);var c=a.addText(b.nodeValue);0<this.isolateLevel&&c.detectScript().detectFont()},handleElementStart:function(a,b){this.isolateLevel+=1},handleElementEnd:function(a,b){this.isolateLevel-=1},__class__:sh};var uh=function(){this.level=0;this.fontFaceMap=new ia;this.attributesApplied=[]};p["cobbles.markup.SpanHandler"]=uh;uh.__name__="cobbles.markup.SpanHandler";uh.__interfaces__=[bf];uh.prototype=
{handleElementStart:function(a,b){this.attributesApplied.push([]);for(var c=b.attributes();c.hasNext();){var d=c.next();switch(d){case "color":this.processColor(a,b);break;case "dir":this.processDir(a,b);break;case "font-face":this.processFontFace(a,b);break;case "lang":this.processLang(a,b);break;case "script":this.processScript(a,b);break;case "size":this.processSize(a,b);break;default:ga.startsWith(d,"data-")&&this.processData(a,b,d)}}this.level+=1},handleElementEnd:function(a,b){this.level-=1;
for(var c=0,d=this.attributesApplied[this.level];c<d.length;){var e=d[c];++c;switch(e){case "color":a.popColor();break;case "dir":a.popDirection();break;case "font-face":a.popFont();break;case "lang":a.popLanguage();break;case "script":a.popScript();break;case "size":a.popFontSize();break;default:ga.startsWith(e,"data-")&&a.popData(z.substr(e,5,null))}}this.attributesApplied.pop()},processFontFace:function(a,b){var c=b.get("font-face"),d=this.fontFaceMap,d=null!=L[c]?d.getReserved(c):d.h[c];null!=
d?(a.pushFont(d),this.attributesApplied[this.level].push("font-face")):fg.warning('Unknown font face name "'+c+'"',{fileName:"src/cobbles/markup/SpanHandler.hx",lineNumber:104,className:"cobbles.markup.SpanHandler",methodName:"processFontFace"})},processSize:function(a,b){var c=b.get("size"),d=id.parseFontPoints(c);switch(d._hx_index){case 0:a.pushFontSize(d.v);this.attributesApplied[this.level].push("size");break;case 1:fg.warning('Invalid font size "'+c+'"',{fileName:"src/cobbles/markup/SpanHandler.hx",
lineNumber:116,className:"cobbles.markup.SpanHandler",methodName:"processSize"})}},processColor:function(a,b){var c=b.get("color"),d=id.parseColor(c);switch(d._hx_index){case 0:a.pushColor(d.v);this.attributesApplied[this.level].push("color");break;case 1:fg.warning('Invalid color "'+c+'"',{fileName:"src/cobbles/markup/SpanHandler.hx",lineNumber:128,className:"cobbles.markup.SpanHandler",methodName:"processColor"})}},processDir:function(a,b){var c=b.get("dir"),d=id.parseDirection(c);switch(d._hx_index){case 0:a.pushDirection(d.v);
this.attributesApplied[this.level].push("dir");break;case 1:fg.warning('Invalid direction "'+c+'"',{fileName:"src/cobbles/markup/SpanHandler.hx",lineNumber:140,className:"cobbles.markup.SpanHandler",methodName:"processDir"})}},processScript:function(a,b){a.pushLanguage(b.get("script"));this.attributesApplied[this.level].push("script")},processLang:function(a,b){a.pushLanguage(b.get("lang"));this.attributesApplied[this.level].push("lang")},processData:function(a,b,c){var d=z.substr(c,5,null);a.pushData(d,
b.get(c));this.attributesApplied[this.level].push(c)},__class__:uh};var Hi=function(a){this.textInput=a;this.fontKeyStack=[];this.fontSizeStack=[];this.colorStack=[];this.directionStack=[];this.languageStack=[];this.scriptStack=[];this.dataStackMap=new ia};p["cobbles.markup.TextContext"]=Hi;Hi.__name__="cobbles.markup.TextContext";Hi.prototype={get_fontSize:function(){if(0!=this.fontSizeStack.length){var a=this.fontSizeStack;return a[a.length-1]}return this.textInput.get_fontSize()},addText:function(a){a=
this.textInput.addText(a);var b=a.properties;if(0!=this.fontKeyStack.length){var c=this.fontKeyStack;b.fontKey=c[c.length-1]}0!=this.fontSizeStack.length&&(c=this.fontSizeStack,b.set_fontPointSize(c[c.length-1]));0!=this.colorStack.length&&(c=this.colorStack,b.color=c[c.length-1]);0!=this.directionStack.length&&(c=this.directionStack,b.direction=c[c.length-1]);0!=this.scriptStack.length&&(c=this.scriptStack,b.script=c[c.length-1]);return a},addLineBreak:function(){this.textInput.addLineBreak()},addInlineObject:function(a){this.textInput.addInlineObject(a)},
pushFont:function(a){this.fontKeyStack.push(a)},popFont:function(){this.fontKeyStack.pop()},pushFontSize:function(a){this.fontSizeStack.push(a)},popFontSize:function(){this.fontSizeStack.pop()},pushColor:function(a){this.colorStack.push(a)},popColor:function(){this.colorStack.pop()},pushDirection:function(a){this.directionStack.push(a)},popDirection:function(){this.directionStack.pop()},pushLanguage:function(a){this.languageStack.push(a)},popLanguage:function(){this.languageStack.pop()},pushScript:function(a){this.scriptStack.push(a)},
popScript:function(){this.scriptStack.pop()},pushData:function(a,b){var c=this.dataStackMap,c=null!=L[a]?c.getReserved(a):c.h[a];if(null==c){var c=[],d=this.dataStackMap;null!=L[a]?d.setReserved(a,c):d.h[a]=c}c.push(b)},popData:function(a){var b=this.dataStackMap,b=null!=L[a]?b.getReserved(a):b.h[a];null!=b&&(b.pop(),0==b.length&&this.dataStackMap.remove(a))},__class__:Hi};var Ib=function(){};p["cobbles.native.BytesTools"]=Ib;Ib.__name__="cobbles.native.BytesTools";Ib.toNativeBytes=function(a,b){null==
b&&(b=!0);var c=window[xb.emscriptenModuleName]._malloc(a.length);b&&window[xb.emscriptenModuleName].HEAP8.set(new Uint8Array(a.b.bufferValue),c);return c};Ib.releaseNativeBytes=function(a,b,c){null==c&&(c=!0);c&&(c=window[xb.emscriptenModuleName].HEAP8.slice(b,b+a.length),(new Uint8Array(a.b.bufferValue)).set(c));window[xb.emscriptenModuleName]._free(b)};Ib.toNativeString=function(a){return a};Ib.getEmscriptenModule=function(){return window[xb.emscriptenModuleName]};Ib.emscriptenMalloc=function(a){return window[xb.emscriptenModuleName]._malloc(a)};
Ib.emscriptenFree=function(a){window[xb.emscriptenModuleName]._free(a)};Ib.getEmscriptenHeap8=function(){return window[xb.emscriptenModuleName].HEAP8};var xb=function(){};p["cobbles.native.NativeData"]=xb;xb.__name__="cobbles.native.NativeData";xb.getEncoding=function(){return 1};xb.getCobblesPointer=function(){if(null==xb.cobblesPointer){var a=xb.getEncoding();xb.cobblesPointer=cobbles.init(a);if(null==xb.cobblesPointer)throw new n("Failed to create cobbles struct");}a=cobbles.get_error(xb.cobblesPointer);
if(0!=a)throw new n("Cobbles init error "+a);return xb.cobblesPointer};var Wi=function(){};p["cobbles.render.Bitmap"]=Wi;Wi.__name__="cobbles.render.Bitmap";Wi.prototype={__class__:Wi};var nf=function(a,b){this.width=a;this.height=b};p["cobbles.render.BaseBitmap"]=nf;nf.__name__="cobbles.render.BaseBitmap";nf.__interfaces__=[Wi];nf.prototype={getWidth:function(){return this.width},getHeight:function(){return this.height},drawBytes:function(a,b,c,d,e){for(var f=0;f<d;)for(var g=f++,h=0,k=c;h<k;){var l=
h++,O=a+l,t=b+g;if(!(0>O||O>=this.width||0>t||t>=this.height)){var l=g*c+l,x=this.getValue(O,t),x=x+e.b[l];255<x&&(x=255);this.setValue(O,t,x)}}},drawDebugBox:function(a,b,c,d,e){0<c&&--c;0<d&&--d;this.drawLine(a,b,a+c,b);this.drawLine(a,b+d,a+c,b+d);this.drawLine(a,b,a,b+d);this.drawLine(a+c,b,a+c,b+d);e&&(this.drawLine(a,b,a+c,b+d),this.drawLine(a,b+d,a+c,b))},drawLine:function(a,b,c,d,e){null==e&&(e=255);for(var f=Math.max(Math.abs(c-a),Math.abs(d-b))|0,g=0,h=f+1;g<h;){var k=g++,l=0!=f?k/f:0,k=
Math.round(a+l*(c-a)),l=Math.round(b+l*(d-b));0>k||(k>=this.width||0>l||l>=this.height)||this.setValue(k,l,e)}},getValue:function(a,b){throw new n("Not implemented");},setValue:function(a,b,c){throw new n("Not implemented");},__class__:nf};var lg=function(){this.verticalOrientation=!1;this.resolution=72;this.penPixelX=this.penPixelY=0};p["cobbles.render.BaseRenderer"]=lg;lg.__name__="cobbles.render.BaseRenderer";lg.prototype={render:function(a){this.resolution=a.resolution;switch(a.orientation._hx_index){case 0:this.verticalOrientation=
!1;break;case 1:case 2:this.verticalOrientation=!0}var b=0;for(a=a.lines;b<a.length;){var c=a[b];++b;this.advanceLine(c);this.renderLine(c)}},point64ToPixel:function(a){return Math.round(a/64/72*this.resolution)},advanceLine:function(a){this.penPixelX=this.point64ToPixel(a.x);this.penPixelY=this.point64ToPixel(a.y)},renderLine:function(a){var b=0;for(a=a.items;b<a.length;){var c=a[b];++b;switch(c._hx_index){case 0:this.renderPenRun(c.penRun);break;case 1:c=c.inlineObject,this.renderInlineObject(c),
this.advanceInlineObject(c)}}},renderPenRun:function(a){for(var b=0,c=a.glyphShapes.length;b<c;){var d=b++;this.renderGlyph(a,d);this.advanceGlyph(a,d)}},renderGlyph:function(a,b){},advanceGlyph:function(a,b){var c=a.glyphShapes[b];this.penPixelX+=this.point64ToPixel(c.advanceX);this.penPixelY+=this.point64ToPixel(c.advanceY)},renderInlineObject:function(a){},advanceInlineObject:function(a){this.verticalOrientation?this.penPixelY+=this.point64ToPixel(a.getHeight()):this.penPixelX+=this.point64ToPixel(a.getWidth())},
__class__:lg};var jd=function(a){this._map=a};p["cobbles.render.GlyphMap"]=jd;jd.__name__="cobbles.render.GlyphMap";jd.__interfaces__=[Nc];jd.prototype={get:function(a){return this._map.get(a)},set:function(a,b){this._map.set(a,b)},exists:function(a){return this._map.exists(a)},remove:function(a){return this._map.remove(a)},keys:function(){return this._map.keys()},iterator:function(){return this._map.iterator()},keyValueIterator:function(){return this._map.keyValueIterator()},copy:function(){return this._map.copy()},
toString:function(){return this._map.toString()},__class__:jd};var Oe=function(a){null==a&&(a=1024);this._map=this._cache=new hg(a,new Ne)};p["cobbles.render.GlyphCache"]=Oe;Oe.__name__="cobbles.render.GlyphCache";Oe.__super__=jd;Oe.prototype=J(jd.prototype,{__class__:Oe});var vh=function(a,b){null==b&&(b=1024);Oe.call(this,b);this.fontTable=a};p["cobbles.render.GlyphBitmapCache"]=vh;vh.__name__="cobbles.render.GlyphBitmapCache";vh.__super__=Oe;vh.prototype=J(Oe.prototype,{getGlyphBitmap:function(a,
b,c){var d=new de(a.fontSize<<20|c,a.fontKey<<21|b.glyphID),e=this.get(d);if(null!=e)return e;e=this.fontTable.getFont(a.fontKey);e.setSize(0,a.fontSize,0,c);e=e.getGlyphBitmap(b.glyphID);this.set(d,e);return e},__class__:vh});var mg={};p["cobbles.render._GlyphRenderKey.GlyphRenderKey_Impl_"]=mg;mg.__name__="cobbles.render._GlyphRenderKey.GlyphRenderKey_Impl_";mg._new=function(a,b,c,d){return new de(c<<20|d,a<<21|b)};var wh=function(a,b){nf.call(this,a,b);this.pixels=Za.alloc(a,b,ya.RGBA)};p["cobbles.render.heaps.PixelsBitmap"]=
wh;wh.__name__="cobbles.render.heaps.PixelsBitmap";wh.__super__=nf;wh.prototype=J(nf.prototype,{setValue:function(a,b,c){this.pixels.setPixel(a,b,16777215|c<<24)},getValue:function(a,b){return this.pixels.getPixel(a,b)>>24},__class__:wh});var Xi=function(a,b,c,d,e){this.x=a;this.y=b;this.width=c;this.height=d;this.glyphBitmap=e};p["cobbles.render.heaps.GlyphAtlasInfo"]=Xi;Xi.__name__="cobbles.render.heaps.GlyphAtlasInfo";Xi.prototype={__class__:Xi};var hh=function(a,b,c){null==c&&(c=1024);this.width=
a;this.height=b;this.bitmap=new wh(a,b);this.texture=new V(a,b,null,ya.RGBA);this.glyphMap=0<c?new jd(new Oe(c)):new jd(new Ne)};p["cobbles.render.heaps.TextureAtlas"]=hh;hh.__name__="cobbles.render.heaps.TextureAtlas";hh.prototype={buildTexture:function(){this.bitmap.pixels.clear(0);for(var a=this.getGlyphsAsSortedArray(),b=0,c=0,d=0,e=0;e<a.length;){var f=a[e];++e;var f=f.value,g=f.glyphBitmap;b+f.width>=this.width&&(b=0,c+=d,d=0);this.bitmap.drawBytes(b,c,f.width,f.height,g.data);f.x=b;f.y=c;f.height>
d&&(d=f.height);b+=f.width}this.drawNotdefGlyph();this.texture.uploadPixels(this.bitmap.pixels)},getGlyphsAsSortedArray:function(){for(var a=[],b=this.glyphMap.keyValueIterator();b.hasNext();){var c=b.next();a.push(c)}a.sort(function(a,b){return xa.compare(b.value.height,a.value.height)});return a},drawNotdefGlyph:function(){this.bitmap.drawDebugBox(this.width-16,this.height-16,16,16,!0)},hasGlyph:function(a){return this.glyphMap.exists(a)},addGlyph:function(a,b){this.glyphMap.set(a,new Xi(0,0,b.width,
b.height,b))},getGlyphTile:function(a){var b=Ga.fromTexture(this.texture);a=this.glyphMap.get(a);if(null!=a)return b.setPosition(a.x,a.y),b.setSize(a.width,a.height),new xh(b,a.glyphBitmap.top,a.glyphBitmap.left);b.setPosition(this.width-16,this.height-16);b.setSize(16,16);return new xh(b,16,0)},clear:function(){this.glyphMap=new jd(new Ne)},__class__:hh};var xh=function(a,b,c){this.tile=a;this.bitmapTop=b;this.bitmapLeft=c};p["cobbles.render.heaps.GlyphTile"]=xh;xh.__name__="cobbles.render.heaps.GlyphTile";
xh.prototype={__class__:xh};var ih=function(a,b,c){null==c&&(c=1024);lg.call(this);this.fontTable=a;this.glyphBitmapCache=new vh(a,c);this.textureAtlas=null!=b?b:new hh(512,512)};p["cobbles.render.heaps.TileGroupRenderer"]=ih;ih.__name__="cobbles.render.heaps.TileGroupRenderer";ih.__super__=lg;ih.prototype=J(lg.prototype,{newTileGroup:function(){return new ng(Ga.fromTexture(this.textureAtlas.texture))},renderTileGroup:function(a,b){0<this.gatherRequiredGlyphs(a)&&this.textureAtlas.buildTexture();
b.clear();this.tileGroup=b;this.render(a)},gatherRequiredGlyphs:function(a){for(var b=0,c=0,d=a.lines;c<d.length;){var e=d[c];++c;for(var f=0,e=e.items;f<e.length;){var g=e[f];++f;0==g._hx_index&&(b+=this.addPenRunGlyphsToAtlas(g.penRun,a.resolution))}}return b},addPenRunGlyphsToAtlas:function(a,b){for(var c=0,d=0,e=a.glyphShapes;d<e.length;){var f=e[d];++d;if(0!=f.glyphID){var g=new de(a.fontSize<<20|b,a.fontKey<<21|f.glyphID);this.textureAtlas.hasGlyph(g)||(f=this.glyphBitmapCache.getGlyphBitmap(a,
f,b),this.textureAtlas.addGlyph(g,f),++c)}}return c},renderGlyph:function(a,b){var c=a.glyphShapes[b],d=new de(a.fontSize<<20|this.resolution,a.fontKey<<21|c.glyphID),d=this.textureAtlas.getGlyphTile(d),e=((a.color&16711680)>>16)/255,f=((a.color&65280)>>8)/255,g=(a.color&255)/255,h=this.penPixelX+d.bitmapLeft+this.point64ToPixel(c.offsetX),c=this.penPixelY-d.bitmapTop-this.point64ToPixel(c.offsetY);this.tileGroup.content.add(h,c,e,f,g,1,d.tile)},renderInlineObject:function(a){},__class__:ih});var Yi=
function(a,b,c,d,e,f){this.glyphID=a;this.textIndex=b;this.offsetX=c;this.offsetY=d;this.advanceX=e;this.advanceY=f};p["cobbles.shaping.GlyphShape"]=Yi;Yi.__name__="cobbles.shaping.GlyphShape";Yi.prototype={__class__:Yi};var Zi=function(a){null==a&&(a=128);var b=new Ne;this._cache=new hg(a,b)};p["cobbles.shaping.ShapeCache"]=Zi;Zi.__name__="cobbles.shaping.ShapeCache";Zi.prototype={getShapes:function(a){a=this._cache.get(a.getHash());return null!=a?Tb.Some(a):Tb.None},setShapes:function(a,b){this._cache.set(a.getHash(),
b)},__class__:Zi};var $i=function(){this.direction=Hc.LeftToRight;this.language=this.script="";this.dirty=!0;this.hasher=new gh};p["cobbles.shaping.ShapeCacheKey"]=$i;$i.__name__="cobbles.shaping.ShapeCacheKey";$i.prototype={setFont:function(a){this.font=a;this.dirty=!0},setText:function(a){this.text=a;this.codePoints=null;this.dirty=!0},setCodePoints:function(a){this.codePoints=a;this.text=null;this.dirty=!0},setLanguage:function(a){this.language=a;this.dirty=!0},setScript:function(a){this.script=
a;this.dirty=!0},setDirection:function(a){this.direction=a;this.dirty=!0},getHash:function(){if(!this.dirty)return this.hasher.get();this.hasher.reset();var a=this.font;if(null==a)throw new n(new Rb("Null pointer in .sure() call"));this.hasher.addInt64(a.hashCode64);this.hasher.addInt(a.width);this.hasher.addInt(a.height);this.hasher.addInt(a.horizontalResolution);this.hasher.addInt(a.verticalResolution);null!=this.text&&this.hasher.addString(this.text);if(null!=this.codePoints)for(var a=0,b=this.codePoints;a<
b.length;){var c=b[a];++a;this.hasher.addInt(c)}this.hasher.addString(this.language);this.hasher.addString(this.script);switch(this.direction._hx_index){case 0:this.hasher.addByte(1);break;case 1:this.hasher.addByte(2);break;case 2:this.hasher.addByte(3);break;case 3:this.hasher.addByte(4)}this.dirty=!1;return this.hasher.get()},__class__:$i};var fh=function(){this._isDisposed=!1;var a=cobbles.shaper_init(xb.getCobblesPointer());if(null==a)throw new n(new xe("Failed to init shaper struct"));this.shaperPointer=
a;this.cache=new Zi;this.cacheKey=new $i};p["cobbles.shaping.Shaper"]=fh;fh.__name__="cobbles.shaping.Shaper";fh.__interfaces__=[gg];fh.prototype={dispose:function(){cobbles.shaper_destroy(this.shaperPointer);this._isDisposed=!0},isDisposed:function(){return this._isDisposed},setFont:function(a){cobbles.shaper_set_font(this.shaperPointer,a.fontPointer);this.cacheKey.setFont(a)},setText:function(a){cobbles.shaper_set_text(this.shaperPointer,Ib.toNativeString(a),0);this.cacheKey.setText(a)},setCodePoints:function(a){var b=
ph.toUTF32Bytes(a),c=Ib.toNativeBytes(b);cobbles.shaper_set_text_binary(this.shaperPointer,c,3);Ib.releaseNativeBytes(b,c,!1);this.cacheKey.setCodePoints(a)},setScript:function(a,b){null!=a?(cobbles.shaper_set_script(this.shaperPointer,Ib.toNativeString(a)),this.cacheKey.setScript(a)):this.cacheKey.setScript("");null!=b?(cobbles.shaper_set_language(this.shaperPointer,Ib.toNativeString(b)),this.cacheKey.setLanguage(b)):this.cacheKey.setLanguage("")},guessScript:function(){cobbles.shaper_guess_text_properties(this.shaperPointer)},
setDirection:function(a){var b;switch(a._hx_index){case 0:b="ltr";break;case 1:b="rtl";break;case 2:b="ttb";break;case 3:b="btt"}cobbles.shaper_set_direction(this.shaperPointer,Ib.toNativeString(b));this.cacheKey.setDirection(a)},shape:function(){var a=this.cache.getShapes(this.cacheKey);switch(a._hx_index){case 0:return a.v}cobbles.shaper_shape(this.shaperPointer);for(var a=cobbles.shaper_get_glyph_count(this.shaperPointer),b=new N(new ArrayBuffer(24)),c=Array(a),d=0;d<a;){var e=d++;c[e]=this.getGlyphInfo(this.shaperPointer,
e,b)}this.cache.setShapes(this.cacheKey,c);return c},getGlyphInfo:function(a,b,c){var d=Ib.toNativeBytes(c,!1);cobbles.shaper_get_glyph_info(a,b,d);Ib.releaseNativeBytes(c,d);return new Yi(c.getInt32(0),c.getInt32(4),c.getInt32(8),c.getInt32(12),c.getInt32(16),c.getInt32(20))},__class__:fh};var Ek=function(){};p["cobbles.util.ArrayTools"]=Ek;Ek.__name__="cobbles.util.ArrayTools";Ek.isEmpty=function(a){return 0==a.length};Ek.last=function(a){return a[a.length-1]};var ph=function(){};p["cobbles.util.MoreUnicodeTools"]=
ph;ph.__name__="cobbles.util.MoreUnicodeTools";ph.toCodePoints=function(a){for(var b=[],c=0,d=0,e=a.length;d<e;){var c=d,f=a.charCodeAt(d),d=d+(!(55296<=f&&56319>=f)?1:2),c=ja.codePointAt(a,c);0!=c&&b.push(c)}return b};ph.toUTF32Bytes=function(a){for(var b=new N(new ArrayBuffer(4*a.length+4)),c=0,d=a.length;c<d;){var e=c++;b.setInt32(4*e,a[e])}b.setInt32(4*a.length,0);return b};var ge=M["format.gif.Block"]={__ename__:!0,__constructs__:["BFrame","BExtension","BEOF"],BFrame:(s=function(a){return{_hx_index:0,
frame:a,__enum__:"format.gif.Block",toString:m}},s.__params__=["frame"],s),BExtension:(s=function(a){return{_hx_index:1,extension:a,__enum__:"format.gif.Block",toString:m}},s.__params__=["extension"],s),BEOF:{_hx_index:2,__enum__:"format.gif.Block",toString:m}};ge.__empty_constructs__=[ge.BEOF];var og=M["format.gif.Extension"]={__ename__:!0,__constructs__:["EGraphicControl","EComment","EText","EApplicationExtension","EUnknown"],EGraphicControl:(s=function(a){return{_hx_index:0,gce:a,__enum__:"format.gif.Extension",
toString:m}},s.__params__=["gce"],s),EComment:(s=function(a){return{_hx_index:1,text:a,__enum__:"format.gif.Extension",toString:m}},s.__params__=["text"],s),EText:(s=function(a){return{_hx_index:2,pte:a,__enum__:"format.gif.Extension",toString:m}},s.__params__=["pte"],s),EApplicationExtension:(s=function(a){return{_hx_index:3,ext:a,__enum__:"format.gif.Extension",toString:m}},s.__params__=["ext"],s),EUnknown:(s=function(a,b){return{_hx_index:4,id:a,data:b,__enum__:"format.gif.Extension",toString:m}},
s.__params__=["id","data"],s)};og.__empty_constructs__=[];var cl=M["format.gif.ApplicationExtension"]={__ename__:!0,__constructs__:["AENetscapeLooping","AEUnknown"],AENetscapeLooping:(s=function(a){return{_hx_index:0,loops:a,__enum__:"format.gif.ApplicationExtension",toString:m}},s.__params__=["loops"],s),AEUnknown:(s=function(a,b,c){return{_hx_index:1,name:a,version:b,data:c,__enum__:"format.gif.ApplicationExtension",toString:m}},s.__params__=["name","version","data"],s)};cl.__empty_constructs__=
[];var pg=M["format.gif.Version"]={__ename__:!0,__constructs__:["GIF87a","GIF89a","Unknown"],GIF87a:{_hx_index:0,__enum__:"format.gif.Version",toString:m},GIF89a:{_hx_index:1,__enum__:"format.gif.Version",toString:m},Unknown:(s=function(a){return{_hx_index:2,version:a,__enum__:"format.gif.Version",toString:m}},s.__params__=["version"],s)};pg.__empty_constructs__=[pg.GIF87a,pg.GIF89a];var lc=M["format.gif.DisposalMethod"]={__ename__:!0,__constructs__:["UNSPECIFIED","NO_ACTION","FILL_BACKGROUND","RENDER_PREVIOUS",
"UNDEFINED"],UNSPECIFIED:{_hx_index:0,__enum__:"format.gif.DisposalMethod",toString:m},NO_ACTION:{_hx_index:1,__enum__:"format.gif.DisposalMethod",toString:m},FILL_BACKGROUND:{_hx_index:2,__enum__:"format.gif.DisposalMethod",toString:m},RENDER_PREVIOUS:{_hx_index:3,__enum__:"format.gif.DisposalMethod",toString:m},UNDEFINED:(s=function(a){return{_hx_index:4,index:a,__enum__:"format.gif.DisposalMethod",toString:m}},s.__params__=["index"],s)};lc.__empty_constructs__=[lc.UNSPECIFIED,lc.NO_ACTION,lc.FILL_BACKGROUND,
lc.RENDER_PREVIOUS];var aj=function(a){this.i=a;a.set_bigEndian(!1)};p["format.gif.Reader"]=aj;aj.__name__="format.gif.Reader";aj.prototype={read:function(){if(71!=this.i.readByte())throw new n("Invalid header");if(73!=this.i.readByte())throw new n("Invalid header");if(70!=this.i.readByte())throw new n("Invalid header");var a=this.i.readString(3),b=pg.GIF89a;switch(a){case "87a":b=pg.GIF87a;break;case "89a":b=pg.GIF89a;break;default:b=pg.Unknown(a)}var a=this.i.readUInt16(),c=this.i.readUInt16(),
d=this.i.readByte(),e=this.i.readByte(),f=this.i.readByte(),a={width:a,height:c,hasGlobalColorTable:128==(d&128),colorResolution:(d&112)>>>4,sorted:8==(d&8),globalColorTableSize:2<<(d&7),backgroundColorIndex:e,pixelAspectRatio:0!=f?(f+15)/64:1},c=null;a.hasGlobalColorTable&&(c=this.readColorTable(a.globalColorTableSize));for(d=new uc;!(e=this.readBlock(),d.add(e),e==ge.BEOF););return{version:b,logicalScreenDescriptor:a,globalColorTable:c,blocks:d}},readBlock:function(){switch(this.i.readByte()){case 33:return this.readExtension();
case 44:return this.readImage()}return ge.BEOF},readImage:function(){var a=this.i.readUInt16(),b=this.i.readUInt16(),c=this.i.readUInt16(),d=this.i.readUInt16(),e=this.i.readByte(),f=128==(e&128),g=64==(e&64),h=32==(e&32),e=2<<(e&7),k=null;f&&(k=this.readColorTable(e));return ge.BFrame({x:a,y:b,width:c,height:d,localColorTable:f,interlaced:g,sorted:h,localColorTableSize:e,pixels:this.readPixels(c,d,g),colorTable:k})},readPixels:function(a,b,c){for(var d=this.i,e=a*b,f=new N(new ArrayBuffer(e)),g=
d.readByte(),h=d.readByte()-1,k=d.readByte(),l=8,O=1<<g,t=O+1,x=g+1,Yc=1<<x,nc=Yc-1,m=[],p=0;p<O;){var q=p++;m[q]=[q]}for(var p=[],q=O+2,r,s=0,F=0;s<e;){for(r=F;l<x&&0!=h;)k|=d.readByte()<<l,l+=8,--h,0==h&&(h=d.readByte());F=k&nc;k>>=x;l-=x;if(F==O)p=m.slice(),q=O+2,x=g+1,Yc=1<<x,nc=Yc-1;else{if(F==t)break;if(F<q)r!=O&&(r=p[r].slice(),r.push(p[F][0]),p[q++]=r);else{if(F!=q)throw new n("Invalid LZW code. Excepted: "+q+", got: "+F);r=p[r].slice();r.push(r[0]);p[q++]=r}r=p[F];for(var u=0;u<r.length;){var v=
r[u];++u;f.b[s++]=v}q==Yc&&12>x&&(++x,Yc=1<<x,nc=Yc-1)}}for(;0<h;)d.readByte(),--h,0==h&&(h=d.readByte());for(;s<e;)f.b[s++]=0;c&&(c=new N(new ArrayBuffer(e)),d=this.deinterlace(f,c,8,0,0,a,b),d=this.deinterlace(f,c,8,4,d,a,b),d=this.deinterlace(f,c,4,2,d,a,b),this.deinterlace(f,c,2,1,d,a,b),f=c);return f},deinterlace:function(a,b,c,d,e,f,g){for(;d<g;)b.blit(d*f,a,e,f),e+=f,d+=c;return e},readExtension:function(){var a=this.i.readByte();switch(a){case 1:if(12!=this.i.readByte())throw new n("Incorrect size of Plain Text Extension introducer block.");
for(var a=this.i.readUInt16(),b=this.i.readUInt16(),c=this.i.readUInt16(),d=this.i.readUInt16(),e=this.i.readByte(),f=this.i.readByte(),g=this.i.readByte(),h=this.i.readByte(),k=new td,l=new N(new ArrayBuffer(255)),O=this.i.readByte();0!=O;)this.i.readBytes(l,0,O),k.writeBytes(l,0,O),O=this.i.readByte();k.flush();l=k.getBytes();k.close();return ge.BExtension(og.EText({textGridX:a,textGridY:b,textGridWidth:c,textGridHeight:d,charCellWidth:e,charCellHeight:f,textForegroundColorIndex:g,textBackgroundColorIndex:h,
text:l.toString()}));case 249:if(4!=this.i.readByte())throw new n("Incorrect Graphic Control Extension block size!");a=this.i.readByte();switch((a&28)>>2){case 0:b=lc.UNSPECIFIED;break;case 1:b=lc.NO_ACTION;break;case 2:b=lc.FILL_BACKGROUND;break;case 3:b=lc.RENDER_PREVIOUS;break;default:b=lc.UNDEFINED((a&28)>>2)}a=ge.BExtension(og.EGraphicControl({disposalMethod:b,userInput:2==(a&2),hasTransparentColor:1==(a&1),delay:this.i.readUInt16(),transparentIndex:this.i.readByte()}));this.i.readByte();return a;
case 254:a=new td;b=new N(new ArrayBuffer(255));for(c=this.i.readByte();0!=c;)this.i.readBytes(b,0,c),a.writeBytes(b,0,c),c=this.i.readByte();a.flush();b=a.getBytes();a.close();return ge.BExtension(og.EComment(b.toString()));case 255:return this.readApplicationExtension();default:b=new td;c=new N(new ArrayBuffer(255));for(d=this.i.readByte();0!=d;)this.i.readBytes(c,0,d),b.writeBytes(c,0,d),d=this.i.readByte();b.flush();c=b.getBytes();b.close();return ge.BExtension(og.EUnknown(a,c))}},readApplicationExtension:function(){if(11!=
this.i.readByte())throw new n("Incorrect size of Application Extension introducer block.");for(var a=this.i.readString(8),b=this.i.readString(3),c=new td,d=new N(new ArrayBuffer(255)),e=this.i.readByte();0!=e;)this.i.readBytes(d,0,e),c.writeBytes(d,0,e),e=this.i.readByte();c.flush();d=c.getBytes();c.close();c=d;return"NETSCAPE"==a&&"2.0"==b&&1==c.b[0]?ge.BExtension(og.EApplicationExtension(cl.AENetscapeLooping(c.b[1]|c.b[2]<<8))):ge.BExtension(og.EApplicationExtension(cl.AEUnknown(a,b,c)))},readBlocks:function(){for(var a=
new td,b=new N(new ArrayBuffer(255)),c=this.i.readByte();0!=c;)this.i.readBytes(b,0,c),a.writeBytes(b,0,c),c=this.i.readByte();a.flush();b=a.getBytes();a.close();return b},readColorTable:function(a){a*=3;for(var b=new N(new ArrayBuffer(a)),c=0;c<a;){var d=this.i.readByte();b.b[c]=d;d=this.i.readByte();b.b[c+1]=d;d=this.i.readByte();b.b[c+2]=d;c+=3}return b},__class__:aj};var cc=function(){};p["format.gif.Tools"]=cc;cc.__name__="format.gif.Tools";cc.framesCount=function(a){var b=0;for(a=a.blocks.h;null!=
a;){var c=a.item;a=a.next;0==c._hx_index&&++b}return b};cc.frame=function(a,b){for(var c=0,d=a.blocks.h;null!=d;){var e=d.item,d=d.next;if(0==e._hx_index){e=e.frame;if(c==b)return e;++c}}return null};cc.graphicControl=function(a,b){for(var c=0,d=null,e=a.blocks.h;null!=e;){var f=e.item,e=e.next;switch(f._hx_index){case 0:if(c==b)return d;d=null;++c;break;case 1:0==f.extension._hx_index&&(d=f.extension.gce)}}return null};cc.extractBGRA=function(a,b){for(var c=null,d=0,e=a.blocks.h;null!=e;){var f=
e.item,e=e.next;switch(f._hx_index){case 0:f=f.frame;if(d==b){d=new N(new ArrayBuffer(4*f.width*f.height));e=f.localColorTable?f.colorTable:a.globalColorTable;if(null==e)throw new n("Frame does not have a color table!");for(var c=null!=c&&c.hasTransparentColor?3*c.transparentIndex:-1,g=0,h=0,k=f.pixels.length;h<k;){var l=h++,l=3*f.pixels.b[l];d.b[g]=e.b[l+2];d.b[g+1]=e.b[l+1];d.b[g+2]=e.b[l];d.b[g+3]=c==l?0:255;g+=4}return d}++d;c=null;break;case 1:f=f.extension,0==f._hx_index&&(c=f.gce)}}return null};
cc.extractRGBA=function(a,b){for(var c=null,d=0,e=a.blocks.h;null!=e;){var f=e.item,e=e.next;switch(f._hx_index){case 0:f=f.frame;if(d==b){d=new N(new ArrayBuffer(4*f.width*f.height));e=f.localColorTable?f.colorTable:a.globalColorTable;if(null==e)throw new n("Frame does not have a color table!");for(var c=null!=c&&c.hasTransparentColor?3*c.transparentIndex:-1,g=0,h=0,k=f.pixels.length;h<k;){var l=h++,l=3*f.pixels.b[l];d.b[g]=e.b[l];d.b[g+1]=e.b[l+1];d.b[g+2]=e.b[l+2];d.b[g+3]=c==l?0:255;g+=4}return d}++d;
c=null;break;case 1:f=f.extension,0==f._hx_index&&(c=f.gce)}}return null};cc.extractFullBGRA=function(a,b){for(var c=null,d=0,e=new N(new ArrayBuffer(4*a.logicalScreenDescriptor.width*a.logicalScreenDescriptor.height)),f=a.blocks.h;null!=f;){var g=f.item,f=f.next;switch(g._hx_index){case 0:var g=g.frame,h=g.localColorTable?g.colorTable:a.globalColorTable;if(null==h)throw new n("Frame does not have a color table!");var k=null!=c&&c.hasTransparentColor?3*c.transparentIndex:-1,l=g.pixels,O=0,t=4*(g.y*
a.logicalScreenDescriptor.width+g.x),x=4*(a.logicalScreenDescriptor.width-g.width)+4;switch((d!=b&&null!=c?c.disposalMethod:lc.NO_ACTION)._hx_index){case 2:h=0;for(l=l.length;h<l;)h++,e.b[t]=0,e.b[t+1]=0,e.b[t+2]=0,e.b[t+3]=0,++O==g.width?(O=0,t+=x):t+=4;break;case 3:break;default:for(var c=0,Yc=l.length;c<Yc;){var nc=c++,nc=3*l.b[nc];k!=nc&&(e.b[t]=h.b[nc+2],e.b[t+1]=h.b[nc+1],e.b[t+2]=h.b[nc],e.b[t+3]=255);++O==g.width?(O=0,t+=x):t+=4}}if(d==b)return e;++d;c=null;break;case 1:g=g.extension,0==g._hx_index&&
(c=g.gce)}}return e};cc.extractFullRGBA=function(a,b){for(var c=null,d=0,e=new N(new ArrayBuffer(4*a.logicalScreenDescriptor.width*a.logicalScreenDescriptor.height)),f=a.blocks.h;null!=f;){var g=f.item,f=f.next;switch(g._hx_index){case 0:var g=g.frame,h=g.localColorTable?g.colorTable:a.globalColorTable;if(null==h)throw new n("Frame does not have a color table!");var k=null!=c&&c.hasTransparentColor?3*c.transparentIndex:-1,l=g.pixels,O=0,t=4*(g.y*a.logicalScreenDescriptor.width+g.x),x=4*(a.logicalScreenDescriptor.width-
g.width)+4;switch((d!=b&&null!=c?c.disposalMethod:lc.NO_ACTION)._hx_index){case 2:h=0;for(l=l.length;h<l;)h++,e.b[t]=0,e.b[t+1]=0,e.b[t+2]=0,e.b[t+3]=0,++O==g.width?(O=0,t+=x):t+=4;break;case 3:break;default:for(var c=0,Yc=l.length;c<Yc;){var nc=c++,nc=3*l.b[nc];k!=nc&&(e.b[t]=h.b[nc],e.b[t+1]=h.b[nc+1],e.b[t+2]=h.b[nc+2],e.b[t+3]=255);++O==g.width?(O=0,t+=x):t+=4}}if(d==b)return e;++d;c=null;break;case 1:g=g.extension,0==g._hx_index&&(c=g.gce)}}return e};cc.loopCount=function(a){for(a=a.blocks.h;null!=
a;){var b=a.item;a=a.next;if(1==b._hx_index&&3==b.extension._hx_index&&0==b.extension.ext._hx_index)return b.extension.ext.loops}return 1};cc.log2=function(a){return Math.log(a)/cc.LN2};var Ca=M["format.mp3.SamplingRate"]={__ename__:!0,__constructs__:"SR_8000 SR_11025 SR_12000 SR_22050 SR_24000 SR_32000 SR_44100 SR_48000 SR_Bad".split(" "),SR_8000:{_hx_index:0,__enum__:"format.mp3.SamplingRate",toString:m},SR_11025:{_hx_index:1,__enum__:"format.mp3.SamplingRate",toString:m},SR_12000:{_hx_index:2,
__enum__:"format.mp3.SamplingRate",toString:m},SR_22050:{_hx_index:3,__enum__:"format.mp3.SamplingRate",toString:m},SR_24000:{_hx_index:4,__enum__:"format.mp3.SamplingRate",toString:m},SR_32000:{_hx_index:5,__enum__:"format.mp3.SamplingRate",toString:m},SR_44100:{_hx_index:6,__enum__:"format.mp3.SamplingRate",toString:m},SR_48000:{_hx_index:7,__enum__:"format.mp3.SamplingRate",toString:m},SR_Bad:{_hx_index:8,__enum__:"format.mp3.SamplingRate",toString:m}};Ca.__empty_constructs__=[Ca.SR_8000,Ca.SR_11025,
Ca.SR_12000,Ca.SR_22050,Ca.SR_24000,Ca.SR_32000,Ca.SR_44100,Ca.SR_48000,Ca.SR_Bad];var v=M["format.mp3.Bitrate"]={__ename__:!0,__constructs__:"BR_8 BR_16 BR_24 BR_32 BR_40 BR_48 BR_56 BR_64 BR_80 BR_96 BR_112 BR_128 BR_144 BR_160 BR_176 BR_192 BR_224 BR_256 BR_288 BR_320 BR_352 BR_384 BR_416 BR_448 BR_Free BR_Bad".split(" "),BR_8:{_hx_index:0,__enum__:"format.mp3.Bitrate",toString:m},BR_16:{_hx_index:1,__enum__:"format.mp3.Bitrate",toString:m},BR_24:{_hx_index:2,__enum__:"format.mp3.Bitrate",toString:m},
BR_32:{_hx_index:3,__enum__:"format.mp3.Bitrate",toString:m},BR_40:{_hx_index:4,__enum__:"format.mp3.Bitrate",toString:m},BR_48:{_hx_index:5,__enum__:"format.mp3.Bitrate",toString:m},BR_56:{_hx_index:6,__enum__:"format.mp3.Bitrate",toString:m},BR_64:{_hx_index:7,__enum__:"format.mp3.Bitrate",toString:m},BR_80:{_hx_index:8,__enum__:"format.mp3.Bitrate",toString:m},BR_96:{_hx_index:9,__enum__:"format.mp3.Bitrate",toString:m},BR_112:{_hx_index:10,__enum__:"format.mp3.Bitrate",toString:m},BR_128:{_hx_index:11,
__enum__:"format.mp3.Bitrate",toString:m},BR_144:{_hx_index:12,__enum__:"format.mp3.Bitrate",toString:m},BR_160:{_hx_index:13,__enum__:"format.mp3.Bitrate",toString:m},BR_176:{_hx_index:14,__enum__:"format.mp3.Bitrate",toString:m},BR_192:{_hx_index:15,__enum__:"format.mp3.Bitrate",toString:m},BR_224:{_hx_index:16,__enum__:"format.mp3.Bitrate",toString:m},BR_256:{_hx_index:17,__enum__:"format.mp3.Bitrate",toString:m},BR_288:{_hx_index:18,__enum__:"format.mp3.Bitrate",toString:m},BR_320:{_hx_index:19,
__enum__:"format.mp3.Bitrate",toString:m},BR_352:{_hx_index:20,__enum__:"format.mp3.Bitrate",toString:m},BR_384:{_hx_index:21,__enum__:"format.mp3.Bitrate",toString:m},BR_416:{_hx_index:22,__enum__:"format.mp3.Bitrate",toString:m},BR_448:{_hx_index:23,__enum__:"format.mp3.Bitrate",toString:m},BR_Free:{_hx_index:24,__enum__:"format.mp3.Bitrate",toString:m},BR_Bad:{_hx_index:25,__enum__:"format.mp3.Bitrate",toString:m}};v.__empty_constructs__=[v.BR_8,v.BR_16,v.BR_24,v.BR_32,v.BR_40,v.BR_48,v.BR_56,
v.BR_64,v.BR_80,v.BR_96,v.BR_112,v.BR_128,v.BR_144,v.BR_160,v.BR_176,v.BR_192,v.BR_224,v.BR_256,v.BR_288,v.BR_320,v.BR_352,v.BR_384,v.BR_416,v.BR_448,v.BR_Free,v.BR_Bad];var pa=function(){};p["format.mp3.MPEG"]=pa;pa.__name__="format.mp3.MPEG";pa.enum2Num=function(a){switch(a._hx_index){case 0:return 3;case 1:return 2;case 2:return 0;case 3:return pa.Reserved}};pa.num2Enum=function(a){switch(a){case 0:return he.MPEG_V25;case 2:return he.MPEG_V2;case 3:return he.MPEG_V1;default:return he.MPEG_Reserved}};
pa.srNum2Enum=function(a){switch(a){case 8E3:return Ca.SR_8000;case 11025:return Ca.SR_11025;case 12E3:return Ca.SR_12000;case 22050:return Ca.SR_22050;case 24E3:return Ca.SR_24000;case 32E3:return Ca.SR_32000;case 44100:return Ca.SR_44100;case 48E3:return Ca.SR_48000;default:return Ca.SR_Bad}};pa.srEnum2Num=function(a){switch(a._hx_index){case 0:return 8E3;case 1:return 11025;case 2:return 12E3;case 3:return 22050;case 4:return 24E3;case 5:return 32E3;case 6:return 44100;case 7:return 48E3;case 8:return-1}};
pa.getBitrateIdx=function(a,b,c){b=(b==he.MPEG_V1?pa.V1_Bitrates:pa.V2_Bitrates)[vc.enum2Num(c)];if(b[0]==a)return 0;if(b[1]==a)return 1;if(b[2]==a)return 2;if(b[3]==a)return 3;if(b[4]==a)return 4;if(b[5]==a)return 5;if(b[6]==a)return 6;if(b[7]==a)return 7;if(b[8]==a)return 8;if(b[9]==a)return 9;if(b[10]==a)return 10;if(b[11]==a)return 11;if(b[12]==a)return 12;if(b[13]==a)return 13;if(b[14]==a)return 14;if(b[15]==a)return 15;throw new n("Bitrate index not found");};pa.getSamplingRateIdx=function(a,
b){var c=pa.SamplingRates[pa.enum2Num(b)];if(c[0]==a)return 0;if(c[1]==a)return 1;if(c[2]==a)return 2;if(c[3]==a)return 3;throw new n("Sampling rate index not found");};pa.bitrateEnum2Num=function(a){switch(a._hx_index){case 0:return 8;case 1:return 16;case 2:return 24;case 3:return 32;case 4:return 40;case 5:return 48;case 6:return 56;case 7:return 64;case 8:return 80;case 9:return 96;case 10:return 112;case 11:return 128;case 12:return 144;case 13:return 160;case 14:return 176;case 15:return 192;
case 16:return 224;case 17:return 256;case 18:return 288;case 19:return 320;case 20:return 352;case 21:return 384;case 22:return 416;case 23:return 448;case 24:return 0;case 25:return-1}};pa.bitrateNum2Enum=function(a){switch(a){case 0:return v.BR_Free;case 8:return v.BR_8;case 16:return v.BR_16;case 24:return v.BR_24;case 32:return v.BR_32;case 40:return v.BR_40;case 48:return v.BR_48;case 56:return v.BR_56;case 64:return v.BR_64;case 80:return v.BR_80;case 96:return v.BR_96;case 112:return v.BR_112;
case 128:return v.BR_128;case 144:return v.BR_144;case 160:return v.BR_160;case 176:return v.BR_176;case 192:return v.BR_192;case 224:return v.BR_224;case 256:return v.BR_256;case 288:return v.BR_288;case 320:return v.BR_320;case 352:return v.BR_352;case 384:return v.BR_384;case 416:return v.BR_416;case 448:return v.BR_448;default:return v.BR_Bad}};var vc=function(){};p["format.mp3.CLayer"]=vc;vc.__name__="format.mp3.CLayer";vc.enum2Num=function(a){switch(a._hx_index){case 0:return vc.LReserved;case 1:return vc.LLayer3;
case 2:return vc.LLayer2;case 3:return vc.LLayer1}};vc.num2Enum=function(a){switch(a){case 1:return ze.Layer3;case 2:return ze.Layer2;case 3:return ze.Layer1;default:return ze.LayerReserved}};var Pe=function(){};p["format.mp3.CChannelMode"]=Pe;Pe.__name__="format.mp3.CChannelMode";Pe.enum2Num=function(a){switch(a._hx_index){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3}};Pe.num2Enum=function(a){switch(a){case 0:return Ae.Stereo;case 1:return Ae.JointStereo;case 2:return Ae.DualChannel;
case 3:return Ae.Mono;default:throw new n("assert");}};var Qe=function(){};p["format.mp3.CEmphasis"]=Qe;Qe.__name__="format.mp3.CEmphasis";Qe.enum2Num=function(a){switch(a._hx_index){case 0:return 0;case 1:return 1;case 2:return 3;case 3:return 2}};Qe.num2Enum=function(a){switch(a){case 0:return Re.NoEmphasis;case 1:return Re.Ms50_15;case 2:return Re.InvalidEmphasis;case 3:return Re.CCIT_J17;default:throw new n("assert");}};var he=M["format.mp3.MPEGVersion"]={__ename__:!0,__constructs__:["MPEG_V1",
"MPEG_V2","MPEG_V25","MPEG_Reserved"],MPEG_V1:{_hx_index:0,__enum__:"format.mp3.MPEGVersion",toString:m},MPEG_V2:{_hx_index:1,__enum__:"format.mp3.MPEGVersion",toString:m},MPEG_V25:{_hx_index:2,__enum__:"format.mp3.MPEGVersion",toString:m},MPEG_Reserved:{_hx_index:3,__enum__:"format.mp3.MPEGVersion",toString:m}};he.__empty_constructs__=[he.MPEG_V1,he.MPEG_V2,he.MPEG_V25,he.MPEG_Reserved];var ze=M["format.mp3.Layer"]={__ename__:!0,__constructs__:["LayerReserved","Layer3","Layer2","Layer1"],LayerReserved:{_hx_index:0,
__enum__:"format.mp3.Layer",toString:m},Layer3:{_hx_index:1,__enum__:"format.mp3.Layer",toString:m},Layer2:{_hx_index:2,__enum__:"format.mp3.Layer",toString:m},Layer1:{_hx_index:3,__enum__:"format.mp3.Layer",toString:m}};ze.__empty_constructs__=[ze.LayerReserved,ze.Layer3,ze.Layer2,ze.Layer1];var Ae=M["format.mp3.ChannelMode"]={__ename__:!0,__constructs__:["Stereo","JointStereo","DualChannel","Mono"],Stereo:{_hx_index:0,__enum__:"format.mp3.ChannelMode",toString:m},JointStereo:{_hx_index:1,__enum__:"format.mp3.ChannelMode",
toString:m},DualChannel:{_hx_index:2,__enum__:"format.mp3.ChannelMode",toString:m},Mono:{_hx_index:3,__enum__:"format.mp3.ChannelMode",toString:m}};Ae.__empty_constructs__=[Ae.Stereo,Ae.JointStereo,Ae.DualChannel,Ae.Mono];var Re=M["format.mp3.Emphasis"]={__ename__:!0,__constructs__:["NoEmphasis","Ms50_15","CCIT_J17","InvalidEmphasis"],NoEmphasis:{_hx_index:0,__enum__:"format.mp3.Emphasis",toString:m},Ms50_15:{_hx_index:1,__enum__:"format.mp3.Emphasis",toString:m},CCIT_J17:{_hx_index:2,__enum__:"format.mp3.Emphasis",
toString:m},InvalidEmphasis:{_hx_index:3,__enum__:"format.mp3.Emphasis",toString:m}};Re.__empty_constructs__=[Re.NoEmphasis,Re.Ms50_15,Re.CCIT_J17,Re.InvalidEmphasis];var yh=M["format.mp3.FrameType"]={__ename__:!0,__constructs__:["FT_MP3","FT_NONE"],FT_MP3:{_hx_index:0,__enum__:"format.mp3.FrameType",toString:m},FT_NONE:{_hx_index:1,__enum__:"format.mp3.FrameType",toString:m}};yh.__empty_constructs__=[yh.FT_MP3,yh.FT_NONE];var cj=function(a){this.i=a;a.set_bigEndian(!0);this.bits=new bj(a);this.sampleSize=
this.samples=0;this.any_read=!1};p["format.mp3.Reader"]=cj;cj.__name__="format.mp3.Reader";cj.prototype={skipID3v2:function(){this.id3v2_version=this.i.readUInt16();this.id3v2_flags=this.i.readByte();var a=this.i.readByte()&127,a=a<<7|this.i.readByte()&127,a=a<<7|this.i.readByte()&127,a=a<<7|this.i.readByte()&127;this.id3v2_data=this.i.read(a)},seekFrame:function(){try{for(var a;;)if(a=this.i.readByte(),this.any_read||(this.any_read=!0,73==a&&(a=this.i.readByte(),68==a&&(a=this.i.readByte(),51==a&&
this.skipID3v2()))),255==a&&(this.bits.nbits=0,a=this.bits.readBits(3),7==a))return yh.FT_MP3}catch(b){if((b instanceof n?b.val:b)instanceof ie)return yh.FT_NONE;throw b;}},readFrames:function(){for(var a=[],b;;){b=this.seekFrame();if(b==yh.FT_NONE)break;switch(b._hx_index){case 0:b=this.readFrame(),null!=b&&a.push(b)}}return a},readFrameHeader:function(){var a=this.bits.readBits(2),b=this.bits.readBits(2),c=!this.bits.readBit();if(a==pa.Reserved||b==vc.LReserved)return null;var d=this.bits.readBits(4),
d=Ub.getBitrate(a,b,d),e=this.bits.readBits(2),e=Ub.getSamplingRate(a,e),f=this.bits.readBit(),g=this.bits.readBit();if(d==v.BR_Bad||d==v.BR_Free||e==Ca.SR_Bad)return null;var h=this.bits.readBits(2),k=this.bits.readBit(),l=this.bits.readBit(),O=this.bits.readBit(),t=this.bits.readBit(),x=this.bits.readBits(2),n=0;c&&(n=this.i.readUInt16());return{version:pa.num2Enum(a),layer:vc.num2Enum(b),hasCrc:c,crc16:n,bitrate:d,samplingRate:e,isPadded:f,privateBit:g,channelMode:Pe.num2Enum(h),isIntensityStereo:k,
isMSStereo:l,isCopyrighted:O,isOriginal:t,emphasis:Qe.num2Enum(x)}},readFrame:function(){var a=this.readFrameHeader();if(null==a||Ub.isInvalidFrameHeader(a))return null;try{var b=this.i.read(Ub.getSampleDataSizeHdr(a));this.samples+=Ub.getSampleCountHdr(a);this.sampleSize+=b.length;return{header:a,data:b}}catch(c){if((c instanceof n?c.val:c)instanceof ie)return null;throw c;}},read:function(){return{frames:this.readFrames(),sampleCount:this.samples,sampleSize:this.sampleSize,id3v2:null==this.id3v2_data?
null:{versionBytes:this.id3v2_version,flagByte:this.id3v2_flags,data:this.id3v2_data}}},__class__:cj};var Ub=function(){};p["format.mp3.Tools"]=Ub;Ub.__name__="format.mp3.Tools";Ub.getBitrate=function(a,b,c){return a==pa.Reserved||b==vc.LReserved?v.BR_Bad:(3==a?pa.V1_Bitrates:pa.V2_Bitrates)[b][c]};Ub.getSamplingRate=function(a,b){return pa.SamplingRates[a][b]};Ub.isInvalidFrameHeader=function(a){return a.version==he.MPEG_Reserved||a.layer==ze.LayerReserved||a.bitrate==v.BR_Bad||a.bitrate==v.BR_Free?
!0:a.samplingRate==Ca.SR_Bad};Ub.getSampleDataSize=function(a,b,c,d,e){return(1E3*(3==a?144:72)*b/c|0)+(d?1:0)-(e?2:0)-4};Ub.getSampleDataSizeHdr=function(a){return Ub.getSampleDataSize(pa.enum2Num(a.version),pa.bitrateEnum2Num(a.bitrate),pa.srEnum2Num(a.samplingRate),a.isPadded,a.hasCrc)};Ub.getSampleCount=function(a){return 3==a?1152:576};Ub.getSampleCountHdr=function(a){return Ub.getSampleCount(pa.enum2Num(a.version))};Ub.getFrameInfo=function(a){return r.string(a.header.version)+", "+r.string(a.header.layer)+
", "+r.string(a.header.channelMode)+", "+r.string(a.header.samplingRate)+" Hz, "+r.string(a.header.bitrate)+" kbps Emphasis: "+r.string(a.header.emphasis)+", "+(a.header.hasCrc?"(CRC) ":"")+(a.header.isPadded?"(Padded) ":"")+(a.header.isIntensityStereo?"(Intensity Stereo) ":"")+(a.header.isMSStereo?"(MS Stereo) ":"")+(a.header.isCopyrighted?"(Copyrighted) ":"")+(a.header.isOriginal?"(Original) ":"")};var Jc=M["format.png.Color"]={__ename__:!0,__constructs__:["ColGrey","ColTrue","ColIndexed"],ColGrey:(s=
function(a){return{_hx_index:0,alpha:a,__enum__:"format.png.Color",toString:m}},s.__params__=["alpha"],s),ColTrue:(s=function(a){return{_hx_index:1,alpha:a,__enum__:"format.png.Color",toString:m}},s.__params__=["alpha"],s),ColIndexed:{_hx_index:2,__enum__:"format.png.Color",toString:m}};Jc.__empty_constructs__=[Jc.ColIndexed];var Ka=M["format.png.Chunk"]={__ename__:!0,__constructs__:["CEnd","CHeader","CData","CPalette","CUnknown"],CEnd:{_hx_index:0,__enum__:"format.png.Chunk",toString:m},CHeader:(s=
function(a){return{_hx_index:1,h:a,__enum__:"format.png.Chunk",toString:m}},s.__params__=["h"],s),CData:(s=function(a){return{_hx_index:2,b:a,__enum__:"format.png.Chunk",toString:m}},s.__params__=["b"],s),CPalette:(s=function(a){return{_hx_index:3,b:a,__enum__:"format.png.Chunk",toString:m}},s.__params__=["b"],s),CUnknown:(s=function(a,b){return{_hx_index:4,id:a,data:b,__enum__:"format.png.Chunk",toString:m}},s.__params__=["id","data"],s)};Ka.__empty_constructs__=[Ka.CEnd];var dj=function(a){this.i=
a;a.set_bigEndian(!0);this.checkCRC=!0};p["format.png.Reader"]=dj;dj.__name__="format.png.Reader";dj.prototype={read:function(){if(137!=this.i.readByte())throw new n("Invalid header");if(80!=this.i.readByte())throw new n("Invalid header");if(78!=this.i.readByte())throw new n("Invalid header");if(71!=this.i.readByte())throw new n("Invalid header");if(13!=this.i.readByte())throw new n("Invalid header");if(10!=this.i.readByte())throw new n("Invalid header");if(26!=this.i.readByte())throw new n("Invalid header");
if(10!=this.i.readByte())throw new n("Invalid header");for(var a=new uc;;){var b=this.readChunk();a.add(b);if(b==Ka.CEnd)break}return a},readHeader:function(a){a.set_bigEndian(!0);var b=a.readInt32(),c=a.readInt32(),d=a.readByte(),e=a.readByte();switch(e){case 0:e=Jc.ColGrey(!1);break;case 2:e=Jc.ColTrue(!1);break;case 3:e=Jc.ColIndexed;break;case 4:e=Jc.ColGrey(!0);break;case 6:e=Jc.ColTrue(!0);break;default:throw new n("Unknown color model "+e+":"+d);}var f=a.readByte(),g=a.readByte();if(0!=f||
0!=g)throw new n("Invalid header");a=a.readByte();if(0!=a&&1!=a)throw new n("Invalid header");return{width:b,height:c,colbits:d,color:e,interlaced:1==a}},readChunk:function(){var a=this.i.readInt32(),b=this.i.readString(4),a=this.i.read(a),c=this.i.readInt32();if(this.checkCRC){for(var d=-1,e=(d^z.cca(b,0))&255,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,d=d>>>
8^e>>>1^-(e&1)&-306674912,e=(d^z.cca(b,1))&255,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,d=d>>>8^e>>>1^-(e&1)&-306674912,e=(d^z.cca(b,2))&255,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,d=d>>>8^e>>>1^-(e&1)&-306674912,e=(d^
z.cca(b,3))&255,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,e=e>>>1^-(e&1)&-306674912,d=d>>>8^e>>>1^-(e&1)&-306674912,e=a.b.bufferValue,f=0,g=a.length;f<g;)var h=f++,h=(d^e.bytes[h])&255,h=h>>>1^-(h&1)&-306674912,h=h>>>1^-(h&1)&-306674912,h=h>>>1^-(h&1)&-306674912,h=h>>>1^-(h&1)&-306674912,h=h>>>1^-(h&1)&-306674912,h=h>>>1^-(h&1)&-306674912,h=h>>>1^-(h&1)&-306674912,h=h>>>1^-(h&1)&-306674912,
d=d>>>8^h;if((d^-1)!=c)throw new n("CRC check failure");}switch(b){case "IDAT":return Ka.CData(a);case "IEND":return Ka.CEnd;case "IHDR":return Ka.CHeader(this.readHeader(new Ob(a)));case "PLTE":return Ka.CPalette(a);default:return Ka.CUnknown(b,a)}},__class__:dj};var dc=function(){};p["format.png.Tools"]=dc;dc.__name__="format.png.Tools";dc.getHeader=function(a){for(a=a.h;null!=a;){var b=a.item;a=a.next;if(1==b._hx_index)return b.h}throw new n("Header not found");};dc.getPalette=function(a){for(a=
a.h;null!=a;){var b=a.item;a=a.next;if(3==b._hx_index)return b.b}return null};dc.filter=function(a,b,c,d,e,f,g){null==g&&(g=4);var h=0==c?0:a.b[f-d];a=0==b||0==c?0:a.b[f-d-g];d=e+h-a;b=d-e;0>b&&(b=-b);c=d-h;0>c&&(c=-c);d-=a;0>d&&(d=-d);return b<=c&&b<=d?e:c<=d?h:a};dc.reverseBytes=function(a){for(var b=0,c=0,d=a.length>>2;c<d;){c++;var e=a.b[b],f=a.b[b+1],g=a.b[b+2],h=a.b[b+3];a.b[b++]=h;a.b[b++]=g;a.b[b++]=f;a.b[b++]=e}};dc.extractGrey=function(a){var b=dc.getHeader(a),c=new N(new ArrayBuffer(b.width*
b.height)),d=null,e=null;for(a=a.h;null!=a;){var f=a.item;a=a.next;2==f._hx_index&&(f=f.b,null!=e?e.add(f):null==d?d=f:(e=new je,e.add(d),e.add(f),d=null))}null!=e&&(d=e.getBytes());if(null==d)throw new n("Data not found");d=ej.run(d);a=e=0;f=b.color;if(0==f._hx_index){var g=f.alpha;if(8!=b.colbits)throw new n("Unsupported color mode");f=b.width;if(d.length<b.height*((g?2:1)*f+1))throw new n("Not enough data");for(var g=g?2:1,h=0,b=b.height;h<b;){var k=h++,l=d.b[e++];switch(l){case 0:k=0;for(l=f;k<
l;){k++;var O=d.b[e],e=e+g;c.b[a++]=O}break;case 1:l=k=0;for(O=f;l<O;)l++,k+=d.b[e],e+=g,c.b[a++]=k;break;case 2:k=0==k?0:f;l=0;for(O=f;l<O;){l++;var t=d.b[e]+c.b[a-k],e=e+g;c.b[a++]=t}break;case 3:l=0;k=0==k?0:f;O=0;for(t=f;O<t;)O++,l=d.b[e]+(l+c.b[a-k]>>1)&255,e+=g,c.b[a++]=l;break;case 4:for(var l=f,t=O=0,x=f;t<x;){var Yc=t++,nc=0==k?0:c.b[a-l],Yc=0==Yc||0==k?0:c.b[a-l-1],m=O+nc-Yc,p=m-O;0>p&&(p=-p);var q=m-nc;0>q&&(q=-q);m-=Yc;0>m&&(m=-m);O=(p<=q&&p<=m?O:q<=m?nc:Yc)+d.b[e]&255;e+=g;c.b[a++]=O}break;
default:throw new n("Invalid filter "+l);}}}else throw new n("Unsupported color mode");return c};dc.extract32=function(a,b,c){for(var d=dc.getHeader(a),e=null==b?new N(new ArrayBuffer(4*d.width*d.height)):b,f=null,g=null,h=a.h;null!=h;){var k=h.item,h=h.next,l=k;if(2==l._hx_index){var O=l.b;null!=g?g.add(O):null==f?f=O:(g=new je,g.add(f),g.add(O),f=null)}}null!=g&&(f=g.getBytes());if(null==f)throw new n("Data not found");var f=ej.run(f),t=0,x=0,Yc=0;c&&(Yc=8*-d.width,x=(d.height-1)*4*d.width);var nc=
c?-1:1,m=d.color;switch(m._hx_index){case 0:var p=m.alpha;if(8!=d.colbits)throw new n("Unsupported color mode");var q=d.width;if(f.length<d.height*((p?2:1)*q+1))throw new n("Not enough data");var r=-1;if(!p)for(var s=a.h;null!=s;){var F=s.item,s=s.next,u=F;if(4==u._hx_index&&"tRNS"==u.id){var v=u.data;2<=v.length&&(r=v.b[1]);break}}for(var y=0,z=d.height;y<z;){var w=y++,D=f.b[t++];switch(D){case 0:if(p)for(var B=0,H=q;B<H;){B++;var G=f.b[t++];e.b[x++]=G;e.b[x++]=G;e.b[x++]=G;e.b[x++]=f.b[t++]}else for(var J=
0,L=q;J<L;){J++;var K=f.b[t++];e.b[x++]=K;e.b[x++]=K;e.b[x++]=K;e.b[x++]=K==r?0:255}break;case 1:var I=0,M=0;if(p)for(var U=0,P=q;U<P;)U++,I+=f.b[t++],e.b[x++]=I,e.b[x++]=I,e.b[x++]=I,M+=f.b[t++],e.b[x++]=M;else for(var R=0,T=q;R<T;)R++,I+=f.b[t++],e.b[x++]=I,e.b[x++]=I,e.b[x++]=I,e.b[x++]=I==r?0:255;break;case 2:var V=0==w?0:4*q*nc;if(p)for(var Q=0,W=q;Q<W;){Q++;var A=f.b[t++]+e.b[x-V];e.b[x++]=A;e.b[x++]=A;e.b[x++]=A;e.b[x++]=f.b[t++]+e.b[x-V]}else for(var da=0,S=q;da<S;){da++;var $=f.b[t++]+e.b[x-
V];e.b[x++]=$;e.b[x++]=$;e.b[x++]=$;e.b[x++]=$==r?0:255}break;case 3:var ea=0,la=0,Z=0==w?0:4*q*nc;if(p)for(var ga=0,na=q;ga<na;)ga++,ea=f.b[t++]+(ea+e.b[x-Z]>>1)&255,e.b[x++]=ea,e.b[x++]=ea,e.b[x++]=ea,la=f.b[t++]+(la+e.b[x-Z]>>1)&255,e.b[x++]=la;else for(var Y=0,ia=q;Y<ia;)Y++,ea=f.b[t++]+(ea+e.b[x-Z]>>1)&255,e.b[x++]=ea,e.b[x++]=ea,e.b[x++]=ea,e.b[x++]=ea==r?0:255;break;case 4:var ic=4*q*nc,Dd=0,aa=0;if(p)for(var nl=0,X=q;nl<X;){var Aa=nl++,Vc=0==w?0:e.b[x-ic],fa=0==Aa||0==w?0:e.b[x-ic-4],oa=Dd+
Vc-fa,fj=oa-Dd;0>fj&&(fj=-fj);var ma=oa-Vc;0>ma&&(ma=-ma);var qa=oa-fa;0>qa&&(qa=-qa);var rl=t++,Dd=(fj<=ma&&fj<=qa?Dd:ma<=qa?Vc:fa)+f.b[rl]&255;e.b[x++]=Dd;e.b[x++]=Dd;e.b[x++]=Dd;var sa=0==w?0:e.b[x-ic],lf=0==Aa||0==w?0:e.b[x-ic-4],mf=aa+sa-lf,Zc=mf-aa;0>Zc&&(Zc=-Zc);var ca=mf-sa;0>ca&&(ca=-ca);var Ia=mf-lf;0>Ia&&(Ia=-Ia);var Ba=t++,aa=(Zc<=ca&&Zc<=Ia?aa:ca<=Ia?sa:lf)+f.b[Ba]&255;e.b[x++]=aa}else for(var zh=0,Fk=q;zh<Fk;){var Ca=zh++,za=0==w?0:e.b[x-ic],ud=0==Ca||0==w?0:e.b[x-ic-4],ha=Dd+za-ud,
La=ha-Dd;0>La&&(La=-La);var Ma=ha-za;0>Ma&&(Ma=-Ma);var ja=ha-ud;0>ja&&(ja=-ja);var Gk=t++,Dd=(La<=Ma&&La<=ja?Dd:Ma<=ja?za:ud)+f.b[Gk]&255;e.b[x++]=Dd;e.b[x++]=Dd;e.b[x++]=Dd;e.b[x++]=Dd==r?0:255}break;default:throw new n("Invalid filter "+D);}x+=Yc}break;case 1:var ta=m.alpha;if(8!=d.colbits)throw new n("Unsupported color mode");var gb=d.width;if(f.length<d.height*((ta?4:3)*gb+1))throw new n("Not enough data");var Se=-1,Na=-1,ib=-1;if(!ta)for(var qg=a.h;null!=qg;){var Sa=qg.item,qg=qg.next,Ah=Sa;
if(4==Ah._hx_index&&"tRNS"==Ah.id){var ya=Ah.data;6<=ya.length&&(Se=ya.b[1],Na=ya.b[3],ib=ya.b[5]);break}}for(var va=0,wa=0,Oa=0,Qa=0,xa=0,Vb=d.height;xa<Vb;){var Ta=xa++,ub=f.b[t++];switch(ub){case 0:if(ta)for(var pa=0,sb=gb;pa<sb;)pa++,e.b[x++]=f.b[t+2],e.b[x++]=f.b[t+1],e.b[x++]=f.b[t],e.b[x++]=f.b[t+3],t+=4;else for(var Ea=0,yb=gb;Ea<yb;)Ea++,Oa=f.b[t+2],e.b[x++]=Oa,wa=f.b[t+1],e.b[x++]=wa,va=f.b[t],e.b[x++]=va,e.b[x++]=va==Se&&wa==Na&&Oa==ib?0:255,t+=3;break;case 1:va=wa=Oa=Qa=0;if(ta)for(var Fa=
0,Lb=gb;Fa<Lb;)Fa++,Oa+=f.b[t+2],e.b[x++]=Oa,wa+=f.b[t+1],e.b[x++]=wa,va+=f.b[t],e.b[x++]=va,Qa+=f.b[t+3],e.b[x++]=Qa,t+=4;else for(var ka=0,Sd=gb;ka<Sd;)ka++,Oa+=f.b[t+2],e.b[x++]=Oa,wa+=f.b[t+1],e.b[x++]=wa,va+=f.b[t],e.b[x++]=va,e.b[x++]=va==Se&&wa==Na&&Oa==ib?0:255,t+=3;break;case 2:var ke=0==Ta?0:4*gb*nc;if(ta)for(var ra=0,Za=gb;ra<Za;)ra++,e.b[x]=f.b[t+2]+e.b[x-ke],++x,e.b[x]=f.b[t+1]+e.b[x-ke],++x,e.b[x]=f.b[t]+e.b[x-ke],++x,e.b[x]=f.b[t+3]+e.b[x-ke],++x,t+=4;else for(var Ga=0,Ra=gb;Ga<Ra;)Ga++,
Oa=f.b[t+2]+e.b[x-ke],e.b[x]=Oa,++x,wa=f.b[t+1]+e.b[x-ke],e.b[x]=wa,++x,va=f.b[t]+e.b[x-ke],e.b[x]=va,++x,e.b[x++]=va==Se&&wa==Na&&Oa==ib?0:255,t+=3;break;case 3:var va=wa=Oa=Qa=0,ua=0==Ta?0:4*gb*nc;if(ta)for(var Ed=0,Td=gb;Ed<Td;)Ed++,Oa=f.b[t+2]+(Oa+e.b[x-ua]>>1)&255,e.b[x++]=Oa,wa=f.b[t+1]+(wa+e.b[x-ua]>>1)&255,e.b[x++]=wa,va=f.b[t]+(va+e.b[x-ua]>>1)&255,e.b[x++]=va,Qa=f.b[t+3]+(Qa+e.b[x-ua]>>1)&255,e.b[x++]=Qa,t+=4;else for(var Ja=0,vd=gb;Ja<vd;)Ja++,Oa=f.b[t+2]+(Oa+e.b[x-ua]>>1)&255,e.b[x++]=
Oa,wa=f.b[t+1]+(wa+e.b[x-ua]>>1)&255,e.b[x++]=wa,va=f.b[t]+(va+e.b[x-ua]>>1)&255,e.b[x++]=va,e.b[x++]=va==Se&&wa==Na&&Oa==ib?0:255,t+=3;break;case 4:var zb=4*gb*nc,va=wa=Oa=Qa=0;if(ta)for(var Wa=0,Ib=gb;Wa<Ib;){var eb=Wa++,Ha=0==Ta?0:e.b[x-zb],dl=0==eb||0==Ta?0:e.b[x-zb-4],bb=Oa+Ha-dl,Xa=bb-Oa;0>Xa&&(Xa=-Xa);var $a=bb-Ha;0>$a&&($a=-$a);var gj=bb-dl;0>gj&&(gj=-gj);Oa=(Xa<=$a&&Xa<=gj?Oa:$a<=gj?Ha:dl)+f.b[t+2]&255;e.b[x++]=Oa;var Eb=0==Ta?0:e.b[x-zb],xb=0==eb||0==Ta?0:e.b[x-zb-4],Ka=wa+Eb-xb,ec=Ka-wa;
0>ec&&(ec=-ec);var Da=Ka-Eb;0>Da&&(Da=-Da);var Ya=Ka-xb;0>Ya&&(Ya=-Ya);wa=(ec<=Da&&ec<=Ya?wa:Da<=Ya?Eb:xb)+f.b[t+1]&255;e.b[x++]=wa;var Pa=0==Ta?0:e.b[x-zb],Zb=0==eb||0==Ta?0:e.b[x-zb-4],fb=va+Pa-Zb,Db=fb-va;0>Db&&(Db=-Db);var wb=fb-Pa;0>wb&&(wb=-wb);var Gb=fb-Zb;0>Gb&&(Gb=-Gb);va=(Db<=wb&&Db<=Gb?va:wb<=Gb?Pa:Zb)+f.b[t]&255;e.b[x++]=va;var cb=0==Ta?0:e.b[x-zb],mb=0==eb||0==Ta?0:e.b[x-zb-4],Fb=Qa+cb-mb,Sb=Fb-Qa;0>Sb&&(Sb=-Sb);var Cb=Fb-cb;0>Cb&&(Cb=-Cb);var jb=Fb-mb;0>jb&&(jb=-jb);Qa=(Sb<=Cb&&Sb<=
jb?Qa:Cb<=jb?cb:mb)+f.b[t+3]&255;e.b[x++]=Qa;t+=4}else for(var Ua=0,Ld=gb;Ua<Ld;){var vb=Ua++,Pb=0==Ta?0:e.b[x-zb],wc=0==vb||0==Ta?0:e.b[x-zb-4],db=Oa+Pb-wc,lb=db-Oa;0>lb&&(lb=-lb);var Fd=db-Pb;0>Fd&&(Fd=-Fd);var Rb=db-wc;0>Rb&&(Rb=-Rb);Oa=(lb<=Fd&&lb<=Rb?Oa:Fd<=Rb?Pb:wc)+f.b[t+2]&255;e.b[x++]=Oa;var Bb=0==Ta?0:e.b[x-zb],ab=0==vb||0==Ta?0:e.b[x-zb-4],Wb=wa+Bb-ab,tb=Wb-wa;0>tb&&(tb=-tb);var Qb=Wb-Bb;0>Qb&&(Qb=-Qb);var nb=Wb-ab;0>nb&&(nb=-nb);wa=(tb<=Qb&&tb<=nb?wa:Qb<=nb?Bb:ab)+f.b[t+1]&255;e.b[x++]=
wa;var Mb=0==Ta?0:e.b[x-zb],Ab=0==vb||0==Ta?0:e.b[x-zb-4],Jb=va+Mb-Ab,Hb=Jb-va;0>Hb&&(Hb=-Hb);var Kb=Jb-Mb;0>Kb&&(Kb=-Kb);var Va=Jb-Ab;0>Va&&(Va=-Va);va=(Hb<=Kb&&Hb<=Va?va:Kb<=Va?Mb:Ab)+f.b[t]&255;e.b[x++]=va;e.b[x++]=va==Se&&wa==Na&&Oa==ib?0:255;t+=3}break;default:throw new n("Invalid filter "+ub);}x+=Yc}break;case 2:var pc=dc.getPalette(a);if(null==pc)throw new n("PNG Palette is missing");for(var xc=null,Md=a.h;null!=Md;){var Wc=Md.item,Md=Md.next,rc=Wc;if(4==rc._hx_index&&"tRNS"==rc.id){xc=rc.data;
break}}if(null!=xc&&xc.length<1<<d.colbits){var Ub=new N(new ArrayBuffer(1<<d.colbits));Ub.blit(0,xc,0,xc.length);Ub.fill(xc.length,Ub.length-xc.length,255);xc=Ub}var Gd=d.width,qc=Math.ceil(Gd*d.colbits/8)+1;if(f.length<d.height*qc)throw new n("Not enough data");for(var Xb=d.width*d.colbits>>3,Rc=0,Mc=d.height;Rc<Mc;){var Nb=Rc++,Dc=f.b[t++];if(0==Dc)t+=Xb;else switch(Dc){case 1:for(var Ec=0,bc=0,hj=Gd;bc<hj;)bc++,Ec+=f.b[t],f.b[t++]=Ec&255;break;case 2:for(var Fc=0==Nb?0:Xb+1,$b=0,Hc=Gd;$b<Hc;)$b++,
f.b[t]+=f.b[t-Fc],++t;break;case 3:for(var hb=0,Nd=0==Nb?0:Xb+1,Tb=0,vc=Gd;Tb<vc;)Tb++,hb=f.b[t]+(hb+f.b[t-Nd]>>1)&255,f.b[t++]=hb;break;case 4:for(var $c=Xb+1,Ob=0,Ac=0,Cc=Gd;Ac<Cc;){var gc=Ac++,hc=f.b[t],ac=0==Nb?0:f.b[t-$c],Yb=0==gc||0==Nb?0:f.b[t-$c-1],Bc=Ob+ac-Yb,Gc=Bc-Ob;0>Gc&&(Gc=-Gc);var tc=Bc-ac;0>tc&&(tc=-tc);var uc=Bc-Yb;0>uc&&(uc=-uc);Ob=(Gc<=tc&&Gc<=uc?Ob:tc<=uc?ac:Yb)+hc&255;f.b[t++]=Ob}break;default:throw new n("Invalid filter "+Dc);}}var cc=0;if(8==d.colbits)for(var mc=0,ld=d.height;mc<
ld;){mc++;++cc;for(var fc=0,kb=d.width;fc<kb;){fc++;var kd=f.b[cc++];e.b[x++]=pc.b[3*kd+2];e.b[x++]=pc.b[3*kd+1];e.b[x++]=pc.b[3*kd];e.b[x++]=null!=xc?xc.b[kd]:255}x+=Yc}else if(8>d.colbits)for(var sc=d.colbits,Be=(1<<sc)-1,ad=0,sd=d.height;ad<sd;){ad++;++cc;for(var kc=0,wd=0,fd=0,td=d.width;fd<td;){fd++;wd<sc&&(kc=kc<<8|f.b[cc++],wd+=8);var Ce=kc>>>wd-sc&Be,wd=wd-sc;e.b[x++]=pc.b[3*Ce+2];e.b[x++]=pc.b[3*Ce+1];e.b[x++]=pc.b[3*Ce];e.b[x++]=null!=xc?xc.b[Ce]:255}x+=Yc}else throw new n(d.colbits+" indexed bits per pixel not supported");
}return e};dc.buildGrey=function(a,b,c,d){null==d&&(d=9);for(var e=new N(new ArrayBuffer(a*b+b)),f=0,g=0,h=0;h<b;){h++;for(var k=e.b[f++]=0,l=a;k<l;)k++,e.b[f++]=c.b[g++]}c=new uc;c.add(Ka.CHeader({width:a,height:b,colbits:8,color:Jc.ColGrey(!1),interlaced:!1}));c.add(Ka.CData(of.run(e,d)));c.add(Ka.CEnd);return c};dc.buildIndexed=function(a,b,c,d,e){null==e&&(e=9);for(var f=new N(new ArrayBuffer(a*b+b)),g=0,h=0,k=0;k<b;){k++;for(var l=f.b[g++]=0,O=a;l<O;)l++,f.b[g++]=c.b[h++]}c=new uc;c.add(Ka.CHeader({width:a,
height:b,colbits:8,color:Jc.ColIndexed,interlaced:!1}));c.add(Ka.CPalette(d));c.add(Ka.CData(of.run(f,e)));c.add(Ka.CEnd);return c};dc.buildRGB=function(a,b,c,d){null==d&&(d=9);for(var e=new N(new ArrayBuffer(3*a*b+b)),f=0,g=0,h=0;h<b;){h++;for(var k=e.b[f++]=0,l=a;k<l;)k++,e.b[f++]=c.b[g+2],e.b[f++]=c.b[g+1],e.b[f++]=c.b[g],g+=3}c=new uc;c.add(Ka.CHeader({width:a,height:b,colbits:8,color:Jc.ColTrue(!1),interlaced:!1}));c.add(Ka.CData(of.run(e,d)));c.add(Ka.CEnd);return c};dc.build32ARGB=function(a,
b,c,d){null==d&&(d=9);for(var e=new N(new ArrayBuffer(4*a*b+b)),f=0,g=0,h=0;h<b;){h++;for(var k=e.b[f++]=0,l=a;k<l;)k++,e.b[f++]=c.b[g+1],e.b[f++]=c.b[g+2],e.b[f++]=c.b[g+3],e.b[f++]=c.b[g],g+=4}c=new uc;c.add(Ka.CHeader({width:a,height:b,colbits:8,color:Jc.ColTrue(!0),interlaced:!1}));c.add(Ka.CData(of.run(e,d)));c.add(Ka.CEnd);return c};dc.build32BGRA=function(a,b,c,d){null==d&&(d=9);for(var e=new N(new ArrayBuffer(4*a*b+b)),f=0,g=0,h=0;h<b;){h++;for(var k=e.b[f++]=0,l=a;k<l;)k++,e.b[f++]=c.b[g+
2],e.b[f++]=c.b[g+1],e.b[f++]=c.b[g],e.b[f++]=c.b[g+3],g+=4}c=new uc;c.add(Ka.CHeader({width:a,height:b,colbits:8,color:Jc.ColTrue(!0),interlaced:!1}));c.add(Ka.CData(of.run(e,d)));c.add(Ka.CEnd);return c};var ij=function(a){this.o=a;a.set_bigEndian(!0)};p["format.png.Writer"]=ij;ij.__name__="format.png.Writer";ij.prototype={write:function(a){this.o.writeByte(137);this.o.writeByte(80);this.o.writeByte(78);this.o.writeByte(71);this.o.writeByte(13);this.o.writeByte(10);this.o.writeByte(26);this.o.writeByte(10);
for(a=a.h;null!=a;){var b=a.item;a=a.next;switch(b._hx_index){case 0:this.writeChunk("IEND",new N(new ArrayBuffer(0)));break;case 1:var b=b.h,c=new td;c.set_bigEndian(!0);c.writeInt32(b.width);c.writeInt32(b.height);c.writeByte(b.colbits);var d=b.color,e;switch(d._hx_index){case 0:e=d.alpha?4:0;break;case 1:e=d.alpha?6:2;break;case 2:e=3}c.writeByte(e);c.writeByte(0);c.writeByte(0);c.writeByte(b.interlaced?1:0);this.writeChunk("IHDR",c.getBytes());break;case 2:this.writeChunk("IDAT",b.b);break;case 3:this.writeChunk("PLTE",
b.b);break;case 4:this.writeChunk(b.id,b.data)}}},writeChunk:function(a,b){this.o.writeInt32(b.length);this.o.writeString(a);this.o.write(b);for(var c=-1,d=(c^z.cca(a,0))&255,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,c=c>>>8^d>>>1^-(d&1)&-306674912,d=(c^z.cca(a,1))&255,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&
-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,c=c>>>8^d>>>1^-(d&1)&-306674912,d=(c^z.cca(a,2))&255,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,c=c>>>8^d>>>1^-(d&1)&-306674912,d=(c^z.cca(a,3))&255,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,
d=d>>>1^-(d&1)&-306674912,d=d>>>1^-(d&1)&-306674912,c=c>>>8^d>>>1^-(d&1)&-306674912,d=b.b.bufferValue,e=0,f=b.length;e<f;)var g=e++,g=(c^d.bytes[g])&255,g=g>>>1^-(g&1)&-306674912,g=g>>>1^-(g&1)&-306674912,g=g>>>1^-(g&1)&-306674912,g=g>>>1^-(g&1)&-306674912,g=g>>>1^-(g&1)&-306674912,g=g>>>1^-(g&1)&-306674912,g=g>>>1^-(g&1)&-306674912,g=g>>>1^-(g&1)&-306674912,c=c>>>8^g;this.o.writeInt32(c^-1)},__class__:ij};var Te=M["format.tga.ImageOrigin"]={__ename__:!0,__constructs__:["BottomLeft","BottomRight",
"TopLeft","TopRight"],BottomLeft:{_hx_index:0,__enum__:"format.tga.ImageOrigin",toString:m},BottomRight:{_hx_index:1,__enum__:"format.tga.ImageOrigin",toString:m},TopLeft:{_hx_index:2,__enum__:"format.tga.ImageOrigin",toString:m},TopRight:{_hx_index:3,__enum__:"format.tga.ImageOrigin",toString:m}};Te.__empty_constructs__=[Te.BottomLeft,Te.BottomRight,Te.TopLeft,Te.TopRight];var qc=M["format.tga.ImageType"]={__ename__:!0,__constructs__:"NoImage UncompressedColorMapped UncompressedTrueColor UncompressedBlackAndWhite RunLengthColorMapped RunLengthTrueColor RunLengthBlackAndWhite Unknown".split(" "),
NoImage:{_hx_index:0,__enum__:"format.tga.ImageType",toString:m},UncompressedColorMapped:{_hx_index:1,__enum__:"format.tga.ImageType",toString:m},UncompressedTrueColor:{_hx_index:2,__enum__:"format.tga.ImageType",toString:m},UncompressedBlackAndWhite:{_hx_index:3,__enum__:"format.tga.ImageType",toString:m},RunLengthColorMapped:{_hx_index:4,__enum__:"format.tga.ImageType",toString:m},RunLengthTrueColor:{_hx_index:5,__enum__:"format.tga.ImageType",toString:m},RunLengthBlackAndWhite:{_hx_index:6,__enum__:"format.tga.ImageType",
toString:m},Unknown:(s=function(a){return{_hx_index:7,type:a,__enum__:"format.tga.ImageType",toString:m}},s.__params__=["type"],s)};qc.__empty_constructs__=[qc.NoImage,qc.UncompressedColorMapped,qc.UncompressedTrueColor,qc.UncompressedBlackAndWhite,qc.RunLengthColorMapped,qc.RunLengthTrueColor,qc.RunLengthBlackAndWhite];var jj=function(a){this.i=a;a.set_bigEndian(!1)};p["format.tga.Reader"]=jj;jj.__name__="format.tga.Reader";jj.prototype={read:function(){var a=this.i.readByte(),b=this.readHeader(),
a=0==a?"":this.i.readString(a),c=this.readColorMapData(b);return{header:b,imageId:a,colorMapData:c,imageData:this.readImageData(b,c),developerData:null}},readHeader:function(){var a=this.i.readByte(),b;b=this.i.readByte();switch(b){case 0:b=qc.NoImage;break;case 1:b=qc.UncompressedColorMapped;break;case 2:b=qc.UncompressedTrueColor;break;case 3:b=qc.UncompressedBlackAndWhite;break;case 9:b=qc.RunLengthColorMapped;break;case 10:b=qc.RunLengthTrueColor;break;case 11:b=qc.RunLengthBlackAndWhite;break;
default:b=qc.Unknown(b)}var c=this.i.readInt16(),d=this.i.readInt16(),e=this.i.readByte(),f=this.i.readInt16(),g=this.i.readInt16(),h=this.i.readInt16(),k=this.i.readInt16(),l=this.i.readByte(),O=this.i.readByte(),t;switch(O&48){case 16:t=Te.BottomRight;break;case 32:t=Te.TopLeft;break;case 48:t=Te.TopRight;break;default:t=Te.BottomLeft}return{colorMapType:a,imageType:b,colorMapFirstIndex:c,colorMapLength:d,colorMapEntrySize:e,xOrigin:f,yOrigin:g,width:h,height:k,bitsPerPixel:l,alphaChannelBits:O&
15,imageOrigin:t}},readColorMapData:function(a){return 0==a.colorMapType?null:this.readPixels(a.colorMapEntrySize,a.colorMapLength,a.alphaChannelBits,!1)},readImageData:function(a,b){switch(a.imageType._hx_index){case 0:return null;case 1:return this.readIndexes(a.bitsPerPixel,a.width*a.height,b,a.colorMapFirstIndex,!1);case 2:return this.readPixels(a.bitsPerPixel,a.width*a.height,a.alphaChannelBits,!1);case 3:return this.readMono(a.bitsPerPixel,a.width*a.height,a.alphaChannelBits,!1);case 4:return this.readIndexes(a.bitsPerPixel,
a.width*a.height,b,a.colorMapFirstIndex,!0);case 5:return this.readPixels(a.bitsPerPixel,a.width*a.height,a.alphaChannelBits,!0);case 6:return this.readMono(a.bitsPerPixel,a.width*a.height,a.alphaChannelBits,!0);default:throw new n("Unsupported image data type!");}},readPixels:function(a,b,c,d){var e=Array(b);c=0!=c;var f;switch(a){case 8:f=(s=this.i,K(s,s.readByte));a=K(this,this.parsePixel1);break;case 16:f=(s=this.i,K(s,s.readUInt16));a=K(this,this.parsePixel2);break;case 24:f=(s=this.i,K(s,s.readUInt24));
a=K(this,this.parsePixel3);break;case 32:f=(s=this.i,K(s,s.readInt32));a=K(this,this.parsePixel4);break;default:throw new n("Unsupported bits per pixels amount!");}if(d)for(var g=0;g<b;)if(d=this.i.readByte(),0!=(d&128)){d&=127;for(var h=a(f(),c);0<=d;)e[g++]=h,--d}else for(d&=127;0<=d;)e[g++]=a(f(),c),--d;else for(d=0;d<b;)g=d++,e[g]=a(f(),c);return e},readMono:function(a,b,c,d){var e=Array(b);c=0!=c;var f;switch(a){case 8:f=(s=this.i,K(s,s.readByte));a=K(this,this.parsePixel1);break;case 16:f=(s=
this.i,K(s,s.readUInt16));a=K(this,this.parsePixelGreyAlpha);break;default:throw new n("Unsupported bits per pixels amount!");}if(d)for(var g=0;g<b;)if(d=this.i.readByte(),0!=(d&128)){d&=127;for(var h=a(f(),c);0<=d;)e[g++]=h,--d}else for(d&=127;0<=d;)e[g++]=a(f(),c),--d;else for(d=0;d<b;)g=d++,e[g]=a(f(),c);return e},readIndexes:function(a,b,c,d,e){var f=Array(b);switch(a){case 8:a=(s=this.i,K(s,s.readByte));break;case 16:a=(s=this.i,K(s,s.readUInt16));break;case 24:a=(s=this.i,K(s,s.readUInt24));
break;case 32:a=(s=this.i,K(s,s.readInt32));break;default:throw new n("Unsupported bits per pixels amount!");}if(e){e=0;for(var g;e<b;)if(g=this.i.readByte(),0!=(g&128)){g&=127;for(var h=c[d+a()];0<=g;)f[e++]=h,--g}else for(g&=127;0<=g;)f[e++]=c[d+a()],--g}else for(e=0;e<b;)g=e++,f[g]=c[d+a()];return f},parsePixel1:function(a,b){return a<<16|a<<8|a},parsePixelGreyAlpha:function(a,b){return(b?(a&65280)<<16:0)|this.parsePixel1(a&255,!1)},parsePixel2:function(a,b){return(b?1==(a&32768)?-16777216:0:0)|
(255*(((a&31744)>>10)/31)|0)<<16|(255*(((a&992)>>5)/31)|0)<<8|255*((a&31)/31)|0},parsePixel3:function(a,b){return a},parsePixel4:function(a,b){return a},__class__:jj};var bj=function(a){this.i=a;this.bits=this.nbits=0};p["format.tools.BitsInput"]=bj;bj.__name__="format.tools.BitsInput";bj.prototype={readBits:function(a){if(this.nbits>=a){var b=this.nbits-a;a=this.bits>>>b&(1<<a)-1;this.nbits=b;return a}b=this.i.readByte();if(24<=this.nbits){if(31<=a)throw new n("Bits error");a=8+this.nbits-a;var c=
this.bits&(1<<this.nbits)-1;this.bits=b;this.nbits=a;return c<<8-a|b<<a}this.bits=this.bits<<8|b;this.nbits+=8;return this.readBits(a)},readBit:function(){0==this.nbits&&(this.bits=this.i.readByte(),this.nbits=8);this.nbits--;return 1==(this.bits>>>this.nbits&1)},reset:function(){this.nbits=0},__class__:bj};var of=function(){};p["format.tools.Deflate"]=of;of.__name__="format.tools.Deflate";of.run=function(a,b){null==b&&(b=9);return kj.run(a,b)};var ej=function(){};p["format.tools.Inflate"]=ej;ej.__name__=
"format.tools.Inflate";ej.run=function(a){return lj.run(a)};var el=M["format.wav.WAVEFormat"]={__ename__:!0,__constructs__:["WF_PCM"],WF_PCM:{_hx_index:0,__enum__:"format.wav.WAVEFormat",toString:m}};el.__empty_constructs__=[el.WF_PCM];var mj=function(a){this.i=a;a.set_bigEndian(!1)};p["format.wav.Reader"]=mj;mj.__name__="format.wav.Reader";mj.prototype={readInt:function(){return this.i.readInt32()},read:function(){if("RIFF"!=this.i.readString(4))throw new n("RIFF header expected");this.i.readInt32();
if("WAVE"!=this.i.readString(4))throw new n("WAVE signature not found");var a=this.i.readString(4);a:for(;"fmt "!=a;)switch(a){case "JUNK":a=this.i.readInt32();this.i.read(a);a=this.i.readString(4);break;case "bext":a=this.i.readInt32();this.i.read(a);a=this.i.readString(4);break;default:break a}if("fmt "!=a)throw new n("unsupported wave chunk "+a);var b=this.i.readInt32();switch(this.i.readUInt16()){case 1:case 3:a=el.WF_PCM;break;default:throw new n("only PCM (uncompressed) WAV files are supported");
}var c=this.i.readUInt16(),d=this.i.readInt32(),e=this.i.readInt32(),f=this.i.readUInt16(),g=this.i.readUInt16();16<b&&this.i.read(b-16);for(b=this.i.readString(4);"data"!=b;)this.i.read(this.i.readInt32()),b=this.i.readString(4);if("data"!=b)throw new n("expected data subchunk");var b=this.i.readInt32(),h=this.i.readAll();h.length>b&&(h=h.sub(0,b));return{header:{format:a,channels:c,samplingRate:d,byteRate:e,blockAlign:f,bitsPerSample:g},data:h}},__class__:mj};var ua=function(a){this.matA=this.alpha=
1;this.matC=this.matB=0;this.matD=1;this.absY=this.absX=0;this.posChanged=!0;this.x=0;this.posChanged=!0;this.y=0;this.posChanged=!0;this.scaleX=1;this.posChanged=!0;this.scaleY=1;this.posChanged=!0;this.rotation=0;this.blendMode=Ra.Alpha;this.posChanged=null!=a;this.set_visible(!0);this.children=[];null!=a&&a.addChild(this)};p["h2d.Object"]=ua;ua.__name__="h2d.Object";ua.prototype={getBounds:function(a,b){null==b?b=new Mb:(b.xMin=1E20,b.yMin=1E20,b.xMax=-1E20,b.yMax=-1E20);null!=a&&a.syncPos();a!=
this&&this.syncPos();this.getBoundsRec(a,b,!1);if(b.xMax<=b.xMin||b.yMax<=b.yMin)this.addBounds(a,b,-1,-1,2,2),b.xMax=b.xMin=0.5*(b.xMax+b.xMin),b.yMax=b.yMin=0.5*(b.yMax+b.yMin);return b},getSize:function(a){null==a?a=new Mb:(a.xMin=1E20,a.yMin=1E20,a.xMax=-1E20,a.yMax=-1E20);this.syncPos();this.getBoundsRec(this.parent,a,!0);if(a.xMax<=a.xMin||a.yMax<=a.yMin)this.addBounds(this.parent,a,-1,-1,2,2),a.xMax=a.xMin=0.5*(a.xMax+a.xMin),a.yMax=a.yMin=0.5*(a.yMax+a.yMin);var b=-this.x,c=-this.y;a.xMin+=
b;a.xMax+=b;a.yMin+=c;a.yMax+=c;return a},find:function(a){var b=a(this);if(null!=b)return b;for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d=d.find(a);if(null!=d)return d}return null},findAll:function(a,b){null==b&&(b=[]);var c=a(this);null!=c&&b.push(c);for(var c=0,d=this.children;c<d.length;){var e=d[c];++c;e.findAll(a,b)}return b},set_filter:function(a){null!=this.filter&&this.allocated&&this.filter.unbind(this);this.filter=a;null!=a&&this.allocated&&a.bind(this);return a},getBoundsRec:function(a,
b,c){if(this.posChanged){this.calcAbsPos();for(var d=0,e=this.children;d<e.length;){var f=e[d];++d;f.posChanged=!0}this.posChanged=!1}d=this.children.length;if(0==d)b.xMin=1E20,b.yMin=1E20,b.xMax=-1E20,b.yMax=-1E20;else if(1==d)d=this.children[0],d.visible?d.getBoundsRec(a,b,c):(b.xMin=1E20,b.yMin=1E20,b.xMax=-1E20,b.yMax=-1E20);else{for(var e=d=Infinity,g=f=-Infinity,h=0,k=this.children;h<k.length;){var l=k[h];++h;l.visible&&(l.getBoundsRec(a,b,c),b.xMin<d&&(d=b.xMin),b.yMin<e&&(e=b.yMin),b.xMax>
f&&(f=b.xMax),b.yMax>g&&(g=b.yMax))}b.xMin=d;b.yMin=e;b.xMax=f;b.yMax=g}},addBounds:function(a,b,c,d,e,f){if(!(0>=e||0>=f))if(null==a){var g=c*this.matA+d*this.matC+this.absX,h=c*this.matB+d*this.matD+this.absY;g<b.xMin&&(b.xMin=g);g>b.xMax&&(b.xMax=g);h<b.yMin&&(b.yMin=h);h>b.yMax&&(b.yMax=h);g=(c+e)*this.matA+d*this.matC+this.absX;h=(c+e)*this.matB+d*this.matD+this.absY;g<b.xMin&&(b.xMin=g);g>b.xMax&&(b.xMax=g);h<b.yMin&&(b.yMin=h);h>b.yMax&&(b.yMax=h);g=c*this.matA+(d+f)*this.matC+this.absX;h=
c*this.matB+(d+f)*this.matD+this.absY;g<b.xMin&&(b.xMin=g);g>b.xMax&&(b.xMax=g);h<b.yMin&&(b.yMin=h);h>b.yMax&&(b.yMax=h);g=(c+e)*this.matA+(d+f)*this.matC+this.absX;c=(c+e)*this.matB+(d+f)*this.matD+this.absY;g<b.xMin&&(b.xMin=g);g>b.xMax&&(b.xMax=g);c<b.yMin&&(b.yMin=c);c>b.yMax&&(b.yMax=c)}else if(a==this)b.xMin>c&&(b.xMin=c),b.yMin>d&&(b.yMin=d),b.xMax<c+e&&(b.xMax=c+e),b.yMax<d+f&&(b.yMax=d+f);else if(g=a.matA*a.matD-a.matB*a.matC,0!=g){var k=1/g,h=a.matD*k,g=-a.matB*k,l=-a.matC*k,k=a.matA*k,
O=this.absX-a.absX;a=this.absY-a.absY;var t=c*this.matA+d*this.matC+O,x=c*this.matB+d*this.matD+a,n=t*h+x*l,t=t*g+x*k;n<b.xMin&&(b.xMin=n);n>b.xMax&&(b.xMax=n);t<b.yMin&&(b.yMin=t);t>b.yMax&&(b.yMax=t);t=(c+e)*this.matA+d*this.matC+O;x=(c+e)*this.matB+d*this.matD+a;n=t*h+x*l;t=t*g+x*k;n<b.xMin&&(b.xMin=n);n>b.xMax&&(b.xMax=n);t<b.yMin&&(b.yMin=t);t>b.yMax&&(b.yMax=t);t=c*this.matA+(d+f)*this.matC+O;x=c*this.matB+(d+f)*this.matD+a;n=t*h+x*l;t=t*g+x*k;n<b.xMin&&(b.xMin=n);n>b.xMax&&(b.xMax=n);t<b.yMin&&
(b.yMin=t);t>b.yMax&&(b.yMax=t);t=(c+e)*this.matA+(d+f)*this.matC+O;x=(c+e)*this.matB+(d+f)*this.matD+a;c=t*h+x*l;d=t*g+x*k;c<b.xMin&&(b.xMin=c);c>b.xMax&&(b.xMax=c);d<b.yMin&&(b.yMin=d);d>b.yMax&&(b.yMax=d)}},getObjectsCount:function(){for(var a=0,b=0,c=this.children;b<c.length;){var d=c[b];++b;a+=d.getObjectsCount()+1}return a},localToGlobal:function(a){this.syncPos();null==a&&(a=new vb);var b=a.x*this.matB+a.y*this.matD+this.absY;a.x=a.x*this.matA+a.y*this.matC+this.absX;a.y=b;return a},globalToLocal:function(a){this.syncPos();
a.x-=this.absX;a.y-=this.absY;var b=1/(this.matA*this.matD-this.matB*this.matC),c=(-a.x*this.matB+a.y*this.matA)*b;a.x=(a.x*this.matD-a.y*this.matC)*b;a.y=c;return a},getScene:function(){for(var a=this;null!=a.parent;)a=a.parent;return a instanceof gd?a:null},set_visible:function(a){if(this.visible==a)return a;this.visible=a;null!=this.parentContainer&&this.parentContainer.contentChanged(this);return a},addChild:function(a){this.addChildAt(a,this.children.length)},addChildAt:function(a,b){0>b&&(b=
0);b>this.children.length&&(b=this.children.length);for(var c=this;null!=c;){if(c==a)throw new n("Recursive addChild");c=c.parent}null!=a.parent&&(c=a.allocated,a.allocated=!1,a.parent.removeChild(a),a.allocated=c);this.children.splice(b,0,a);if(!this.allocated&&a.allocated)a.onRemove();a.parent=this;a.parentContainer=this.parentContainer;a.posChanged=!0;if(this.allocated)if(a.allocated)a.onHierarchyMoved(!0);else a.onAdd();null!=this.parentContainer&&this.parentContainer.contentChanged(this)},onContentChanged:function(){null!=
this.parentContainer&&this.parentContainer.contentChanged(this)},onHierarchyMoved:function(a){for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d.onHierarchyMoved(a)}},onAdd:function(){this.allocated=!0;null!=this.filter&&this.filter.bind(this);for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.onAdd()}},onRemove:function(){this.allocated=!1;null!=this.filter&&this.filter.unbind(this);for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.onRemove()}},getMatrix:function(a){a.a=this.matA;
a.b=this.matB;a.c=this.matC;a.d=this.matD;a.x=this.absX;a.y=this.absY},removeChild:function(a){if(z.remove(this.children,a)){if(a.allocated)a.onRemove();a.parent=null;null!=a.parentContainer&&a.setParentContainer(null);a.posChanged=!0;null!=this.parentContainer&&this.parentContainer.contentChanged(this)}},setParentContainer:function(a){this.parentContainer=a;for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d.setParentContainer(a)}},removeChildren:function(){for(;0<this.children.length;)this.removeChild(this.children[0])},
remove:function(){null!=this.parent&&this.parent.removeChild(this)},drawTo:function(a){var b=this.getScene(),c=null==b;null==b&&(b=new gd);b.drawImplTo(this,a);c&&b.dispose()},draw:function(a){},sync:function(a){var b=this.posChanged;b&&(this.calcAbsPos(),this.posChanged=!1);this.lastFrame=a.frame;for(var c=0,d=this.children.length;c<d;){var e=this.children[c];if(null==e)break;e.lastFrame!=a.frame&&(b&&(e.posChanged=!0),e.sync(a));this.children[c]!=e?(c=0,d=this.children.length):++c}},syncPos:function(){null!=
this.parent&&this.parent.syncPos();if(this.posChanged){this.calcAbsPos();for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.posChanged=!0}this.posChanged=!1}},calcAbsPos:function(){if(null==this.parent){var a,b;0==this.rotation?(this.matA=this.scaleX,this.matC=this.matB=0,this.matD=this.scaleY):(a=Math.cos(this.rotation),b=Math.sin(this.rotation),this.matA=this.scaleX*a,this.matB=this.scaleX*b,this.matC=this.scaleY*-b,this.matD=this.scaleY*a);this.absX=this.x;this.absY=this.y}else{if(0==this.rotation)this.matA=
this.scaleX*this.parent.matA,this.matB=this.scaleX*this.parent.matB,this.matC=this.scaleY*this.parent.matC,this.matD=this.scaleY*this.parent.matD;else{var c=Math.cos(this.rotation),d=Math.sin(this.rotation);a=this.scaleX*c;b=this.scaleX*d;d=this.scaleY*-d;c*=this.scaleY;this.matA=a*this.parent.matA+b*this.parent.matC;this.matB=a*this.parent.matB+b*this.parent.matD;this.matC=d*this.parent.matA+c*this.parent.matC;this.matD=d*this.parent.matB+c*this.parent.matD}this.absX=this.x*this.parent.matA+this.y*
this.parent.matC+this.parent.absX;this.absY=this.x*this.parent.matB+this.y*this.parent.matD+this.parent.absY}},emitTile:function(a,b){null==ua.nullDrawable&&(ua.nullDrawable=new Wa(null));ua.nullDrawable.absX=this.absX;ua.nullDrawable.absY=this.absY;ua.nullDrawable.matA=this.matA;ua.nullDrawable.matB=this.matB;ua.nullDrawable.matC=this.matC;ua.nullDrawable.matD=this.matD;a.drawTile(ua.nullDrawable,b)},clipBounds:function(a,b){var c=a.tmpBounds,d,e,f,g,h,k;null!=a.inFilter?(h=a.baseShader.filterMatrixA__,
k=a.baseShader.filterMatrixB__,d=this.matA*h.x+this.matB*h.y,e=this.matA*k.x+this.matB*k.y,f=this.matC*h.x+this.matD*h.y,g=this.matC*k.x+this.matD*k.y,h=this.absX*h.x+this.absY*h.y+h.z,k=this.absX*k.x+this.absY*k.y+k.z):(d=this.matA,e=this.matB,f=this.matC,g=this.matD,h=this.absX,k=this.absY);c.xMin=1E20;c.yMin=1E20;c.xMax=-1E20;c.yMax=-1E20;var l=b.xMin,O=b.yMin,t=l*d+O*f+h,l=l*e+O*g+k;t<c.xMin&&(c.xMin=t);t>c.xMax&&(c.xMax=t);l<c.yMin&&(c.yMin=l);l>c.yMax&&(c.yMax=l);l=b.xMax;O=b.yMin;t=l*d+O*f+
h;l=l*e+O*g+k;t<c.xMin&&(c.xMin=t);t>c.xMax&&(c.xMax=t);l<c.yMin&&(c.yMin=l);l>c.yMax&&(c.yMax=l);l=b.xMin;O=b.yMax;t=l*d+O*f+h;l=l*e+O*g+k;t<c.xMin&&(c.xMin=t);t>c.xMax&&(c.xMax=t);l<c.yMin&&(c.yMin=l);l>c.yMax&&(c.yMax=l);l=b.xMax;O=b.yMax;t=l*d+O*f+h;l=l*e+O*g+k;t<c.xMin&&(c.xMin=t);t>c.xMax&&(c.xMax=t);l<c.yMin&&(c.yMin=l);l>c.yMax&&(c.yMax=l);c.xMin<a.curX&&(c.xMin=a.curX);c.yMin<a.curY&&(c.yMin=a.curY);c.xMax>a.curX+a.curWidth&&(c.xMax=a.curX+a.curWidth);c.yMax>a.curY+a.curHeight&&(c.yMax=a.curY+
a.curHeight);var t=1/(d*g-e*f),x=c.xMin,n=c.yMin,O=c.xMax,l=c.yMax;c.xMin=1E20;c.yMin=1E20;c.xMax=-1E20;c.yMax=-1E20;var m,q;m=x-h;q=n-k;var p=(m*g-q*f)*t;m=(-m*e+q*d)*t;p<c.xMin&&(c.xMin=p);p>c.xMax&&(c.xMax=p);m<c.yMin&&(c.yMin=m);m>c.yMax&&(c.yMax=m);p=O-h;m=n-k;n=(p*g-m*f)*t;p=(-p*e+m*d)*t;n<c.xMin&&(c.xMin=n);n>c.xMax&&(c.xMax=n);p<c.yMin&&(c.yMin=p);p>c.yMax&&(c.yMax=p);n=x-h;p=l-k;x=(n*g-p*f)*t;n=(-n*e+p*d)*t;x<c.xMin&&(c.xMin=x);x>c.xMax&&(c.xMax=x);n<c.yMin&&(c.yMin=n);n>c.yMax&&(c.yMax=
n);h=O-h;k=l-k;f=(h*g-k*f)*t;d=(-h*e+k*d)*t;f<c.xMin&&(c.xMin=f);f>c.xMax&&(c.xMax=f);d<c.yMin&&(c.yMin=d);d>c.yMax&&(c.yMax=d);d=b.xMin;e=c.xMin;b.xMin=d<e?e:d;d=b.yMin;e=c.yMin;b.yMin=d<e?e:d;d=b.xMax;e=c.xMax;b.xMax=d>e?e:d;d=b.yMax;c=c.yMax;b.yMax=d>c?c:d},drawFilters:function(a){if(a.pushFilter(this)){var b=a.tmpBounds,c=new Mb,d=-1;this.filter.sync(a,this);this.filter.autoBounds?d=this.filter.boundsExtend:(this.filter.getBounds(this,b),b.xMin<c.xMin&&(c.xMin=b.xMin),b.xMax>c.xMax&&(c.xMax=b.xMax),
b.yMin<c.yMin&&(c.yMin=b.yMin),b.yMax>c.yMax&&(c.yMax=b.yMax));0<=d&&(this.getBounds(this,b),b.xMin-=d,b.yMin-=d,b.xMax+=d,b.yMax+=d,b.xMin<c.xMin&&(c.xMin=b.xMin),b.xMax>c.xMax&&(c.xMax=b.xMax),b.yMin<c.yMin&&(c.yMin=b.yMin),b.yMax>c.yMax&&(c.yMax=b.yMax));this.clipBounds(a,c);var b=Math.floor(c.xMin+1E-10),d=Math.floor(c.yMin+1E-10),e=Math.ceil(c.xMax-b-1E-10),f=Math.ceil(c.yMax-d-1E-10);if(!(0>=e||0>=f||c.xMax<c.xMin)){var g=a.textures.allocTarget("filterTemp",e,f,!1);a.pushTarget(g,b,d,e,f);a.engine.clear(0);
var c=a.globalAlpha,e=a.baseShader,h=e.filterMatrixA__,f=h.x,k=h.y,l=h.z,O=h.w,t=e.filterMatrixB__,h=t.x,x=t.y,n=t.z,t=t.w,m=1/(this.matA*this.matD-this.matB*this.matC),p=this.matD*m,q=-this.matB*m,r=-this.matC*m,m=this.matA*m,s=-(this.absX*p+this.absY*r),C=-(this.absX*q+this.absY*m),F=e.filterMatrixA__;F.x=p;F.y=r;F.z=s;F.w=1;p=e.filterMatrixB__;p.x=q;p.y=m;p.z=C;p.w=1;a.globalAlpha=1;this.draw(a);q=0;for(p=this.children;q<p.length;)r=p[q],++q,r.drawRec(a);g=Ga.fromTexture(g);g.dx=b;g.dy=d;q=g;g=
this.filter.draw(a,g);g!=q&&null!=g&&(g.dx+=b,g.dy+=d);b=e.filterMatrixA__;b.x=f;b.y=k;b.z=l;b.w=O;b=e.filterMatrixB__;b.x=h;b.y=x;b.z=n;b.w=t;a.popTarget();a.popFilter();null!=g&&(a.globalAlpha=c,this.drawFiltered(a,g))}}},drawFiltered:function(a,b){var c=a.globalAlpha;a.currentBlend=null;a.inFilterBlend=this.blendMode;a.globalAlpha*=this.alpha;this.emitTile(a,b);a.globalAlpha=c;a.inFilterBlend=null;a.currentBlend=null},drawRec:function(a){if(this.visible){if(this.posChanged){this.calcAbsPos();for(var b=
0,c=this.children;b<c.length;){var d=c[b];++b;d.posChanged=!0}this.posChanged=!1}if(null!=this.filter&&this.filter.get_enable())this.drawFilters(a);else{b=a.globalAlpha;a.globalAlpha*=this.alpha;if(a.front2back){c=this.children.length;for(d=0;d<c;){var e=d++;this.children[c-1-e].drawRec(a)}this.draw(a)}else{this.draw(a);c=0;for(d=this.children;c<d.length;)e=d[c],++c,e.drawRec(a)}a.globalAlpha=b}}},set_x:function(a){this.posChanged=!0;return this.x=a},set_y:function(a){this.posChanged=!0;return this.y=
a},set_scaleX:function(a){this.posChanged=!0;return this.scaleX=a},set_scaleY:function(a){this.posChanged=!0;return this.scaleY=a},set_rotation:function(a){this.posChanged=!0;return this.rotation=a},move:function(a,b){var c=this.x+a*Math.cos(this.rotation);this.posChanged=!0;this.x=c;c=this.y+b*Math.sin(this.rotation);this.posChanged=!0;this.y=c},setPosition:function(a,b){this.posChanged=!0;this.x=a;this.posChanged=!0;this.y=b},rotate:function(a){this.posChanged=!0;this.rotation+=a},scale:function(a){this.posChanged=
!0;this.scaleX*=a;this.posChanged=!0;this.scaleY*=a},setScale:function(a){this.posChanged=!0;this.scaleX=a;this.posChanged=!0;this.scaleY=a},getChildAt:function(a){return this.children[a]},getChildIndex:function(a){for(var b=0,c=this.children.length;b<c;){var d=b++;if(this.children[d]==a)return d}return-1},getObjectByName:function(a){if(this.name==a)return this;for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d=d.getObjectByName(a);if(null!=d)return d}return null},get_numChildren:function(){return this.children.length},
iterator:function(){return new Bh(this.children)},toString:function(){var a=Ba.getClass(this).__name__;return null==this.name?a:this.name+"("+a+")"},contentChanged:function(a){},constraintSize:function(a,b){},__class__:ua};var Wa=function(a){ua.call(this,a);this.color=new U(1,1,1,1)};p["h2d.Drawable"]=Wa;Wa.__name__="h2d.Drawable";Wa.__super__=ua;Wa.prototype=J(ua.prototype,{set_tileWrap:function(a){return this.tileWrap=a},get_colorAdd:function(){var a=this.getShader(De);return null==a?null:a.color__},
set_colorAdd:function(a){var b=this.getShader(De);null==b?null!=a&&(b=this.addShader(new De),b.color__=a):null==a?this.removeShader(b):b.color__=a;return a},drawFiltered:function(a,b){var c=this.shaders;this.shaders=null;ua.prototype.drawFiltered.call(this,a,b);this.shaders=c},set_colorKey:function(a){var b=this.getShader(xd);if(null==b)null!=a&&this.addShader(new xd(-16777216|a));else if(null==a)this.removeShader(b);else{var b=b.colorKey__,c=-16777216|a;b.x=(c>>16&255)/255;b.y=(c>>8&255)/255;b.z=
(c&255)/255;b.w=(c>>>24)/255}return this.colorKey=a},adjustColor:function(a){if(null==a)this.set_colorMatrix(null);else{var b=this.get_colorMatrix();null==b&&(b=new R,this.set_colorMatrix(b));b.identity();b.adjustColor(a)}},get_colorMatrix:function(){var a=this.getShader(Ee);return null==a?null:a.matrix__},set_colorMatrix:function(a){var b=this.getShader(Ee);null==b?null!=a&&(b=this.addShader(new Ee),b.matrix__=a):null==a?this.removeShader(b):b.matrix__=a;return a},getDebugShaderCode:function(a){null==
a&&(a=!0);var b=this.getScene().ctx,b=b.manager.compileShaders(new Wb(b.baseShader,this.shaders));return a?"// vertex:\n"+qa.shaderToString(b.vertex.data,!0)+"\n\nfragment:\n"+qa.shaderToString(b.fragment.data,!0):na.CURRENT.driver.getNativeShaderCode(b)},getShader:function(a){if(null!=this.shaders)for(var b=this.shaders;null!=b;){var c=b.s,b=b.next,c=c instanceof a?c:null;if(null!=c)return c}return null},getShaders:function(){return new pf(this.shaders,null)},addShader:function(a){if(null==a)throw new n("Can't add null shader");
this.shaders=Wb.addSort(a,this.shaders);return a},removeShader:function(a){for(var b=null,c=this.shaders;null!=c;){if(c.s==a)return null==b?this.shaders=c.next:b.next=c.next,!0;b=c;c=c.next}return!1},emitTile:function(a,b){null==b&&(b=new Ga(null,0,0,5,5));a.drawTile(this,b)},__class__:Wa});var jg=function(a,b){Wa.call(this,b);this.tile=a};p["h2d.Bitmap"]=jg;jg.__name__="h2d.Bitmap";jg.__super__=Wa;jg.prototype=J(Wa.prototype,{set_tileWrap:function(a){if(a&&null!=this.tile&&0!=(this.tile.innerTex.flags&
1<<T.IsNPOT._hx_index))throw new n("Cannot set tileWrap on a non power-of-two texture");return this.tileWrap=a},getBoundsRec:function(a,b,c){Wa.prototype.getBoundsRec.call(this,a,b,c);null!=this.tile&&this.addBounds(a,b,this.tile.dx,this.tile.dy,this.tile.width,this.tile.height)},draw:function(a){this.emitTile(a,this.tile)},__class__:jg});var Ra=M["h2d.BlendMode"]={__ename__:!0,__constructs__:"None Alpha Add AlphaAdd SoftAdd Multiply AlphaMultiply Erase Screen Sub Max Min".split(" "),None:{_hx_index:0,
__enum__:"h2d.BlendMode",toString:m},Alpha:{_hx_index:1,__enum__:"h2d.BlendMode",toString:m},Add:{_hx_index:2,__enum__:"h2d.BlendMode",toString:m},AlphaAdd:{_hx_index:3,__enum__:"h2d.BlendMode",toString:m},SoftAdd:{_hx_index:4,__enum__:"h2d.BlendMode",toString:m},Multiply:{_hx_index:5,__enum__:"h2d.BlendMode",toString:m},AlphaMultiply:{_hx_index:6,__enum__:"h2d.BlendMode",toString:m},Erase:{_hx_index:7,__enum__:"h2d.BlendMode",toString:m},Screen:{_hx_index:8,__enum__:"h2d.BlendMode",toString:m},Sub:{_hx_index:9,
__enum__:"h2d.BlendMode",toString:m},Max:{_hx_index:10,__enum__:"h2d.BlendMode",toString:m},Min:{_hx_index:11,__enum__:"h2d.BlendMode",toString:m}};Ra.__empty_constructs__=[Ra.None,Ra.Alpha,Ra.Add,Ra.AlphaAdd,Ra.SoftAdd,Ra.Multiply,Ra.AlphaMultiply,Ra.Erase,Ra.Screen,Ra.Sub,Ra.Max,Ra.Min];var rg=function(a,b){this.prevChar=a;this.offset=b};p["h2d.Kerning"]=rg;rg.__name__="h2d.Kerning";rg.prototype={__class__:rg};var yc=function(a,b){this.t=a;this.width=b};p["h2d.FontChar"]=yc;yc.__name__="h2d.FontChar";
yc.prototype={addKerning:function(a,b){var c=new rg(a,b);c.next=this.kerning;this.kerning=c},getKerningOffset:function(a){for(var b=this.kerning;null!=b;){if(b.prevChar==a)return b.offset;b=b.next}return 0},clone:function(){var a=new yc(this.t.clone(),this.width),b=this.kerning;if(null!=b){var c=new rg(b.prevChar,b.offset);a.kerning=c;for(b=b.next;null!=b;)var d=new rg(b.prevChar,b.offset),c=c.next=d,b=b.next}return a},__class__:yc};var Hk=M["h2d.FontType"]={__ename__:!0,__constructs__:["BitmapFont",
"SignedDistanceField"],BitmapFont:{_hx_index:0,__enum__:"h2d.FontType",toString:m},SignedDistanceField:(s=function(a,b,c){return{_hx_index:1,channel:a,alphaCutoff:b,smoothing:c,__enum__:"h2d.FontType",toString:m}},s.__params__=["channel","alphaCutoff","smoothing"],s)};Hk.__empty_constructs__=[Hk.BitmapFont];var sg=function(a,b,c){this.offsetX=this.offsetY=0;this.name=a;this.initSize=this.size=b;this.glyphs=new oa;this.defaultChar=this.nullChar=new yc(new Ga(null,0,0,0,0),0);this.charset=Pb.getDefault();
null!=a&&(this.tilePath=sa.withExtension(a,"png"));this.type=null==c?Hk.BitmapFont:c};p["h2d.Font"]=sg;sg.__name__="h2d.Font";sg.prototype={getChar:function(a){var b=this.glyphs.h[a];null==b&&(b=this.charset.resolveChar(a,this.glyphs),null==b&&(b=13==a||10==a?this.nullChar:this.defaultChar));return b},setOffset:function(a,b){var c=a-this.offsetX,d=b-this.offsetY;if(!(0==c&&0==d)){for(var e=this.glyphs.iterator();e.hasNext();){var f=e.next();f.t.dx+=c;f.t.dy+=d}this.offsetX+=c;this.offsetY+=d}},clone:function(){var a=
new sg(this.name,this.size);a.baseLine=this.baseLine;a.lineHeight=this.lineHeight;a.tile=this.tile.clone();a.charset=this.charset;a.defaultChar=this.defaultChar.clone();for(var b=this.glyphs.keys();b.hasNext();){var c=b.next(),d=this.glyphs.h[c],e=d.clone();d==this.defaultChar&&(a.defaultChar=e);a.glyphs.h[c]=e}return a},resizeTo:function(a){for(var b=a/this.initSize,c=this.glyphs.iterator();c.hasNext();){var d=c.next();d.width*=b;d.t.scaleToSize(d.t.width*b,d.t.height*b);d.t.dx*=b;d.t.dy*=b;for(d=
d.kerning;null!=d;)d.offset*=b,d=d.next}this.lineHeight*=b;this.baseLine*=b;this.size=a},hasChar:function(a){return null!=this.glyphs.h[a]},dispose:function(){this.tile.dispose()},__class__:sg};var Ch=function(){};p["hxd.Interactive"]=Ch;Ch.__name__="hxd.Interactive";Ch.prototype={__class__:Ch};var tg=function(a,b,c,d){this.shapeX=this.shapeY=0;this.mouseDownButton=-1;this.cancelEvents=this.propagateEvents=!1;Wa.call(this,c);this.width=a;this.height=b;this.shape=d;this.set_cursor(yd.Button)};p["h2d.Interactive"]=
tg;tg.__name__="h2d.Interactive";tg.__interfaces__=[Ch];tg.__super__=Wa;tg.prototype=J(Wa.prototype,{onAdd:function(){this.scene=this.getScene();null!=this.scene&&this.scene.addEventTarget(this);this.updateMask();Wa.prototype.onAdd.call(this)},draw:function(a){null!=this.backgroundColor&&this.emitTile(a,Ga.fromColor(this.backgroundColor,this.width|0,this.height|0,(this.backgroundColor>>>24)/255))},getBoundsRec:function(a,b,c){Wa.prototype.getBoundsRec.call(this,a,b,c);(null!=this.backgroundColor||
c)&&this.addBounds(a,b,0,0,this.width|0,this.height|0)},onHierarchyMoved:function(a){Wa.prototype.onHierarchyMoved.call(this,a);null!=this.scene&&(this.scene.removeEventTarget(this),this.scene.addEventTarget(this));a&&this.updateMask()},updateMask:function(){this.parentMask=null;for(var a=this.parent;null!=a;){var b=a instanceof ug?a:null;if(null!=b){this.parentMask=b;break}a=a.parent}},onRemove:function(){null!=this.scene&&(this.scene.removeEventTarget(this,!0),this.scene=null);Wa.prototype.onRemove.call(this)},
checkBounds:function(a){switch(a.kind._hx_index){case 4:case 6:case 7:case 10:return!1;default:return!0}},preventClick:function(){this.mouseDownButton=-1},getInteractiveScene:function(){return this.scene},handleEvent:function(a){if(null!=this.parentMask&&this.checkBounds(a)){var b=this.parentMask,c=new vb(a.relX,a.relY);this.localToGlobal(c);for(var d=c.x,e=c.y;null!=b;){c.x=d;c.y=e;var f=b.globalToLocal(c);if(0>f.x||0>f.y||f.x>b.width||f.y>b.height){a.cancel=!0;return}b=b.parentMask}}if(null==this.shape&&
(this.isEllipse&&this.checkBounds(a))&&(c=0.5*this.width,b=0.5*this.height,c=(a.relX-c)/c,b=(a.relY-b)/b,1<c*c+b*b)){a.cancel=!0;return}this.propagateEvents&&(a.propagate=!0);this.cancelEvents&&(a.cancel=!0);switch(a.kind._hx_index){case 0:if(this.enableRightButton||0==a.button)this.mouseDownButton=a.button,this.onPush(a);break;case 1:if(this.enableRightButton||0==a.button)if(this.onRelease(a),this.mouseDownButton==a.button)this.onClick(a);this.mouseDownButton=-1;break;case 2:this.onMove(a);break;
case 3:this.onOver(a);break;case 4:this.onOut(a);break;case 5:this.onWheel(a);break;case 6:this.onFocus(a);break;case 7:this.onFocusLost(a);break;case 8:this.onKeyDown(a);break;case 9:this.onKeyUp(a);break;case 10:if(this.enableRightButton||0==a.button)if(this.onRelease(a),this.mouseDownButton==a.button)this.onReleaseOutside(a);this.mouseDownButton=-1;break;case 11:this.onTextInput(a);break;case 12:this.onCheck(a)}},calcAbsPos:function(){Wa.prototype.calcAbsPos.call(this);this.invDet=1/(this.matA*
this.matD-this.matB*this.matC)},set_cursor:function(a){this.cursor=a;null!=this.scene&&null!=this.scene.events&&this.scene.events.updateCursor(this);return a},eventToLocal:function(a){var b=a.relX-this.absX,c=a.relY-this.absY;a.relX=(b*this.matD-c*this.matC)*this.invDet;a.relY=(-b*this.matB+c*this.matA)*this.invDet},startDrag:function(a,b){var c=this;this.scene.startDrag(function(b){var e=b.relX,f=b.relY;c.eventToLocal(b);a(b);b.relX=e;b.relY=f},b)},stopDrag:function(){this.scene.stopDrag()},focus:function(){null==
this.scene||null==this.scene.events||this.scene.events.focus(this)},blur:function(){this.hasFocus()&&this.scene.events.blur()},isOver:function(){return null!=this.scene&&null!=this.scene.events?-1!=this.scene.events.overList.indexOf(this):!1},hasFocus:function(){return null!=this.scene&&null!=this.scene.events?this.scene.events.currentFocus==this:!1},onOver:function(a){},onOut:function(a){},onPush:function(a){},onRelease:function(a){},onReleaseOutside:function(a){},onClick:function(a){},onMove:function(a){},
onWheel:function(a){},onFocus:function(a){},onFocusLost:function(a){},onKeyUp:function(a){},onKeyDown:function(a){},onCheck:function(a){},onTextInput:function(a){},__class__:tg});var zd=function(a){ua.call(this,a);this.layersIndexes=[];this.layerCount=0};p["h2d.Layers"]=zd;zd.__name__="h2d.Layers";zd.__super__=ua;zd.prototype=J(ua.prototype,{addChild:function(a){this.addChildAt(a,0)},add:function(a,b){this.addChildAt(a,b)},addChildAt:function(a,b){if(a.parent==this){var c=a.allocated;a.allocated=
!1;this.removeChild(a);a.allocated=c}for(;b>=this.layerCount;)this.layersIndexes[this.layerCount++]=this.children.length;ua.prototype.addChildAt.call(this,a,this.layersIndexes[b]);for(var c=b,d=this.layerCount;c<d;){var e=c++;this.layersIndexes[e]++}},removeChild:function(a){for(var b=0,c=this.children.length;b<c;){var d=b++;if(this.children[d]==a){this.children.splice(d,1);if(a.allocated)a.onRemove();a.parent=null;a.posChanged=!0;null!=a.parentContainer&&a.setParentContainer(null);for(a=this.layerCount-
1;0<=a&&this.layersIndexes[a]>d;)this.layersIndexes[a]--,--a;null!=this.parentContainer&&this.parentContainer.contentChanged(this);break}}},under:function(a){for(var b=0,c=this.children.length;b<c;){var d=b++;if(this.children[d]==a){for(var c=b=0,e=this.layersIndexes;c<e.length;){var f=e[c];++c;if(f>d)break;else b=f}for(;d>b;)this.children[d]=this.children[d-1],--d;this.children[b]=a;if(a.allocated)a.onHierarchyMoved(!1);break}}},over:function(a){for(var b=0,c=this.children.length;b<c;){var d=b++;
if(this.children[d]==a){for(var c=0,e=this.layersIndexes;c<e.length;)if(b=e[c],++c,b>d){for(c=b-1;d<c;)e=d++,this.children[e]=this.children[e+1];this.children[b-1]=a;if(a.allocated)a.onHierarchyMoved(!1);break}break}}},getLayer:function(a){a=a>=this.layerCount?[]:this.children.slice(0==a?0:this.layersIndexes[a-1],this.layersIndexes[a]);return new Bh(a)},getChildLayer:function(a){if(a.parent!=this)return-1;a=this.children.indexOf(a);for(var b=0,c=this.layerCount;b<c;){var d=b++;if(this.layersIndexes[d]>
a)return d}return-1},drawLayer:function(a,b){if(!(b>=this.layerCount)){var c=a.globalAlpha;a.globalAlpha*=this.alpha;var d=0==b?0:this.layersIndexes[b-1],e=this.layersIndexes[b];if(a.front2back)for(;d<e;){var f=d++;this.children[e-1-f].drawRec(a)}else for(;d<e;)f=d++,this.children[f].drawRec(a);a.globalAlpha=c}},ysort:function(a){if(!(a>=this.layerCount)){var b=0==a?0:this.layersIndexes[a-1];a=this.layersIndexes[a];if(b!=a)for(var c=b,d=this.children[c++].y;c<a;){var e=this.children[c];if(e.y<d){for(var f=
c-1;f>=b;){var g=this.children[f];if(e.y>=g.y)break;this.children[f+1]=g;--f}this.children[f+1]=e;if(e.allocated)e.onHierarchyMoved(!1)}else d=e.y;++c}}},__class__:zd});var ug=function(a,b,c){ua.call(this,c);this.width=a;this.height=b};p["h2d.Mask"]=ug;ug.__name__="h2d.Mask";ug.__super__=ua;ug.prototype=J(ua.prototype,{onHierarchyMoved:function(a){ua.prototype.onHierarchyMoved.call(this,a);a&&this.updateMask()},onAdd:function(){ua.prototype.onAdd.call(this);this.updateMask()},updateMask:function(){this.parentMask=
null;for(var a=this.parent;null!=a;){var b=a instanceof ug?a:null;if(null!=b){this.parentMask=b;break}a=a.parent}},getBoundsRec:function(a,b,c){var d=b.xMin,e=b.yMin,f=b.xMax,g=b.yMax;b.xMin=1E20;b.yMin=1E20;b.xMax=-1E20;b.yMax=-1E20;if(this.posChanged){this.calcAbsPos();for(var h=0,k=this.children;h<k.length;){var l=k[h];++h;l.posChanged=!0}this.posChanged=!1}this.addBounds(a,b,0,0,this.width,this.height);var h=b.xMin,k=b.yMin,l=b.xMax,O=b.yMax;b.xMin=d;b.xMax=f;b.yMin=e;b.yMax=g;ua.prototype.getBoundsRec.call(this,
a,b,c);b.xMin<h&&(b.xMin=d>h?h:d);b.yMin<k&&(b.yMin=e>k?k:e);b.xMax>l&&(b.xMax=f<l?l:f);b.yMax>O&&(b.yMax=g<O?O:g)},drawRec:function(a){var b=this.absX,c=this.absY,d=this.width*this.matA+this.height*this.matC+this.absX,e=this.width*this.matB+this.height*this.matD+this.absY,f;b>d&&(f=b,b=d,d=f);c>e&&(f=c,c=e,e=f);if(a.hasRenderZone){f=a.renderX;var g=a.renderY,h=a.renderW,k=a.renderH;a.setRenderZone(b,c,d-b,e-c);ua.prototype.drawRec.call(this,a);a.setRenderZone(f,g,h,k)}else a.setRenderZone(b,c,d-
b,e-c),ua.prototype.drawRec.call(this,a),a.hasRenderZone=!1,a.engine.setRenderZone()},__class__:ug});var Fe=function(){this.engine=na.CURRENT;this.time=this.frame=0;this.elapsedTime=1/X.getDefaultFrameRate();this.textures=new nj(this)};p["h3d.impl.RenderContext"]=Fe;Fe.__name__="h3d.impl.RenderContext";Fe.prototype={__class__:Fe};var vg=function(a){this.tmpBounds=new Mb;this.defaultSmooth=!1;this.globalAlpha=1;Fe.call(this);this.scene=a;this.bufPos=0;this.manager=new zc;this.pass=new P("",null);this.pass.depth(!0,
Xb.Always);this.pass.set_culling(Od.None);this.baseShader=new qf;this.baseShader.setPriority(100);this.baseShader.zValue__=0;this.baseShaderList=new Wb(this.baseShader);this.targetsStack=[];this.targetsStackIndex=0;this.filterStack=[]};p["h2d.RenderContext"]=vg;vg.__name__="h2d.RenderContext";vg.__super__=Fe;vg.prototype=J(Fe.prototype,{dispose:function(){this.textures.dispose();null!=this.fixedBuffer&&this.fixedBuffer.dispose()},hasBuffering:function(){return!1},begin:function(){this.currentObj=
this.texture=null;this.curY=this.curX=this.stride=this.bufPos=0;this.targetFlipY=this.engine.driver.hasFeature(Gb.BottomLeftCoords)?-1:1;this.baseFlipY=null!=this.engine.getCurrentTarget()?this.targetFlipY:1;this.inFilter=null;this.curWidth=this.scene.width;this.curHeight=this.scene.height;this.manager.globals.set("time",this.time);var a=this.baseShader;a.constModified=!0;a.pixelAlign__=!1;a=this.baseShader.halfPixelInverse__;a.x=0.5/this.engine.width;a.y=0.5/this.engine.height;a.z=0;a.w=1;a=this.baseShader.viewport__;
a.x=0.5*-this.scene.width;a.y=0.5*-this.scene.height;a.z=2/this.scene.width;a.w=-2*this.baseFlipY/this.scene.height;a=this.baseShader.filterMatrixA__;a.x=1;a.y=0;a.z=0;a.w=1;a=this.baseShader.filterMatrixB__;a.x=0;a.y=1;a.z=0;a.w=1;this.baseShaderList.next=null;this.initShaders(this.baseShaderList);this.engine.selectMaterial(this.pass);this.textures.begin()},allocTarget:function(a,b){null==b&&(b=!1);var c=this.textures.allocTarget(a,this.scene.width,this.scene.height,!1);c.set_filter(b?le.Linear:
le.Nearest);return c},clear:function(a){this.engine.clear(a)},initShaders:function(a){this.currentShaders=a;this.compiledShader=this.manager.compileShaders(a);if(null==this.buffers)this.buffers=new wg(this.compiledShader);else{a=this.buffers;var b=this.compiledShader;a.vertex.grow(b.vertex);a.fragment.grow(b.fragment)}this.manager.fillGlobals(this.buffers,this.compiledShader);this.engine.selectShader(this.compiledShader);this.engine.uploadShaderBuffers(this.buffers,0)},end:function(){this.currentObj=
this.texture=null;this.baseShaderList.next=null;if(0!=this.targetsStackIndex)throw new n("Missing popTarget()");},pushFilter:function(a){if(0==this.filterStack.length&&null!=this.onEnterFilter&&!this.onEnterFilter(a))return!1;this.filterStack.push(a);this.inFilter=a;return!0},popFilter:function(){var a=this.filterStack.pop();if(0<this.filterStack.length)this.inFilter=this.filterStack[this.filterStack.length-1];else if(this.inFilter=null,null!=this.onLeaveFilter)this.onLeaveFilter(a)},pushTarget:function(a,
b,c,d,e){null==e&&(e=-1);null==d&&(d=-1);null==c&&(c=0);null==b&&(b=0);this.engine.pushTarget(a);this.initShaders(this.baseShaderList);0>d&&(d=null==a?this.scene.width:a.width);0>e&&(e=null==a?this.scene.height:a.height);var f=this.baseShader.halfPixelInverse__;f.x=0.5/(null==a?this.engine.width:a.width);f.y=0.5/(null==a?this.engine.height:a.height);f.z=0;f.w=1;f=this.baseShader.viewport__;f.x=0.5*-d-b;f.y=0.5*-e-c;f.z=2/d;f.w=-2*this.targetFlipY/e;this.targetsStackIndex++;this.targetsStackIndex>
this.targetsStack.length?this.targetsStack.push({t:a,x:b,y:c,w:d,h:e,hasRZ:this.hasRenderZone,rzX:this.renderX,rzY:this.renderY,rzW:this.renderW,rzH:this.renderH}):(f=this.targetsStack[this.targetsStackIndex-1],f.t=a,f.x=b,f.y=c,f.w=d,f.h=e,f.hasRZ=this.hasRenderZone,f.rzX=this.renderX,f.rzY=this.renderY,f.rzW=this.renderW,f.rzH=this.renderH);this.curX=b;this.curY=c;this.curWidth=d;this.curHeight=e;this.currentBlend=null;this.hasRenderZone&&(this.hasRenderZone=!1,this.engine.setRenderZone())},popTarget:function(a){null==
a&&(a=!0);if(0>=this.targetsStackIndex)throw new n("Too many popTarget()");var b=this.targetsStack[--this.targetsStackIndex];this.engine.popTarget();if(a){var c=this.targetsStack[this.targetsStackIndex-1];a=null==c?null:c.t;var d=null==c?0:c.x,e=null==c?0:c.y,f=null==c?this.scene.width:c.w,c=null==c?this.scene.height:c.h;this.initShaders(this.baseShaderList);var g=this.baseShader.halfPixelInverse__;g.x=0.5/(null==a?this.engine.width:a.width);g.y=0.5/(null==a?this.engine.height:a.height);g.z=0;g.w=
1;g=this.baseShader.viewport__;g.x=0.5*-f-d;g.y=0.5*-c-e;g.z=2/f;g.w=-2*(null==a?this.baseFlipY:this.targetFlipY)/c;this.curX=d;this.curY=e;this.curWidth=f;this.curHeight=c}b.hasRZ&&this.setRenderZone(b.rzX,b.rzY,b.rzW,b.rzH)},setRenderZone:function(a,b,c,d){this.hasRenderZone=!0;this.renderX=a;this.renderY=b;this.renderW=c;this.renderH=d;var e=this.engine.width/this.scene.width,f=this.engine.height/this.scene.height;if(null!=this.inFilter){var g=this.baseShader.filterMatrixA__,h=this.baseShader.filterMatrixB__;
c=a+c;var k=b+d,l=a*g.x+b*g.y+g.z;d=a*h.x+b*h.y+h.z;g=c*g.x+k*g.y+g.z;h=c*h.x+k*h.y+h.z;a=l;b=d;c=g-l;d=h-d}this.engine.setRenderZone((a-this.curX)*e+1E-10|0,(b-this.curY)*f+1E-10|0,c*e+1E-10|0,d*f+1E-10|0)},clearRenderZone:function(){this.hasRenderZone=!1;this.engine.setRenderZone()},drawLayer:function(a){this.scene.drawLayer(this,a)},drawScene:function(){this.scene.drawRec(this)},flush:function(){},_flush:function(){if(0!=this.bufPos){this.beforeDraw();var a=this.bufPos/this.stride|0,b=new cb(a,
this.stride,[Aa.Quads,Aa.Dynamic,Aa.RawFormat]);b.uploadVector(this.buffer,0,a);a=this.engine;a.renderBuffer(b,a.mem.quadIndexes,2,0,-1);b.dispose();this.bufPos=0;this.texture=null}},beforeDraw:function(){null==this.texture&&(this.texture=V.fromColor(16711935));this.baseShader.texture__=this.texture;this.texture.set_filter((null==this.currentObj.smooth?this.defaultSmooth:this.currentObj.smooth)?le.Linear:le.Nearest);this.texture.set_wrap(this.currentObj.tileWrap&&(null==this.currentObj.filter||null!=
this.inFilter)?xg.Repeat:xg.Clamp);var a=this.currentObj.blendMode;this.inFilter==this.currentObj&&a==Ra.Erase&&(a=Ra.Add);null!=this.inFilterBlend&&(a=this.inFilterBlend);if(a!=this.currentBlend&&(this.currentBlend=a,this.pass.setBlendMode(a),a==Ra.Alpha||a==Ra.Add))this.pass.set_blendAlphaSrc(S.One),null!=this.inFilterBlend&&this.pass.set_blendSrc(S.One);this.manager.fillParams(this.buffers,this.compiledShader,this.currentShaders);this.engine.selectMaterial(this.pass);this.engine.uploadShaderBuffers(this.buffers,
1);this.engine.uploadShaderBuffers(this.buffers,2);this.engine.uploadShaderBuffers(this.buffers,3)},setupColor:function(a){if(this.inFilter==a)a=this.baseShader.color__,a.x=1,a.y=1,a.z=1,a.w=1;else if(null!=this.inFilterBlend){var b=a.color.w*this.globalAlpha,c=this.baseShader.color__;c.x=a.color.x*b;c.y=a.color.y*b;c.z=a.color.z*b;c.w=b}else b=this.baseShader.color__,b.x=a.color.x,b.y=a.color.y,b.z=a.color.z,b.w=a.color.w*this.globalAlpha},beginDrawObject:function(a,b){if(!this.beginDraw(a,b,!0))return!1;
if(this.inFilter==a){var c=this.baseShader.color__;c.x=1;c.y=1;c.z=1;c.w=1}else if(null!=this.inFilterBlend){var c=a.color.w*this.globalAlpha,d=this.baseShader.color__;d.x=a.color.x*c;d.y=a.color.y*c;d.z=a.color.z*c;d.w=c}else c=this.baseShader.color__,c.x=a.color.x,c.y=a.color.y,c.z=a.color.z,c.w=a.color.w*this.globalAlpha;c=this.baseShader.absoluteMatrixA__;c.x=a.matA;c.y=a.matC;c.z=a.absX;c.w=1;c=this.baseShader.absoluteMatrixB__;c.x=a.matB;c.y=a.matD;c.z=a.absY;c.w=1;this.beforeDraw();return!0},
beginDrawBatch:function(a,b){return this.beginDraw(a,b,!1)},drawTile:function(a,b){var c,d,e,f,g,h;if(null!=this.inFilter){var k=this.baseShader.filterMatrixA__,l=this.baseShader.filterMatrixB__;c=a.matA*k.x+a.matB*k.y;d=a.matA*l.x+a.matB*l.y;e=a.matC*k.x+a.matD*k.y;f=a.matC*l.x+a.matD*l.y;g=a.absX*k.x+a.absY*k.y+k.z;h=a.absX*l.x+a.absY*l.y+l.z}else c=a.matA,d=a.matB,e=a.matC,f=a.matD,g=a.absX,h=a.absY;if(0==d&&0==e){var O=a.matA,t=0>O?-O:O,x=a.matD,n=0>x?-x:x,m=1.5*(b.width>b.height?b.width:b.height)*
(t<n?n:t),p=g+(b.dx+0.5*b.width)*c-this.curX,q=h+(b.dy+0.5*b.height)*f-this.curY;if(p<-m||q<-m||p-m>this.curWidth||q-m>this.curHeight)return!1}else{var r=1E20,s=1E20,C=-1E20,F=-1E20,u=b.dx*c+b.dy*e,v=b.dx*d+b.dy*f;u<r&&(r=u);u>C&&(C=u);v<s&&(s=v);v>F&&(F=v);var y=b.width,z=(y+b.dx)*c+b.dy*e,w=(y+b.dx)*d+b.dy*f;z<r&&(r=z);z>C&&(C=z);w<s&&(s=w);w>F&&(F=w);var D=b.height,B=b.dx*c+(D+b.dy)*e,H=b.dx*d+(D+b.dy)*f;B<r&&(r=B);B>C&&(C=B);H<s&&(s=H);H>F&&(F=H);var G=b.width,J=b.height,L=(G+b.dx)*c+(J+b.dy)*
e,K=(G+b.dx)*d+(J+b.dy)*f;L<r&&(r=L);L>C&&(C=L);K<s&&(s=K);K>F&&(F=K);var I=g-this.curX,N=h-this.curY;if(0>I+C||0>N+F||I+r>this.curWidth||N+s>this.curHeight)return!1}if(!this.beginDraw(a,b.innerTex,!0,!0))return!1;if(this.inFilter==a){var M=this.baseShader.color__;M.x=1;M.y=1;M.z=1;M.w=1}else if(null!=this.inFilterBlend){var U=a.color.w*this.globalAlpha,P=this.baseShader.color__;P.x=a.color.x*U;P.y=a.color.y*U;P.z=a.color.z*U;P.w=U}else{var R=this.baseShader.color__;R.x=a.color.x;R.y=a.color.y;R.z=
a.color.z;R.w=a.color.w*this.globalAlpha}var V=this.baseShader.absoluteMatrixA__;V.x=b.width*a.matA;V.y=b.height*a.matC;V.z=a.absX+b.dx*a.matA+b.dy*a.matC;V.w=1;var T=this.baseShader.absoluteMatrixB__;T.x=b.width*a.matB;T.y=b.height*a.matD;T.z=a.absY+b.dx*a.matB+b.dy*a.matD;T.w=1;var Q=this.baseShader.uvPos__;Q.x=b.u;Q.y=b.v;Q.z=b.u2-b.u;Q.w=b.v2-b.v;this.beforeDraw();if(null==this.fixedBuffer||this.fixedBuffer.isDisposed()){this.fixedBuffer=new cb(4,8,[Aa.Quads,Aa.RawFormat]);var A=db._new(0);if(A.pos==
A.array.length){var ea=A.array.length<<1;128>ea&&(ea=128);var W=new Float32Array(ea);W.set(A.array);A.array=W}A.array[A.pos++]=0;if(A.pos==A.array.length){var da=A.array.length<<1;128>da&&(da=128);var S=new Float32Array(da);S.set(A.array);A.array=S}A.array[A.pos++]=0;if(A.pos==A.array.length){var $=A.array.length<<1;128>$&&($=128);var la=new Float32Array($);la.set(A.array);A.array=la}A.array[A.pos++]=0;if(A.pos==A.array.length){var Z=A.array.length<<1;128>Z&&(Z=128);var ga=new Float32Array(Z);ga.set(A.array);
A.array=ga}A.array[A.pos++]=0;if(A.pos==A.array.length){var aa=A.array.length<<1;128>aa&&(aa=128);var na=new Float32Array(aa);na.set(A.array);A.array=na}A.array[A.pos++]=1;if(A.pos==A.array.length){var ic=A.array.length<<1;128>ic&&(ic=128);var Dd=new Float32Array(ic);Dd.set(A.array);A.array=Dd}A.array[A.pos++]=1;if(A.pos==A.array.length){var Y=A.array.length<<1;128>Y&&(Y=128);var ia=new Float32Array(Y);ia.set(A.array);A.array=ia}A.array[A.pos++]=1;if(A.pos==A.array.length){var X=A.array.length<<1;
128>X&&(X=128);var ma=new Float32Array(X);ma.set(A.array);A.array=ma}A.array[A.pos++]=1;if(A.pos==A.array.length){var Vc=A.array.length<<1;128>Vc&&(Vc=128);var fa=new Float32Array(Vc);fa.set(A.array);A.array=fa}A.array[A.pos++]=0;if(A.pos==A.array.length){var oa=A.array.length<<1;128>oa&&(oa=128);var qa=new Float32Array(oa);qa.set(A.array);A.array=qa}A.array[A.pos++]=1;if(A.pos==A.array.length){var ca=A.array.length<<1;128>ca&&(ca=128);var sa=new Float32Array(ca);sa.set(A.array);A.array=sa}A.array[A.pos++]=
0;if(A.pos==A.array.length){var ja=A.array.length<<1;128>ja&&(ja=128);var za=new Float32Array(ja);za.set(A.array);A.array=za}A.array[A.pos++]=1;if(A.pos==A.array.length){var lf=A.array.length<<1;128>lf&&(lf=128);var mf=new Float32Array(lf);mf.set(A.array);A.array=mf}A.array[A.pos++]=1;if(A.pos==A.array.length){var Zc=A.array.length<<1;128>Zc&&(Zc=128);var ha=new Float32Array(Zc);ha.set(A.array);A.array=ha}A.array[A.pos++]=1;if(A.pos==A.array.length){var Ia=A.array.length<<1;128>Ia&&(Ia=128);var ya=
new Float32Array(Ia);ya.set(A.array);A.array=ya}A.array[A.pos++]=1;if(A.pos==A.array.length){var zh=A.array.length<<1;128>zh&&(zh=128);var Fk=new Float32Array(zh);Fk.set(A.array);A.array=Fk}A.array[A.pos++]=1;if(A.pos==A.array.length){var Ba=A.array.length<<1;128>Ba&&(Ba=128);var Ca=new Float32Array(Ba);Ca.set(A.array);A.array=Ca}A.array[A.pos++]=1;if(A.pos==A.array.length){var ud=A.array.length<<1;128>ud&&(ud=128);var ua=new Float32Array(ud);ua.set(A.array);A.array=ua}A.array[A.pos++]=0;if(A.pos==
A.array.length){var La=A.array.length<<1;128>La&&(La=128);var Ma=new Float32Array(La);Ma.set(A.array);A.array=Ma}A.array[A.pos++]=1;if(A.pos==A.array.length){var xa=A.array.length<<1;128>xa&&(xa=128);var Gk=new Float32Array(xa);Gk.set(A.array);A.array=Gk}A.array[A.pos++]=0;if(A.pos==A.array.length){var ta=A.array.length<<1;128>ta&&(ta=128);var gb=new Float32Array(ta);gb.set(A.array);A.array=gb}A.array[A.pos++]=1;if(A.pos==A.array.length){var Se=A.array.length<<1;128>Se&&(Se=128);var Na=new Float32Array(Se);
Na.set(A.array);A.array=Na}A.array[A.pos++]=1;if(A.pos==A.array.length){var ib=A.array.length<<1;128>ib&&(ib=128);var qg=new Float32Array(ib);qg.set(A.array);A.array=qg}A.array[A.pos++]=1;if(A.pos==A.array.length){var Sa=A.array.length<<1;128>Sa&&(Sa=128);var Ah=new Float32Array(Sa);Ah.set(A.array);A.array=Ah}A.array[A.pos++]=1;if(A.pos==A.array.length){var pa=A.array.length<<1;128>pa&&(pa=128);var va=new Float32Array(pa);va.set(A.array);A.array=va}A.array[A.pos++]=1;if(A.pos==A.array.length){var wa=
A.array.length<<1;128>wa&&(wa=128);var Oa=new Float32Array(wa);Oa.set(A.array);A.array=Oa}A.array[A.pos++]=1;if(A.pos==A.array.length){var Qa=A.array.length<<1;128>Qa&&(Qa=128);var Ea=new Float32Array(Qa);Ea.set(A.array);A.array=Ea}A.array[A.pos++]=1;if(A.pos==A.array.length){var Vb=A.array.length<<1;128>Vb&&(Vb=128);var Ta=new Float32Array(Vb);Ta.set(A.array);A.array=Ta}A.array[A.pos++]=1;if(A.pos==A.array.length){var ub=A.array.length<<1;128>ub&&(ub=128);var Fa=new Float32Array(ub);Fa.set(A.array);
A.array=Fa}A.array[A.pos++]=1;if(A.pos==A.array.length){var sb=A.array.length<<1;128>sb&&(sb=128);var ka=new Float32Array(sb);ka.set(A.array);A.array=ka}A.array[A.pos++]=1;if(A.pos==A.array.length){var yb=A.array.length<<1;128>yb&&(yb=128);var ra=new Float32Array(yb);ra.set(A.array);A.array=ra}A.array[A.pos++]=1;if(A.pos==A.array.length){var Lb=A.array.length<<1;128>Lb&&(Lb=128);var Ga=new Float32Array(Lb);Ga.set(A.array);A.array=Ga}A.array[A.pos++]=1;this.fixedBuffer.uploadVector(A,0,4)}var Sd=this.engine;
Sd.renderBuffer(this.fixedBuffer,Sd.mem.quadIndexes,2,0,-1);return!0},beginDraw:function(a,b,c,d){null==d&&(d=!1);if(null!=this.onBeginDraw&&!this.onBeginDraw(a))return!1;for(var e=!1,f=!1,g=a.shaders,h=this.currentShaders.next;null!=g&&null!=h;){var k=g.s,l=h.s,g=g.next,h=h.next,O=l.instance;k!=l&&(f=!0);k.updateConstants(this.manager.globals);k.instance!=O&&(e=!0)}if(null!=g||null!=h||this.baseShader.isRelative__!=c||this.baseShader.hasUVPos__!=d||this.baseShader.killAlpha__!=this.killAlpha)e=!0;
if(e)e=this.baseShader,e.constModified=!0,e.hasUVPos__=d,d=this.baseShader,d.constModified=!0,d.isRelative__=c,c=this.baseShader,c.constModified=!0,c.killAlpha__=this.killAlpha,this.baseShader.updateConstants(this.manager.globals),this.baseShaderList.next=a.shaders,this.initShaders(this.baseShaderList);else if(f){if(this.currentShaders!=this.baseShaderList)throw new n("!");this.currentShaders.next=a.shaders}this.texture=b;this.stride=8;this.currentObj=a;return!0},__class__:vg});var Dh=function(){};
p["hxd.InteractiveScene"]=Dh;Dh.__name__="hxd.InteractiveScene";Dh.prototype={__class__:Dh};var gd=function(){this.zoom=0;zd.call(this,null);var a=na.CURRENT;this.ctx=new vg(this);this.width=a.width;this.height=a.height;this.interactive=[];this.eventListeners=[];this.shapePoint=new vb;this.window=Pa.getInstance();this.posChanged=!0};p["h2d.Scene"]=gd;gd.__name__="h2d.Scene";gd.__interfaces__=[Dh,ig];gd.__super__=zd;gd.prototype=J(zd.prototype,{get_defaultSmooth:function(){return this.ctx.defaultSmooth},
set_defaultSmooth:function(a){return this.ctx.defaultSmooth=a},setEvents:function(a){this.events=a},set_zoom:function(a){var b=na.CURRENT,c=Math.ceil(this.window.get_width()/a),d=Math.ceil(this.window.get_height()/a),e=c*a,f=d*a;(e!=b.width||f!=b.height)&&b.resize(e,f);this.setFixedSize(c,d);return this.zoom=a},get_renderer:function(){return this.ctx},set_renderer:function(a){return this.ctx=a},setFixedSize:function(a,b){this.width=a;this.height=b;this.posChanged=this.fixedSize=!0},checkResize:function(){if(!(this.fixedSize&&
0==this.zoom)){var a=na.CURRENT,b=0==this.zoom?1:this.zoom;if(this.width*b!=a.width||this.height*b!=a.height)this.width=a.width,this.height=a.height,this.posChanged=!0,0!=this.zoom&&this.set_zoom(this.zoom)}},screenXToLocal:function(a){return a*this.width/(this.window.get_width()*this.scaleX)-this.x},screenYToLocal:function(a){return a*this.height/(this.window.get_height()*this.scaleY)-this.y},get_mouseX:function(){return this.window.get_mouseX()*this.width/(this.window.get_width()*this.scaleX)-this.x},
get_mouseY:function(){return this.window.get_mouseY()*this.height/(this.window.get_height()*this.scaleY)-this.y},dispatchListeners:function(a){this.screenToLocal(a);for(var b=0,c=this.eventListeners;b<c.length;){var d=c[b];++b;d(a);if(!a.propagate)break}},isInteractiveVisible:function(a){for(;null!=a;){if(!a.visible)return!1;a=a.parent}return!0},getInteractive:function(a,b){for(var c=a*this.matA+b*this.matB+this.absX,d=a*this.matC+b*this.matD+this.absY,e=this.shapePoint,f=0,g=this.interactive;f<g.length;){var h=
g[f];++f;var k=c-h.absX,l=d-h.absY,O=h.width*h.matA,t=h.width*h.matC,x=t*k+O*l;if(!(0>x)){var n=h.height*h.matB,m=h.height*h.matD,k=n*l+m*k;if(!(0>k)&&(O=O*m-t*n,!(x>=O||k>=O))){t=!0;for(n=h;null!=n;){if(!n.visible){t=!1;break}n=n.parent}if(t){if(null!=h.shape&&(e.x=k/O*h.width+h.shapeX,e.y=x/O*h.height+h.shapeY,!h.shape.contains(e)))continue;return h}}}}return null},screenToLocal:function(a){var b=a.relX*this.width/(this.window.get_width()*this.scaleX)-this.x,c=a.relY*this.height/(this.window.get_height()*
this.scaleY)-this.y,d=b*this.matC+c*this.matD+this.absY;a.relX=b*this.matA+c*this.matB+this.absX;a.relY=d},dispatchEvent:function(a,b){this.screenToLocal(a);var c=a.relX-b.absX,d=a.relY-b.absY,e=b.width*b.matA,f=b.width*b.matC,g=b.height*b.matB,h=b.height*b.matD,k=e*h-f*g;a.relX=(g*d+h*c)/k*b.width;a.relY=(f*c+e*d)/k*b.height;b.handleEvent(a)},handleEvent:function(a,b){this.screenToLocal(a);for(var c=a.relX,d=a.relY,e=null==b?0:this.interactive.indexOf(b)+1,f=this.shapePoint,g=this.interactive.length;e<
g;){var h=e++,h=this.interactive[h];if(null==h)break;var k=c-h.absX,l=d-h.absY;if(null!=h.shape){f.x=(k*h.matD-l*h.matC)*h.invDet+h.shapeX;f.y=(-k*h.matB+l*h.matA)*h.invDet+h.shapeY;if(!h.shape.contains(f))continue;k=f.x-h.shapeX;l=f.y-h.shapeY}else{var O=h.width*h.matA,t=h.width*h.matC,x=t*k+O*l;if(0>x)continue;var n=h.height*h.matB,m=h.height*h.matD,k=n*l+m*k;if(0>k)continue;l=O*m-t*n;if(x>=l||k>=l)continue;k=k/l*h.width;l=x/l*h.height}x=!0;for(O=h;null!=O;){if(!O.visible){x=!1;break}O=O.parent}if(x)if(a.relX=
k,a.relY=l,h.handleEvent(a),a.cancel)a.cancel=!1,a.propagate=!1;else return h}return null},addEventListener:function(a){this.eventListeners.push(a)},removeEventListener:function(a){for(var b=0,c=this.eventListeners;b<c.length;){var d=c[b];++b;if(xa.compareMethods(d,a))return z.remove(this.eventListeners,d),!0}return!1},startDrag:function(a,b,c){var d=this;this.events.startDrag(function(b){d.screenToLocal(b);a(b)},b,c)},stopDrag:function(){this.events.stopDrag()},getFocus:function(){if(null==this.events)return null;
var a=this.events.getFocus();if(null==a)return null;a=a instanceof tg?a:null;return null==a?null:this.interactive[this.interactive.indexOf(a)]},addEventTarget:function(a){for(var b=a,c=0;null!=b;)b=b.parent,++c;for(var b=c,c=0,d=this.interactive.length;c<d;){for(var e=c++,f=a,g=this.interactive[e],h=b,k=g,l=0;null!=k;)k=k.parent,++l;for(var O=l,l=f,k=g;h>O;)f=l,l=l.parent,--h;for(;O>h;)g=k,k=k.parent,--O;for(;l!=k;)f=l,l=l.parent,g=k,k=k.parent;for(var h=-1,O=0,t=l.children.length;O<t;){var x=O++;
if(l.children[x]==f){h=x;break}}f=h;l=-1;h=0;for(O=k.children.length;h<O;)if(t=h++,k.children[t]==g){l=t;break}if(f>l){this.interactive.splice(e,0,a);return}}this.interactive.push(a)},removeEventTarget:function(a,b){null==b&&(b=!1);z.remove(this.interactive,a);if(b&&null!=this.events)this.events.onRemove(a)},dispose:function(){if(this.allocated)this.onRemove();this.ctx.dispose()},setElapsedTime:function(a){this.ctx.elapsedTime=a},drawImplTo:function(a,b){if(0==(b.flags&1<<T.Target._hx_index))throw new n("Can only draw to texture created with Target flag");
var c=0==(b.flags&1<<T.WasCleared._hx_index);this.ctx.engine=na.CURRENT;this.ctx.engine.begin();this.ctx.globalAlpha=this.alpha;this.ctx.begin();this.ctx.pushTarget(b);c&&this.ctx.engine.clear(0);a.drawRec(this.ctx);this.ctx.popTarget()},syncOnly:function(a){var b=na.CURRENT;this.setElapsedTime(a);this.ctx.engine=b;this.ctx.frame++;this.ctx.time+=this.ctx.elapsedTime;this.ctx.globalAlpha=this.alpha;this.sync(this.ctx)},render:function(a){this.ctx.engine=a;this.ctx.frame++;this.ctx.time+=this.ctx.elapsedTime;
this.ctx.globalAlpha=this.alpha;this.sync(this.ctx);0!=this.children.length&&(this.ctx.begin(),this.ctx.drawScene(),this.ctx.end())},sync:function(a){if(!this.allocated)this.onAdd();this.checkResize();zd.prototype.sync.call(this,a)},captureBitmap:function(a){var b=na.CURRENT;null==a&&(a=new V(this.width,this.height,[T.Target]),a=new Ga(a,0,0,this.width,this.height));b.begin();b.setRenderZone(a.x|0,a.y|0,Math.ceil(a.width),Math.ceil(a.height));var c=a.innerTex;b.pushTarget(c);var d=this.width,e=this.height,
f=this.fixedSize;this.setFixedSize(c.width,c.height);this.render(b);b.popTarget();this.width=d;this.height=e;this.fixedSize=f;this.posChanged=!0;b.setRenderZone();b.end();return new jg(a)},__class__:gd});var Ud=M["h2d.Align"]={__ename__:!0,__constructs__:["Left","Right","Center","MultilineRight","MultilineCenter"],Left:{_hx_index:0,__enum__:"h2d.Align",toString:m},Right:{_hx_index:1,__enum__:"h2d.Align",toString:m},Center:{_hx_index:2,__enum__:"h2d.Align",toString:m},MultilineRight:{_hx_index:3,__enum__:"h2d.Align",
toString:m},MultilineCenter:{_hx_index:4,__enum__:"h2d.Align",toString:m}};Ud.__empty_constructs__=[Ud.Left,Ud.Right,Ud.Center,Ud.MultilineRight,Ud.MultilineCenter];var kh=function(a,b){this.constraintWidth=this.realMaxWidth=-1;Wa.call(this,b);this.set_font(a);this.set_textAlign(Ud.Left);this.set_letterSpacing(1);this.set_lineSpacing(0);this.set_text("");this.set_textColor(16777215)};p["h2d.Text"]=kh;kh.__name__="h2d.Text";kh.__super__=Wa;kh.prototype=J(Wa.prototype,{set_font:function(a){if(this.font==
a)return a;this.font=a;if(null!=a){var b=a.type;switch(b._hx_index){case 0:null!=this.sdfShader&&(this.removeShader(this.sdfShader),this.sdfShader=null);break;case 1:var c=b.smoothing,d=b.alphaCutoff,b=b.channel;null==this.sdfShader&&(this.sdfShader=new rf,this.addShader(this.sdfShader));this.sdfShader.alphaCutoff__=d;this.sdfShader.smoothing__=c;c=this.sdfShader;c.constModified=!0;c.channel__=b}}null!=this.glyphs&&(c=this.glyphs,null!=c&&null!=c.parent&&c.parent.removeChild(c));this.glyphs=new ng(null==
a?null:a.tile,this);this.glyphs.set_visible(!1);this.rebuild();return a},set_textAlign:function(a){if(this.textAlign==a)return a;this.textAlign=a;this.rebuild();return a},set_letterSpacing:function(a){if(this.letterSpacing==a)return a;this.letterSpacing=a;this.rebuild();return a},set_lineSpacing:function(a){if(this.lineSpacing==a)return a;this.lineSpacing=a;this.rebuild();return a},constraintSize:function(a,b){this.constraintWidth=a;this.updateConstraint()},onAdd:function(){Wa.prototype.onAdd.call(this);
this.rebuild()},draw:function(a){if(null==this.glyphs)this.emitTile(a,Ga.fromColor(16711935,16,16));else{!this.calcDone&&(null!=this.text&&null!=this.font)&&this.initGlyphs(this.text);if(null!=this.dropShadow){var b=this.absX,c=this.absY;this.absX+=this.dropShadow.dx*this.matA+this.dropShadow.dy*this.matC;this.absY+=this.dropShadow.dx*this.matB+this.dropShadow.dy*this.matD;var d=this.color.x,e=this.color.y,f=this.color.z,g=this.color.w,h=this.color,k=this.dropShadow.color;h.x=(k>>16&255)/255;h.y=
(k>>8&255)/255;h.z=(k&255)/255;h.w=(k>>>24)/255;this.color.w=this.dropShadow.alpha*g;this.glyphs.drawWith(a,this);this.absX=b;this.absY=c;b=this.color;b.x=d;b.y=e;b.z=f;b.w=g}this.glyphs.drawWith(a,this)}},set_text:function(a){a=null==a?"null":a;if(a==this.text)return a;this.text=a;this.rebuild();return a},rebuild:function(){this.calcDone=!1;this.allocated&&(null!=this.text&&null!=this.font)&&this.initGlyphs(this.text);null!=this.parentContainer&&this.parentContainer.contentChanged(this)},calcTextWidth:function(a){if(this.calcDone){var b=
this.calcWidth,c=this.calcHeight,d=this.calcSizeHeight,e=this.calcXMin,f=this.calcYMin;this.initGlyphs(a,!1);a=this.calcWidth;this.calcWidth=b;this.calcHeight=c;this.calcSizeHeight=d;this.calcXMin=e;this.calcYMin=f;return a}this.initGlyphs(a,!1);this.calcDone=!1;return this.calcWidth},splitText:function(a,b,c){null==c&&(c=0);null==b&&(b=0);if(0>this.realMaxWidth)return a;for(var d=[],e=0,f=b,g=-1,h=0,k=a.length;h<k;){var l=h++,O=z.cca(a,l),t=this.font,x=t.glyphs.h[O];null==x&&(x=t.charset.resolveChar(O,
t.glyphs),null==x&&(x=13==O||10==O?t.nullChar:t.defaultChar));var t=x,x=10==O,n=t.width+t.getKerningOffset(g);if(this.font.charset.isBreakChar(O)){0==d.length&&(0<b&&f>this.realMaxWidth)&&(d.push(""),f-=b);for(var m=f+n+this.letterSpacing,p=l+1,q=a.length,r=!1;m<=this.realMaxWidth&&p<q;){var s=z.cca(a,p++);if(this.font.charset.isSpace(s)||10==s){r=!0;break}var C=this.font,F=C.glyphs.h[s];null==F&&(F=C.charset.resolveChar(s,C.glyphs),null==F&&(F=13==s||10==s?C.nullChar:C.defaultChar));C=F;m+=C.width+
this.letterSpacing+C.getKerningOffset(g);g=s;if(this.font.charset.isBreakChar(s))break}if(m>this.realMaxWidth||!r&&m+c>this.realMaxWidth)x=!0,this.font.charset.isSpace(O)?(d.push(z.substr(a,e,l-e)),t=null):d.push(z.substr(a,e,l+1-e)),e=l+1}null!=t&&(f+=n+this.letterSpacing);x?(f=0,g=-1):g=O}e<a.length&&(0==d.length&&(0<b&&f+c-this.letterSpacing>this.realMaxWidth)&&d.push(""),d.push(z.substr(a,e,a.length-e)));return d.join("\n")},initGlyphs:function(a,b,c,d){null==c&&(c=!0);null==b&&(b=!0);b&&this.glyphs.clear();
var e=0,f=0,g=0,h=0,k=-1,l=c?this.textAlign:Ud.Left;switch(l._hx_index){case 1:case 2:case 3:case 4:d=[];this.initGlyphs(a,!1,!1,d);for(var e=l==Ud.MultilineCenter||l==Ud.MultilineRight?Math.ceil(this.calcWidth):0>this.realMaxWidth?0:Math.ceil(this.realMaxWidth),h=l==Ud.Center||l==Ud.MultilineCenter?1:0,O=0,t=d.length;O<t;){var x=O++;d[x]=e-d[x]>>h}h=e=d.shift()}O=this.font.lineHeight+this.lineSpacing;c=!c&&!b&&null!=d;t=0;a=this.splitText(a);for(var x=0,n=a.length;x<n;){var m=x++,m=z.cca(a,m),p=
this.font,q=p.glyphs.h[m];null==q&&(q=p.charset.resolveChar(m,p.glyphs),null==q&&(q=13==m||10==m?p.nullChar:p.defaultChar));p=q;k=p.getKerningOffset(k);q=p.width+k;if(10==m){e>g&&(g=e);c&&d.push(Math.ceil(e));switch(l._hx_index){case 0:e=0;break;case 1:case 2:case 3:case 4:e=d.shift(),e<h&&(h=e)}f+=O;k=-1}else{if(null!=p){if(b){var r=this.glyphs;r.content.add(e+k,f,r.curColor.x,r.curColor.y,r.curColor.z,r.curColor.w,p.t)}0==f&&p.t.dy<t&&(t=p.t.dy);e+=q+this.letterSpacing}k=m}}c&&d.push(Math.ceil(e));
e>g&&(g=e);this.calcXMin=h;this.calcYMin=t;this.calcWidth=g-h;this.calcHeight=f+this.font.lineHeight;this.calcSizeHeight=f+(0<this.font.baseLine?this.font.baseLine:this.font.lineHeight);this.calcDone=!0},updateSize:function(){this.calcDone||this.initGlyphs(this.text,!1)},get_textHeight:function(){this.calcDone||this.initGlyphs(this.text,!1);return this.calcHeight},get_textWidth:function(){this.calcDone||this.initGlyphs(this.text,!1);return this.calcWidth},set_maxWidth:function(a){if(this.maxWidth==
a)return a;this.maxWidth=a;this.updateConstraint();return a},updateConstraint:function(){var a=this.realMaxWidth;if(null==this.maxWidth)this.realMaxWidth=this.constraintWidth;else if(0>this.constraintWidth)this.realMaxWidth=this.maxWidth;else{var b=this.maxWidth,c=this.constraintWidth;this.realMaxWidth=b>c?c:b}this.realMaxWidth!=a&&this.rebuild()},set_textColor:function(a){if(this.textColor==a)return a;this.textColor=a;var b=this.color.w,c=this.color;c.x=(a>>16&255)/255;c.y=(a>>8&255)/255;c.z=(a&
255)/255;c.w=(a>>>24)/255;this.color.w=b;return a},getBoundsRec:function(a,b,c){Wa.prototype.getBoundsRec.call(this,a,b,c);this.calcDone||this.initGlyphs(this.text,!1);var d,e,f;c?(c=this.calcXMin,d=0,e=this.calcWidth,f=this.calcSizeHeight):(c=0<=this.realMaxWidth?0:this.calcXMin,d=this.calcYMin,e=0<=this.realMaxWidth?this.realMaxWidth:this.calcWidth,f=this.calcHeight-this.calcYMin);this.addBounds(a,b,c,d,e,f)},__class__:kh});var Ga=function(a,b,c,d,e,f,g){null==g&&(g=0);null==f&&(f=0);this.innerTex=
a;this.x=b;this.y=c;this.width=d;this.height=e;this.dx=f;this.dy=g;null!=a&&this.setTexture(a)};p["h2d.Tile"]=Ga;Ga.__name__="h2d.Tile";Ga.fromColor=function(a,b,c,d,e){null==d&&(d=1);null==c&&(c=1);null==b&&(b=1);a=new Ga(V.fromColor(a,d,e),0,0,1,1);a.width=b;a.height=c;return a};Ga.fromBitmap=function(a,b){var c=V.fromBitmap(a,b);return new Ga(c,0,0,a.ctx.canvas.width,a.ctx.canvas.height)};Ga.autoCut=function(a,b,c,d){a.lock();null==c&&(c=b);for(var e=a.getPixel(a.ctx.canvas.width-1,a.ctx.canvas.height-
1),f=[],g=1,h=1;g<a.ctx.canvas.width;)g<<=1;for(;h<a.ctx.canvas.height;)h<<=1;d=new V(g,h,null,null,d);g=0;for(h=a.ctx.canvas.height/c|0;g<h;){var k=g++,l=[];f[k]=l;for(var n=0,t=a.ctx.canvas.width/b|0;n<t;){var x=n++,m=Ga.isEmpty(a,x*b,k*c,b,c,e);if(null==m)break;l.push(new Ga(d,x*b+m.dx,k*c+m.dy,m.w,m.h,m.dx,m.dy))}}a.unlock();b=new Ga(d,0,0,a.ctx.canvas.width,a.ctx.canvas.height);b.upload(a);return{main:b,tiles:f}};Ga.fromTexture=function(a){return new Ga(a,0,0,a.width,a.height)};Ga.fromPixels=
function(a,b){var c=a.makeSquare(!0),d=V.fromPixels(c);c!=a&&c.dispose();return new Ga(d,0,0,a.width,a.height)};Ga.isEmpty=function(a,b,c,d,e,f){for(var g=!0,h=d,k=e,l=0,n=0,t=0;t<d;)for(var x=t++,m=0,p=e;m<p;){var q=m++,r=a.getPixel(x+b,q+c);0==(r&-16777216)?0!=r&&a.setPixel(x+b,q+c,0):(r!=f&&(g=!1,x<h&&(h=x),q<k&&(k=q),x>l&&(l=x),q>n&&(n=q)),r==f&&0!=r&&a.setPixel(x+b,q+c,0))}return g?null:{dx:h,dy:k,w:l-h+1,h:n-k+1}};Ga.prototype={get_ix:function(){return Math.floor(this.x)},get_iy:function(){return Math.floor(this.y)},
get_iwidth:function(){return Math.ceil(this.width+this.x)-Math.floor(this.x)},get_iheight:function(){return Math.ceil(this.height+this.y)-Math.floor(this.y)},getTexture:function(){return this.innerTex},isDisposed:function(){if(null!=this.innerTex){var a=this.innerTex;return null==a.t?null==a.realloc:!1}return!0},setTexture:function(a){this.innerTex=a;null!=a&&(this.u=this.x/a.width,this.v=this.y/a.height,this.u2=(this.x+this.width)/a.width,this.v2=(this.y+this.height)/a.height)},switchTexture:function(a){this.setTexture(a.innerTex)},
sub:function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);return new Ga(this.innerTex,this.x+a,this.y+b,c,d,e,f)},center:function(){return this.sub(0,0,this.width,this.height,-(0.5*this.width),-(0.5*this.height))},setCenterRatio:function(a,b){null==b&&(b=0.5);null==a&&(a=0.5);this.dx=-(a*this.width);this.dy=-(b*this.height)},flipX:function(){var a=this.u;this.u=this.u2;this.u2=a;this.dx=-this.dx-this.width},flipY:function(){var a=this.v;this.v=this.v2;this.v2=a;this.dy=-this.dy-this.height},setPosition:function(a,
b){this.x=a;this.y=b;var c=this.innerTex;null!=c&&(this.u=a/c.width,this.v=b/c.height,this.u2=(a+this.width)/c.width,this.v2=(b+this.height)/c.height)},setSize:function(a,b){this.width=a;this.height=b;var c=this.innerTex;null!=c&&(this.u2=(this.x+a)/c.width,this.v2=(this.y+b)/c.height)},scaleToSize:function(a,b){this.width=a;this.height=b},scrollDiscrete:function(a,b){var c=this.innerTex;this.u+=a/c.width;this.v-=b/c.height;this.u2+=a/c.width;this.v2-=b/c.height;this.x=this.u*c.width;this.y=this.v*
c.height},dispose:function(){null!=this.innerTex&&this.innerTex.dispose();this.innerTex=null},clone:function(){var a=new Ga(null,this.x,this.y,this.width,this.height,this.dx,this.dy);a.innerTex=this.innerTex;a.u=this.u;a.u2=this.u2;a.v=this.v;a.v2=this.v2;return a},split:function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);null==a&&(a=0);var d=[];if(b){0==a&&(a=this.height/this.width|0);b=c?this.height/a:this.height/a|0;for(c=0;c<a;){var e=c++;d.push(this.sub(0,e*b,this.width,b))}}else{0==a&&(a=this.width/
this.height|0);b=c?this.width/a:this.width/a|0;for(c=0;c<a;)e=c++,d.push(this.sub(e*b,0,b,this.height))}return d},gridFlatten:function(a,b,c){null==c&&(c=0);null==b&&(b=0);for(var d=[],e=0,f=this.height/a|0;e<f;)for(var g=e++,h=0,k=this.width/a|0;h<k;){var l=h++;d.push(this.sub(l*a,g*a,a,a,b,c))}return d},grid:function(a,b,c){null==c&&(c=0);null==b&&(b=0);for(var d=[],e=0,f=this.width/a|0;e<f;){for(var g=e++,h=[],k=0,l=this.height/a|0;k<l;){var n=k++;h.push(this.sub(g*a,n*a,a,a,b,c))}d.push(h)}return d},
toString:function(){return"Tile("+this.x+","+this.y+","+this.width+"x"+this.height+(0!=this.dx||0!=this.dy?","+this.dx+":"+this.dy:"")+")"},upload:function(a){this.innerTex.uploadBitmap(a)},__class__:Ga};var Vd=function(){};p["hxd.impl._Serializable.NoSerializeSupport"]=Vd;Vd.__name__="hxd.impl._Serializable.NoSerializeSupport";var Ac=function(){};p["h3d.prim.Primitive"]=Ac;Ac.__name__="h3d.prim.Primitive";Ac.__interfaces__=[Vd];Ac.prototype={triCount:function(){return null!=this.indexes?this.indexes.count/
3|0:null==this.buffer?0:this.buffer.totalVertices()/3|0},vertexCount:function(){return 0},getCollider:function(){throw new n("not implemented for "+r.string(this));},getBounds:function(){throw new n("not implemented for "+r.string(this));},alloc:function(a){throw new n("not implemented");},selectMaterial:function(a){},buildNormalsDisplay:function(){throw new n("not implemented for "+r.string(this));},render:function(a){(null==this.buffer||this.buffer.isDisposed())&&this.alloc(a);null==this.indexes?
0!=(this.buffer.flags&1<<Aa.Quads._hx_index)?a.renderBuffer(this.buffer,a.mem.quadIndexes,2,0,-1):a.renderBuffer(this.buffer,a.mem.triIndexes,3,0,-1):a.renderIndexed(this.buffer,this.indexes)},dispose:function(){null!=this.buffer&&(this.buffer.dispose(),this.buffer=null);null!=this.indexes&&(this.indexes.dispose(),this.indexes=null)},toString:function(){return Ba.getClass(this).__name__.split(".").pop()},__class__:Ac};var Eh=function(){this.clear()};p["h2d._TileGroup.TileLayerContent"]=Eh;Eh.__name__=
"h2d._TileGroup.TileLayerContent";Eh.__super__=Ac;Eh.prototype=J(Ac.prototype,{clear:function(){this.tmp=db._new(0);null!=this.buffer&&this.buffer.dispose();this.buffer=null;this.yMin=this.xMin=Infinity;this.yMax=this.xMax=-Infinity},isEmpty:function(){return 0==this.triCount()},triCount:function(){return null==this.buffer?this.tmp.pos>>4:this.buffer.totalVertices()>>1},addColor:function(a,b,c,d){this.add(a,b,c.x,c.y,c.z,c.w,d)},add:function(a,b,c,d,e,f,g){var h=a+g.dx,k=b+g.dy,l=this.tmp;if(l.pos==
l.array.length){var n=l.array.length<<1;128>n&&(n=128);var t=new Float32Array(n);t.set(l.array);l.array=t}l.array[l.pos++]=h;var x=this.tmp;if(x.pos==x.array.length){var m=x.array.length<<1;128>m&&(m=128);var p=new Float32Array(m);p.set(x.array);x.array=p}x.array[x.pos++]=k;var q=this.tmp,r=g.u;if(q.pos==q.array.length){var s=q.array.length<<1;128>s&&(s=128);var E=new Float32Array(s);E.set(q.array);q.array=E}q.array[q.pos++]=r;var C=this.tmp,F=g.v;if(C.pos==C.array.length){var u=C.array.length<<1;
128>u&&(u=128);var v=new Float32Array(u);v.set(C.array);C.array=v}C.array[C.pos++]=F;var y=this.tmp;if(y.pos==y.array.length){var z=y.array.length<<1;128>z&&(z=128);var w=new Float32Array(z);w.set(y.array);y.array=w}y.array[y.pos++]=c;var B=this.tmp;if(B.pos==B.array.length){var D=B.array.length<<1;128>D&&(D=128);var H=new Float32Array(D);H.set(B.array);B.array=H}B.array[B.pos++]=d;var G=this.tmp;if(G.pos==G.array.length){var J=G.array.length<<1;128>J&&(J=128);var L=new Float32Array(J);L.set(G.array);
G.array=L}G.array[G.pos++]=e;var K=this.tmp;if(K.pos==K.array.length){var I=K.array.length<<1;128>I&&(I=128);var M=new Float32Array(I);M.set(K.array);K.array=M}K.array[K.pos++]=f;var N=this.tmp,U=h+g.width;if(N.pos==N.array.length){var P=N.array.length<<1;128>P&&(P=128);var R=new Float32Array(P);R.set(N.array);N.array=R}N.array[N.pos++]=U;var V=this.tmp;if(V.pos==V.array.length){var T=V.array.length<<1;128>T&&(T=128);var Q=new Float32Array(T);Q.set(V.array);V.array=Q}V.array[V.pos++]=k;var A=this.tmp,
ea=g.u2;if(A.pos==A.array.length){var W=A.array.length<<1;128>W&&(W=128);var da=new Float32Array(W);da.set(A.array);A.array=da}A.array[A.pos++]=ea;var $=this.tmp,S=g.v;if($.pos==$.array.length){var Z=$.array.length<<1;128>Z&&(Z=128);var la=new Float32Array(Z);la.set($.array);$.array=la}$.array[$.pos++]=S;var aa=this.tmp;if(aa.pos==aa.array.length){var ga=aa.array.length<<1;128>ga&&(ga=128);var na=new Float32Array(ga);na.set(aa.array);aa.array=na}aa.array[aa.pos++]=c;var ic=this.tmp;if(ic.pos==ic.array.length){var Y=
ic.array.length<<1;128>Y&&(Y=128);var ia=new Float32Array(Y);ia.set(ic.array);ic.array=ia}ic.array[ic.pos++]=d;var X=this.tmp;if(X.pos==X.array.length){var oa=X.array.length<<1;128>oa&&(oa=128);var ma=new Float32Array(oa);ma.set(X.array);X.array=ma}X.array[X.pos++]=e;var Vc=this.tmp;if(Vc.pos==Vc.array.length){var fa=Vc.array.length<<1;128>fa&&(fa=128);var qa=new Float32Array(fa);qa.set(Vc.array);Vc.array=qa}Vc.array[Vc.pos++]=f;var ca=this.tmp;if(ca.pos==ca.array.length){var Aa=ca.array.length<<
1;128>Aa&&(Aa=128);var sa=new Float32Array(Aa);sa.set(ca.array);ca.array=sa}ca.array[ca.pos++]=h;var ja=this.tmp,za=k+g.height;if(ja.pos==ja.array.length){var lf=ja.array.length<<1;128>lf&&(lf=128);var mf=new Float32Array(lf);mf.set(ja.array);ja.array=mf}ja.array[ja.pos++]=za;var Zc=this.tmp,Ba=g.u;if(Zc.pos==Zc.array.length){var Ia=Zc.array.length<<1;128>Ia&&(Ia=128);var ha=new Float32Array(Ia);ha.set(Zc.array);Zc.array=ha}Zc.array[Zc.pos++]=Ba;var ya=this.tmp,Ca=g.v2;if(ya.pos==ya.array.length){var xa=
ya.array.length<<1;128>xa&&(xa=128);var ua=new Float32Array(xa);ua.set(ya.array);ya.array=ua}ya.array[ya.pos++]=Ca;var ud=this.tmp;if(ud.pos==ud.array.length){var pa=ud.array.length<<1;128>pa&&(pa=128);var La=new Float32Array(pa);La.set(ud.array);ud.array=La}ud.array[ud.pos++]=c;var Ma=this.tmp;if(Ma.pos==Ma.array.length){var Ea=Ma.array.length<<1;128>Ea&&(Ea=128);var Fa=new Float32Array(Ea);Fa.set(Ma.array);Ma.array=Fa}Ma.array[Ma.pos++]=d;var ta=this.tmp;if(ta.pos==ta.array.length){var gb=ta.array.length<<
1;128>gb&&(gb=128);var Se=new Float32Array(gb);Se.set(ta.array);ta.array=Se}ta.array[ta.pos++]=e;var Na=this.tmp;if(Na.pos==Na.array.length){var ib=Na.array.length<<1;128>ib&&(ib=128);var ka=new Float32Array(ib);ka.set(Na.array);Na.array=ka}Na.array[Na.pos++]=f;var Sa=this.tmp,ra=h+g.width;if(Sa.pos==Sa.array.length){var Ga=Sa.array.length<<1;128>Ga&&(Ga=128);var va=new Float32Array(Ga);va.set(Sa.array);Sa.array=va}Sa.array[Sa.pos++]=ra;var wa=this.tmp,Oa=k+g.height;if(wa.pos==wa.array.length){var Qa=
wa.array.length<<1;128>Qa&&(Qa=128);var Za=new Float32Array(Qa);Za.set(wa.array);wa.array=Za}wa.array[wa.pos++]=Oa;var Vb=this.tmp,Ta=g.u2;if(Vb.pos==Vb.array.length){var ub=Vb.array.length<<1;128>ub&&(ub=128);var Ja=new Float32Array(ub);Ja.set(Vb.array);Vb.array=Ja}Vb.array[Vb.pos++]=Ta;var sb=this.tmp,Ra=g.v2;if(sb.pos==sb.array.length){var yb=sb.array.length<<1;128>yb&&(yb=128);var Wa=new Float32Array(yb);Wa.set(sb.array);sb.array=Wa}sb.array[sb.pos++]=Ra;var Lb=this.tmp;if(Lb.pos==Lb.array.length){var eb=
Lb.array.length<<1;128>eb&&(eb=128);var Sd=new Float32Array(eb);Sd.set(Lb.array);Lb.array=Sd}Lb.array[Lb.pos++]=c;var ke=this.tmp;if(ke.pos==ke.array.length){var Xa=ke.array.length<<1;128>Xa&&(Xa=128);var $a=new Float32Array(Xa);$a.set(ke.array);ke.array=$a}ke.array[ke.pos++]=d;var Da=this.tmp;if(Da.pos==Da.array.length){var Ya=Da.array.length<<1;128>Ya&&(Ya=128);var Ha=new Float32Array(Ya);Ha.set(Da.array);Da.array=Ha}Da.array[Da.pos++]=e;var Ed=this.tmp;if(Ed.pos==Ed.array.length){var Td=Ed.array.length<<
1;128>Td&&(Td=128);var bb=new Float32Array(Td);bb.set(Ed.array);Ed.array=bb}Ed.array[Ed.pos++]=f;var vd=a+g.dx,zb=b+g.dy;vd<this.xMin&&(this.xMin=vd);zb<this.yMin&&(this.yMin=zb);vd+=g.width;zb+=g.height;vd>this.xMax&&(this.xMax=vd);zb>this.yMax&&(this.yMax=zb)},addTransform:function(a,b,c,d,e,f,g){var h=Math.cos(e),k=Math.sin(e),l=g.width,n=g.height,t=g.dx*c,x=g.dy*d,m=t*h-x*k+a,p=x*h+t*k+b,q=this.tmp;if(q.pos==q.array.length){var r=q.array.length<<1;128>r&&(r=128);var s=new Float32Array(r);s.set(q.array);
q.array=s}q.array[q.pos++]=m;var E=this.tmp;if(E.pos==E.array.length){var C=E.array.length<<1;128>C&&(C=128);var F=new Float32Array(C);F.set(E.array);E.array=F}E.array[E.pos++]=p;var u=this.tmp,v=g.u;if(u.pos==u.array.length){var y=u.array.length<<1;128>y&&(y=128);var z=new Float32Array(y);z.set(u.array);u.array=z}u.array[u.pos++]=v;var w=this.tmp,B=g.v;if(w.pos==w.array.length){var D=w.array.length<<1;128>D&&(D=128);var H=new Float32Array(D);H.set(w.array);w.array=H}w.array[w.pos++]=B;var G=this.tmp,
K=f.x;if(G.pos==G.array.length){var J=G.array.length<<1;128>J&&(J=128);var L=new Float32Array(J);L.set(G.array);G.array=L}G.array[G.pos++]=K;var I=this.tmp,N=f.y;if(I.pos==I.array.length){var M=I.array.length<<1;128>M&&(M=128);var U=new Float32Array(M);U.set(I.array);I.array=U}I.array[I.pos++]=N;var V=this.tmp,P=f.z;if(V.pos==V.array.length){var R=V.array.length<<1;128>R&&(R=128);var T=new Float32Array(R);T.set(V.array);V.array=T}V.array[V.pos++]=P;var Q=this.tmp,A=f.w;if(Q.pos==Q.array.length){var $=
Q.array.length<<1;128>$&&($=128);var W=new Float32Array($);W.set(Q.array);Q.array=W}Q.array[Q.pos++]=A;m<this.xMin&&(this.xMin=m);p<this.yMin&&(this.yMin=p);m>this.xMax&&(this.xMax=m);p>this.yMax&&(this.yMax=p);var ea=(g.dx+l)*c,da=g.dy*d,S=ea*h-da*k+a,aa=da*h+ea*k+b,Z=this.tmp;if(Z.pos==Z.array.length){var la=Z.array.length<<1;128>la&&(la=128);var ga=new Float32Array(la);ga.set(Z.array);Z.array=ga}Z.array[Z.pos++]=S;var X=this.tmp;if(X.pos==X.array.length){var ic=X.array.length<<1;128>ic&&(ic=128);
var Y=new Float32Array(ic);Y.set(X.array);X.array=Y}X.array[X.pos++]=aa;var na=this.tmp,ca=g.u2;if(na.pos==na.array.length){var ia=na.array.length<<1;128>ia&&(ia=128);var oa=new Float32Array(ia);oa.set(na.array);na.array=oa}na.array[na.pos++]=ca;var Vc=this.tmp,fa=g.v;if(Vc.pos==Vc.array.length){var ja=Vc.array.length<<1;128>ja&&(ja=128);var ma=new Float32Array(ja);ma.set(Vc.array);Vc.array=ma}Vc.array[Vc.pos++]=fa;var qa=this.tmp,Aa=f.x;if(qa.pos==qa.array.length){var ya=qa.array.length<<1;128>ya&&
(ya=128);var sa=new Float32Array(ya);sa.set(qa.array);qa.array=sa}qa.array[qa.pos++]=Aa;var ha=this.tmp,za=f.y;if(ha.pos==ha.array.length){var Zc=ha.array.length<<1;128>Zc&&(Zc=128);var Ba=new Float32Array(Zc);Ba.set(ha.array);ha.array=Ba}ha.array[ha.pos++]=za;var Ia=this.tmp,xa=f.z;if(Ia.pos==Ia.array.length){var Ca=Ia.array.length<<1;128>Ca&&(Ca=128);var pa=new Float32Array(Ca);pa.set(Ia.array);Ia.array=pa}Ia.array[Ia.pos++]=xa;var ua=this.tmp,Ea=f.w;if(ua.pos==ua.array.length){var ud=ua.array.length<<
1;128>ud&&(ud=128);var Fa=new Float32Array(ud);Fa.set(ua.array);ua.array=Fa}ua.array[ua.pos++]=Ea;S<this.xMin&&(this.xMin=S);aa<this.yMin&&(this.yMin=aa);S>this.xMax&&(this.xMax=S);aa>this.yMax&&(this.yMax=aa);var La=g.dx*c,Ma=(g.dy+n)*d,ka=La*h-Ma*k+a,Ga=Ma*h+La*k+b,ta=this.tmp;if(ta.pos==ta.array.length){var gb=ta.array.length<<1;128>gb&&(gb=128);var ra=new Float32Array(gb);ra.set(ta.array);ta.array=ra}ta.array[ta.pos++]=ka;var Na=this.tmp;if(Na.pos==Na.array.length){var ib=Na.array.length<<1;128>
ib&&(ib=128);var Da=new Float32Array(ib);Da.set(Na.array);Na.array=Da}Na.array[Na.pos++]=Ga;var Sa=this.tmp,Za=g.u;if(Sa.pos==Sa.array.length){var Ja=Sa.array.length<<1;128>Ja&&(Ja=128);var va=new Float32Array(Ja);va.set(Sa.array);Sa.array=va}Sa.array[Sa.pos++]=Za;var wa=this.tmp,Oa=g.v2;if(wa.pos==wa.array.length){var Qa=wa.array.length<<1;128>Qa&&(Qa=128);var Wa=new Float32Array(Qa);Wa.set(wa.array);wa.array=Wa}wa.array[wa.pos++]=Oa;var Vb=this.tmp,Ta=f.x;if(Vb.pos==Vb.array.length){var ub=Vb.array.length<<
1;128>ub&&(ub=128);var eb=new Float32Array(ub);eb.set(Vb.array);Vb.array=eb}Vb.array[Vb.pos++]=Ta;var sb=this.tmp,Xa=f.y;if(sb.pos==sb.array.length){var yb=sb.array.length<<1;128>yb&&(yb=128);var Ra=new Float32Array(yb);Ra.set(sb.array);sb.array=Ra}sb.array[sb.pos++]=Xa;var Lb=this.tmp,$a=f.z;if(Lb.pos==Lb.array.length){var Sd=Lb.array.length<<1;128>Sd&&(Sd=128);var Ya=new Float32Array(Sd);Ya.set(Lb.array);Lb.array=Ya}Lb.array[Lb.pos++]=$a;var Ha=this.tmp,bb=f.w;if(Ha.pos==Ha.array.length){var Db=
Ha.array.length<<1;128>Db&&(Db=128);var Eb=new Float32Array(Db);Eb.set(Ha.array);Ha.array=Eb}Ha.array[Ha.pos++]=bb;ka<this.xMin&&(this.xMin=ka);Ga<this.yMin&&(this.yMin=Ga);ka>this.xMax&&(this.xMax=ka);Ga>this.yMax&&(this.yMax=Ga);var wb=(g.dx+l)*c,Ed=(g.dy+n)*d,Td=wb*h-Ed*k+a,xb=Ed*h+wb*k+b,vd=this.tmp;if(vd.pos==vd.array.length){var zb=vd.array.length<<1;128>zb&&(zb=128);var Ib=new Float32Array(zb);Ib.set(vd.array);vd.array=Ib}vd.array[vd.pos++]=Td;var Ka=this.tmp;if(Ka.pos==Ka.array.length){var Gb=
Ka.array.length<<1;128>Gb&&(Gb=128);var Sb=new Float32Array(Gb);Sb.set(Ka.array);Ka.array=Sb}Ka.array[Ka.pos++]=xb;var Pa=this.tmp,fb=g.u2;if(Pa.pos==Pa.array.length){var Cb=Pa.array.length<<1;128>Cb&&(Cb=128);var jb=new Float32Array(Cb);jb.set(Pa.array);Pa.array=jb}Pa.array[Pa.pos++]=fb;var cb=this.tmp,lb=g.v2;if(cb.pos==cb.array.length){var mb=cb.array.length<<1;128>mb&&(mb=128);var Fb=new Float32Array(mb);Fb.set(cb.array);cb.array=Fb}cb.array[cb.pos++]=lb;var ec=this.tmp,Rb=f.x;if(ec.pos==ec.array.length){var tb=
ec.array.length<<1;128>tb&&(tb=128);var Qb=new Float32Array(tb);Qb.set(ec.array);ec.array=Qb}ec.array[ec.pos++]=Rb;var Zb=this.tmp,nb=f.y;if(Zb.pos==Zb.array.length){var vb=Zb.array.length<<1;128>vb&&(vb=128);var Pb=new Float32Array(vb);Pb.set(Zb.array);Zb.array=Pb}Zb.array[Zb.pos++]=nb;var db=this.tmp,Hb=f.z;if(db.pos==db.array.length){var Kb=db.array.length<<1;128>Kb&&(Kb=128);var Bb=new Float32Array(Kb);Bb.set(db.array);db.array=Bb}db.array[db.pos++]=Hb;var ab=this.tmp,Wb=f.w;if(ab.pos==ab.array.length){var Ub=
ab.array.length<<1;128>Ub&&(Ub=128);var Ua=new Float32Array(Ub);Ua.set(ab.array);ab.array=Ua}ab.array[ab.pos++]=Wb;Td<this.xMin&&(this.xMin=Td);xb<this.yMin&&(this.yMin=xb);Td>this.xMax&&(this.xMax=Td);xb>this.yMax&&(this.yMax=xb)},addPoint:function(a,b,c){var d=this.tmp;if(d.pos==d.array.length){var e=d.array.length<<1;128>e&&(e=128);e=new Float32Array(e);e.set(d.array);d.array=e}d.array[d.pos++]=a;d=this.tmp;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),
d.array=e);d.array[d.pos++]=b;d=this.tmp;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=0;d=this.tmp;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=0;d=this.tmp;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=(c>>16&255)/255;d=this.tmp;d.pos==d.array.length&&(e=d.array.length<<
1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=(c>>8&255)/255;d=this.tmp;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=(c&255)/255;d=this.tmp;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=(c>>>24)/255;a<this.xMin&&(this.xMin=a);b<this.yMin&&(this.yMin=b);a>this.xMax&&(this.xMax=a);b>this.yMax&&(this.yMax=b)},
insertColor:function(a){var b=this.tmp;if(b.pos==b.array.length){var c=b.array.length<<1;128>c&&(c=128);c=new Float32Array(c);c.set(b.array);b.array=c}b.array[b.pos++]=(a>>16&255)/255;b=this.tmp;b.pos==b.array.length&&(c=b.array.length<<1,128>c&&(c=128),c=new Float32Array(c),c.set(b.array),b.array=c);b.array[b.pos++]=(a>>8&255)/255;b=this.tmp;b.pos==b.array.length&&(c=b.array.length<<1,128>c&&(c=128),c=new Float32Array(c),c.set(b.array),b.array=c);b.array[b.pos++]=(a&255)/255;b=this.tmp;b.pos==b.array.length&&
(c=b.array.length<<1,128>c&&(c=128),c=new Float32Array(c),c.set(b.array),b.array=c);b.array[b.pos++]=(a>>>24)/255},rectColor:function(a,b,c,d,e){var f=this.tmp;if(f.pos==f.array.length){var g=f.array.length<<1;128>g&&(g=128);var h=new Float32Array(g);h.set(f.array);f.array=h}f.array[f.pos++]=a;var k=this.tmp;if(k.pos==k.array.length){var l=k.array.length<<1;128>l&&(l=128);var n=new Float32Array(l);n.set(k.array);k.array=n}k.array[k.pos++]=b;var t=this.tmp;if(t.pos==t.array.length){var x=t.array.length<<
1;128>x&&(x=128);var m=new Float32Array(x);m.set(t.array);t.array=m}t.array[t.pos++]=0;var p=this.tmp;if(p.pos==p.array.length){var q=p.array.length<<1;128>q&&(q=128);var r=new Float32Array(q);r.set(p.array);p.array=r}p.array[p.pos++]=0;var s=this.tmp;if(s.pos==s.array.length){var E=s.array.length<<1;128>E&&(E=128);var C=new Float32Array(E);C.set(s.array);s.array=C}s.array[s.pos++]=(e>>16&255)/255;var F=this.tmp;if(F.pos==F.array.length){var u=F.array.length<<1;128>u&&(u=128);var v=new Float32Array(u);
v.set(F.array);F.array=v}F.array[F.pos++]=(e>>8&255)/255;var y=this.tmp;if(y.pos==y.array.length){var w=y.array.length<<1;128>w&&(w=128);var z=new Float32Array(w);z.set(y.array);y.array=z}y.array[y.pos++]=(e&255)/255;var B=this.tmp;if(B.pos==B.array.length){var D=B.array.length<<1;128>D&&(D=128);var G=new Float32Array(D);G.set(B.array);B.array=G}B.array[B.pos++]=(e>>>24)/255;var H=this.tmp;if(H.pos==H.array.length){var K=H.array.length<<1;128>K&&(K=128);var J=new Float32Array(K);J.set(H.array);H.array=
J}H.array[H.pos++]=a+c;var I=this.tmp;if(I.pos==I.array.length){var L=I.array.length<<1;128>L&&(L=128);var N=new Float32Array(L);N.set(I.array);I.array=N}I.array[I.pos++]=b;var M=this.tmp;if(M.pos==M.array.length){var V=M.array.length<<1;128>V&&(V=128);var U=new Float32Array(V);U.set(M.array);M.array=U}M.array[M.pos++]=1;var R=this.tmp;if(R.pos==R.array.length){var P=R.array.length<<1;128>P&&(P=128);var Q=new Float32Array(P);Q.set(R.array);R.array=Q}R.array[R.pos++]=0;var T=this.tmp;if(T.pos==T.array.length){var A=
T.array.length<<1;128>A&&(A=128);var $=new Float32Array(A);$.set(T.array);T.array=$}T.array[T.pos++]=(e>>16&255)/255;var W=this.tmp;if(W.pos==W.array.length){var ea=W.array.length<<1;128>ea&&(ea=128);var da=new Float32Array(ea);da.set(W.array);W.array=da}W.array[W.pos++]=(e>>8&255)/255;var S=this.tmp;if(S.pos==S.array.length){var aa=S.array.length<<1;128>aa&&(aa=128);var Z=new Float32Array(aa);Z.set(S.array);S.array=Z}S.array[S.pos++]=(e&255)/255;var X=this.tmp;if(X.pos==X.array.length){var na=X.array.length<<
1;128>na&&(na=128);var la=new Float32Array(na);la.set(X.array);X.array=la}X.array[X.pos++]=(e>>>24)/255;var ic=this.tmp;if(ic.pos==ic.array.length){var ga=ic.array.length<<1;128>ga&&(ga=128);var Y=new Float32Array(ga);Y.set(ic.array);ic.array=Y}ic.array[ic.pos++]=a;var qa=this.tmp;if(qa.pos==qa.array.length){var ia=qa.array.length<<1;128>ia&&(ia=128);var ca=new Float32Array(ia);ca.set(qa.array);qa.array=ca}qa.array[qa.pos++]=b+d;var ja=this.tmp;if(ja.pos==ja.array.length){var oa=ja.array.length<<
1;128>oa&&(oa=128);var ma=new Float32Array(oa);ma.set(ja.array);ja.array=ma}ja.array[ja.pos++]=0;var fa=this.tmp;if(fa.pos==fa.array.length){var ya=fa.array.length<<1;128>ya&&(ya=128);var Aa=new Float32Array(ya);Aa.set(fa.array);fa.array=Aa}fa.array[fa.pos++]=1;var ha=this.tmp;if(ha.pos==ha.array.length){var sa=ha.array.length<<1;128>sa&&(sa=128);var ua=new Float32Array(sa);ua.set(ha.array);ha.array=ua}ha.array[ha.pos++]=(e>>16&255)/255;var Ba=this.tmp;if(Ba.pos==Ba.array.length){var Ca=Ba.array.length<<
1;128>Ca&&(Ca=128);var za=new Float32Array(Ca);za.set(Ba.array);Ba.array=za}Ba.array[Ba.pos++]=(e>>8&255)/255;var Ia=this.tmp;if(Ia.pos==Ia.array.length){var xa=Ia.array.length<<1;128>xa&&(xa=128);var pa=new Float32Array(xa);pa.set(Ia.array);Ia.array=pa}Ia.array[Ia.pos++]=(e&255)/255;var ka=this.tmp;if(ka.pos==ka.array.length){var Ga=ka.array.length<<1;128>Ga&&(Ga=128);var Ea=new Float32Array(Ga);Ea.set(ka.array);ka.array=Ea}ka.array[ka.pos++]=(e>>>24)/255;var Fa=this.tmp;if(Fa.pos==Fa.array.length){var ra=
Fa.array.length<<1;128>ra&&(ra=128);var La=new Float32Array(ra);La.set(Fa.array);Fa.array=La}Fa.array[Fa.pos++]=a+c;var Ma=this.tmp;if(Ma.pos==Ma.array.length){var Da=Ma.array.length<<1;128>Da&&(Da=128);var Ha=new Float32Array(Da);Ha.set(Ma.array);Ma.array=Ha}Ma.array[Ma.pos++]=b+d;var ta=this.tmp;if(ta.pos==ta.array.length){var gb=ta.array.length<<1;128>gb&&(gb=128);var Ja=new Float32Array(gb);Ja.set(ta.array);ta.array=Ja}ta.array[ta.pos++]=1;var Na=this.tmp;if(Na.pos==Na.array.length){var ib=Na.array.length<<
1;128>ib&&(ib=128);var Za=new Float32Array(ib);Za.set(Na.array);Na.array=Za}Na.array[Na.pos++]=1;var Sa=this.tmp;if(Sa.pos==Sa.array.length){var Wa=Sa.array.length<<1;128>Wa&&(Wa=128);var eb=new Float32Array(Wa);eb.set(Sa.array);Sa.array=eb}Sa.array[Sa.pos++]=(e>>16&255)/255;var va=this.tmp;if(va.pos==va.array.length){var wa=va.array.length<<1;128>wa&&(wa=128);var Oa=new Float32Array(wa);Oa.set(va.array);va.array=Oa}va.array[va.pos++]=(e>>8&255)/255;var Qa=this.tmp;if(Qa.pos==Qa.array.length){var Ra=
Qa.array.length<<1;128>Ra&&(Ra=128);var Vb=new Float32Array(Ra);Vb.set(Qa.array);Qa.array=Vb}Qa.array[Qa.pos++]=(e&255)/255;var Ta=this.tmp;if(Ta.pos==Ta.array.length){var ub=Ta.array.length<<1;128>ub&&(ub=128);var Xa=new Float32Array(ub);Xa.set(Ta.array);Ta.array=Xa}Ta.array[Ta.pos++]=(e>>>24)/255;a<this.xMin&&(this.xMin=a);b<this.yMin&&(this.yMin=b);a+=c;b+=d;a>this.xMax&&(this.xMax=a);b>this.yMax&&(this.yMax=b)},rectGradient:function(a,b,c,d,e,f,g,h){var k=this.tmp;if(k.pos==k.array.length){var l=
k.array.length<<1;128>l&&(l=128);var n=new Float32Array(l);n.set(k.array);k.array=n}k.array[k.pos++]=a;var t=this.tmp;if(t.pos==t.array.length){var x=t.array.length<<1;128>x&&(x=128);var m=new Float32Array(x);m.set(t.array);t.array=m}t.array[t.pos++]=b;var p=this.tmp;if(p.pos==p.array.length){var q=p.array.length<<1;128>q&&(q=128);var r=new Float32Array(q);r.set(p.array);p.array=r}p.array[p.pos++]=0;var s=this.tmp;if(s.pos==s.array.length){var E=s.array.length<<1;128>E&&(E=128);var C=new Float32Array(E);
C.set(s.array);s.array=C}s.array[s.pos++]=0;var F=this.tmp;if(F.pos==F.array.length){var u=F.array.length<<1;128>u&&(u=128);var v=new Float32Array(u);v.set(F.array);F.array=v}F.array[F.pos++]=(e>>16&255)/255;var y=this.tmp;if(y.pos==y.array.length){var w=y.array.length<<1;128>w&&(w=128);var z=new Float32Array(w);z.set(y.array);y.array=z}y.array[y.pos++]=(e>>8&255)/255;var B=this.tmp;if(B.pos==B.array.length){var D=B.array.length<<1;128>D&&(D=128);var H=new Float32Array(D);H.set(B.array);B.array=H}B.array[B.pos++]=
(e&255)/255;var G=this.tmp;if(G.pos==G.array.length){var I=G.array.length<<1;128>I&&(I=128);var K=new Float32Array(I);K.set(G.array);G.array=K}G.array[G.pos++]=(e>>>24)/255;var J=this.tmp;if(J.pos==J.array.length){var L=J.array.length<<1;128>L&&(L=128);var M=new Float32Array(L);M.set(J.array);J.array=M}J.array[J.pos++]=a+c;var N=this.tmp;if(N.pos==N.array.length){var V=N.array.length<<1;128>V&&(V=128);var R=new Float32Array(V);R.set(N.array);N.array=R}N.array[N.pos++]=b;var U=this.tmp;if(U.pos==U.array.length){var T=
U.array.length<<1;128>T&&(T=128);var P=new Float32Array(T);P.set(U.array);U.array=P}U.array[U.pos++]=1;var Q=this.tmp;if(Q.pos==Q.array.length){var A=Q.array.length<<1;128>A&&(A=128);var W=new Float32Array(A);W.set(Q.array);Q.array=W}Q.array[Q.pos++]=0;var S=this.tmp;if(S.pos==S.array.length){var $=S.array.length<<1;128>$&&($=128);var ea=new Float32Array($);ea.set(S.array);S.array=ea}S.array[S.pos++]=(f>>16&255)/255;var X=this.tmp;if(X.pos==X.array.length){var da=X.array.length<<1;128>da&&(da=128);
var aa=new Float32Array(da);aa.set(X.array);X.array=aa}X.array[X.pos++]=(f>>8&255)/255;var Z=this.tmp;if(Z.pos==Z.array.length){var na=Z.array.length<<1;128>na&&(na=128);var qa=new Float32Array(na);qa.set(Z.array);Z.array=qa}Z.array[Z.pos++]=(f&255)/255;var la=this.tmp;if(la.pos==la.array.length){var ga=la.array.length<<1;128>ga&&(ga=128);var ja=new Float32Array(ga);ja.set(la.array);la.array=ja}la.array[la.pos++]=(f>>>24)/255;var Y=this.tmp;if(Y.pos==Y.array.length){var fa=Y.array.length<<1;128>fa&&
(fa=128);var ia=new Float32Array(fa);ia.set(Y.array);Y.array=ia}Y.array[Y.pos++]=a;var ha=this.tmp;if(ha.pos==ha.array.length){var oa=ha.array.length<<1;128>oa&&(oa=128);var ca=new Float32Array(oa);ca.set(ha.array);ha.array=ca}ha.array[ha.pos++]=b+d;var ma=this.tmp;if(ma.pos==ma.array.length){var ya=ma.array.length<<1;128>ya&&(ya=128);var Aa=new Float32Array(ya);Aa.set(ma.array);ma.array=Aa}ma.array[ma.pos++]=0;var sa=this.tmp;if(sa.pos==sa.array.length){var Ba=sa.array.length<<1;128>Ba&&(Ba=128);
var ua=new Float32Array(Ba);ua.set(sa.array);sa.array=ua}sa.array[sa.pos++]=1;var ka=this.tmp;if(ka.pos==ka.array.length){var Fa=ka.array.length<<1;128>Fa&&(Fa=128);var Ca=new Float32Array(Fa);Ca.set(ka.array);ka.array=Ca}ka.array[ka.pos++]=(g>>16&255)/255;var Ia=this.tmp;if(Ia.pos==Ia.array.length){var xa=Ia.array.length<<1;128>xa&&(xa=128);var za=new Float32Array(xa);za.set(Ia.array);Ia.array=za}Ia.array[Ia.pos++]=(g>>8&255)/255;var Ga=this.tmp;if(Ga.pos==Ga.array.length){var pa=Ga.array.length<<
1;128>pa&&(pa=128);var Ea=new Float32Array(pa);Ea.set(Ga.array);Ga.array=Ea}Ga.array[Ga.pos++]=(g&255)/255;var ra=this.tmp;if(ra.pos==ra.array.length){var Da=ra.array.length<<1;128>Da&&(Da=128);var La=new Float32Array(Da);La.set(ra.array);ra.array=La}ra.array[ra.pos++]=(g>>>24)/255;var Ma=this.tmp;if(Ma.pos==Ma.array.length){var Ha=Ma.array.length<<1;128>Ha&&(Ha=128);var Ja=new Float32Array(Ha);Ja.set(Ma.array);Ma.array=Ja}Ma.array[Ma.pos++]=a+c;var ta=this.tmp;if(ta.pos==ta.array.length){var gb=
ta.array.length<<1;128>gb&&(gb=128);var Wa=new Float32Array(gb);Wa.set(ta.array);ta.array=Wa}ta.array[ta.pos++]=b+d;var Na=this.tmp;if(Na.pos==Na.array.length){var ib=Na.array.length<<1;128>ib&&(ib=128);var Za=new Float32Array(ib);Za.set(Na.array);Na.array=Za}Na.array[Na.pos++]=1;var Sa=this.tmp;if(Sa.pos==Sa.array.length){var Ra=Sa.array.length<<1;128>Ra&&(Ra=128);var eb=new Float32Array(Ra);eb.set(Sa.array);Sa.array=eb}Sa.array[Sa.pos++]=0;var va=this.tmp;if(va.pos==va.array.length){var wa=va.array.length<<
1;128>wa&&(wa=128);var Oa=new Float32Array(wa);Oa.set(va.array);va.array=Oa}va.array[va.pos++]=(h>>16&255)/255;var Qa=this.tmp;if(Qa.pos==Qa.array.length){var Xa=Qa.array.length<<1;128>Xa&&(Xa=128);var Vb=new Float32Array(Xa);Vb.set(Qa.array);Qa.array=Vb}Qa.array[Qa.pos++]=(h>>8&255)/255;var Ta=this.tmp;if(Ta.pos==Ta.array.length){var ub=Ta.array.length<<1;128>ub&&(ub=128);var Ya=new Float32Array(ub);Ya.set(Ta.array);Ta.array=Ya}Ta.array[Ta.pos++]=(h&255)/255;var sb=this.tmp;if(sb.pos==sb.array.length){var Ka=
sb.array.length<<1;128>Ka&&(Ka=128);var yb=new Float32Array(Ka);yb.set(sb.array);sb.array=yb}sb.array[sb.pos++]=(h>>>24)/255;a<this.xMin&&(this.xMin=a);b<this.yMin&&(this.yMin=b);a+=c;b+=d;a>this.xMax&&(this.xMax=a);b>this.yMax&&(this.yMax=b)},fillArc:function(a,b,c,d,e,f){if(!(f<=e)){var g=f-e,h=Math.ceil(6.28*c/4);4>h&&(h=4);for(var g=g/h,k=-Infinity,l=-Infinity,n=0,t=0,x=0;x<h;)t=e+x*g,n=a+Math.cos(t)*c,t=b+Math.sin(t)*c,-Infinity!=k&&(this.addPoint(a,b,d),this.addPoint(n,t,d),this.addPoint(k,
l,d),this.addPoint(k,l,d)),k=n,l=t,++x;n=a+Math.cos(f)*c;t=b+Math.sin(f)*c;this.addPoint(a,b,d);this.addPoint(n,t,d);this.addPoint(k,l,d);this.addPoint(k,l,d)}},fillCircle:function(a,b,c,d){var e=Math.ceil(6.28*c/2);3>e&&(e=3);for(var f=2*Math.PI/e,g=-Infinity,h=-Infinity,k=-Infinity,l=-Infinity,n=0,t=0,x=0;x<e;)t=x++*f,n=a+Math.cos(t)*c,t=b+Math.sin(t)*c,-Infinity!=g&&(this.addPoint(a,b,d),this.addPoint(n,t,d),this.addPoint(g,h,d),this.addPoint(a,b,d)),-Infinity==k&&(k=n,l=t),g=n,h=t;this.addPoint(a,
b,d);this.addPoint(n,t,d);this.addPoint(k,l,d);this.addPoint(a,b,d)},circle:function(a,b,c,d,e){if(!(d>c)){var f=Math.ceil(6.28*c/2);3>f&&(f=3);d=c-d;for(var g=2*Math.PI/f,h=-Infinity,k=-Infinity,l=-Infinity,n=-Infinity,t=0;t<f;){var x=t++*g,m=a+Math.cos(x)*c,p=b+Math.sin(x)*c,q=a+Math.cos(x)*d,x=b+Math.sin(x)*d;-Infinity!=h&&(this.addPoint(m,p,e),this.addPoint(h,k,e),this.addPoint(q,x,e),this.addPoint(l,n,e));h=m;k=p;l=q;n=x}}},arc:function(a,b,c,d,e,f,g){if(!(d>c)&&!(f<=e)){var h=f-e,k=Math.ceil(6.28*
c/4);3>k&&(k=3);d=c-d;for(var h=h/k,l=-Infinity,n=-Infinity,t=-Infinity,x=-Infinity,m=0,p=0,q=0,r=0,s=0;s<k;)m=s++,r=e+m*h,m=a+Math.cos(r)*c,p=b+Math.sin(r)*c,q=a+Math.cos(r)*d,r=b+Math.sin(r)*d,-Infinity!=l&&(this.addPoint(m,p,g),this.addPoint(l,n,g),this.addPoint(q,r,g),this.addPoint(t,x,g)),l=m,n=p,t=q,x=r;m=a+Math.cos(f)*c;p=b+Math.sin(f)*c;q=a+Math.cos(f)*d;r=b+Math.sin(f)*d;this.addPoint(m,p,g);this.addPoint(l,n,g);this.addPoint(q,r,g);this.addPoint(t,x,g)}},alloc:function(a){null==this.tmp&&
this.clear();0<this.tmp.pos&&(this.buffer=cb.ofFloats(this.tmp,8,[Aa.Quads,Aa.RawFormat]))},flush:function(){(null==this.buffer||this.buffer.isDisposed())&&this.alloc(na.CURRENT)},doRender:function(a,b,c){(null==this.buffer||this.buffer.isDisposed())&&this.alloc(na.CURRENT);null!=this.buffer&&a.renderBuffer(this.buffer,a.mem.quadIndexes,2,b,c)},__class__:Eh});var ng=function(a,b){Wa.call(this,b);this.tile=a;this.rangeMin=this.rangeMax=-1;this.curColor=new U(1,1,1,1);this.content=new Eh};p["h2d.TileGroup"]=
ng;ng.__name__="h2d.TileGroup";ng.__super__=Wa;ng.prototype=J(Wa.prototype,{getBoundsRec:function(a,b,c){Wa.prototype.getBoundsRec.call(this,a,b,c);this.addBounds(a,b,this.content.xMin,this.content.yMin,this.content.xMax-this.content.xMin,this.content.yMax-this.content.yMin)},clear:function(){this.content.clear()},invalidate:function(){this.content.dispose()},count:function(){return this.content.triCount()>>1},onRemove:function(){this.content.dispose();Wa.prototype.onRemove.call(this)},setDefaultColor:function(a,
b){null==b&&(b=1);this.curColor.x=(a>>16&255)/255;this.curColor.y=(a>>8&255)/255;this.curColor.z=(a&255)/255;this.curColor.w=b},add:function(a,b,c){this.content.add(a,b,this.curColor.x,this.curColor.y,this.curColor.z,this.curColor.w,c)},addColor:function(a,b,c,d,e,f,g){this.content.add(a,b,c,d,e,f,g)},addAlpha:function(a,b,c,d){this.content.add(a,b,this.curColor.x,this.curColor.y,this.curColor.z,c,d)},addTransform:function(a,b,c,d,e,f){this.content.addTransform(a,b,c,d,e,this.curColor,f)},draw:function(a){this.drawWith(a,
this)},sync:function(a){Wa.prototype.sync.call(this,a);a=this.content;(null==a.buffer||a.buffer.isDisposed())&&a.alloc(na.CURRENT)},drawWith:function(a,b){var c=this.content.triCount();if(0!=c&&a.beginDrawObject(b,this.tile.innerTex)){var d=0>this.rangeMin?0:2*this.rangeMin;0<this.rangeMax&&this.rangeMax<2*c&&(c=2*this.rangeMax);this.content.doRender(a.engine,d,c-d)}},__class__:ng});var Mb=function(){this.yMin=this.xMin=1E20;this.yMax=this.xMax=-1E20};p["h2d.col.Bounds"]=Mb;Mb.__name__="h2d.col.Bounds";
Mb.fromValues=function(a,b,c,d){var e=new Mb;e.xMin=a;e.yMin=b;e.xMax=a+c;e.yMax=b+d;return e};Mb.fromPoints=function(a,b){var c=new Mb;c.xMin=a.x;c.yMin=a.y;c.xMax=b.x;c.yMax=b.y;return c};Mb.prototype={toIBounds:function(a){null==a&&(a=1);var b=Math.floor(this.xMin*a),c=Math.floor(this.yMin*a),d=Math.ceil(this.xMax*a)-b;a=Math.ceil(this.yMax*a)-c;var e=new Ge;e.xMin=b;e.yMin=c;e.xMax=b+d;e.yMax=c+a;return e},intersects:function(a){return!(this.xMin>a.xMax||this.yMin>a.yMax||this.xMax<a.xMin||this.yMax<
a.yMin)},contains:function(a){return a.x>=this.xMin&&a.x<this.xMax&&a.y>=this.yMin?a.y<this.yMax:!1},addBounds:function(a){a.xMin<this.xMin&&(this.xMin=a.xMin);a.xMax>this.xMax&&(this.xMax=a.xMax);a.yMin<this.yMin&&(this.yMin=a.yMin);a.yMax>this.yMax&&(this.yMax=a.yMax)},addPoint:function(a){a.x<this.xMin&&(this.xMin=a.x);a.x>this.xMax&&(this.xMax=a.x);a.y<this.yMin&&(this.yMin=a.y);a.y>this.yMax&&(this.yMax=a.y)},addPos:function(a,b){a<this.xMin&&(this.xMin=a);a>this.xMax&&(this.xMax=a);b<this.yMin&&
(this.yMin=b);b>this.yMax&&(this.yMax=b)},set:function(a,b,c,d){this.xMin=a;this.yMin=b;this.xMax=a+c;this.yMax=b+d},setMin:function(a){this.xMin=a.x;this.yMin=a.y},setMax:function(a){this.xMax=a.x;this.yMax=a.y},doIntersect:function(a){var b=this.xMin,c=a.xMin;this.xMin=b<c?c:b;b=this.yMin;c=a.yMin;this.yMin=b<c?c:b;b=this.xMax;c=a.xMax;this.xMax=b>c?c:b;b=this.yMax;a=a.yMax;this.yMax=b>a?a:b},doUnion:function(a){var b=this.xMin,c=a.xMin;this.xMin=b>c?c:b;b=this.yMin;c=a.yMin;this.yMin=b>c?c:b;b=
this.xMax;c=a.xMax;this.xMax=b<c?c:b;b=this.yMax;a=a.yMax;this.yMax=b<a?a:b},intersection:function(a){var b=new Mb,c=this.xMin,d=a.xMin;b.xMin=c<d?d:c;c=this.yMin;d=a.yMin;b.yMin=c<d?d:c;c=this.xMax;d=a.xMax;b.xMax=c>d?d:c;c=this.yMax;a=a.yMax;b.yMax=c>a?a:c;b.xMax<b.xMin&&(b.xMax=b.xMin);b.yMax<b.yMin&&(b.yMax=b.yMin);return b},union:function(a){var b=new Mb,c=this.xMin,d=a.xMin;b.xMin=c>d?d:c;c=this.yMin;d=a.yMin;b.yMin=c>d?d:c;c=this.xMax;d=a.xMax;b.xMax=c<d?d:c;c=this.yMax;a=a.yMax;b.yMax=c<a?
a:c;return b},load:function(a){this.xMin=a.xMin;this.yMin=a.yMin;this.xMax=a.xMax;this.yMax=a.yMax},scalePivot:function(a){this.xMin*=a;this.yMin*=a;this.xMax*=a;this.yMax*=a},scaleCenter:function(a){var b=0.5*(this.xMax-this.xMin)*a;a*=0.5*(this.yMax-this.yMin);var c=0.5*(this.xMax+this.xMin),d=0.5*(this.yMax+this.yMin);this.xMin=c-b;this.yMin=d-a;this.xMax=c+b;this.yMax=d+a},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.xMin,d=this.yMin,e=this.xMax,f=this.yMax;this.yMin=this.xMin=
1E20;this.yMax=this.xMax=-1E20;var g=c*b-d*a,h=c*a+d*b;g<this.xMin&&(this.xMin=g);g>this.xMax&&(this.xMax=g);h<this.yMin&&(this.yMin=h);h>this.yMax&&(this.yMax=h);g=e*b-d*a;d=e*a+d*b;g<this.xMin&&(this.xMin=g);g>this.xMax&&(this.xMax=g);d<this.yMin&&(this.yMin=d);d>this.yMax&&(this.yMax=d);d=c*b-f*a;c=c*a+f*b;d<this.xMin&&(this.xMin=d);d>this.xMax&&(this.xMax=d);c<this.yMin&&(this.yMin=c);c>this.yMax&&(this.yMax=c);c=e*b-f*a;b=e*a+f*b;c<this.xMin&&(this.xMin=c);c>this.xMax&&(this.xMax=c);b<this.yMin&&
(this.yMin=b);b>this.yMax&&(this.yMax=b)},offset:function(a,b){this.xMin+=a;this.xMax+=a;this.yMin+=b;this.yMax+=b},getMin:function(){return new vb(this.xMin,this.yMin)},getCenter:function(){return new vb(0.5*(this.xMin+this.xMax),0.5*(this.yMin+this.yMax))},getSize:function(){return new vb(this.xMax-this.xMin,this.yMax-this.yMin)},getMax:function(){return new vb(this.xMax,this.yMax)},isEmpty:function(){return this.xMax<=this.xMin?!0:this.yMax<=this.yMin},empty:function(){this.yMin=this.xMin=1E20;
this.yMax=this.xMax=-1E20},all:function(){this.yMin=this.xMin=-1E20;this.yMax=this.xMax=1E20},clone:function(){var a=new Mb;a.xMin=this.xMin;a.yMin=this.yMin;a.xMax=this.xMax;a.yMax=this.yMax;return a},get_x:function(){return this.xMin},get_y:function(){return this.yMin},set_x:function(a){this.xMax+=a-this.xMin;return this.xMin=a},set_y:function(a){this.yMax+=a-this.yMin;return this.yMin=a},get_width:function(){return this.xMax-this.xMin},get_height:function(){return this.yMax-this.yMin},set_width:function(a){this.xMax=
this.xMin+a;return a},set_height:function(a){this.yMax=this.yMin+a;return a},toString:function(){return"{"+r.string(new vb(this.xMin,this.yMin))+","+r.string(new vb(this.xMax-this.xMin,this.yMax-this.yMin))+"}"},__class__:Mb};var Ik=function(){};p["h2d.col.Collider"]=Ik;Ik.__name__="h2d.col.Collider";Ik.prototype={__class__:Ik};var Ge=function(){this.yMin=this.xMin=2147483647;this.yMax=this.xMax=-2147483648};p["h2d.col.IBounds"]=Ge;Ge.__name__="h2d.col.IBounds";Ge.fromValues=function(a,b,c,d){var e=
new Ge;e.xMin=a;e.yMin=b;e.xMax=a+c;e.yMax=b+d;return e};Ge.fromPoints=function(a,b){var c=new Ge;c.xMin=a.x;c.yMin=a.y;c.xMax=b.x;c.yMax=b.y;return c};Ge.prototype={toBounds:function(a){null==a&&(a=1);var b=this.xMin*a,c=this.yMin*a,d=(this.xMax-this.xMin)*a;a*=this.yMax-this.yMin;var e=new Mb;e.xMin=b;e.yMin=c;e.xMax=b+d;e.yMax=c+a;return e},intersects:function(a){return!(this.xMin>a.xMax||this.yMin>a.yMax||this.xMax<a.xMin||this.yMax<a.yMin)},contains:function(a){return a.x>=this.xMin&&a.x<this.xMax&&
a.y>=this.yMin?a.y<this.yMax:!1},addBounds:function(a){a.xMin<this.xMin&&(this.xMin=a.xMin);a.xMax>this.xMax&&(this.xMax=a.xMax);a.yMin<this.yMin&&(this.yMin=a.yMin);a.yMax>this.yMax&&(this.yMax=a.yMax)},addPoint:function(a){a.x<this.xMin&&(this.xMin=a.x);a.x>this.xMax&&(this.xMax=a.x);a.y<this.yMin&&(this.yMin=a.y);a.y>this.yMax&&(this.yMax=a.y)},addPos:function(a,b){a<this.xMin&&(this.xMin=a);a>this.xMax&&(this.xMax=a);b<this.yMin&&(this.yMin=b);b>this.yMax&&(this.yMax=b)},set:function(a,b,c,d){this.xMin=
a;this.yMin=b;this.xMax=a+c;this.yMax=b+d},setMin:function(a){this.xMin=a.x;this.yMin=a.y},setMax:function(a){this.xMax=a.x;this.yMax=a.y},doIntersect:function(a){var b=this.xMin,c=a.xMin;this.xMin=b<c?c:b;b=this.yMin;c=a.yMin;this.yMin=b<c?c:b;b=this.xMax;c=a.xMax;this.xMax=b>c?c:b;b=this.yMax;a=a.yMax;this.yMax=b>a?a:b},doUnion:function(a){var b=this.xMin,c=a.xMin;this.xMin=b>c?c:b;b=this.yMin;c=a.yMin;this.yMin=b>c?c:b;b=this.xMax;c=a.xMax;this.xMax=b<c?c:b;b=this.yMax;a=a.yMax;this.yMax=b<a?a:
b},intersection:function(a){var b=new Mb,c=this.xMin,d=a.xMin;b.xMin=c<d?d:c;c=this.yMin;d=a.yMin;b.yMin=c<d?d:c;c=this.xMax;d=a.xMax;b.xMax=c>d?d:c;c=this.yMax;a=a.yMax;b.yMax=c>a?a:c;b.xMax<b.xMin&&(b.xMax=b.xMin);b.yMax<b.yMin&&(b.yMax=b.yMin);return b},union:function(a){var b=new Mb,c=this.xMin,d=a.xMin;b.xMin=c>d?d:c;c=this.yMin;d=a.yMin;b.yMin=c>d?d:c;c=this.xMax;d=a.xMax;b.xMax=c<d?d:c;c=this.yMax;a=a.yMax;b.yMax=c<a?a:c;return b},load:function(a){this.xMin=a.xMin;this.yMin=a.yMin;this.xMax=
a.xMax;this.yMax=a.yMax},offset:function(a,b){this.xMin+=a;this.xMax+=a;this.yMin+=b;this.yMax+=b},getMin:function(){return new Wd(this.xMin,this.yMin)},getCenter:function(){return new Wd(this.xMin+this.xMax>>1,this.yMin+this.yMax>>1)},getSize:function(){return new Wd(this.xMax-this.xMin,this.yMax-this.yMin)},getMax:function(){return new Wd(this.xMax,this.yMax)},isEmpty:function(){return this.xMax>this.xMin?this.yMax<=this.yMin:!0},empty:function(){this.yMin=this.xMin=2147483647;this.yMax=this.xMax=
-2147483648},all:function(){this.yMin=this.xMin=-2147483648;this.yMax=this.xMax=2147483647},clone:function(){var a=new Ge;a.xMin=this.xMin;a.yMin=this.yMin;a.xMax=this.xMax;a.yMax=this.yMax;return a},get_x:function(){return this.xMin},get_y:function(){return this.yMin},set_x:function(a){this.xMax+=a-this.xMin;return this.xMin=a},set_y:function(a){this.yMax+=a-this.yMin;return this.yMin=a},get_width:function(){return this.xMax-this.xMin},get_height:function(){return this.yMax-this.yMin},set_width:function(a){this.xMax=
this.xMin+a;return a},set_height:function(a){this.yMax=this.yMin+a;return a},toString:function(){return"{"+r.string(new Wd(this.xMin,this.yMin))+","+r.string(new Wd(this.xMax-this.xMin,this.yMax-this.yMin))+"}"},__class__:Ge};var Wd=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};p["h2d.col.IPoint"]=Wd;Wd.__name__="h2d.col.IPoint";Wd.prototype={toPoint:function(a){null==a&&(a=1);return new vb(this.x*a,this.y*a)},distanceSq:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},distance:function(a){var b=
this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)},toString:function(){return"{"+this.x+","+this.y+"}"},sub:function(a){return new vb(this.x-a.x,this.y-a.y)},add:function(a){return new vb(this.x+a.x,this.y+a.y)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set:function(a,b){this.x=a;this.y=b},clone:function(){return new Wd(this.x,this.y)},__class__:Wd};var sf=function(){this.a=
1;this.c=this.b=0;this.d=1;this.y=this.x=0};p["h2d.col.Matrix"]=sf;sf.__name__="h2d.col.Matrix";sf.prototype={identity:function(){this.a=1;this.c=this.b=0;this.d=1;this.y=this.x=0},initTranslate:function(a,b){this.a=1;this.c=this.b=0;this.d=1;this.x=a;this.y=b},initScale:function(a,b){this.a=a;this.c=this.b=0;this.d=b;this.y=this.x=0},initRotate:function(a){var b=Math.cos(a);a=Math.sin(a);this.a=b;this.b=a;this.c=-a;this.d=b;this.y=this.x=0},invert:function(){this.inverse(this)},getDeterminant:function(){return this.a*
this.d-this.b*this.c},inverse:function(a){var b=a.a,c=a.b,d=a.c,e=a.d,f=a.x;a=a.y;var g=1/(this.a*this.d-this.b*this.c);this.a=e*g;this.b=-c*g;this.c=-d*g;this.d=b*g;this.x=(-f*e+d*a)*g;this.y=(f*c-b*a)*g},transform:function(a){return new vb(a.x*this.a+a.y*this.c+this.x,a.x*this.b+a.y*this.d+this.y)},translate:function(a,b){this.x+=a;this.y+=b},prependTranslate:function(a,b){this.x+=this.a*a+this.c*b;this.y+=this.b*a+this.d*b},multiply:function(a,b){var c=a.a,d=a.b,e=a.c,f=a.d,g=a.x,h=a.y,k=b.a,l=
b.b,n=b.c,t=b.d,x=b.x,m=b.y;this.a=c*k+d*n;this.b=c*l+d*t;this.c=e*k+f*n;this.d=e*l+f*t;this.x=g*k+h*n+x;this.y=g*l+h*t+m},scale:function(a,b){this.a*=a;this.c*=a;this.x*=a;this.b*=b;this.d*=b;this.y*=b},rotate:function(a){var b=sf.tmp,c=Math.cos(a);a=Math.sin(a);b.a=c;b.b=a;b.c=-a;b.d=c;b.x=0;b.y=0;this.multiply(this,sf.tmp)},toString:function(){return"MAT=[\n  [ "+I.fmt(this.a)+", "+I.fmt(this.b)+" ]\n  [ "+I.fmt(this.c)+", "+I.fmt(this.d)+" ]\n  [ "+I.fmt(this.x)+", "+I.fmt(this.y)+" ]\n]"},__class__:sf};
var vb=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};p["h2d.col.Point"]=vb;vb.__name__="h2d.col.Point";vb.prototype={toIPoint:function(a){null==a&&(a=1);return new Wd(Math.round(this.x*a),Math.round(this.y*a))},distanceSq:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},distance:function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)},toString:function(){return"{"+I.fmt(this.x)+","+I.fmt(this.y)+"}"},sub:function(a){return new vb(this.x-a.x,this.y-a.y)},add:function(a){return new vb(this.x+
a.x,this.y+a.y)},dot:function(a){return this.x*a.x+this.y*a.y},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.x*a+this.y*b;this.x=this.x*b-this.y*a;this.y=c},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var a=this.x*this.x+this.y*this.y,a=1E-10>a?0:1/Math.sqrt(a);this.x*=a;this.y*=a},normalizeFast:function(){var a=this.x*this.x+this.y*this.y,a=1/Math.sqrt(a);this.x*=a;this.y*=a},set:function(a,
b){this.x=a;this.y=b},load:function(a){this.x=a.x;this.y=a.y},scale:function(a){this.x*=a;this.y*=a;return this},clone:function(){return new vb(this.x,this.y)},__class__:vb};var Jk=function(){this.enable=!0;this.smooth=!1;this.boundsExtend=0;this.autoBounds=!0};p["h2d.filter.Filter"]=Jk;Jk.__name__="h2d.filter.Filter";Jk.prototype={get_enable:function(){return this.enable},set_enable:function(a){return this.enable=a},sync:function(a,b){},bind:function(a){},unbind:function(a){},getBounds:function(a,
b){a.getBounds(a,b);b.xMin-=this.boundsExtend;b.yMin-=this.boundsExtend;b.xMax+=this.boundsExtend;b.yMax+=this.boundsExtend},draw:function(a,b){return b},__class__:Jk};var Aa=M["h3d.BufferFlag"]={__ename__:!0,__constructs__:"Dynamic Triangles Quads Managed RawFormat NoAlloc UniformBuffer".split(" "),Dynamic:{_hx_index:0,__enum__:"h3d.BufferFlag",toString:m},Triangles:{_hx_index:1,__enum__:"h3d.BufferFlag",toString:m},Quads:{_hx_index:2,__enum__:"h3d.BufferFlag",toString:m},Managed:{_hx_index:3,__enum__:"h3d.BufferFlag",
toString:m},RawFormat:{_hx_index:4,__enum__:"h3d.BufferFlag",toString:m},NoAlloc:{_hx_index:5,__enum__:"h3d.BufferFlag",toString:m},UniformBuffer:{_hx_index:6,__enum__:"h3d.BufferFlag",toString:m}};Aa.__empty_constructs__=[Aa.Dynamic,Aa.Triangles,Aa.Quads,Aa.Managed,Aa.RawFormat,Aa.NoAlloc,Aa.UniformBuffer];var cb=function(a,b,c,d){this.id=cb.GUID++;this.vertices=a;this.flags=0;if(null!=c)for(a=0;a<c.length;)d=c[a],++a,this.flags|=1<<d._hx_index;0==(this.flags&1<<Aa.NoAlloc._hx_index)&&na.CURRENT.mem.allocBuffer(this,
b)};p["h3d.Buffer"]=cb;cb.__name__="h3d.Buffer";cb.ofFloats=function(a,b,c,d){var e=a.pos/b|0;b=new cb(e,b,c,d);b.uploadVector(a,0,e);return b};cb.ofSubFloats=function(a,b,c,d,e){b=new cb(c,b,d,e);b.uploadVector(a,0,c);return b};cb.prototype={isDisposed:function(){return null!=this.buffer?null==this.buffer.vbuf:!0},dispose:function(){null!=this.buffer&&(this.buffer.freeBuffer(this),this.buffer=null,null!=this.next&&this.next.dispose())},totalVertices:function(){for(var a=0,b=this;null!=b;)a+=b.vertices,
b=b.next;return a},uploadVector:function(a,b,c,d){null==d&&(d=0);for(var e=this;null!=e&&d>=e.vertices;)d-=e.vertices,e=e.next;for(;0<c;){if(null==e)throw new n("Too many vertices");var f=c+d>e.vertices?e.vertices-d:c;e.buffer.uploadVertexBuffer(e.position+d,f,a,b);d=0;b+=f*this.buffer.stride;c-=f;e=e.next}},uploadBytes:function(a,b,c){for(var d=this;0<c;){if(null==d)throw new n("Too many vertices");var e=c>d.vertices?d.vertices:c;d.buffer.uploadVertexBytes(d.position,e,a,b);b+=4*e*this.buffer.stride;
c-=e;d=d.next}},readBytes:function(a,b,c,d){null==d&&(d=0);for(var e=this;null!=e&&d>=e.vertices;)d-=e.vertices,e=e.next;for(;0<c;){if(null==e)throw new n("Too many vertices");var f=c+d>e.vertices?e.vertices-d:c;e.buffer.readVertexBytes(e.position+d,f,a,b);d=0;b+=4*f*this.buffer.stride;c-=f;e=e.next}},__class__:cb};var yg=function(a,b){this.buffer=a;this.offset=b};p["h3d.BufferOffset"]=yg;yg.__name__="h3d.BufferOffset";yg.prototype={clone:function(){return new yg(this.buffer,this.offset)},dispose:function(){null!=
this.buffer&&(this.buffer.dispose(),this.buffer=null);this.next=null},__class__:yg};var zg=function(a,b,c,d,e,f){null==f&&(f=!1);null==e&&(e=4E3);null==d&&(d=0.02);null==c&&(c=1.333333);null==b&&(b=1);null==a&&(a=25);this.viewX=this.viewY=0;this.fovY=a;this.zoom=b;this.screenRatio=c;this.zNear=d;this.zFar=e;this.rightHanded=f;this.pos=new U(2,3,4);this.up=new U(0,0,1);this.target=new U(0,0,0);this.m=new R;this.mcam=new R;this.mproj=new R;this.frustum=new oj;this.update()};p["h3d.Camera"]=zg;zg.__name__=
"h3d.Camera";zg.prototype={setFovX:function(a,b){var c=Math.PI/180;this.fovY=2*Math.atan(Math.tan(0.5*a*c)/b)/c},getFovX:function(){var a=Math.PI/180;return 2*Math.atan(Math.tan(0.5*this.fovY*a)*this.screenRatio)/a},clone:function(){var a=new zg(this.fovY,this.zoom,this.screenRatio,this.zNear,this.zFar,this.rightHanded),b=this.pos;a.pos=new U(b.x,b.y,b.z,b.w);b=this.up;a.up=new U(b.x,b.y,b.z,b.w);b=this.target;a.target=new U(b.x,b.y,b.z,b.w);a.update();return a},getInverseViewProj:function(){null==
this.minv&&(this.minv=new R);this.needInv&&(this.minv.initInverse(this.m),this.needInv=!1);return this.minv},getInverseView:function(){null==this.miview&&(this.miview=new R,this.miview._44=0);0==this.miview._44&&this.miview.initInverse(this.mcam);return this.miview},setCubeMap:function(a,b){var c=0,d=0,e=0;switch(a){case 0:var c=1,f=this.up;f.x=0;f.y=1;f.z=0;f.w=1;break;case 1:c=-1;f=this.up;f.x=0;f.y=1;f.z=0;f.w=1;break;case 2:d=1;f=this.up;f.x=0;f.y=0;f.z=-1;f.w=1;break;case 3:d=-1;f=this.up;f.x=
0;f.y=0;f.z=1;f.w=1;break;case 4:e=1;f=this.up;f.x=0;f.y=1;f.z=0;f.w=1;break;case 5:e=-1,f=this.up,f.x=0,f.y=1,f.z=0,f.w=1}null!=b&&(f=this.pos,f.x=b.x,f.y=b.y,f.z=b.z,f.w=b.w);f=this.target;f.x=this.pos.x+c;f.y=this.pos.y+d;f.z=this.pos.z+e;f.w=1},unproject:function(a,b,c){a=new U(a,b,c);b=this.getInverseViewProj();c=a.x*b._12+a.y*b._22+a.z*b._32+a.w*b._42;var d=a.x*b._13+a.y*b._23+a.z*b._33+a.w*b._43,e=1/(a.x*b._14+a.y*b._24+a.z*b._34+a.w*b._44);a.x=(a.x*b._11+a.y*b._21+a.z*b._31+a.w*b._41)*e;a.y=
c*e;a.z=d*e;a.w=1;return a},rayFromScreen:function(a,b){var c=na.CURRENT,d=2*(a/c.width-0.5),e=2*(0.5-b/c.height),f=this.unproject(d,e,0),c=f.x,g=f.y,f=f.z,h=this.unproject(d,e,1),d=h.x,e=h.y,h=h.z,k=new Xd;k.px=c;k.py=g;k.pz=f;k.lx=d-c;k.ly=e-g;k.lz=h-f;k.normalize();return k},update:function(){if(null!=this.follow){var a=this.pos;a.x=0;a.y=0;a.z=0;a.w=1;a=this.target;a.x=0;a.y=0;a.z=0;a.w=1;this.follow.pos.localToGlobal(this.pos);this.follow.target.localToGlobal(this.target);if(null!=this.follow.pos.name)for(a=
this.follow.pos;null!=a;){if(null!=a.currentAnimation){var b=a.currentAnimation.getPropValue(this.follow.pos.name,"FOVY");if(null!=b){this.fovY=b;break}}a=a.parent}}this.makeCameraMatrix(this.mcam);this.makeFrustumMatrix(this.mproj);this.m.multiply(this.mcam,this.mproj);this.needInv=!0;null!=this.miview&&(this.miview._44=0);this.frustum.loadMatrix(this.m)},getFrustumCorners:function(){return[this.unproject(-1,1,0),this.unproject(1,1,0),this.unproject(1,-1,0),this.unproject(-1,-1,0),this.unproject(-1,
1,1),this.unproject(1,1,1),this.unproject(1,-1,1),this.unproject(-1,-1,1)]},lostUp:function(){var a=this.pos,a=new U(a.x,a.y,a.z,a.w);a.normalize();var b=this.up;return 0.999<Math.abs(a.x*b.x+a.y*b.y+a.z*b.z)},movePosAxis:function(a,b,c){null==c&&(c=0);var d=this.mcam,e=a*d._12+b*d._22+c*d._32+1*d._42,f=a*d._13+b*d._23+c*d._33+1*d._43,g=1/(a*d._14+b*d._24+c*d._34+1*d._44);a=(a*d._11+b*d._21+c*d._31+1*d._41)*g;this.pos.x+=a;this.pos.y+=e*g;this.pos.z+=f*g},moveTargetAxis:function(a,b,c){null==c&&(c=
0);var d=this.mcam,e=a*d._12+b*d._22+c*d._32+1*d._42,f=a*d._13+b*d._23+c*d._33+1*d._43,g=1/(a*d._14+b*d._24+c*d._34+1*d._44);a=(a*d._11+b*d._21+c*d._31+1*d._41)*g;this.target.x+=a;this.target.y+=e*g;this.target.z+=f*g},forward:function(a){null==a&&(a=1);a=1-0.025*a;var b=this.pos;b.x=this.target.x+(this.pos.x-this.target.x)*a;b.y=this.target.y+(this.pos.y-this.target.y)*a;b.z=this.target.z+(this.pos.z-this.target.z)*a;b.w=1},backward:function(a){null==a&&(a=1);a=1+0.025*a;var b=this.pos;b.x=this.target.x+
(this.pos.x-this.target.x)*a;b.y=this.target.y+(this.pos.y-this.target.y)*a;b.z=this.target.z+(this.pos.z-this.target.z)*a;b.w=1},makeCameraMatrix:function(a){var b=this.target,c=this.pos,d=b.x-c.x,e=b.y-c.y,b=b.z-c.z;this.rightHanded&&(d*=-1,e*=-1,b*=-1);var c=1/Math.sqrt(d*d+e*e+b*b),d=d*c,e=e*c,b=b*c,f=this.up,c=f.y*b-f.z*e,g=f.z*d-f.x*b,f=f.x*e-f.y*d,h=1/Math.sqrt(c*c+g*g+f*f),c=c*h,g=g*h,f=f*h;0==Math.sqrt(c*c+g*g+f*f)&&(c=e,g=b,f=d);var h=e*f-b*g,k=b*c-d*f,l=d*g-e*c;a._11=c;a._12=h;a._13=d;
a._14=0;a._21=g;a._22=k;a._23=e;a._24=0;a._31=f;a._32=l;a._33=b;a._34=0;var n=this.pos;a._41=-(c*n.x+g*n.y+f*n.z);c=this.pos;a._42=-(h*c.x+k*c.y+l*c.z);c=this.pos;a._43=-(d*c.x+e*c.y+b*c.z);a._44=1},makeFrustumMatrix:function(a){a.zero();var b=this.orthoBounds;if(null!=b){var c=1/(b.xMax-b.xMin),d=1/(b.yMax-b.yMin),e=1/(b.zMax-b.zMin);a._11=2*c;a._22=2*d;a._33=e;a._41=-(b.xMin+b.xMax)*c;a._42=-(b.yMin+b.yMax)*d;a._43=-b.zMin*e;a._44=1}else b=Math.atan(Math.tan(0.5*this.fovY*(Math.PI/180))*this.screenRatio),
b=this.zoom/Math.tan(b),a._11=b,a._22=b*this.screenRatio,a._33=this.zFar/(this.zFar-this.zNear),a._34=1,a._43=-(this.zNear*this.zFar)/(this.zFar-this.zNear);a._11+=this.viewX*a._14;a._21+=this.viewX*a._24;a._31+=this.viewX*a._34;a._41+=this.viewX*a._44;a._12+=this.viewY*a._14;a._22+=this.viewY*a._24;a._32+=this.viewY*a._34;a._42+=this.viewY*a._44;this.rightHanded&&(a._33*=-1,a._34*=-1)},project:function(a,b,c,d,e,f){null==f&&(f=!0);a=new U(a,b,c);b=this.m;c=a.x*b._12+a.y*b._22+a.z*b._32+a.w*b._42;
var g=a.x*b._13+a.y*b._23+a.z*b._33+a.w*b._43,h=1/(a.x*b._14+a.y*b._24+a.z*b._34+a.w*b._44);a.x=(a.x*b._11+a.y*b._21+a.z*b._31+a.w*b._41)*h;a.y=c*h;a.z=g*h;a.w=1;a.x=0.5*(a.x+1)*d;a.y=0.5*(-a.y+1)*e;f&&(a.x=Math.round(a.x),a.y=Math.round(a.y));return a},load:function(a){var b=this.pos,c=a.pos;b.x=c.x;b.y=c.y;b.z=c.z;b.w=c.w;b=this.target;c=a.target;b.x=c.x;b.y=c.y;b.z=c.z;b.w=c.w;b=this.up;c=a.up;b.x=c.x;b.y=c.y;b.z=c.z;b.w=c.w;null!=a.orthoBounds?(this.orthoBounds=new tb,this.orthoBounds.load(a.orthoBounds)):
this.orthoBounds=null;this.fovY=a.fovY;this.screenRatio=a.screenRatio;this.zoom=a.zoom;this.zNear=a.zNear;this.zFar=a.zFar;this.follow=null!=a.follow?{pos:a.follow.pos,target:a.follow.target}:null;this.viewX=a.viewX;this.viewY=a.viewY;this.update()},__class__:zg};var pj=function(a,b,c,d){this.t=a;this.next=b;this.layer=c;this.mipLevel=d};p["h3d._Engine.TargetTmp"]=pj;pj.__name__="h3d._Engine.TargetTmp";pj.prototype={__class__:pj};var na=function(a,b){null==b&&(b=0);null==a&&(a=!0);this.resCache=new Ha;
this.ready=!1;this.textureColorCache=new oa;this.tmpVector=new U;this.backgroundColor=-16777216;this.hardware=a;this.antiAlias=b;this.autoResize=!0;this.set_fullScreen(!X.getValue(Fh.IsWindowed));this.window=Pa.getInstance();this.realFps=X.getDefaultFrameRate();this.lastTime=Date.now()/1E3;this.window.addResizeEvent(K(this,this.onWindowResize));this.driver=new la(this.antiAlias);na.CURRENT=this};p["h3d.Engine"]=na;na.__name__="h3d.Engine";na.getCurrent=function(){return na.CURRENT};na.prototype={setDriver:function(a){this.driver=
a;null!=this.mem&&(this.mem.driver=a)},setCurrent:function(){na.CURRENT=this},init:function(){this.driver.init(K(this,this.onCreate),!this.hardware)},driverName:function(a){null==a&&(a=!1);return this.driver.getDriverName(a)},selectShader:function(a){this.needFlushTarget&&this.doFlushTarget();this.driver.selectShader(a)&&this.shaderSwitches++},selectMaterial:function(a){this.driver.selectMaterial(a)},uploadShaderBuffers:function(a,b){this.driver.uploadShaderBuffers(a,b)},selectBuffer:function(a){if(a.isDisposed())return!1;
this.needFlushTarget&&this.doFlushTarget();this.driver.selectBuffer(a);return!0},renderTriBuffer:function(a,b,c){null==c&&(c=-1);null==b&&(b=0);this.renderBuffer(a,this.mem.triIndexes,3,b,c)},renderQuadBuffer:function(a,b,c){null==c&&(c=-1);null==b&&(b=0);this.renderBuffer(a,this.mem.quadIndexes,2,b,c)},renderBuffer:function(a,b,c,d,e){null==e&&(e=-1);null==d&&(d=0);if(!b.isDisposed())for(;;){var f=a.vertices/c|0,g=a.position/c|0;if(0<d){if(d>=f)if(d-=f,a=a.next,null==a)break;else continue;g+=d;f-=
d;d=0}if(0<=e){if(0==e)break;e-=f;0>e&&(f+=e,e=0)}0<f&&this.selectBuffer(a)&&(this.driver.draw(b.ibuf,3*g,f),this.drawTriangles+=f,this.drawCalls++);a=a.next;if(null==a)break}},renderIndexed:function(a,b,c,d){null==d&&(d=-1);null==c&&(c=0);if(null!=a.next)throw new n("Buffer is split");if(!b.isDisposed()){var e=b.count/3|0;0>d&&(d=e-c);0<d&&this.selectBuffer(a)&&(this.driver.draw(b.ibuf,3*c,d),this.drawTriangles+=d,this.drawCalls++)}},renderMultiBuffers:function(a,b,c,d){null==d&&(d=-1);null==c&&
(c=0);var e=b.count/3|0;0>=e||(this.needFlushTarget&&this.doFlushTarget(),this.driver.selectMultiBuffers(a),b.isDisposed()||(0>d&&(d=e-c),0<d&&(this.driver.draw(b.ibuf,3*c,d),this.drawTriangles+=d,this.drawCalls++)))},renderInstanced:function(a,b,c){this.needFlushTarget&&this.doFlushTarget();this.driver.selectMultiBuffers(a);!b.isDisposed()&&0<c.commandCount&&(this.driver.drawInstanced(b.ibuf,c),this.drawTriangles+=c.triCount,this.drawCalls++)},set_debug:function(a){this.debug=a;this.driver.setDebug(this.debug);
return a},onCreate:function(a){na.CURRENT=this;this.autoResize&&(this.width=this.window.get_width(),this.height=this.window.get_height());if(a)this.mem.onContextLost();else this.mem=new Oc(this.driver),this.mem.init();this.hardware=this.driver.hasFeature(Gb.HardwareAccelerated);this.set_debug(this.debug);this.set_fullScreen(this.fullScreen);this.resize(this.width,this.height);if(a)this.onContextLost();else this.onReady();this.ready=!0},onContextLost:function(){},onReady:function(){},onWindowResize:function(){if(this.autoResize&&
!this.driver.isDisposed()){var a=this.window.get_width(),b=this.window.get_height();(a!=this.width||b!=this.height)&&this.resize(a,b);this.onResized()}},set_fullScreen:function(a){this.fullScreen=a;null!=this.mem&&X.getValue(Fh.IsWindowed)&&this.window.setFullScreen(a);return a},onResized:function(){},resize:function(a,b){32>a&&(a=32);32>b&&(b=32);this.width=a;this.height=b;this.driver.isDisposed()||this.driver.resize(a,b)},begin:function(){if(this.driver.isDisposed())return!1;this.drawCalls=this.shaderSwitches=
this.drawTriangles=0;this.targetStack=null;this.needFlushTarget=null!=this.currentTargetTex;this.driver.begin(da.frameCount);null!=this.backgroundColor&&this.clear(this.backgroundColor,1,0);return!0},hasFeature:function(a){return this.driver.hasFeature(a)},end:function(){this.driver.end()},getCurrentTarget:function(){return null==this.targetStack?null:this.targetStack.t},pushTarget:function(a,b,c){null==c&&(c=0);null==b&&(b=0);var d=this.targetTmp;null==d?d=new pj(a,this.targetStack,b,c):(this.targetTmp=
d.next,d.t=a,d.next=this.targetStack,d.mipLevel=c,d.layer=b);this.targetStack=d;this.updateNeedFlush()},updateNeedFlush:function(){var a=this.targetStack;this.needFlushTarget=null==a?null!=this.currentTargetTex:this.currentTargetTex!=a.t||this.currentTargetLayer!=a.layer||this.currentTargetMip!=a.mipLevel},pushTargets:function(a){null==this.nullTexture&&(this.nullTexture=new V(0,0,[T.NoAlloc]));this.pushTarget(this.nullTexture);this.driver.setRenderTargets(a);this.currentTargetTex=this.nullTexture;
this.needFlushTarget=!1},popTarget:function(){var a=this.targetStack;if(null==a)throw new n("popTarget() with no matching pushTarget()");this.targetStack=a.next;this.updateNeedFlush();a.t=null;a.next=this.targetTmp;this.targetTmp=a},flushTarget:function(){this.needFlushTarget&&this.doFlushTarget()},doFlushTarget:function(){var a=this.targetStack;null==a?(this.driver.setRenderTarget(null),this.currentTargetTex=null):(this.driver.setRenderTarget(a.t,a.layer,a.mipLevel),this.currentTargetTex=a.t,this.currentTargetLayer=
a.layer,this.currentTargetMip=a.mipLevel);this.needFlushTarget=!1},clearF:function(a,b,c){this.needFlushTarget&&this.doFlushTarget();this.driver.clear(a,b,c)},clear:function(a,b,c){if(null!=a){var d=this.tmpVector;d.x=(a>>16&255)/255;d.y=(a>>8&255)/255;d.z=(a&255)/255;d.w=(a>>>24)/255}this.needFlushTarget&&this.doFlushTarget();this.driver.clear(null==a?null:this.tmpVector,b,c)},setRenderZone:function(a,b,c,d){null==d&&(d=-1);null==c&&(c=-1);null==b&&(b=0);null==a&&(a=0);this.needFlushTarget&&this.doFlushTarget();
this.driver.setRenderZone(a,b,c,d)},render:function(a){if(!this.begin())return!1;a.render(this);this.end();var b=Date.now()/1E3-this.lastTime;this.lastTime+=b;0<b&&(a=1/b,a>2*this.realFps?a=2*this.realFps:a<0.5*this.realFps&&(a=0.5*this.realFps),b/=0.5,0.3<b&&(b=0.3),this.realFps=this.realFps*(1-b)+a*b);return!0},dispose:function(){this.driver.dispose();this.window.removeResizeEvent(K(this,this.onWindowResize))},get_fps:function(){return Math.ceil(100*this.realFps)/100},__class__:na};var Yd=function(a,
b){null==b&&(b=!1);this.mem=na.CURRENT.mem;this.count=a;this.is32=b;this.mem.allocIndexes(this)};p["h3d.Indexes"]=Yd;Yd.__name__="h3d.Indexes";Yd.alloc=function(a,b,c){null==c&&(c=-1);0>c&&(c=a.length);b=new Yd(c);b.upload(a,0,c);return b};Yd.prototype={isDisposed:function(){return null==this.ibuf},upload:function(a,b,c,d){null==d&&(d=0);this.mem.driver.uploadIndexBuffer(this.ibuf,b,c,a,d)},uploadBytes:function(a,b,c){this.mem.driver.uploadIndexBytes(this.ibuf,0,c,a,b)},readBytes:function(a,b,c,d){null==
d&&(d=0);this.mem.driver.readIndexBytes(this.ibuf,d,c,a,b)},dispose:function(){null!=this.ibuf&&this.mem.deleteIndexes(this)},__class__:Yd};var R=function(){};p["h3d.Matrix"]=R;R.__name__="h3d.Matrix";R.I=function(){var a=new R;a.identity();return a};R.L=function(a){var b=new R;b.loadValues(a);return b};R.T=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);var d=new R;d.initTranslation(a,b,c);return d};R.R=function(a,b,c){var d=new R;d.initRotation(a,b,c);return d};R.S=function(a,b,c){null==
c&&(c=1);null==b&&(b=1);null==a&&(a=1);var d=new R;d.initScale(a,b,c);return d};R.lookAtX=function(a,b,c){null==b&&(b=new U(0,0,1));null==c&&(c=new R);var d=a.x*a.x+a.y*a.y+a.z*a.z,d=1E-10>d?0:1/Math.sqrt(d),e=a.x*d,f=a.y*d;a=a.z*d;var g=b.y*a-b.z*f,d=b.z*e-b.x*a;b=b.x*f-b.y*e;var h=g*g+d*d+b*b,h=1E-10>h?0:1/Math.sqrt(h),g=g*h,d=d*h;b*=h;1E-10>g*g+d*d+b*b&&(g=f,d=a,b=e);c._11=e;c._12=f;c._13=a;c._14=0;c._21=g;c._22=d;c._23=b;c._24=0;c._31=f*b-a*d;c._32=a*g-e*b;c._33=e*d-f*g;c._34=0;c._41=0;c._42=
0;c._43=0;c._44=1;return c};R.prototype={get_tx:function(){return this._41},get_ty:function(){return this._42},get_tz:function(){return this._43},set_tx:function(a){return this._41=a},set_ty:function(a){return this._42=a},set_tz:function(a){return this._43=a},zero:function(){this._44=this._43=this._42=this._41=this._34=this._33=this._32=this._31=this._24=this._23=this._22=this._21=this._14=this._13=this._12=this._11=0},identity:function(){this._11=1;this._21=this._14=this._13=this._12=0;this._22=
1;this._32=this._31=this._24=this._23=0;this._33=1;this._43=this._42=this._41=this._34=0;this._44=1},initRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this._11=1;this._21=this._14=this._13=this._12=0;this._22=b;this._23=a;this._31=this._24=0;this._32=-a;this._33=b;this._43=this._42=this._41=this._34=0;this._44=1},initRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this._11=b;this._12=0;this._13=-a;this._21=this._14=0;this._22=1;this._24=this._23=0;this._31=a;this._32=0;this._33=b;this._43=
this._42=this._41=this._34=0;this._44=1},initRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this._11=b;this._12=a;this._14=this._13=0;this._21=-a;this._22=b;this._32=this._31=this._24=this._23=0;this._33=1;this._43=this._42=this._41=this._34=0;this._44=1},initTranslation:function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this._11=1;this._21=this._14=this._13=this._12=0;this._22=1;this._32=this._31=this._24=this._23=0;this._33=1;this._34=0;this._41=a;this._42=b;this._43=c;this._44=
1},initScale:function(a,b,c){null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);this._11=a;this._21=this._14=this._13=this._12=0;this._22=b;this._32=this._31=this._24=this._23=0;this._33=c;this._43=this._42=this._41=this._34=0;this._44=1},initRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=-a.x,g=-a.y,h=-a.z,k=1/Math.sqrt(f*f+g*g+h*h),f=f*k,g=g*k,h=h*k,k=f*e,l=h*e;this._11=c+f*k;this._12=g*k-h*d;this._13=f*l+g*d;this._14=0;this._21=g*k+h*d;this._22=c+g*g*e;this._23=g*l-f*d;this._24=0;
this._31=f*l-g*d;this._32=g*l+f*d;this._33=c+h*l;this._43=this._42=this._41=this._34=0;this._44=1},initRotation:function(a,b,c){var d=Math.cos(a);a=Math.sin(a);var e=Math.cos(b);b=Math.sin(b);var f=Math.cos(c);c=Math.sin(c);var g=d*b,h=a*b;this._11=e*f;this._12=e*c;this._13=-b;this._14=0;this._21=h*f-d*c;this._22=h*c+d*f;this._23=a*e;this._24=0;this._31=g*f+a*c;this._32=g*c-a*f;this._33=d*e;this._43=this._42=this._41=this._34=0;this._44=1},translate:function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==
a&&(a=0);this._11+=a*this._14;this._12+=b*this._14;this._13+=c*this._14;this._21+=a*this._24;this._22+=b*this._24;this._23+=c*this._24;this._31+=a*this._34;this._32+=b*this._34;this._33+=c*this._34;this._41+=a*this._44;this._42+=b*this._44;this._43+=c*this._44},scale:function(a,b,c){null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);this._11*=a;this._21*=a;this._31*=a;this._41*=a;this._12*=b;this._22*=b;this._32*=b;this._42*=b;this._13*=c;this._23*=c;this._33*=c;this._43*=c},rotate:function(a,b,c){var d=
R.tmp;d.initRotation(a,b,c);this.multiply(this,d)},rotateAxis:function(a,b){var c=R.tmp;c.initRotationAxis(a,b);this.multiply(this,c)},getPosition:function(a){null==a&&(a=new U);a.x=this._41;a.y=this._42;a.z=this._43;a.w=this._44;return a},setPosition:function(a){this._41=a.x;this._42=a.y;this._43=a.z;this._44=a.w},prependTranslation:function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);var d=this._12*a+this._22*b+this._32*c+this._42,e=this._13*a+this._23*b+this._33*c+this._43,f=this._14*a+
this._24*b+this._34*c+this._44;this._41=this._11*a+this._21*b+this._31*c+this._41;this._42=d;this._43=e;this._44=f},getScale:function(){var a=new U;a.x=Math.sqrt(this._11*this._11+this._12*this._12+this._13*this._13);a.y=Math.sqrt(this._21*this._21+this._22*this._22+this._23*this._23);a.z=Math.sqrt(this._31*this._31+this._32*this._32+this._33*this._33);0>this._11*(this._22*this._33-this._23*this._32)+this._12*(this._23*this._31-this._21*this._33)+this._13*(this._21*this._32-this._22*this._31)&&(a.x*=
-1,a.y*=-1,a.z*=-1);return a},prependRotation:function(a,b,c){var d=R.tmp;d.initRotation(a,b,c);this.multiply(d,this)},prependRotationAxis:function(a,b){var c=R.tmp;c.initRotationAxis(a,b);this.multiply(c,this)},prependScale:function(a,b,c){null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);var d=R.tmp;d.initScale(a,b,c);this.multiply(d,this)},multiply3x4:function(a,b){var c=a._11,d=a._12,e=a._13,f=a._21,g=a._22,h=a._23,k=a._31,l=a._32,n=a._33,t=a._41,x=a._42,m=a._43,p=b._11,q=b._12,r=b._13,s=b._21,E=b._22,
C=b._23,F=b._31,u=b._32,y=b._33,v=b._41,w=b._42,z=b._43;this._11=c*p+d*s+e*F;this._12=c*q+d*E+e*u;this._13=c*r+d*C+e*y;this._14=0;this._21=f*p+g*s+h*F;this._22=f*q+g*E+h*u;this._23=f*r+g*C+h*y;this._24=0;this._31=k*p+l*s+n*F;this._32=k*q+l*E+n*u;this._33=k*r+l*C+n*y;this._34=0;this._41=t*p+x*s+m*F+v;this._42=t*q+x*E+m*u+w;this._43=t*r+x*C+m*y+z;this._44=1},multiply3x4inline:function(a,b){var c=a._11,d=a._12,e=a._13,f=a._21,g=a._22,h=a._23,k=a._31,l=a._32,n=a._33,t=a._41,x=a._42,m=a._43,p=b._11,q=
b._12,r=b._13,s=b._21,E=b._22,C=b._23,F=b._31,u=b._32,y=b._33,v=b._41,w=b._42,z=b._43;this._11=c*p+d*s+e*F;this._12=c*q+d*E+e*u;this._13=c*r+d*C+e*y;this._14=0;this._21=f*p+g*s+h*F;this._22=f*q+g*E+h*u;this._23=f*r+g*C+h*y;this._24=0;this._31=k*p+l*s+n*F;this._32=k*q+l*E+n*u;this._33=k*r+l*C+n*y;this._34=0;this._41=t*p+x*s+m*F+v;this._42=t*q+x*E+m*u+w;this._43=t*r+x*C+m*y+z;this._44=1},multiply:function(a,b){var c=a._11,d=a._12,e=a._13,f=a._14,g=a._21,h=a._22,k=a._23,l=a._24,n=a._31,t=a._32,x=a._33,
m=a._34,p=a._41,q=a._42,r=a._43,s=a._44,E=b._11,C=b._12,F=b._13,u=b._14,y=b._21,v=b._22,w=b._23,z=b._24,B=b._31,D=b._32,G=b._33,H=b._34,J=b._41,I=b._42,K=b._43,L=b._44;this._11=c*E+d*y+e*B+f*J;this._12=c*C+d*v+e*D+f*I;this._13=c*F+d*w+e*G+f*K;this._14=c*u+d*z+e*H+f*L;this._21=g*E+h*y+k*B+l*J;this._22=g*C+h*v+k*D+l*I;this._23=g*F+h*w+k*G+l*K;this._24=g*u+h*z+k*H+l*L;this._31=n*E+t*y+x*B+m*J;this._32=n*C+t*v+x*D+m*I;this._33=n*F+t*w+x*G+m*K;this._34=n*u+t*z+x*H+m*L;this._41=p*E+q*y+r*B+s*J;this._42=
p*C+q*v+r*D+s*I;this._43=p*F+q*w+r*G+s*K;this._44=p*u+q*z+r*H+s*L},multiplyValue:function(a){this._11*=a;this._12*=a;this._13*=a;this._14*=a;this._21*=a;this._22*=a;this._23*=a;this._24*=a;this._31*=a;this._32*=a;this._33*=a;this._34*=a;this._41*=a;this._42*=a;this._43*=a;this._44*=a},invert:function(){this.initInverse(this)},getDeterminant:function(){return this._11*(this._22*this._33-this._23*this._32)+this._12*(this._23*this._31-this._21*this._33)+this._13*(this._21*this._32-this._22*this._31)},
inverse3x4:function(a){var b=a._11,c=a._12,d=a._13,e=a._21,f=a._22,g=a._23,h=a._31,k=a._32,l=a._33,n=a._41,t=a._42;a=a._43;this._11=f*l-g*k;this._12=d*k-c*l;this._13=c*g-d*f;this._14=0;this._21=g*h-e*l;this._22=b*l-d*h;this._23=d*e-b*g;this._24=0;this._31=e*k-f*h;this._32=c*h-b*k;this._33=b*f-c*e;this._34=0;this._41=-e*k*a+e*l*t+h*f*a-h*g*t-n*f*l+n*g*k;this._42=b*k*a-b*l*t-h*c*a+h*d*t+n*c*l-n*d*k;this._43=-b*f*a+b*g*t+e*c*a-e*d*t-n*c*g+n*d*f;this._44=b*f*l-b*g*k-e*c*l+e*d*k+h*c*g-h*d*f;this._44=1;
b=b*this._11+c*this._21+d*this._31;1E-10>(0>b?-b:b)?this.zero():(b=1/b,this._11*=b,this._12*=b,this._13*=b,this._21*=b,this._22*=b,this._23*=b,this._31*=b,this._32*=b,this._33*=b,this._41*=b,this._42*=b,this._43*=b)},initInverse:function(a){var b=a._11,c=a._12,d=a._13,e=a._14,f=a._21,g=a._22,h=a._23,k=a._24,l=a._31,n=a._32,t=a._33,x=a._34,m=a._41,p=a._42,q=a._43;a=a._44;this._11=g*t*a-g*x*q-n*h*a+n*k*q+p*h*x-p*k*t;this._12=-c*t*a+c*x*q+n*d*a-n*e*q-p*d*x+p*e*t;this._13=c*h*a-c*k*q-g*d*a+g*e*q+p*d*
k-p*e*h;this._14=-c*h*x+c*k*t+g*d*x-g*e*t-n*d*k+n*e*h;this._21=-f*t*a+f*x*q+l*h*a-l*k*q-m*h*x+m*k*t;this._22=b*t*a-b*x*q-l*d*a+l*e*q+m*d*x-m*e*t;this._23=-b*h*a+b*k*q+f*d*a-f*e*q-m*d*k+m*e*h;this._24=b*h*x-b*k*t-f*d*x+f*e*t+l*d*k-l*e*h;this._31=f*n*a-f*x*p-l*g*a+l*k*p+m*g*x-m*k*n;this._32=-b*n*a+b*x*p+l*c*a-l*e*p-m*c*x+m*e*n;this._33=b*g*a-b*k*p-f*c*a+f*e*p+m*c*k-m*e*g;this._34=-b*g*x+b*k*n+f*c*x-f*e*n-l*c*k+l*e*g;this._41=-f*n*q+f*t*p+l*g*q-l*h*p-m*g*t+m*h*n;this._42=b*n*q-b*t*p-l*c*q+l*d*p+m*c*
t-m*d*n;this._43=-b*g*q+b*h*p+f*c*q-f*d*p-m*c*h+m*d*g;this._44=b*g*t-b*h*n-f*c*t+f*d*n+l*c*h-l*d*g;b=b*this._11+c*this._21+d*this._31+e*this._41;1E-10>(0>b?-b:b)?this.zero():(b=1/b,this._11*=b,this._12*=b,this._13*=b,this._14*=b,this._21*=b,this._22*=b,this._23*=b,this._24*=b,this._31*=b,this._32*=b,this._33*=b,this._34*=b,this._41*=b,this._42*=b,this._43*=b,this._44*=b)},initInverse3x3:function(a){var b=a._11,c=a._12,d=a._13,e=a._21,f=a._22,g=a._23,h=a._31,k=a._32;a=a._33;this._11=f*a-k*g;this._12=
-c*a+k*d;this._13=c*g-f*d;this._21=-e*a+h*g;this._22=b*a-h*d;this._23=-b*g+e*d;this._31=e*k-h*f;this._32=-b*k+h*c;this._33=b*f-e*c;b=b*this._11+c*this._21+d*this._31;1E-10>(0>b?-b:b)?this.zero():(b=1/b,this._11*=b,this._12*=b,this._13*=b,this._14=0,this._21*=b,this._22*=b,this._23*=b,this._24=0,this._31*=b,this._32*=b,this._33*=b,this._43=this._42=this._41=this._34=0,this._44=1)},front:function(){var a=new U(this._11,this._12,this._13),b=1/Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z);a.x*=b;a.y*=b;a.z*=b;return a},
right:function(){var a=new U(this._21,this._22,this._23),b=1/Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z);a.x*=b;a.y*=b;a.z*=b;return a},up:function(){var a=new U(this._31,this._32,this._33),b=1/Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z);a.x*=b;a.y*=b;a.z*=b;return a},transpose:function(){var a=this._12;this._12=this._21;this._21=a;a=this._13;this._13=this._31;this._31=a;a=this._14;this._14=this._41;this._41=a;a=this._23;this._23=this._32;this._32=a;a=this._24;this._24=this._42;this._42=a;a=this._34;this._34=this._43;
this._43=a},clone:function(){var a=new R;a._11=this._11;a._12=this._12;a._13=this._13;a._14=this._14;a._21=this._21;a._22=this._22;a._23=this._23;a._24=this._24;a._31=this._31;a._32=this._32;a._33=this._33;a._34=this._34;a._41=this._41;a._42=this._42;a._43=this._43;a._44=this._44;return a},load:function(a){this._11=a._11;this._12=a._12;this._13=a._13;this._14=a._14;this._21=a._21;this._22=a._22;this._23=a._23;this._24=a._24;this._31=a._31;this._32=a._32;this._33=a._33;this._34=a._34;this._41=a._41;
this._42=a._42;this._43=a._43;this._44=a._44},loadValues:function(a){this._11=a[0];this._12=a[1];this._13=a[2];this._14=a[3];this._21=a[4];this._22=a[5];this._23=a[6];this._24=a[7];this._31=a[8];this._32=a[9];this._33=a[10];this._34=a[11];this._41=a[12];this._42=a[13];this._43=a[14];this._44=a[15]},getFloats:function(){return[this._11,this._12,this._13,this._14,this._21,this._22,this._23,this._24,this._31,this._32,this._33,this._34,this._41,this._42,this._43,this._44]},getEulerAngles:function(){var a=
this.clone(),b=0,c=0,d=0,b=Math.sqrt(this._11*this._11+this._12*this._12+this._13*this._13),c=Math.sqrt(this._21*this._21+this._22*this._22+this._23*this._23),d=Math.sqrt(this._31*this._31+this._32*this._32+this._33*this._33);0>this._11*(this._22*this._33-this._23*this._32)+this._12*(this._23*this._31-this._21*this._33)+this._13*(this._21*this._32-this._22*this._31)&&(b*=-1,c*=-1,d*=-1);a.prependScale(1/b,1/c,1/d);c=Math.sqrt(a._11*a._11+a._12*a._12);return 0.01<c?(b=new U(Math.atan2(a._23,a._33),
Math.atan2(-a._13,c),Math.atan2(a._12,a._11)),a=new U(Math.atan2(-a._23,-a._33),Math.atan2(-a._13,-c),Math.atan2(-a._12,-a._11)),b.x*b.x+b.y*b.y+b.z*b.z<a.x*a.x+a.y*a.y+a.z*a.z?b:a):new U(Math.atan2(-a._32,a._22),Math.atan2(-a._13,c),0)},toString:function(){return"MAT=[\n  [ "+I.fmt(this._11)+", "+I.fmt(this._12)+", "+I.fmt(this._13)+", "+I.fmt(this._14)+" ]\n  [ "+I.fmt(this._21)+", "+I.fmt(this._22)+", "+I.fmt(this._23)+", "+I.fmt(this._24)+" ]\n  [ "+I.fmt(this._31)+", "+I.fmt(this._32)+", "+I.fmt(this._33)+
", "+I.fmt(this._34)+" ]\n  [ "+I.fmt(this._41)+", "+I.fmt(this._42)+", "+I.fmt(this._43)+", "+I.fmt(this._44)+" ]\n]"},colorHue:function(a){if(0!=a){var b=Math.cos(-a);a=Math.sin(-a);var c=(1-b)/3,d=R.tmp;d._11=b+c;d._12=c-0.5773502691896257*a;d._13=c+0.5773502691896257*a;d._21=c+0.5773502691896257*a;d._22=b+c;d._23=c-0.5773502691896257*a;d._31=c-0.5773502691896257*a;d._32=c+0.5773502691896257*a;d._33=b+c;d._34=0;d._41=0;d._42=0;d._43=0;this.multiply3x4(this,d)}},colorSaturate:function(a){++a;var b=
1-a,c=0.212671*b,d=0.71516*b,b=0.072169*b,e=R.tmp;e._11=c+a;e._12=c;e._13=c;e._21=d;e._22=d+a;e._23=d;e._31=b;e._32=b;e._33=b+a;e._41=0;e._42=0;e._43=0;this.multiply3x4(this,e)},colorContrast:function(a){var b=R.tmp,c=a+1;b._11=c;b._12=0;b._13=0;b._21=0;b._22=c;b._23=0;b._31=0;b._32=0;b._33=c;b._41=0.5*-a;b._42=0.5*-a;b._43=0.5*-a;this.multiply3x4(this,b)},colorLightness:function(a){this._41+=a;this._42+=a;this._43+=a},colorGain:function(a,b){var c=R.tmp;c._11=1-b;c._12=0;c._13=0;c._21=0;c._22=1-
b;c._23=0;c._31=0;c._32=0;c._33=1-b;c._41=(a>>16&255)/255*b;c._42=(a>>8&255)/255*b;c._43=(a&255)/255*b;this.multiply3x4(this,c)},colorBits:function(a,b){var c=0,d=0,e=0,f=0,g=0,h=0,k=0,l=0,n=0,t=a;1==(t&1)&&(c=1);t>>=1;1==(t&1)&&(d=1);t>>=1;1==(t&1)&&(e=1);t>>=1;1==(t&1)&&(f=1);t>>=1;1==(t&1)&&(g=1);t>>=1;1==(t&1)&&(h=1);t>>=1;1==(t&1)&&(k=1);t>>=1;1==(t&1)&&(l=1);1==(t>>1&1)&&(n=1);var t=c+f+k,x=d+g+l,m=e+h+n;1<t&&(c/=t,f/=t,k/=t);1<x&&(d/=x,g/=x,l/=x);1<m&&(e/=m,h/=m,n/=m);var t=this._11*d+this._12*
g+this._13*l,x=this._11*e+this._12*h+this._13*n,m=this._21*c+this._22*f+this._23*k,p=this._21*d+this._22*g+this._23*l,q=this._21*e+this._22*h+this._23*n,r=this._31*c+this._32*f+this._33*k,d=this._31*d+this._32*g+this._33*l,e=this._31*e+this._32*h+this._33*n,h=1-b;this._11=this._11*h+(this._11*c+this._12*f+this._13*k)*b;this._12=this._12*h+t*b;this._13=this._13*h+x*b;this._21=this._21*h+m*b;this._22=this._22*h+p*b;this._23=this._23*h+q*b;this._31=this._31*h+r*b;this._32=this._32*h+d*b;this._33=this._33*
h+e*b},colorAdd:function(a){this._41+=(a>>16&255)/255;this._42+=(a>>8&255)/255;this._43+=(a&255)/255},colorSet:function(a,b){null==b&&(b=1);this.zero();this._44=b;this._41+=(a>>16&255)/255;this._42+=(a>>8&255)/255;this._43+=(a&255)/255},adjustColor:function(a){null!=a.hue&&this.colorHue(a.hue);null!=a.saturation&&this.colorSaturate(a.saturation);null!=a.contrast&&this.colorContrast(a.contrast);null!=a.lightness&&this.colorLightness(a.lightness);null!=a.gain&&this.colorGain(a.gain.color,a.gain.alpha)},
__class__:R};var Ad=function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c;this.w=d};p["h3d.Quat"]=Ad;Ad.__name__="h3d.Quat";Ad.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d},identity:function(){this.x=this.y=this.z=0;this.w=1},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},load:function(a){this.x=
a.x;this.y=a.y;this.z=a.z;this.w=a.w},clone:function(){return new Ad(this.x,this.y,this.z,this.w)},initMoveTo:function(a,b){var c=a.x+b.x,d=a.y+b.y,e=a.z+b.z;Math.sqrt(c*c+d*d+e*e);this.x=a.y*e-a.z*d;this.y=a.z*c-a.x*e;this.z=a.x*d-a.y*c;this.w=a.x*c+a.y*d+a.z*e;this.normalize()},initDirection:function(a){var b=a.x,c=a.y;a=a.z;var d=b*b+c*c+a*a,d=1E-10>d?0:1/Math.sqrt(d),e=b*d,c=c*d;a*=d;var d=-c,b=d*d+e*e+0,b=1E-10>b?0:1/Math.sqrt(b),d=d*b,f=e*b,b=0*b;1E-10>d*d+f*f+b*b&&(d=c,f=a,b=e);var g=c*b-a*
f,h=a*d-e*b,k=e*f-c*d,l=e+f+k;0<l?(e=2*Math.sqrt(l+1),f=1/e,this.x=(b-h)*f,this.y=(g-a)*f,this.z=(c-d)*f,this.w=0.25*e):e>f&&e>k?(e=2*Math.sqrt(1+e-f-k),f=1/e,this.x=0.25*e,this.y=(d+c)*f,this.z=(g+a)*f,this.w=(b-h)*f):f>k?(e=2*Math.sqrt(1+f-e-k),f=1/e,this.x=(d+c)*f,this.y=0.25*e,this.z=(h+b)*f,this.w=(g-a)*f):(e=2*Math.sqrt(1+k-e-f),f=1/e,this.x=(g+a)*f,this.y=(h+b)*f,this.z=0.25*e,this.w=(c-d)*f)},initRotateAxis:function(a,b,c,d){var e=Math.sin(d/2);d=Math.cos(d/2);this.x=a*e;this.y=b*e;this.z=
c*e;this.w=d*Math.sqrt(a*a+b*b+c*c);this.normalize()},initRotateMatrix:function(a){var b=a._11+a._22+a._33;if(0<b){var b=2*Math.sqrt(b+1),c=1/b;this.x=(a._23-a._32)*c;this.y=(a._31-a._13)*c;this.z=(a._12-a._21)*c;this.w=0.25*b}else a._11>a._22&&a._11>a._33?(b=2*Math.sqrt(1+a._11-a._22-a._33),c=1/b,this.x=0.25*b,this.y=(a._21+a._12)*c,this.z=(a._31+a._13)*c,this.w=(a._23-a._32)*c):a._22>a._33?(b=2*Math.sqrt(1+a._22-a._11-a._33),c=1/b,this.x=(a._21+a._12)*c,this.y=0.25*b,this.z=(a._32+a._23)*c,this.w=
(a._31-a._13)*c):(b=2*Math.sqrt(1+a._33-a._11-a._22),c=1/b,this.x=(a._31+a._13)*c,this.y=(a._32+a._23)*c,this.z=0.25*b,this.w=(a._12-a._21)*c)},normalize:function(){var a=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;1E-10>a?(this.x=this.y=this.z=0,this.w=1):(a=1/Math.sqrt(a),this.x*=a,this.y*=a,this.z*=a,this.w*=a)},initRotation:function(a,b,c){var d=Math.sin(0.5*a);a=Math.cos(0.5*a);var e=Math.sin(0.5*b);b=Math.cos(0.5*b);var f=Math.sin(0.5*c);c=Math.cos(0.5*c);var g=b*c,h=e*f;this.x=
d*g-a*h;this.y=a*e*c+d*b*f;this.z=a*b*f-d*e*c;this.w=a*g+d*h},multiply:function(a,b){var c=a.w*b.y-a.x*b.z+a.y*b.w+a.z*b.x,d=a.w*b.z+a.x*b.y-a.y*b.x+a.z*b.w,e=a.w*b.w-a.x*b.x-a.y*b.y-a.z*b.z;this.x=a.x*b.w+a.w*b.x+a.y*b.z-a.z*b.y;this.y=c;this.z=d;this.w=e},toEuler:function(){return this.toMatrix().getEulerAngles()},lerp:function(a,b,c,d){null==d&&(d=!1);d=d&&0>a.x*b.x+a.y*b.y+a.z*b.z+a.w*b.w?c-1:1-c;var e=a.y*c+b.y*d,f=a.z*c+b.z*d,g=a.w*c+b.w*d;this.x=a.x*c+b.x*d;this.y=e;this.z=f;this.w=g},slerp:function(a,
b,c){var d=a.x*b.x+a.y*b.y+a.z*b.z+a.w*b.w;if(1<=(0>d?-d:d))this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w;else{var e=Math.acos(d),f=1/Math.sqrt(1-d*d);if(1E3<(0>f?-f:f)){var g;g=0>a.x*b.x+a.y*b.y+a.z*b.z+a.w*b.w?-0.5:0.5;c=0.5*a.y+b.y*g;d=0.5*a.z+b.z*g;e=0.5*a.w+b.w*g;this.x=0.5*a.x+b.x*g;this.y=c;this.z=d;this.w=e}else g=Math.sin((1-c)*e)*f,c=Math.sin(c*e)*f*(0>d?-1:1),this.x=a.x*g+b.x*c,this.y=a.y*g+b.y*c,this.z=a.z*g+b.z*c,this.w=a.w*g+b.w*c}},conjugate:function(){this.x=-this.x;this.y=-this.y;this.z=
-this.z},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},getDirection:function(){return new U(1-2*(this.y*this.y+this.z*this.z),2*(this.x*this.y-this.z*this.w),2*(this.x*this.z+this.y*this.w))},toMatrix:function(a){null==a&&(a=new R);var b=this.x*this.x,c=this.x*this.y,d=this.x*this.z,e=this.x*this.w,f=this.y*this.y,g=this.y*this.z,h=this.y*this.w,k=this.z*this.z,l=this.z*this.w;a._11=1-2*(f+k);a._12=
2*(c+l);a._13=2*(d-h);a._14=0;a._21=2*(c-l);a._22=1-2*(b+k);a._23=2*(g+e);a._24=0;a._31=2*(d+h);a._32=2*(g-e);a._33=1-2*(b+f);a._34=0;a._41=0;a._42=0;a._43=0;a._44=1;return a},toString:function(){return"{"+I.fmt(this.x)+","+I.fmt(this.y)+","+I.fmt(this.z)+","+I.fmt(this.w)+"}"},__class__:Ad};var U=function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c;this.w=d};p["h3d.Vector"]=U;U.__name__="h3d.Vector";U.fromColor=function(a,b){null==b&&(b=1);var c=
b/255;return new U((a>>16&255)*c,(a>>8&255)*c,(a&255)*c,(a>>>24)*c)};U.fromArray=function(a){var b=new U;0<a.length&&(b.x=a[0]);1<a.length&&(b.y=a[1]);2<a.length&&(b.z=a[2]);3<a.length&&(b.w=a[3]);return b};U.prototype={distance:function(a){var b=a.x-this.x,c=a.y-this.y;a=a.z-this.z;return Math.sqrt(b*b+c*c+a*a)},distanceSq:function(a){var b=a.x-this.x,c=a.y-this.y;a=a.z-this.z;return b*b+c*c+a*a},sub:function(a){return new U(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},add:function(a){return new U(this.x+
a.x,this.y+a.y,this.z+a.z,this.w+a.w)},cross:function(a){return new U(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x,1)},reflect:function(a){var b=2*(this.x*a.x+this.y*a.y+this.z*a.z);return new U(this.x-b*a.x,this.y-b*a.y,this.z-b*a.z,1)},dot3:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},dot4:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+
this.y*this.y+this.z*this.z)},normalize:function(){var a=this.x*this.x+this.y*this.y+this.z*this.z,a=1E-10>a?0:1/Math.sqrt(a);this.x*=a;this.y*=a;this.z*=a},normalizeFast:function(){var a=1/Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);this.x*=a;this.y*=a;this.z*=a},getNormalized:function(){var a=this.x*this.x+this.y*this.y+this.z*this.z,a=1E-10>a?0:1/Math.sqrt(a);return new U(this.x*a,this.y*a,this.z*a)},set:function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=
a;this.y=b;this.z=c;this.w=d},load:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w},scale3:function(a){this.x*=a;this.y*=a;this.z*=a},project:function(a){var b=this.x*a._12+this.y*a._22+this.z*a._32+this.w*a._42,c=this.x*a._13+this.y*a._23+this.z*a._33+this.w*a._43,d=1/(this.x*a._14+this.y*a._24+this.z*a._34+this.w*a._44);this.x=(this.x*a._11+this.y*a._21+this.z*a._31+this.w*a._41)*d;this.y=b*d;this.z=c*d;this.w=1},lerp:function(a,b,c){var d=a.x,e=a.y,e=e+c*(b.y-e),f=a.z,f=f+c*(b.z-f);a=a.w;
a+=c*(b.w-a);this.x=d+c*(b.x-d);this.y=e;this.z=f;this.w=a},transform3x4:function(a){var b=this.x*a._12+this.y*a._22+this.z*a._32+this.w*a._42,c=this.x*a._13+this.y*a._23+this.z*a._33+this.w*a._43;this.x=this.x*a._11+this.y*a._21+this.z*a._31+this.w*a._41;this.y=b;this.z=c},transform3x3:function(a){var b=this.x*a._12+this.y*a._22+this.z*a._32,c=this.x*a._13+this.y*a._23+this.z*a._33;this.x=this.x*a._11+this.y*a._21+this.z*a._31;this.y=b;this.z=c},transform:function(a){var b=this.x*a._12+this.y*a._22+
this.z*a._32+this.w*a._42,c=this.x*a._13+this.y*a._23+this.z*a._33+this.w*a._43,d=this.x*a._14+this.y*a._24+this.z*a._34+this.w*a._44;this.x=this.x*a._11+this.y*a._21+this.z*a._31+this.w*a._41;this.y=b;this.z=c;this.w=d},clone:function(){return new U(this.x,this.y,this.z,this.w)},toPoint:function(){return new ma(this.x,this.y,this.z)},toString:function(){return"{"+I.fmt(this.x)+","+I.fmt(this.y)+","+I.fmt(this.z)+","+I.fmt(this.w)+"}"},get_r:function(){return this.x},get_g:function(){return this.y},
get_b:function(){return this.z},get_a:function(){return this.w},set_r:function(a){return this.x=a},set_g:function(a){return this.y=a},set_b:function(a){return this.z=a},set_a:function(a){return this.w=a},setColor:function(a){this.x=(a>>16&255)/255;this.y=(a>>8&255)/255;this.z=(a&255)/255;this.w=(a>>>24)/255},makeColor:function(a,b,c){null==c&&(c=0.5);null==b&&(b=1);a%=6.283185307179586;a=0<=a?a:a+6.283185307179586;var d=2*c-1;b*=1-(0>d?-d:d);d=3*a/3.141592653589793%2-1;d=b*(1-(0>d?-d:d));c-=b/2;1.0471975511965976>
a?(this.x=b,this.y=d,this.z=0):2.0943951023931953>a?(this.x=d,this.y=b,this.z=0):3.141592653589793>a?(this.x=0,this.y=b,this.z=d):4.1887902047863905>a?(this.x=0,this.y=d,this.z=b):5.235987755982989>a?(this.x=d,this.y=0,this.z=b):(this.x=b,this.y=0,this.z=d);this.x+=c;this.y+=c;this.z+=c;this.w=1},toColor:function(){var a=this.w,b=this.x,c=this.y,d=this.z;return(255*(0>a?0:1<a?1:a)+0.499|0)<<24|(255*(0>b?0:1<b?1:b)+0.499|0)<<16|(255*(0>c?0:1<c?1:c)+0.499|0)<<8|255*(0>d?0:1<d?1:d)+0.499|0},toColorHSL:function(){var a=
this.x,b=this.y,a=a<b?b:a,b=this.z,a=a<b?b:a,b=this.x,c=this.y,b=b>c?c:b,c=this.z,c=b>c?c:b,b=(a+c)/2;if(a==c)a=c=0;else var d=a-c,c=0.5<b?d/(2-a-c):d/(a+c),a=a==this.x?(this.y-this.z)/d+(this.y<this.z?6:0):a==this.y?(this.z-this.x)/d+2:(this.x-this.y)/d+4,a=1.0471975511965976*a;return new U(a,c,b,this.w)},__class__:U};var Ag=function(a){this.objectName=a};p["h3d.anim.AnimatedObject"]=Ag;Ag.__name__="h3d.anim.AnimatedObject";Ag.prototype={clone:function(){return new Ag(this.objectName)},__class__:Ag};
var Zd=function(a,b,c){this.name=a;this.frameCount=b;this.sampling=c;this.objects=[];this.lastEvent=-1;this.frame=0;this.speed=1;this.loop=!0;this.pause=!1};p["h3d.anim.Animation"]=Zd;Zd.__name__="h3d.anim.Animation";Zd.__interfaces__=[Vd];Zd.prototype={getDuration:function(){return this.frameCount/(this.sampling*this.speed)},getIFrame:function(){var a=this.frame|0,b=this.endFrame();a==b&&--a;return a},unbind:function(a){for(var b=0,c=this.objects;b<c.length;){var d=c[b];++b;if(d.objectName==a){this.isSync=
!1;d.targetObject=null;d.targetSkin=null;break}}},setEvents:function(a){for(var b=[],c=0,d=this.frameCount;c<d;)c++,b.push(null);this.events=b;for(a=bh(a);a.hasNext();)b=a.next(),null==this.events[b.frame]&&(this.events[b.frame]=[]),this.events[b.frame].push(b.data)},addEvent:function(a,b){null==this.events&&(this.events=[]);null==this.events[a]?this.events[a]=[b]:this.events[a].push(b)},getEvents:function(){return this.events},getObjects:function(){return this.objects},setFrame:function(a){this.frame=
a;for(this.lastEvent=-1;0>this.frame;)this.frame+=this.frameCount;for(;this.frame>this.frameCount;)this.frame-=this.frameCount},clone:function(a){null==a&&(a=new Zd(this.name,this.frameCount,this.sampling));a.objects=this.objects;a.speed=this.speed;a.loop=this.loop;a.pause=this.pause;a.events=this.events;return a},initInstance:function(){this.isInstance=!0},createInstance:function(a){for(var b=[],c=0,d=this.objects;c<d.length;){var e=d[c];++c;b.push(e.clone())}c=this.clone();c.objects=b;c.bind(a);
c.initInstance();return c},bind:function(a){for(var b=null,c=0,d=this.objects.slice();c<d.length;){var e=d[c];++c;if(null!=b){var f=e.objectName,g=b.skinData.namedJoints,f=null!=L[f]?g.getReserved(f):g.h[f];if(null!=f){e.targetSkin=b;e.targetJoint=f.index;continue}}f=a.getObjectByName(e.objectName);null==f?z.remove(this.objects,e):(g=f instanceof tf?f:null,null!=g?(b=g.parent,e.targetSkin=b,e.targetJoint=g.index):e.targetObject=f)}this.isSync=!1},getPropValue:function(a,b){return null},sync:function(a){throw new n("assert");
},isPlaying:function(){return this.pause?!1:1E-6<(0>this.speed?-this.speed:this.speed)},endFrame:function(){return this.frameCount},update:function(a){if(!this.isInstance)throw new n("You must instanciate this animation first");if(!this.isPlaying())return 0;if(null!=this.events&&null!=this.onEvent){var b=this.frame|0,c=this.frame+a*this.speed*this.sampling|0;c>=this.frameCount&&(c=this.frameCount-1);for(var d=c+1;b<d;)if(c=b++,c!=this.lastEvent&&(this.lastEvent=c,null!=this.events[c])){b=this.frame;
d=a;a-=(c-this.frame)/(this.speed*this.sampling);this.frame=c;for(var e=0,f=this.events[c];e<f.length;){var g=f[e];++e;this.onEvent(g)}if(this.frame==c&&c==this.frameCount-1){this.frame=b;a=d;break}else return a}}if(null!=this.onAnimEnd&&(c=this.endFrame(),b=0==this.speed?0:(c-this.frame)/(this.speed*this.sampling),b<=a&&0<b))return this.frame=c,a-=b,this.onAnimEnd(),this.frame==c&&this.isPlaying()&&(this.loop?this.frame=0:a=0),a;this.frame+=a*this.speed*this.sampling;this.frame>=this.frameCount&&
(this.frame=this.loop?this.frame%this.frameCount:this.frameCount);return 0},initAndBind:function(a){this.bind(a);this.initInstance();this.pause=!0},toString:function(){return this.name},__class__:Zd};var qj=function(){};p["h3d.anim.LinearFrame"]=qj;qj.__name__="h3d.anim.LinearFrame";qj.prototype={toMatrix:function(){var a=new R;(new Ad(this.qx,this.qy,this.qz,this.qw)).toMatrix(a);a.prependScale(this.sx,this.sy,this.sz);a.translate(this.tx,this.ty,this.tz);return a},__class__:qj};var He=function(a){this.objectName=
a};p["h3d.anim.LinearObject"]=He;He.__name__="h3d.anim.LinearObject";He.__super__=Ag;He.prototype=J(Ag.prototype,{clone:function(){var a=new He(this.objectName);a.hasRotation=this.hasRotation;a.hasScale=this.hasScale;a.frames=this.frames;a.alphas=this.alphas;a.uvs=this.uvs;a.propName=this.propName;a.propValues=this.propValues;return a},__class__:He});var uf=function(a,b,c){Zd.call(this,a,b,c);this.syncFrame=-1};p["h3d.anim.LinearAnimation"]=uf;uf.__name__="h3d.anim.LinearAnimation";uf.__super__=Zd;
uf.prototype=J(Zd.prototype,{addCurve:function(a,b,c,d){a=new He(a);a.frames=b;a.hasRotation=c;a.hasScale=d;this.objects.push(a)},addAlphaCurve:function(a,b){var c=new He(a);c.alphas=b;this.objects.push(c)},addUVCurve:function(a,b){var c=new He(a);c.uvs=b;this.objects.push(c)},addPropCurve:function(a,b,c){a=new He(a);a.propName=b;a.propValues=c;this.objects.push(a)},getPropValue:function(a,b){for(var c=0,d=this.objects;c<d.length;){var e=d[c];++c;if(e.objectName==a&&e.propName==b)return e.propCurrentValue}return null},
getFrames:function(){return this.objects},clone:function(a){null==a&&(a=new uf(this.name,this.frameCount,this.sampling));Zd.prototype.clone.call(this,a);(a instanceof uf?a:null).resPath=this.resPath;return a},endFrame:function(){return this.loop?this.frameCount:this.frameCount-1},initInstance:function(){Zd.prototype.initInstance.call(this);for(var a=this.objects,b=0;b<a.length;){var c=a[b];++b;if(null!=c.propValues)c.propCurrentValue=c.propValues[0];else{var d;null!=c.alphas?null!=c.targetObject?
(d=c.targetObject,d=null==(d instanceof eb?d:null)):d=!0:d=!1;if(d)throw new n(c.objectName+" should be a mesh (for alpha animation)");null!=c.uvs||null!=c.alphas||(c.matrix=new R,c.matrix.identity())}}a.sort(K(this,this.sortByFrameCountDesc))},sortByFrameCountDesc:function(a,b){return(null==b.frames?10:b.frames.length)-(null==a.frames?10:a.frames.length)},uvLerp:function(a,b,c){a%=1;b%=1;a<b-0.5?++a:a>b+0.5&&--a;return a*(1-c)+b*c},sync:function(a){null==a&&(a=!1);if(this.frame!=this.syncFrame||
a){var b=this.frame|0,c=this.endFrame();b==c&&--b;var c=(b+1)%this.frameCount,d=this.frame-b,e=1-d;0>b?b=c=0:this.frame>=this.frameCount?b=c=this.frameCount-1:!this.loop&&0==c&&(c=this.frameCount-1);this.syncFrame=this.frame;a&&(this.isSync=!1);for(var f=0,g=this.objects;f<g.length;){var h=g[f];++f;if(!(null==h.targetObject&&null==h.targetSkin))if(null!=h.alphas){var k=h.targetObject.toMesh().material;k.blendMode==Ra.None&&k.set_blendMode(Ra.Alpha);k.mshader.color__.w=h.alphas[b]*e+h.alphas[c]*d}else if(null!=
h.uvs){var l=h.targetObject.toMesh().material,k=l.passes.getShader(Bd);null==k&&(k=l.passes.addShader(new Bd),l.get_texture().set_wrap(xg.Repeat));var l=h.uvs[b<<1],n=h.uvs[c<<1],l=l%1,n=n%1;l<n-0.5?++l:l>n+0.5&&--l;k.uvDelta__.x=l*(1-d)+n*d;l=h.uvs[b<<1|1];h=h.uvs[c<<1|1];l%=1;h%=1;l<h-0.5?++l:l>h+0.5&&--l;k.uvDelta__.y=l*(1-d)+h*d}else if(null!=h.propValues)h.propCurrentValue=h.propValues[b]*e+h.propValues[c]*d;else{k=b;l=c;if(1==h.frames.length){if(this.isSync)break;k=l=0}k=h.frames[k];n=h.frames[l];
l=h.matrix;l._41=k.tx*e+n.tx*d;l._42=k.ty*e+n.ty*d;l._43=k.tz*e+n.tz*d;if(h.hasRotation){var t=0>k.qx*n.qx+k.qy*n.qy+k.qz*n.qz+k.qw*n.qw?-d:d,x=k.qx*e+n.qx*t,m=k.qy*e+n.qy*t,p=k.qz*e+n.qz*t,t=k.qw*e+n.qw*t,q=1/Math.sqrt(x*x+m*m+p*p+t*t),x=x*q,m=m*q,p=p*q,t=t*q;if(a)l._12=x,l._13=m,l._21=p,l._23=t,h.hasScale?(l._11=k.sx*e+n.sx*d,l._22=k.sy*e+n.sy*d,l._33=k.sz*e+n.sz*d):(l._11=1,l._22=1,l._33=1);else{var q=x*x,r=x*m,s=x*p,x=x*t,E=m*m,C=m*p,m=m*t,u=p*p,p=p*t;l._11=1-2*(E+u);l._12=2*(r+p);l._13=2*(s-
m);l._21=2*(r-p);l._22=1-2*(q+u);l._23=2*(C+x);l._31=2*(s+m);l._32=2*(C-x);l._33=1-2*(q+E);h.hasScale&&(p=k.sx*e+n.sx*d,t=k.sy*e+n.sy*d,k=k.sz*e+n.sz*d,l._11*=p,l._12*=p,l._13*=p,l._21*=t,l._22*=t,l._23*=t,l._31*=k,l._32*=k,l._33*=k)}}else l._12=0,l._13=0,l._21=0,l._23=a?1:0,h.hasScale?(l._11=k.sx*e+n.sx*d,l._22=k.sy*e+n.sy*d,l._33=k.sz*e+n.sz*d):(l._11=1,l._22=1,l._33=1);null!=h.targetSkin?(h.targetSkin.currentRelPose[h.targetJoint]=h.matrix,h.targetSkin.jointsUpdated=!0):(k=h.targetObject,k.defaultTransform=
h.matrix,k.flags|=1)}}a||(this.isSync=!0)}},__class__:uf});var rj=function(){this.splitIndex=this.bindIndex=-1;this.subs=[]};p["h3d.anim.Joint"]=rj;rj.__name__="h3d.anim.Joint";rj.prototype={__class__:rj};var sj=function(){};p["h3d.anim._Skin.Permut"]=sj;sj.__name__="h3d.anim._Skin.Permut";sj.prototype={__class__:sj};var tj=function(a,b){this.j=a;this.w=b};p["h3d.anim._Skin.Influence"]=tj;tj.__name__="h3d.anim._Skin.Influence";tj.prototype={__class__:tj};var uj=function(a,b,c){this.name=a;this.vertexCount=
b;this.bonesPerVertex=c;0<b&&(this.vertexJoints=Array(b*c),this.vertexWeights=Array(b*c),this.envelop=[])};p["h3d.anim.Skin"]=uj;uj.__name__="h3d.anim.Skin";uj.prototype={setJoints:function(a,b){this.rootJoints=b;this.allJoints=a;this.namedJoints=new ia;for(var c=0;c<a.length;){var d=a[c];++c;if(null!=d.name){var e=d.name,f=this.namedJoints;null!=L[e]?f.setReserved(e,d):f.h[e]=d}}},addInfluence:function(a,b,c){var d=this.envelop[a];null==d&&(d=this.envelop[a]=[]);d.push(new tj(b,c))},sortInfluences:function(a,
b){return b.w>a.w?1:-1},isSplit:function(){return null!=this.splitJoints},initWeights:function(){this.boundJoints=[];for(var a=0,b=0,c=this.vertexCount;b<c;){var d=b++,d=this.envelop[d];null==d&&(d=[]);Da.sort(d,K(this,this.sortInfluences));d.length>this.bonesPerVertex&&(d=d.slice(0,this.bonesPerVertex));for(var e=0,f=0;f<d.length;){var g=d[f];++f;e+=g.w}e=1/e;f=0;for(g=this.bonesPerVertex;f<g;){var h=f++,h=d[h];null==h?(this.vertexJoints[a]=0,this.vertexWeights[a]=0):(-1==h.j.bindIndex&&(h.j.bindIndex=
this.boundJoints.length,this.boundJoints.push(h.j)),this.vertexJoints[a]=h.j.bindIndex,this.vertexWeights[a]=h.w*e);++a}}this.envelop=null},sortByBindIndex:function(a,b){return a.bindIndex-b.bindIndex},isSub:function(a,b){for(var c=0,d=b.length,e=0;e<a.length;){var f=a[e];for(++e;f!=b[c++];)if(c>=d)return!1}return!0},merge:function(a){for(var b=0;b<a.length;){var c=a[b];++b;for(var d=0;d<a.length;){var e=a[d];++d;if(c!=e&&c.material==e.material&&this.isSub(c.joints,e.joints)){b=0;for(d=c.triangles;b<
d.length;){var f=d[b];++b;e.triangles.push(f)}z.remove(a,c);return!0}}}return!1},jointsDiff:function(a,b){for(var c=0,d=0,e=0,f=a.joints.length,g=b.joints.length;d<f&&e<g;){var h=a.joints[d],k=b.joints[e];h==k?(++d,++e):(++c,h.bindIndex<k.bindIndex?++d:++e)}return c+(f-d)+(g-e)},split:function(a,b,c){if(null!=this.splitJoints)return!0;if(this.boundJoints.length<=a)return!1;this.splitJoints=[];this.triangleGroups=Array(b.length/3|0);for(var d=[],e=0,f=b.length/3|0;e<f;){for(var g=e++,h=3*g,k=null==
c?0:c[g],l=[],m=0;3>m;)for(var t=m++,t=b[h+t],x=0,p=this.bonesPerVertex;x<p;){var q=x++,q=t*this.bonesPerVertex+q;0!=this.vertexWeights[q]&&(q=this.boundJoints[this.vertexJoints[q]],q.splitIndex!=h&&(q.splitIndex=h,l.push(q)))}l.sort(K(this,this.sortByBindIndex));for(h=0;h<d.length;)if(m=d[h],++h,m.material==k&&this.isSub(l,m.joints)){m.triangles.push(g);l=null;break}if(null!=l){for(h=0;h<d.length;)if(m=d[h],++h,m.material==k&&this.isSub(m.joints,l)){m.joints=l;m.triangles.push(g);l=null;break}null!=
l&&(h=new sj,h.joints=l,h.triangles=[g],h.material=k,d.push(h))}}for(;;){for(;this.merge(d););e=c=1E5;b=f=null;g=0;for(k=d.length;g<k;)if(h=g++,l=d[h],l.joints.length!=a){h+=1;for(m=d.length;h<m;)t=h++,t=d[t],t.joints.length==a||l.material!=t.material||(x=this.jointsDiff(l,t),p=x+(l.joints.length+t.joints.length-x>>1),p>a||(p>e||p==e&&x>c)||(c=x,e=p,f=l,b=t))}if(null==f)break;c=f;e=0;for(f=c.joints;e<f.length;)g=f[e],++e,z.remove(b.joints,g),b.joints.push(g);b.joints.sort(K(this,this.sortByBindIndex));
e=0;for(f=c.triangles;e<f.length;)g=f[e],++e,b.triangles.push(g);z.remove(d,c)}b=0;for(c=d.length;b<c;){e=b++;f=0;for(g=d[e].triangles;f<g.length;)k=g[f],++f,this.triangleGroups[k]=e}b=[];c=0;for(e=this.boundJoints;c<e.length;){f=e[c];++c;g=[];for(k=0;k<d.length;)l=d[k],++k,0<=l.joints.indexOf(f)&&g.push(l);b.push({j:f,pl:g})}b.sort(function(a,b){return b.pl.length-a.pl.length});for(c=0;c<d.length;)e=d[c],++c,e.indexedJoints=[];for(c=0;c<b.length;){e=b[c];++c;e.j.splitIndex=-1;g=0;for(k=a;g<k;){f=
g++;l=!0;h=0;for(m=e.pl;h<m.length;)if(t=m[h],++h,null!=t.indexedJoints[f]){l=!1;break}if(l){e.j.splitIndex=f;g=0;for(k=e.pl;g<k.length;)l=k[g],++g,l.indexedJoints[f]=e.j;break}}if(0>e.j.splitIndex)throw new n("Failed to assign index while spliting skin");}this.splitJoints=[];for(a=0;a<d.length;){b=d[a];++a;c=[];e=0;for(f=b.indexedJoints.length;e<f;)g=e++,g=b.indexedJoints[g],null==g&&(g=this.boundJoints[0]),c.push(g);this.splitJoints.push({material:b.material,joints:c})}d=0;for(a=this.vertexJoints.length;d<
a;)b=d++,this.vertexJoints[b]=this.boundJoints[this.vertexJoints[b]].splitIndex;return!0},__class__:uj};var mc=function(){};p["h3d.col.Collider"]=mc;mc.__name__="h3d.col.Collider";mc.__interfaces__=[Vd];mc.prototype={__class__:mc};var tb=function(){this.xMin=1E20;this.xMax=-1E20;this.yMin=1E20;this.yMax=-1E20;this.zMin=1E20;this.zMax=-1E20};p["h3d.col.Bounds"]=tb;tb.__name__="h3d.col.Bounds";tb.__interfaces__=[mc];tb.fromPoints=function(a,b){var c=new tb;c.xMin=a.x;c.yMin=a.y;c.zMin=a.z;c.xMax=b.x;
c.yMax=b.y;c.zMax=b.z;return c};tb.fromValues=function(a,b,c,d,e,f){var g=new tb;g.xMin=a;g.yMin=b;g.zMin=c;g.xMax=a+d;g.yMax=b+e;g.zMax=c+f;return g};tb.prototype={inFrustum:function(a){return a.hasBounds(this)},inSphere:function(a){var b=this.xMin,c=a.x,d=this.xMax,d=c>d?d:c,c=this.yMin,e=a.y,f=this.yMax,f=e>f?f:e,e=this.zMin,g=a.z,h=this.zMax,g=g>h?h:g,b=(b<d?d:b)-a.x,c=(c<f?f:c)-a.y,d=(e<g?g:e)-a.z;return b*b+c*c+d*d<a.r*a.r},testPlane:function(a){var b=a.nx,c=a.ny,d=a.nz,e=b*(this.xMax+this.xMin)+
c*(this.yMax+this.yMin)+d*(this.zMax+this.zMin);0>b&&(b=-b);0>c&&(c=-c);0>d&&(d=-d);return e+(b*(this.xMax-this.xMin)+c*(this.yMax-this.yMin)+d*(this.zMax-this.zMin))-2*a.d},rayIntersection:function(a,b){var c=(this.xMin-a.px)/a.lx,d=(this.yMin-a.py)/a.ly,e=(this.zMin-a.pz)/a.lz,f=(this.xMax-a.px)/a.lx,g=(this.yMax-a.py)/a.ly,h=(this.zMax-a.pz)/a.lz,k=c>f?f:c,l=d>g?g:d,n=e>h?h:e,c=c<f?f:c,d=d<g?g:d,e=e<h?h:e,h=c>d?d:c,k=k<l?l:k,n=k<n?n:k;return(h>e?e:h)<n?-1:n},inFrustumDetails:function(a,b){null==
b&&(b=!0);var c=1,d=a._14+a._11,e=a._24+a._21,f=a._34+a._31,g=a._44+a._41;if(0>d*(0<d?this.xMax:this.xMin)+e*(0<e?this.yMax:this.yMin)+f*(0<f?this.zMax:this.zMin)+g)return-1;if(0>d*(0<d?this.xMin:this.xMax)+e*(0<e?this.yMin:this.yMax)+f*(0<f?this.zMin:this.zMax)+g)c=0;d=a._14-a._11;e=a._24-a._21;f=a._34-a._31;g=a._44-a._41;if(0>d*(0<d?this.xMax:this.xMin)+e*(0<e?this.yMax:this.yMin)+f*(0<f?this.zMax:this.zMin)+g)return-1;if(0>d*(0<d?this.xMin:this.xMax)+e*(0<e?this.yMin:this.yMax)+f*(0<f?this.zMin:
this.zMax)+g)c=0;d=a._14+a._12;e=a._24+a._22;f=a._34+a._32;g=a._44+a._42;if(0>d*(0<d?this.xMax:this.xMin)+e*(0<e?this.yMax:this.yMin)+f*(0<f?this.zMax:this.zMin)+g)return-1;if(0>d*(0<d?this.xMin:this.xMax)+e*(0<e?this.yMin:this.yMax)+f*(0<f?this.zMin:this.zMax)+g)c=0;d=a._14-a._12;e=a._24-a._22;f=a._34-a._32;g=a._44-a._42;if(0>d*(0<d?this.xMax:this.xMin)+e*(0<e?this.yMax:this.yMin)+f*(0<f?this.zMax:this.zMin)+g)return-1;if(0>d*(0<d?this.xMin:this.xMax)+e*(0<e?this.yMin:this.yMax)+f*(0<f?this.zMin:
this.zMax)+g)c=0;if(b){d=a._13;e=a._23;f=a._33;g=a._43;if(0>d*(0<d?this.xMax:this.xMin)+e*(0<e?this.yMax:this.yMin)+f*(0<f?this.zMax:this.zMin)+g)return-1;if(0>d*(0<d?this.xMin:this.xMax)+e*(0<e?this.yMin:this.yMax)+f*(0<f?this.zMin:this.zMax)+g)c=0;d=a._14-a._13;e=a._24-a._23;f=a._34-a._33;g=a._44-a._43;if(0>d*(0<d?this.xMax:this.xMin)+e*(0<e?this.yMax:this.yMin)+f*(0<f?this.zMax:this.zMin)+g)return-1;if(0>d*(0<d?this.xMin:this.xMax)+e*(0<e?this.yMin:this.yMax)+f*(0<f?this.zMin:this.zMax)+g)c=0}return c},
transform3x3:function(a){var b=this.xMin,c=this.yMin,d=this.zMin,e=this.xMax,f=this.yMax,g=this.zMax;this.xMin=1E20;this.xMax=-1E20;this.yMin=1E20;this.yMax=-1E20;this.zMin=1E20;this.zMax=-1E20;var h=0,k=0,l=0,h=b,k=c,l=d,n=h*a._12+k*a._22+l*a._32,t=h*a._13+k*a._23+l*a._33,h=h*a._11+k*a._21+l*a._31,k=n,l=t;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=b;k=c;l=g;n=h*a._12+k*a._22+l*
a._32;t=h*a._13+k*a._23+l*a._33;h=h*a._11+k*a._21+l*a._31;k=n;l=t;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=b;k=f;l=d;n=h*a._12+k*a._22+l*a._32;t=h*a._13+k*a._23+l*a._33;h=h*a._11+k*a._21+l*a._31;k=n;l=t;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=b;k=f;l=g;b=
h*a._12+k*a._22+l*a._32;n=h*a._13+k*a._23+l*a._33;h=h*a._11+k*a._21+l*a._31;k=b;l=n;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=e;k=c;l=d;b=h*a._12+k*a._22+l*a._32;n=h*a._13+k*a._23+l*a._33;h=h*a._11+k*a._21+l*a._31;k=b;l=n;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=
l);h=e;k=c;l=g;c=h*a._12+k*a._22+l*a._32;b=h*a._13+k*a._23+l*a._33;h=h*a._11+k*a._21+l*a._31;k=c;l=b;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=e;k=f;l=d;d=h*a._12+k*a._22+l*a._32;c=h*a._13+k*a._23+l*a._33;h=h*a._11+k*a._21+l*a._31;k=d;l=c;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&
(this.zMax=l);h=e;k=f;l=g;e=h*a._12+k*a._22+l*a._32;f=h*a._13+k*a._23+l*a._33;h=h*a._11+k*a._21+l*a._31;k=e;l=f;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l)},transform:function(a){var b=this.xMin,c=this.yMin,d=this.zMin,e=this.xMax,f=this.yMax,g=this.zMax;this.xMin=1E20;this.xMax=-1E20;this.yMin=1E20;this.yMax=-1E20;this.zMin=1E20;this.zMax=-1E20;if(!(e<b&&f<c&&g<d)){var h=0,k=0,l=
0,h=b,k=c,l=d,n=h*a._12+k*a._22+l*a._32+a._42,t=h*a._13+k*a._23+l*a._33+a._43,h=h*a._11+k*a._21+l*a._31+a._41,k=n,l=t;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=b;k=c;l=g;n=h*a._12+k*a._22+l*a._32+a._42;t=h*a._13+k*a._23+l*a._33+a._43;h=h*a._11+k*a._21+l*a._31+a._41;k=n;l=t;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=
k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=b;k=f;l=d;n=h*a._12+k*a._22+l*a._32+a._42;t=h*a._13+k*a._23+l*a._33+a._43;h=h*a._11+k*a._21+l*a._31+a._41;k=n;l=t;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=b;k=f;l=g;b=h*a._12+k*a._22+l*a._32+a._42;n=h*a._13+k*a._23+l*a._33+a._43;h=h*a._11+k*a._21+l*a._31+a._41;k=b;l=n;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=
h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=e;k=c;l=d;b=h*a._12+k*a._22+l*a._32+a._42;n=h*a._13+k*a._23+l*a._33+a._43;h=h*a._11+k*a._21+l*a._31+a._41;k=b;l=n;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=e;k=c;l=g;c=h*a._12+k*a._22+l*a._32+a._42;b=h*a._13+k*a._23+l*a._33+a._43;h=h*a._11+k*a._21+l*a._31+a._41;k=c;
l=b;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=e;k=f;l=d;d=h*a._12+k*a._22+l*a._32+a._42;c=h*a._13+k*a._23+l*a._33+a._43;h=h*a._11+k*a._21+l*a._31+a._41;k=d;l=c;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l);h=e;k=f;l=g;e=h*a._12+k*a._22+l*a._32+a._42;f=h*a._13+k*a._23+
l*a._33+a._43;h=h*a._11+k*a._21+l*a._31+a._41;k=e;l=f;h<this.xMin&&(this.xMin=h);h>this.xMax&&(this.xMax=h);k<this.yMin&&(this.yMin=k);k>this.yMax&&(this.yMax=k);l<this.zMin&&(this.zMin=l);l>this.zMax&&(this.zMax=l)}},collide:function(a){return!(this.xMin>a.xMax||this.yMin>a.yMax||this.zMin>a.zMax||this.xMax<a.xMin||this.yMax<a.yMin||this.zMax<a.zMin)},contains:function(a){return a.x>=this.xMin&&a.x<this.xMax&&a.y>=this.yMin&&a.y<this.yMax&&a.z>=this.zMin?a.z<this.zMax:!1},add:function(a){a.xMin<
this.xMin&&(this.xMin=a.xMin);a.xMax>this.xMax&&(this.xMax=a.xMax);a.yMin<this.yMin&&(this.yMin=a.yMin);a.yMax>this.yMax&&(this.yMax=a.yMax);a.zMin<this.zMin&&(this.zMin=a.zMin);a.zMax>this.zMax&&(this.zMax=a.zMax)},addPoint:function(a){a.x<this.xMin&&(this.xMin=a.x);a.x>this.xMax&&(this.xMax=a.x);a.y<this.yMin&&(this.yMin=a.y);a.y>this.yMax&&(this.yMax=a.y);a.z<this.zMin&&(this.zMin=a.z);a.z>this.zMax&&(this.zMax=a.z)},addPos:function(a,b,c){a<this.xMin&&(this.xMin=a);a>this.xMax&&(this.xMax=a);
b<this.yMin&&(this.yMin=b);b>this.yMax&&(this.yMax=b);c<this.zMin&&(this.zMin=c);c>this.zMax&&(this.zMax=c)},intersection:function(a,b){var c=a.xMin,d=b.xMin,e=a.yMin,f=b.yMin,g=a.zMin,h=b.zMin,k=a.xMax,l=b.xMax,n=a.yMax,t=b.yMax,x=a.zMax,m=b.zMax;this.xMin=c<d?d:c;this.xMax=k>l?l:k;this.yMin=e<f?f:e;this.yMax=n>t?t:n;this.zMin=g<h?h:g;this.zMax=x>m?m:x},offset:function(a,b,c){this.xMin+=a;this.xMax+=a;this.yMin+=b;this.yMax+=b;this.zMin+=c;this.zMax+=c},setMin:function(a){this.xMin=a.x;this.yMin=
a.y;this.zMin=a.z},setMax:function(a){this.xMax=a.x;this.yMax=a.y;this.zMax=a.z},load:function(a){this.xMin=a.xMin;this.xMax=a.xMax;this.yMin=a.yMin;this.yMax=a.yMax;this.zMin=a.zMin;this.zMax=a.zMax},scalePivot:function(a){this.xMin*=a;this.yMin*=a;this.zMin*=a;this.xMax*=a;this.yMax*=a;this.zMax*=a},scaleCenter:function(a){var b=0.5*(this.xMax-this.xMin)*a,c=0.5*(this.yMax-this.yMin)*a;a*=0.5*(this.zMax-this.zMin);var d=0.5*(this.xMax+this.xMin),e=0.5*(this.yMax+this.yMin),f=0.5*(this.zMax+this.zMin);
this.xMin=d-b;this.yMin=e-c;this.zMin=f-a;this.xMax=d+b;this.yMax=e+c;this.zMax=f+a},getMin:function(){return new ma(this.xMin,this.yMin,this.zMin)},getCenter:function(){return new ma(0.5*(this.xMin+this.xMax),0.5*(this.yMin+this.yMax),0.5*(this.zMin+this.zMax))},getSize:function(){return new ma(this.xMax-this.xMin,this.yMax-this.yMin,this.zMax-this.zMin)},getMax:function(){return new ma(this.xMax,this.yMax,this.zMax)},get_xSize:function(){return this.xMax-this.xMin},get_ySize:function(){return this.yMax-
this.yMin},get_zSize:function(){return this.zMax-this.zMin},set_xSize:function(a){this.xMax=this.xMin+a;return a},set_ySize:function(a){this.yMax=this.yMin+a;return a},set_zSize:function(a){this.zMax=this.zMin+a;return a},isEmpty:function(){return this.xMax<this.xMin||this.yMax<this.yMin?!0:this.zMax<this.zMin},empty:function(){this.xMin=1E20;this.xMax=-1E20;this.yMin=1E20;this.yMax=-1E20;this.zMin=1E20;this.zMax=-1E20},all:function(){this.xMin=-1E20;this.xMax=1E20;this.yMin=-1E20;this.yMax=1E20;
this.zMin=-1E20;this.zMax=1E20},clone:function(){var a=new tb;a.xMin=this.xMin;a.xMax=this.xMax;a.yMin=this.yMin;a.yMax=this.yMax;a.zMin=this.zMin;a.zMax=this.zMax;return a},toString:function(){return"Bounds{"+r.string(new ma(this.xMin,this.yMin,this.zMin))+","+r.string(new ma(this.xMax-this.xMin,this.yMax-this.yMin,this.zMax-this.zMin))+"}"},toSphere:function(){var a=this.xMax-this.xMin,b=this.yMax-this.yMin,c=this.zMax-this.zMin;return new vf(0.5*(this.xMin+this.xMax),0.5*(this.yMin+this.yMax),
0.5*(this.zMin+this.zMax),0.5*Math.sqrt(a*a+b*b+c*c))},__class__:tb};var Bg=function(a,b){this.a=a;this.b=b};p["h3d.col.OptimizedCollider"]=Bg;Bg.__name__="h3d.col.OptimizedCollider";Bg.__interfaces__=[mc,Vd];Bg.prototype={rayIntersection:function(a,b){return 0>this.a.rayIntersection(a,b)?-1:this.b.rayIntersection(a,b)},contains:function(a){return this.a.contains(a)?this.b.contains(a):!1},inFrustum:function(a){return this.a.inFrustum(a)?this.b.inFrustum(a):!1},inSphere:function(a){return this.a.inSphere(a)?
this.b.inSphere(a):!1},__class__:Bg};var Cg=function(a){this.colliders=a};p["h3d.col.GroupCollider"]=Cg;Cg.__name__="h3d.col.GroupCollider";Cg.__interfaces__=[mc];Cg.prototype={rayIntersection:function(a,b){for(var c=-1,d=0,e=this.colliders;d<e.length;){var f=e[d];++d;f=f.rayIntersection(a,b);if(0<=f){if(!b)return f;if(0>c||f<c)c=f}}return c},contains:function(a){for(var b=0,c=this.colliders;b<c.length;){var d=c[b];++b;if(d.contains(a))return!0}return!1},inFrustum:function(a){for(var b=0,c=this.colliders;b<
c.length;){var d=c[b];++b;if(d.inFrustum(a))return!0}return!1},inSphere:function(a){for(var b=0,c=this.colliders;b<c.length;){var d=c[b];++b;if(d.inSphere(a))return!0}return!1},__class__:Cg};var Dg=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c};p["h3d.col.FPoint"]=Dg;Dg.__name__="h3d.col.FPoint";Dg.prototype={sub:function(a){return new Dg(this.x-a.x,this.y-a.y,this.z-a.z)},add:function(a){return new Dg(this.x+a.x,this.y+a.y,this.z+a.z)},cross:function(a){return new Dg(this.y*
a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},toString:function(){return"FPoint{"+I.fmt(this.x)+","+I.fmt(this.y)+","+I.fmt(this.z)+"}"},__class__:Dg};var oj=function(a){this.checkNearFar=!0;this.pleft=new ka(1,0,0,0);this.pright=new ka(1,0,0,0);this.ptop=new ka(1,0,0,0);this.pbottom=new ka(1,0,0,0);this.pnear=new ka(1,0,0,0);this.pfar=new ka(1,0,0,0);null!=a&&this.loadMatrix(a)};p["h3d.col.Frustum"]=oj;oj.__name__="h3d.col.Frustum";
oj.prototype={loadMatrix:function(a){var b=this.pleft,c=a._24+a._21,d=a._34+a._31,e=-(a._44+a._41);b.nx=a._14+a._11;b.ny=c;b.nz=d;b.d=e;b=this.pright;c=a._24-a._21;d=a._34-a._31;e=a._41-a._44;b.nx=a._14-a._11;b.ny=c;b.nz=d;b.d=e;b=this.ptop;c=a._24-a._22;d=a._34-a._32;e=a._42-a._44;b.nx=a._14-a._12;b.ny=c;b.nz=d;b.d=e;b=this.pbottom;c=a._24+a._22;d=a._34+a._32;e=-(a._44+a._42);b.nx=a._14+a._12;b.ny=c;b.nz=d;b.d=e;b=this.pnear;c=a._23;d=a._33;e=-a._43;b.nx=a._13;b.ny=c;b.nz=d;b.d=e;b=this.pfar;c=a._24-
a._23;d=a._34-a._33;e=a._43-a._44;b.nx=a._14-a._13;b.ny=c;b.nz=d;b.d=e;a=this.pleft;b=1/Math.sqrt(a.nx*a.nx+a.ny*a.ny+a.nz*a.nz);a.nx*=b;a.ny*=b;a.nz*=b;a.d*=b;a=this.pright;b=1/Math.sqrt(a.nx*a.nx+a.ny*a.ny+a.nz*a.nz);a.nx*=b;a.ny*=b;a.nz*=b;a.d*=b;a=this.ptop;b=1/Math.sqrt(a.nx*a.nx+a.ny*a.ny+a.nz*a.nz);a.nx*=b;a.ny*=b;a.nz*=b;a.d*=b;a=this.pbottom;b=1/Math.sqrt(a.nx*a.nx+a.ny*a.ny+a.nz*a.nz);a.nx*=b;a.ny*=b;a.nz*=b;a.d*=b;a=this.pnear;b=1/Math.sqrt(a.nx*a.nx+a.ny*a.ny+a.nz*a.nz);a.nx*=b;a.ny*=
b;a.nz*=b;a.d*=b;a=this.pfar;b=1/Math.sqrt(a.nx*a.nx+a.ny*a.ny+a.nz*a.nz);a.nx*=b;a.ny*=b;a.nz*=b;a.d*=b},transform:function(a){var b=new R;b.initInverse(a);b.transpose();a=this.pleft;var c=a.nx,d=a.ny,e=a.nz,f=-a.d,g=c*b._12+d*b._22+e*b._32+f*b._42,h=c*b._13+d*b._23+e*b._33+f*b._43,k=c*b._14+d*b._24+e*b._34+f*b._44,c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.pright;c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*b._23+e*b._33+f*b._43;k=c*b._14+d*
b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.ptop;c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*b._23+e*b._33+f*b._43;k=c*b._14+d*b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.pbottom;c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*b._23+e*b._33+f*b._43;k=c*b._14+d*b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.pfar;
c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*b._23+e*b._33+f*b._43;k=c*b._14+d*b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.pnear;c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*b._23+e*b._33+f*b._43;k=c*b._14+d*b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;b=this.pleft;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=this.pright;a=
1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=this.ptop;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=this.pbottom;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=this.pnear;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=this.pfar;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a},transform3x3:function(a){var b=new R;b.initInverse3x3(a);b.transpose();
a=this.pleft;var c=a.nx,d=a.ny,e=a.nz,f=-a.d,g=c*b._12+d*b._22+e*b._32+f*b._42,h=c*b._13+d*b._23+e*b._33+f*b._43,k=c*b._14+d*b._24+e*b._34+f*b._44,c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.pright;c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*b._23+e*b._33+f*b._43;k=c*b._14+d*b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.ptop;c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*
b._23+e*b._33+f*b._43;k=c*b._14+d*b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.pbottom;c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*b._23+e*b._33+f*b._43;k=c*b._14+d*b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.pfar;c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*b._23+e*b._33+f*b._43;k=c*b._14+d*b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;
a.nx=c;a.ny=g;a.nz=h;a.d=-k;a=this.pnear;c=a.nx;d=a.ny;e=a.nz;f=-a.d;g=c*b._12+d*b._22+e*b._32+f*b._42;h=c*b._13+d*b._23+e*b._33+f*b._43;k=c*b._14+d*b._24+e*b._34+f*b._44;c=c*b._11+d*b._21+e*b._31+f*b._41;a.nx=c;a.ny=g;a.nz=h;a.d=-k;b=this.pleft;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=this.pright;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=this.ptop;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=
this.pbottom;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=this.pnear;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a;b=this.pfar;a=1/Math.sqrt(b.nx*b.nx+b.ny*b.ny+b.nz*b.nz);b.nx*=a;b.ny*=a;b.nz*=a;b.d*=a},hasPoint:function(a){var b=this.pleft;if(0>b.nx*a.x+b.ny*a.y+b.nz*a.z-b.d)return!1;b=this.pright;if(0>b.nx*a.x+b.ny*a.y+b.nz*a.z-b.d)return!1;b=this.ptop;if(0>b.nx*a.x+b.ny*a.y+b.nz*a.z-b.d)return!1;b=this.pbottom;if(0>b.nx*a.x+b.ny*a.y+
b.nz*a.z-b.d)return!1;if(this.checkNearFar){b=this.pnear;if(0>b.nx*a.x+b.ny*a.y+b.nz*a.z-b.d)return!1;b=this.pfar;if(0>b.nx*a.x+b.ny*a.y+b.nz*a.z-b.d)return!1}return!0},hasSphere:function(a){var b=a.x,c=a.y,d=a.z,e=this.pleft;if(e.nx*b+e.ny*c+e.nz*d-e.d<-a.r)return!1;e=this.pright;if(e.nx*b+e.ny*c+e.nz*d-e.d<-a.r)return!1;e=this.ptop;if(e.nx*b+e.ny*c+e.nz*d-e.d<-a.r)return!1;e=this.pbottom;if(e.nx*b+e.ny*c+e.nz*d-e.d<-a.r)return!1;if(this.checkNearFar){e=this.pnear;if(e.nx*b+e.ny*c+e.nz*d-e.d<-a.r)return!1;
e=this.pfar;if(e.nx*b+e.ny*c+e.nz*d-e.d<-a.r)return!1}return!0},hasBounds:function(a){var b=this.pleft,c=b.nx,d=b.ny,e=b.nz,f=c*(a.xMax+a.xMin)+d*(a.yMax+a.yMin)+e*(a.zMax+a.zMin);0>c&&(c=-c);0>d&&(d=-d);0>e&&(e=-e);if(0>f+(c*(a.xMax-a.xMin)+d*(a.yMax-a.yMin)+e*(a.zMax-a.zMin))-2*b.d)return!1;b=this.pright;c=b.nx;d=b.ny;e=b.nz;f=c*(a.xMax+a.xMin)+d*(a.yMax+a.yMin)+e*(a.zMax+a.zMin);0>c&&(c=-c);0>d&&(d=-d);0>e&&(e=-e);if(0>f+(c*(a.xMax-a.xMin)+d*(a.yMax-a.yMin)+e*(a.zMax-a.zMin))-2*b.d)return!1;b=
this.ptop;c=b.nx;d=b.ny;e=b.nz;f=c*(a.xMax+a.xMin)+d*(a.yMax+a.yMin)+e*(a.zMax+a.zMin);0>c&&(c=-c);0>d&&(d=-d);0>e&&(e=-e);if(0>f+(c*(a.xMax-a.xMin)+d*(a.yMax-a.yMin)+e*(a.zMax-a.zMin))-2*b.d)return!1;b=this.ptop;c=b.nx;d=b.ny;e=b.nz;f=c*(a.xMax+a.xMin)+d*(a.yMax+a.yMin)+e*(a.zMax+a.zMin);0>c&&(c=-c);0>d&&(d=-d);0>e&&(e=-e);if(0>f+(c*(a.xMax-a.xMin)+d*(a.yMax-a.yMin)+e*(a.zMax-a.zMin))-2*b.d)return!1;b=this.pnear;c=b.nx;d=b.ny;e=b.nz;f=c*(a.xMax+a.xMin)+d*(a.yMax+a.yMin)+e*(a.zMax+a.zMin);0>c&&(c=
-c);0>d&&(d=-d);0>e&&(e=-e);if(0>f+(c*(a.xMax-a.xMin)+d*(a.yMax-a.yMin)+e*(a.zMax-a.zMin))-2*b.d)return!1;b=this.pfar;c=b.nx;d=b.ny;e=b.nz;f=c*(a.xMax+a.xMin)+d*(a.yMax+a.yMin)+e*(a.zMax+a.zMin);0>c&&(c=-c);0>d&&(d=-d);0>e&&(e=-e);return 0>f+(c*(a.xMax-a.xMin)+d*(a.yMax-a.yMin)+e*(a.zMax-a.zMin))-2*b.d?!1:!0},__class__:oj};var Gh=function(a,b){this.tmpRay=new Xd;this.obj=a;this.collider=b};p["h3d.col.ObjectCollider"]=Gh;Gh.__name__="h3d.col.ObjectCollider";Gh.__interfaces__=[Vd,mc];Gh.prototype={rayIntersection:function(a,
b){var c=this.tmpRay;c.px=a.px;c.py=a.py;c.pz=a.pz;c.lx=a.lx;c.ly=a.ly;c.lz=a.lz;var c=this.obj.getInvPos(),d=a.px,e=a.py,f=a.pz,g=d*c._12+e*c._22+f*c._32+1*c._42,h=d*c._13+e*c._23+f*c._33+1*c._43,d=d*c._11+e*c._21+f*c._31+1*c._41;a.px=d;a.py=g;a.pz=h;d=a.lx;e=a.ly;f=a.lz;g=d*c._12+e*c._22+f*c._32;h=d*c._13+e*c._23+f*c._33;d=d*c._11+e*c._21+f*c._31;a.lx=d;a.ly=g;a.lz=h;a.normalize();c=this.collider.rayIntersection(a,b);if(0>c)return d=this.tmpRay,a.px=d.px,a.py=d.py,a.pz=d.pz,a.lx=d.lx,a.ly=d.ly,
a.lz=d.lz,c;d=a.px+c*a.lx;f=a.py+c*a.ly;g=a.pz+c*a.lz;h=this.obj.absPos;e=d*h._12+f*h._22+g*h._32+h._42;c=d*h._13+f*h._23+g*h._33+h._43;d=d*h._11+f*h._21+g*h._31+h._41;f=this.tmpRay;a.px=f.px;a.py=f.py;a.pz=f.pz;a.lx=f.lx;a.ly=f.ly;a.lz=f.lz;d-=a.px;e-=a.py;c-=a.pz;return Math.sqrt(d*d+e*e+c*c)},contains:function(a){var b=a.x,c=a.y,d=a.z,e=this.obj.getInvPos(),f=a.x*e._12+a.y*e._22+a.z*e._32+e._42,g=a.x*e._13+a.y*e._23+a.z*e._33+e._43;a.x=a.x*e._11+a.y*e._21+a.z*e._31+e._41;a.y=f;a.z=g;e=this.collider.contains(a);
a.x=b;a.y=c;a.z=d;return e},inFrustum:function(a){throw new n("Not implemented");},inSphere:function(a){throw new n("Not implemented");},__class__:Gh};var ka=function(a,b,c,d){this.nx=a;this.ny=b;this.nz=c;this.d=d};p["h3d.col.Plane"]=ka;ka.__name__="h3d.col.Plane";ka.fromPoints=function(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=b.z-a.z;b=c.x-a.x;var g=c.y-a.y,h=c.z-a.z;c=e*h-f*g;f=f*b-d*h;d=d*g-e*b;return new ka(c,f,d,c*a.x+f*a.y+d*a.z)};ka.fromNormalPoint=function(a,b){return new ka(a.x,a.y,a.z,a.x*b.x+
a.y*b.y+a.z*b.z)};ka.X=function(a){null==a&&(a=0);return new ka(1,0,0,a)};ka.Y=function(a){null==a&&(a=0);return new ka(0,1,0,a)};ka.Z=function(a){null==a&&(a=0);return new ka(0,0,1,a)};ka.frustumLeft=function(a){return new ka(a._14+a._11,a._24+a._21,a._34+a._31,-(a._44+a._41))};ka.frustumRight=function(a){return new ka(a._14-a._11,a._24-a._21,a._34-a._31,a._41-a._44)};ka.frustumBottom=function(a){return new ka(a._14+a._12,a._24+a._22,a._34+a._32,-(a._44+a._42))};ka.frustumTop=function(a){return new ka(a._14-
a._12,a._24-a._22,a._34-a._32,a._42-a._44)};ka.frustumNear=function(a){return new ka(a._13,a._23,a._33,-a._43)};ka.frustumFar=function(a){return new ka(a._14-a._13,a._24-a._23,a._34-a._33,a._43-a._44)};ka.prototype={getNormal:function(){return new ma(this.nx,this.ny,this.nz)},getNormalDistance:function(){return this.d},load:function(a){this.nx=a.nx;this.ny=a.ny;this.nz=a.nz;this.d=a.d},transform:function(a){var b=new R;b.initInverse(a);b.transpose();a=this.nx;var c=this.ny,d=this.nz,e=-this.d,f=a*
b._12+c*b._22+d*b._32+e*b._42,g=a*b._13+c*b._23+d*b._33+e*b._43,h=a*b._14+c*b._24+d*b._34+e*b._44;this.nx=a=a*b._11+c*b._21+d*b._31+e*b._41;this.ny=f;this.nz=g;this.d=-h},transform3x3:function(a){var b=new R;b.initInverse3x3(a);b.transpose();a=this.nx;var c=this.ny,d=this.nz,e=-this.d,f=a*b._12+c*b._22+d*b._32+e*b._42,g=a*b._13+c*b._23+d*b._33+e*b._43,h=a*b._14+c*b._24+d*b._34+e*b._44;this.nx=a=a*b._11+c*b._21+d*b._31+e*b._41;this.ny=f;this.nz=g;this.d=-h},transformInverseTranspose:function(a){var b=
this.nx,c=this.ny,d=this.nz,e=-this.d,f=b*a._12+c*a._22+d*a._32+e*a._42,g=b*a._13+c*a._23+d*a._33+e*a._43,h=b*a._14+c*a._24+d*a._34+e*a._44;this.nx=b=b*a._11+c*a._21+d*a._31+e*a._41;this.ny=f;this.nz=g;this.d=-h},normalize:function(){var a=1/Math.sqrt(this.nx*this.nx+this.ny*this.ny+this.nz*this.nz);this.nx*=a;this.ny*=a;this.nz*=a;this.d*=a},toString:function(){return"Plane{"+r.string(new ma(this.nx,this.ny,this.nz))+","+I.fmt(this.d)+"}"},distance:function(a){return this.nx*a.x+this.ny*a.y+this.nz*
a.z-this.d},side:function(a){return 0<=this.nx*a.x+this.ny*a.y+this.nz*a.z-this.d},project:function(a){var b=this.nx*a.x+this.ny*a.y+this.nz*a.z-this.d;return new ma(a.x-b*this.nx,a.y-b*this.ny,a.z-b*this.nz)},projectTo:function(a,b){var c=this.nx*a.x+this.ny*a.y+this.nz*a.z-this.d;b.x=a.x-c*this.nx;b.y=a.y-c*this.ny;b.z=a.z-c*this.nz},__class__:ka};var ma=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c};p["h3d.col.Point"]=ma;ma.__name__="h3d.col.Point";ma.prototype=
{scale:function(a){this.x*=a;this.y*=a;this.z*=a},inFrustum:function(a){return a.hasPoint(this)},set:function(a,b,c){this.x=a;this.y=b;this.z=c},sub:function(a){return new ma(this.x-a.x,this.y-a.y,this.z-a.z)},add:function(a){return new ma(this.x+a.x,this.y+a.y,this.z+a.z)},cross:function(a){return new ma(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},setLength:function(a){var b=this.x*this.x+this.y*this.y+
this.z*this.z,b=1/Math.sqrt(b);this.x*=b;this.y*=b;this.z*=b;this.x*=a;this.y*=a;this.z*=a},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},distanceSq:function(a){var b=a.x-this.x,c=a.y-this.y;a=a.z-this.z;return b*b+c*c+a*a},distance:function(a){var b=a.x-this.x,c=a.y-this.y;a=a.z-this.z;return Math.sqrt(b*b+c*c+a*a)},normalize:function(){var a=this.x*this.x+this.y*this.y+this.z*this.z,a=1E-10>a?0:1/Math.sqrt(a);
this.x*=a;this.y*=a;this.z*=a},normalizeFast:function(){var a=this.x*this.x+this.y*this.y+this.z*this.z,a=1/Math.sqrt(a);this.x*=a;this.y*=a;this.z*=a},transform:function(a){var b=this.x*a._12+this.y*a._22+this.z*a._32+a._42,c=this.x*a._13+this.y*a._23+this.z*a._33+a._43;this.x=this.x*a._11+this.y*a._21+this.z*a._31+a._41;this.y=b;this.z=c},transform3x3:function(a){var b=this.x*a._12+this.y*a._22+this.z*a._32,c=this.x*a._13+this.y*a._23+this.z*a._33;this.x=this.x*a._11+this.y*a._21+this.z*a._31;this.y=
b;this.z=c},toVector:function(){return new U(this.x,this.y,this.z)},clone:function(){return new ma(this.x,this.y,this.z)},load:function(a){this.x=a.x;this.y=a.y;this.z=a.z},toString:function(){return"Point{"+I.fmt(this.x)+","+I.fmt(this.y)+","+I.fmt(this.z)+"}"},__class__:ma};var Ie=function(){this.next=null};p["h3d.col.TriPlane"]=Ie;Ie.__name__="h3d.col.TriPlane";Ie.__interfaces__=[mc];Ie.prototype={init:function(a,b,c){this.p0x=a.x;this.p0y=a.y;this.p0z=a.z;var d=b.x-a.x,e=b.y-a.y;b=b.z-a.z;var f=
c.x-a.x,g=c.y-a.y;c=c.z-a.z;var h=e*c-b*g,k=b*f-d*c,l=d*g-e*f;this.d=h*a.x+k*a.y+l*a.z;this.nx=h;this.ny=k;this.nz=l;this.d1x=d;this.d1y=e;this.d1z=b;this.d2x=f;this.d2y=g;this.d2z=c;this.dot00=d*d+e*e+b*b;this.dot01=d*f+e*g+b*c;this.dot11=f*f+g*g+c*c;this.invDenom=1/(this.dot00*this.dot11-this.dot01*this.dot01)},clone:function(){var a=new Ie;a.p0x=this.p0x;a.p0y=this.p0y;a.p0z=this.p0z;a.d1x=this.d1x;a.d1y=this.d1y;a.d1z=this.d1z;a.d2x=this.d2x;a.d2y=this.d2y;a.d2z=this.d2z;a.dot00=this.dot00;a.dot01=
this.dot01;a.dot11=this.dot11;a.invDenom=this.invDenom;a.nx=this.nx;a.ny=this.ny;a.nz=this.nz;a.d=this.d;null!=this.next&&(a.next=this.next.clone());return a},load:function(a){this.p0x=a.p0x;this.p0y=a.p0y;this.p0z=a.p0z;this.d1x=a.d1x;this.d1y=a.d1y;this.d1z=a.d1z;this.d2x=a.d2x;this.d2y=a.d2y;this.d2z=a.d2z;this.dot00=a.dot00;this.dot01=a.dot01;this.dot11=a.dot11;this.invDenom=a.invDenom;this.nx=a.nx;this.ny=a.ny;this.nz=a.nz;this.d=a.d},transform:function(a){var b=this.p0x,c=this.p0y,d=this.p0z,
e=this.d1x+this.p0x,f=this.d1y+this.p0y,g=this.d1z+this.p0z,h=this.d2x+this.p0x,k=this.d2y+this.p0y,l=this.d2z+this.p0z,n=b*a._12+c*a._22+d*a._32+a._42,t=b*a._13+c*a._23+d*a._33+a._43,b=b*a._11+c*a._21+d*a._31+a._41,c=n,d=t,t=e*a._12+f*a._22+g*a._32+a._42,n=e*a._13+f*a._23+g*a._33+a._43,e=e*a._11+f*a._21+g*a._31+a._41,g=h*a._12+k*a._22+l*a._32+a._42,f=h*a._13+k*a._23+l*a._33+a._43,h=h*a._11+k*a._21+l*a._31+a._41;this.p0x=b;this.p0y=c;this.p0z=d;a=e-b;e=t-c;k=n-d;h-=b;l=g-c;f-=d;n=e*f-k*l;g=k*h-a*
f;t=a*l-e*h;this.d=n*b+g*c+t*d;this.nx=n;this.ny=g;this.nz=t;this.d1x=a;this.d1y=e;this.d1z=k;this.d2x=h;this.d2y=l;this.d2z=f;this.dot00=a*a+e*e+k*k;this.dot01=a*h+e*l+k*f;this.dot11=h*h+l*l+f*f;this.invDenom=1/(this.dot00*this.dot11-this.dot01*this.dot01)},contains:function(a){var b=a.x-this.p0x,c=a.y-this.p0y,d=a.z-this.p0z;a=this.d1x*b+this.d1y*c+this.d1z*d;c=this.d2x*b+this.d2y*c+this.d2z*d;b=(this.dot11*a-this.dot01*c)*this.invDenom;a=(this.dot00*c-this.dot01*a)*this.invDenom;return 0<=b&&0<=
a?1>b+a:!1},side:function(a){return 0<=this.nx*a.x+this.ny*a.y+this.nz*a.z-this.d},inFrustum:function(a){throw new n("Not implemented");},inSphere:function(a){throw new n("Not implemented");},rayIntersection:function(a,b){var c=a.lx*this.nx+a.ly*this.ny+a.lz*this.nz;if(0<=c)return-1;c=(this.d-(a.px*this.nx+a.py*this.ny+a.pz*this.nz))/c;if(0>c)return-1;var d=a.px+a.lx*c-this.p0x,e=a.py+a.ly*c-this.p0y,f=a.pz+a.lz*c-this.p0z,g=this.d1x*d+this.d1y*e+this.d1z*f,e=this.d2x*d+this.d2y*e+this.d2z*f,d=(this.dot11*
g-this.dot01*e)*this.invDenom,g=(this.dot00*e-this.dot01*g)*this.invDenom;return!(0<=d&&0<=g&&1>d+g)?-1:c},isPointInTriangle:function(a,b,c){a-=this.p0x;b-=this.p0y;var d=c-this.p0z;c=this.d1x*a+this.d1y*b+this.d1z*d;b=this.d2x*a+this.d2y*b+this.d2z*d;a=(this.dot11*c-this.dot01*b)*this.invDenom;c=(this.dot00*b-this.dot01*c)*this.invDenom;return 0<=a&&0<=c?1>a+c:!1},getPoints:function(){return[new ma(this.p0x,this.p0y,this.p0z),new ma(this.d1x+this.p0x,this.d1y+this.p0y,this.d1z+this.p0z),new ma(this.d2x+
this.p0x,this.d2y+this.p0y,this.d2z+this.p0z)]},__class__:Ie};var Eg=function(){};p["h3d.col.Polygon"]=Eg;Eg.__name__="h3d.col.Polygon";Eg.__interfaces__=[mc];Eg.prototype={addBuffers:function(a,b,c){null==c&&(c=3);for(var d=0,e=b.length/3|0;d<e;){var f=3*d++,g=new Ie,h=b[f]*c,k=b[f+1]*c,l=b[f+2]*c,f=a[h],n=a[h+1],h=a[h+2],t=a[k],x=a[k+1],k=a[k+2],m=a[l],p=a[l+1],q=a[l+2];g.p0x=f;g.p0y=n;g.p0z=h;var l=t-f,x=x-n,k=k-h,m=m-f,p=p-n,q=q-h,t=x*q-k*p,r=k*m-l*q,s=l*p-x*m;g.d=t*f+r*n+s*h;g.nx=t;g.ny=r;g.nz=
s;g.d1x=l;g.d1y=x;g.d1z=k;g.d2x=m;g.d2y=p;g.d2z=q;g.dot00=l*l+x*x+k*k;g.dot01=l*m+x*p+k*q;g.dot11=m*m+p*p+q*q;g.invDenom=1/(g.dot00*g.dot11-g.dot01*g.dot01);g.next=this.triPlanes;this.triPlanes=g}},isConvex:function(){return!0},clone:function(){var a=new Eg;a.triPlanes=new Ie;var b=this.triPlanes,c=new Ie;c.p0x=b.p0x;c.p0y=b.p0y;c.p0z=b.p0z;c.d1x=b.d1x;c.d1y=b.d1y;c.d1z=b.d1z;c.d2x=b.d2x;c.d2y=b.d2y;c.d2z=b.d2z;c.dot00=b.dot00;c.dot01=b.dot01;c.dot11=b.dot11;c.invDenom=b.invDenom;c.nx=b.nx;c.ny=b.ny;
c.nz=b.nz;c.d=b.d;if(null!=b.next){var b=b.next,d=new Ie;d.p0x=b.p0x;d.p0y=b.p0y;d.p0z=b.p0z;d.d1x=b.d1x;d.d1y=b.d1y;d.d1z=b.d1z;d.d2x=b.d2x;d.d2y=b.d2y;d.d2z=b.d2z;d.dot00=b.dot00;d.dot01=b.dot01;d.dot11=b.dot11;d.invDenom=b.invDenom;d.nx=b.nx;d.ny=b.ny;d.nz=b.nz;d.d=b.d;null!=b.next&&(d.next=b.next.clone());c.next=d}a.triPlanes=c;return a},transform:function(a){for(var b=this.triPlanes;null!=b;)b.transform(a),b=b.next},getPoints:function(){for(var a=[],b=this.triPlanes;null!=b;)a=a.concat(b.getPoints()),
b=b.next;return a},contains:function(a){if(!this.isConvex())throw new n("Not implemented for concave polygon");for(var b=this.triPlanes;null!=b;){if(0<=b.nx*a.x+b.ny*a.y+b.nz*a.z-b.d)return!1;b=b.next}return!0},rayIntersection:function(a,b){for(var c=this.triPlanes,d=-1;null!=c;){var e=a.lx*c.nx+a.ly*c.ny+a.lz*c.nz;if(0<=e)e=-1;else if(e=(c.d-(a.px*c.nx+a.py*c.ny+a.pz*c.nz))/e,0>e)e=-1;else var f=a.px+a.lx*e-c.p0x,g=a.py+a.ly*e-c.p0y,h=a.pz+a.lz*e-c.p0z,k=c.d1x*f+c.d1y*g+c.d1z*h,g=c.d2x*f+c.d2y*g+
c.d2z*h,f=(c.dot11*k-c.dot01*g)*c.invDenom,k=(c.dot00*g-c.dot01*k)*c.invDenom,e=!(0<=f&&0<=k&&1>f+k)?-1:e;if(0<=e){if(!b)return e;if(0>d||e<d)d=e}c=c.next}return d},inFrustum:function(a){throw new n("Not implemented");},inSphere:function(a){throw new n("Not implemented");},__class__:Eg};var wf=function(){};p["h3d.col.PolygonBuffer"]=wf;wf.__name__="h3d.col.PolygonBuffer";wf.__interfaces__=[mc];wf.prototype={setData:function(a,b,c,d){null==d&&(d=-1);null==c&&(c=0);this.buffer=a;this.indexes=b;this.startIndex=
c;this.triCount=0<=d?d:(b.length-c)/3|0},contains:function(a){var b=this.startIndex,c=a.x,d=a.y;a=a.z;for(var e=0,f=this.triCount;e<f;){e++;var g=3*this.indexes[b++],h=this.buffer[g++],k=this.buffer[g++],g=this.buffer[g],l=3*this.indexes[b++],n=this.buffer[l++],t=this.buffer[l++],x=this.buffer[l],l=3*this.indexes[b++],m=this.buffer[l++],p=this.buffer[l++],n=n-h,t=t-k,x=x-g,m=m-h,p=p-k,q=this.buffer[l]-g,l=t*q-x*p,x=x*m-n*q,n=n*p-t*m;if(l*c+x*d+n*a>=l*h+x*k+n*g)return!1}return!0},inFrustum:function(a){throw new n("Not implemented");
},inSphere:function(a){throw new n("Not implemented");},rayIntersection:function(a,b){for(var c=this.startIndex,d=a.lx,e=a.ly,f=a.lz,g=a.px,h=a.py,k=a.pz,l=-1,n=0,t=this.triCount;n<t;){n++;var m=3*this.indexes[c++],p=this.buffer[m++],q=this.buffer[m++],r=this.buffer[m],s=3*this.indexes[c++],m=this.buffer[s++],ba=this.buffer[s++],E=this.buffer[s],C=3*this.indexes[c++],s=this.buffer[C++],u=this.buffer[C++],m=m-p,ba=ba-q,E=E-r,s=s-p,u=u-q,C=this.buffer[C]-r,y=e*C-f*u,v=f*s-d*C,w=d*u-e*s,z=m*y+ba*v+E*
w;if(!(1E-10>z)&&(z=1/z,p=g-p,q=h-q,r=k-r,y=(p*y+q*v+r*w)*z,!(0>y||1<y)))if(v=q*E-r*ba,r=r*m-p*E,m=p*ba-q*m,ba=(d*v+e*r+f*m)*z,!(0>ba||1<y+ba))if(m=(s*v+u*r+C*m)*z,!(1E-10>m)){if(!b)return m;if(0>l||m<l)l=m}}return l},__class__:wf};var Xd=function(){};p["h3d.col.Ray"]=Xd;Xd.__name__="h3d.col.Ray";Xd.fromPoints=function(a,b){var c=new Xd;c.px=a.x;c.py=a.y;c.pz=a.z;c.lx=b.x-a.x;c.ly=b.y-a.y;c.lz=b.z-a.z;c.normalize();return c};Xd.fromValues=function(a,b,c,d,e,f){var g=new Xd;g.px=a;g.py=b;g.pz=c;g.lx=
d;g.ly=e;g.lz=f;g.normalize();return g};Xd.prototype={clone:function(){var a=new Xd;a.px=this.px;a.py=this.py;a.pz=this.pz;a.lx=this.lx;a.ly=this.ly;a.lz=this.lz;return a},load:function(a){this.px=a.px;this.py=a.py;this.pz=a.pz;this.lx=a.lx;this.ly=a.ly;this.lz=a.lz},normalize:function(){var a=this.lx*this.lx+this.ly*this.ly+this.lz*this.lz;1!=a&&(a=1E-10>a?0:1/Math.sqrt(a),this.lx*=a,this.ly*=a,this.lz*=a)},transform:function(a){var b=this.px,c=this.py,d=this.pz,e=b*a._12+c*a._22+d*a._32+1*a._42,
f=b*a._13+c*a._23+d*a._33+1*a._43;this.px=b=b*a._11+c*a._21+d*a._31+1*a._41;this.py=e;this.pz=f;b=this.lx;c=this.ly;d=this.lz;e=b*a._12+c*a._22+d*a._32;f=b*a._13+c*a._23+d*a._33;this.lx=b=b*a._11+c*a._21+d*a._31;this.ly=e;this.lz=f;this.normalize()},getPos:function(){return new ma(this.px,this.py,this.pz)},getDir:function(){return new ma(this.lx,this.ly,this.lz)},getPoint:function(a){return new ma(this.px+a*this.lx,this.py+a*this.ly,this.pz+a*this.lz)},toString:function(){return"Ray{"+r.string(new ma(this.px,
this.py,this.pz))+","+r.string(new ma(this.lx,this.ly,this.lz))+"}"},intersect:function(a){var b=this.lx*a.nx+this.ly*a.ny+this.lz*a.nz;a=a.d-(this.px*a.nx+this.py*a.ny+this.pz*a.nz);if(1E-10>(0>b?-b:b))return 1E-10>(0>a?-a:a)?new ma(this.px,this.py,this.pz):null;b=a/b;return new ma(this.px+this.lx*b,this.py+this.ly*b,this.pz+this.lz*b)},collideFrustum:function(a){var b=this.px,c=this.py,d=this.pz,e=b*a._12+c*a._22+d*a._32+1*a._42,f=b*a._13+c*a._23+d*a._33+1*a._43,g=1/(b*a._14+c*a._24+d*a._34+1*a._44),
b=(b*a._11+c*a._21+d*a._31+1*a._41)*g,c=e*g,d=f*g,h=this.px+this.lx,k=this.py+this.ly,l=this.pz+this.lz,g=h*a._12+k*a._22+l*a._32+1*a._42,e=h*a._13+k*a._23+l*a._33+1*a._43,f=1/(h*a._14+k*a._24+l*a._34+1*a._44),h=(h*a._11+k*a._21+l*a._31+1*a._41)*f,k=1/(h-b),g=1/(g*f-c),h=1/(e*f-d);a=(-1-b)*k;e=(1-b)*k;b=(-1-c)*g;f=(1-c)*g;c=(0-d)*h;d=(1-d)*h;g=a>e?e:a;h=b>f?f:b;g=g<h?h:g;h=c>d?d:c;a=a<e?e:a;b=b<f?f:b;b=a>b?b:a;d=c<d?d:c;d=b>d?d:b;return!(0>d||(g<h?h:g)>d)},collide:function(a){var b=1/this.lx,c=1/
this.ly,d=1/this.lz,e=(a.xMin-this.px)*b,f=(a.xMax-this.px)*b,b=(a.yMin-this.py)*c,g=(a.yMax-this.py)*c,c=(a.zMin-this.pz)*d;a=(a.zMax-this.pz)*d;var d=e>f?f:e,h=b>g?g:b,d=d<h?h:d,h=c>a?a:c,e=e<f?f:e,b=b<g?g:b,e=e>b?b:e,c=c<a?a:c,c=e>c?c:e;return 0>c?!1:(d<h?h:d)>c?!1:!0},__class__:Xd};var Hh=function(a,b){this.obj=a;this.col=b;var c=this.transform=new wf,d=b.buffer,e=Array(d.length);Ui.blit(d,0,e,0,d.length);c.setData(e,b.indexes,b.startIndex,b.triCount)};p["h3d.col.SkinCollider"]=Hh;Hh.__name__=
"h3d.col.SkinCollider";Hh.__interfaces__=[mc,Vd];Hh.prototype={contains:function(a){this.applyTransform();return this.transform.contains(a)},inFrustum:function(a){this.applyTransform();return this.transform.inFrustum(a)},inSphere:function(a){throw new n("Not implemented");},rayIntersection:function(a,b){this.applyTransform();return this.transform.rayIntersection(a,b)},applyTransform:function(){if(this.obj.jointsUpdated||this.lastFrame!=this.obj.lastFrame){this.lastFrame=this.obj.lastFrame;this.obj.syncJoints();
for(var a=0,b=0,c=this.obj.skinData.bonesPerVertex,d=0,e=this.obj.skinData.vertexCount;d<e;){d++;for(var f=0,g=0,h=0,k=this.col.buffer[b],l=this.col.buffer[b+1],n=this.col.buffer[b+2],t=0,m=c;t<m;){t++;var p=this.obj.skinData.vertexWeights[a];if(0==p)++a;else var q=this.obj.skinData.vertexJoints[a++],r=k,s=l,ba=n,q=this.obj.currentPalette[q],E=r*q._12+s*q._22+ba*q._32+q._42,C=r*q._13+s*q._23+ba*q._33+q._43,r=r*q._11+s*q._21+ba*q._31+q._41,s=E,ba=C,f=f+r*p,g=g+s*p,h=h+ba*p}this.transform.buffer[b++]=
f;this.transform.buffer[b++]=g;this.transform.buffer[b++]=h}}},__class__:Hh};var vf=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c;this.r=d};p["h3d.col.Sphere"]=vf;vf.__name__="h3d.col.Sphere";vf.__interfaces__=[mc];vf.prototype={load:function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c;this.r=d},getCenter:function(){return new ma(this.x,this.y,this.z)},contains:function(a){var b=a.x-this.x,
c=a.y-this.y;a=a.z-this.z;return b*b+c*c+a*a<this.r*this.r},rayIntersection:function(a,b){var c=a.px+a.lx,d=a.py+a.ly,e=a.pz+a.lz,f=a.lx*a.lx+a.ly*a.ly+a.lz*a.lz,g=2*a.lx*(this.x-c)+2*a.ly*(this.y-d)+2*a.lz*(this.z-e),c=g*g-4*f*(this.x*this.x+this.y*this.y+this.z*this.z+(c*c+d*d+e*e)-2*(this.x*c+this.y*d+this.z*e)-this.r*this.r);if(0>c)return-1;c=Math.sqrt(c);return 1-(-g+c)/(2*f)},inFrustum:function(a){return a.hasSphere(this)},inSphere:function(a){var b=a.x-this.x,c=a.y-this.y,d=a.z-this.z;return b*
b+c*c+d*d<(a.r+this.r)*(a.r+this.r)},toString:function(){return"Sphere{"+r.string(new ma(this.x,this.y,this.z))+","+I.fmt(this.r)+"}"},__class__:vf};var Gb=M["h3d.impl.Feature"]={__ename__:!0,__constructs__:"StandardDerivatives FloatTextures AllocDepthBuffer HardwareAccelerated MultipleRenderTargets Queries SRGBTextures ShaderModel3 BottomLeftCoords Wireframe".split(" "),StandardDerivatives:{_hx_index:0,__enum__:"h3d.impl.Feature",toString:m},FloatTextures:{_hx_index:1,__enum__:"h3d.impl.Feature",
toString:m},AllocDepthBuffer:{_hx_index:2,__enum__:"h3d.impl.Feature",toString:m},HardwareAccelerated:{_hx_index:3,__enum__:"h3d.impl.Feature",toString:m},MultipleRenderTargets:{_hx_index:4,__enum__:"h3d.impl.Feature",toString:m},Queries:{_hx_index:5,__enum__:"h3d.impl.Feature",toString:m},SRGBTextures:{_hx_index:6,__enum__:"h3d.impl.Feature",toString:m},ShaderModel3:{_hx_index:7,__enum__:"h3d.impl.Feature",toString:m},BottomLeftCoords:{_hx_index:8,__enum__:"h3d.impl.Feature",toString:m},Wireframe:{_hx_index:9,
__enum__:"h3d.impl.Feature",toString:m}};Gb.__empty_constructs__=[Gb.StandardDerivatives,Gb.FloatTextures,Gb.AllocDepthBuffer,Gb.HardwareAccelerated,Gb.MultipleRenderTargets,Gb.Queries,Gb.SRGBTextures,Gb.ShaderModel3,Gb.BottomLeftCoords,Gb.Wireframe];var fl=M["h3d.impl.QueryKind"]={__ename__:!0,__constructs__:["TimeStamp","Samples"],TimeStamp:{_hx_index:0,__enum__:"h3d.impl.QueryKind",toString:m},Samples:{_hx_index:1,__enum__:"h3d.impl.QueryKind",toString:m}};fl.__empty_constructs__=[fl.TimeStamp,
fl.Samples];var Kk=M["h3d.impl.RenderFlag"]={__ename__:!0,__constructs__:["CameraHandness"],CameraHandness:{_hx_index:0,__enum__:"h3d.impl.RenderFlag",toString:m}};Kk.__empty_constructs__=[Kk.CameraHandness];var $d=function(a){this.id=$d.UID++;this.names=a};p["h3d.impl.InputNames"]=$d;$d.__name__="h3d.impl.InputNames";$d.get=function(a){var b=a.join("|"),c=$d.CACHE,c=null!=L[b]?c.getReserved(b):c.h[b];null==c&&(c=new $d(a.slice()),a=$d.CACHE,null!=L[b]?a.setReserved(b,c):a.h[b]=c);return c};$d.prototype=
{__class__:$d};var Ih=function(){};p["h3d.impl.Driver"]=Ih;Ih.__name__="h3d.impl.Driver";Ih.prototype={hasFeature:function(a){return!1},setRenderFlag:function(a,b){},isSupportedFormat:function(a){return!1},isDisposed:function(){return!0},dispose:function(){},begin:function(a){},log:function(a){},generateMipMaps:function(a){throw new n("Mipmaps auto generation is not supported on this platform");},getNativeShaderCode:function(a){return null},logImpl:function(a){},clear:function(a,b,c){},captureRenderBuffer:function(a){},
capturePixels:function(a,b,c,d){throw new n("Can't capture pixels on this platform");},getDriverName:function(a){return"Not available"},init:function(a,b){},resize:function(a,b){},selectShader:function(a){return!1},selectMaterial:function(a){},uploadShaderBuffers:function(a,b){},getShaderInputNames:function(){return null},selectBuffer:function(a){},selectMultiBuffers:function(a){},draw:function(a,b,c){},drawInstanced:function(a,b){},setRenderZone:function(a,b,c,d){},setRenderTarget:function(a,b,c){},
setRenderTargets:function(a){},allocDepthBuffer:function(a){return null},disposeDepthBuffer:function(a){},getDefaultDepthBuffer:function(){return null},present:function(){},end:function(){},setDebug:function(a){},allocTexture:function(a){return null},allocIndexes:function(a,b){return null},allocVertexes:function(a){return null},allocInstanceBuffer:function(a,b){},disposeTexture:function(a){},disposeIndexes:function(a){},disposeVertexes:function(a){},disposeInstanceBuffer:function(a){},uploadIndexBuffer:function(a,
b,c,d,e){},uploadIndexBytes:function(a,b,c,d,e){},uploadVertexBuffer:function(a,b,c,d,e){},uploadVertexBytes:function(a,b,c,d,e){},uploadTextureBitmap:function(a,b,c,d){},uploadTexturePixels:function(a,b,c,d){},readVertexBytes:function(a,b,c,d,e){throw new n("Driver does not allow to read vertex bytes");},readIndexBytes:function(a,b,c,d,e){throw new n("Driver does not allow to read index bytes");},copyTexture:function(a,b){return!1},allocQuery:function(a){return null},deleteQuery:function(a){},beginQuery:function(a){},
endQuery:function(a){},queryResultAvailable:function(a){return!0},queryResult:function(a){return 0},__class__:Ih};var vj=function(a,b,c){this.s=a;this.vertex=b;this.shader=c};p["h3d.impl._GlDriver.CompiledShader"]=vj;vj.__name__="h3d.impl._GlDriver.CompiledShader";vj.prototype={__class__:vj};var wj=function(){};p["h3d.impl._GlDriver.CompiledAttribute"]=wj;wj.__name__="h3d.impl._GlDriver.CompiledAttribute";wj.prototype={__class__:wj};var xj=function(){};p["h3d.impl._GlDriver.CompiledProgram"]=xj;xj.__name__=
"h3d.impl._GlDriver.CompiledProgram";xj.prototype={__class__:xj};var la=function(a){null==a&&(a=0);this.features=new Cd;this.maxCompressedTexturesSupport=0;this.rightHanded=this.hasMultiIndirect=!1;this.firstShader=!0;this.boundTextures=[];this.curTargets=[];var b=[];b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);
b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);b.push(0);this.currentDivisor=b;this.curColorMask=-1;this.lastActiveIndex=0;this.curStEnabled=!1;this.curMatBits=this.curStOpBits=this.curStMaskBits=-1;this.curAttribs=0;this.canvas=Pa.getInstance().canvas;a={alpha:!1,stencil:!0,antialias:0<a};this.gl=this.canvas.getContext("webgl2",a);null==this.gl&&(this.gl=Lk.getContextWebGL(this.canvas,a));if(null==this.gl)throw new n("Could not acquire GL context");"undefined"!=typeof WebGLDebugUtils&&
(this.gl=WebGLDebugUtils.makeDebugContext(this.gl),this.glDebug=!0);this.commonFB=this.gl.createFramebuffer();this.programs=new oa;this.defStencil=new ea;a=this.gl.getParameter(7938);b=new Ze("ES ([0-9]+\\.[0-9]+)","");b.match(a)&&(this.glES=parseFloat(b.matched(1)));a=new Ze("[0-9]+\\.[0-9]+","");b=this.gl.getParameter(35724);a.match(b)&&(this.glES=parseFloat(a.matched(0)),this.shaderVersion=Math.round(100*parseFloat(a.matched(0))));this.drawMode=4;this.makeFeatures();Xc.UNROLL_LOOPS=!this.hasFeature(Gb.ShaderModel3)};
p["h3d.impl.GlDriver"]=la;la.__name__="h3d.impl.GlDriver";la.bytesToUint8Array=function(a,b){null==b&&(b=0);return new Uint8Array(a.b.bufferValue,b)};la.__super__=Ih;la.prototype=J(Ih.prototype,{setRenderFlag:function(a,b){this.rightHanded=0<b},logImpl:function(a){console.log(a)},setDebug:function(a){this.debug=a},begin:function(a){this.frame=a;this.resetStream();this.gl.useProgram(null);this.curBuffer=this.curShader=null},getShaderInputNames:function(){return this.curShader.inputs},getNativeShaderCode:function(a){return"// vertex:\n"+
fb.compile(a.vertex.data)+"// fragment:\n"+fb.compile(a.fragment.data)},getDriverName:function(a){var b=this.gl.getParameter(7937),b=a?b+(" GLv"+r.string(this.gl.getParameter(7938))):b.split("/").shift(),b=b.split("WebGL ").join("");return"OpenGL "+b},compileShader:function(a,b){var c=this.gl.createShader(b.vertex?35633:35632);null==b.code&&(b.code=a.run(b.data),b.data.funs=null);this.gl.shaderSource(c,b.code);this.gl.compileShader(c);this.gl.getShaderInfoLog(c);if(1!=this.gl.getShaderParameter(c,
35713)){for(var c=this.gl.getShaderInfoLog(c),d=r.parseInt(z.substr(c,9,null)),d=null==d?null:b.code.split("\n")[d-1],d=null==d?"":"("+ga.trim(d)+")",e=b.code.split("\n"),f=0,g=e.length;f<g;){var h=f++;e[h]=h+1+"\t"+e[h]}throw new n("An error occurred compiling the shaders: "+c+d+"\n\n"+e.join("\n"));}return new vj(c,b.vertex,b)},initShader:function(a,b,c){var d=b.vertex?"vertex":"fragment";b.globals=this.gl.getUniformLocation(a.p,d+"Globals");b.params=this.gl.getUniformLocation(a.p,d+"Params");b.textures=
[];for(var e=0,f=null,g=0,h="",k=c.textures;null!=k;){var l=k.type;17==l._hx_index&&(l=u.TSampler2D);if(l!=f){f=l;switch(l._hx_index){case 10:g=3553;h="Textures";break;case 11:g=35866;h="TexturesArray";break;case 12:g=34067;h="TexturesCube";break;default:throw new n("Unsupported texture type "+r.string(l));}e=0}b.textures.push({u:this.gl.getUniformLocation(a.p,d+h+"["+e+"]"),t:f,mode:g});++e;k=k.next}if(0<c.bufferCount){d=[];e=0;for(f=c.bufferCount;e<f;)g=e++,d.push(this.gl.getUniformBlockIndex(a.p,
"uniform_buffer"+g));b.buffers=d;d=0;for(c=c.bufferCount;d<c;)e=d++,this.gl.uniformBlockBinding(a.p,b.buffers[e],e)}},selectShader:function(a){var b=this.programs.h[a.id];if(null==b){var b=new xj,c=new fb;c.glES=this.glES;c.version=this.shaderVersion;b.vertex=this.compileShader(c,a.vertex);b.fragment=this.compileShader(c,a.fragment);b.p=this.gl.createProgram();this.gl.attachShader(b.p,b.vertex.s);this.gl.attachShader(b.p,b.fragment.s);var d=null;try{this.gl.linkProgram(b.p),1!=this.gl.getProgramParameter(b.p,
35714)&&(d=this.gl.getProgramInfoLog(b.p))}catch(e){throw new n("Shader linkage error: "+r.string(e instanceof n?e.val:e)+" ("+this.getDriverName(!1)+")");}this.gl.deleteShader(b.vertex.s);this.gl.deleteShader(b.fragment.s);if(null!=d)throw this.gl.deleteProgram(b.p),new n("Program linkage failure: "+d+"\nVertex=\n"+a.vertex.code+"\n\nFragment=\n"+a.fragment.code);this.firstShader=!1;this.initShader(b,b.vertex,a.vertex);this.initShader(b,b.fragment,a.fragment);d=[];b.attribs=[];for(var f=b.stride=
0,g=a.vertex.data.vars;f<g.length;){var h=g[f];++f;if(1==h.kind._hx_index){var k=5126,l;l=h.type;switch(l._hx_index){case 3:l=1;break;case 5:l=l.size;break;case 9:l=l.size;k=5120;break;default:throw new n("assert "+r.string(h.type));}var m=this.gl.getAttribLocation(b.p,c.varNames.h.hasOwnProperty(h.id)?c.varNames.h[h.id]:h.name);if(!(0>m)){var t=new wj;t.type=k;t.size=l;t.index=m;t.offset=b.stride;t.divisor=0;if(null!=h.qualifiers){k=0;for(m=h.qualifiers;k<m.length;){var x=m[k];++k;9==x._hx_index&&
(t.divisor=x.v)}}b.attribs.push(t);d.push(h.name)}b.stride+=l}}b.inputs=$d.get(d);this.programs.h[a.id]=b}if(this.curShader==b)return!1;this.gl.useProgram(b.p);a=this.curAttribs;for(c=b.attribs.length;a<c;)d=a++,this.gl.enableVertexAttribArray(d),this.curAttribs++;for(;this.curAttribs>b.attribs.length;)this.gl.disableVertexAttribArray(--this.curAttribs);this.curShader=b;this.curBuffer=null;b=0;for(a=this.boundTextures.length;b<a;)c=b++,this.boundTextures[c]=null;return!0},uploadShaderBuffers:function(a,
b){this.uploadBuffer(this.curShader.vertex,a.vertex,b);this.uploadBuffer(this.curShader.fragment,a.fragment,b)},uploadBuffer:function(a,b,c){switch(c){case 0:null!=a.globals&&(b=b.globals.subarray(0,4*a.shader.globalsSize),this.gl.uniform4fv(a.globals,b));break;case 1:null!=a.params&&(b=b.params.subarray(0,4*a.shader.paramsSize),this.gl.uniform4fv(a.params,b));break;case 2:c=0;for(var d=a.textures.length;c<d;){var e=c++,f=b.tex[e],g=a.textures[e];if(null==f||null==f.t&&null==f.realloc)switch(g.t._hx_index){case 10:f=
ld.loadingTextureColor;f=V.fromColor(f,(f>>>24)/255);break;case 12:f=V.defaultCubeTexture();break;default:throw new n("Missing texture");}null!=f&&(null==f.t&&null!=f.realloc)&&(f.alloc(),f.realloc());f.lastFrame=this.frame;if(null!=g.u){var h=a.vertex?e:this.curShader.vertex.textures.length+e;if(this.boundTextures[h]!=f.t){this.boundTextures[h]=f.t;e=this.getBindType(f);if(e!=g.mode)throw new n("Texture format mismatch: "+r.string(f)+" should be "+r.string(g.t));this.gl.activeTexture(33984+h);this.gl.uniform1i(g.u,
h);this.gl.bindTexture(e,f.t.t);this.lastActiveIndex=h;var h=f.mipMap._hx_index,k=f.filter._hx_index,g=f.wrap._hx_index,l=h|k<<3|g<<6;l!=f.t.bits&&(f.t.bits=l,f=la.TFILTERS[h][k],this.gl.texParameteri(e,10240,f[0]),this.gl.texParameteri(e,10241,f[1]),f=la.TWRAP[g],this.gl.texParameteri(e,10242,f),this.gl.texParameteri(e,10243,f))}}}break;case 3:if(null!=a.buffers){c=0;for(a=a.buffers.length;c<a;)d=c++,this.gl.bindBufferBase(35345,d,b.buffers[d].buffer.vbuf.b)}}},selectMaterial:function(a){var b=a.bits;
if(null==this.curTarget==this.rightHanded)switch(a.culling._hx_index){case 1:b=b&-4|2;break;case 2:b=b&-4|1}this.selectMaterialBits(b);this.curColorMask!=a.colorMask&&(b=a.colorMask,this.gl.colorMask(0!=(b&1),0!=(b&2),0!=(b&4),0!=(b&8)),this.curColorMask=b);b=this.defStencil;null==a.stencil?this.curStEnabled&&(this.gl.disable(2960),this.curStEnabled=!1):(b=a.stencil,this.curStEnabled||(this.gl.enable(2960),this.curStEnabled=!0));this.selectStencilBits(b.opBits,b.maskBits)},selectMaterialBits:function(a){var b=
a^this.curMatBits;0>this.curMatBits&&(b=-1);if(0!=b){this.drawMode=0!=(a&268435456)?3:4;if(0!=(b&3)){var c=a&3;0==c?this.gl.disable(2884):((0>this.curMatBits||0==(this.curMatBits&3))&&this.gl.enable(2884),this.gl.cullFace(la.FACES[c]))}if(0!=(b&4194240)){var c=a>>6&15,d=a>>10&15,e=a>>14&15,f=a>>18&15;c==e&&d==f?0==c&&1==d?this.gl.disable(3042):((0>this.curMatBits||0==(this.curMatBits>>6&15)&&1==(this.curMatBits>>10&15))&&this.gl.enable(3042),this.gl.blendFunc(la.BLEND[c],la.BLEND[d])):((0>this.curMatBits||
0==(this.curMatBits>>6&15)&&1==(this.curMatBits>>10&15))&&this.gl.enable(3042),this.gl.blendFuncSeparate(la.BLEND[c],la.BLEND[d],la.BLEND[e],la.BLEND[f]))}0!=(b&264241152)&&(c=a>>22&7,d=a>>25&7,c==d?this.gl.blendEquation(la.OP[c]):this.gl.blendEquationSeparate(la.OP[c],la.OP[d]));0!=(b&4)&&this.gl.depthMask(0!=(a>>2&1));0!=(b&56)&&(b=a>>3&7,0==b?this.gl.disable(2929):((0>this.curMatBits||0==(this.curMatBits>>3&7))&&this.gl.enable(2929),this.gl.depthFunc(la.COMPARE[b])));this.curMatBits=a}},selectStencilBits:function(a,
b){var c=a^this.curStOpBits,d=b^this.curStMaskBits;0!=(c|d)&&(0!=(c&4088)&&this.gl.stencilOpSeparate(la.FACES[2],la.STENCIL_OP[a>>6&7],la.STENCIL_OP[a>>9&7],la.STENCIL_OP[a>>3&7]),0!=(c&16744448)&&this.gl.stencilOpSeparate(la.FACES[1],la.STENCIL_OP[a>>18&7],la.STENCIL_OP[a>>21&7],la.STENCIL_OP[a>>15&7]),0!=(c&7|d&16711935)&&this.gl.stencilFuncSeparate(la.FACES[2],la.COMPARE[a&7],b>>16&255,b&255),0!=(c&28672|d&16711935)&&this.gl.stencilFuncSeparate(la.FACES[1],la.COMPARE[a>>12&7],b>>16&255,b&255),
0!=(d&65280)&&(c=b>>8&255,this.gl.stencilMaskSeparate(la.FACES[2],c),this.gl.stencilMaskSeparate(la.FACES[1],c)),this.curStOpBits=a,this.curStMaskBits=b)},clear:function(a,b,c){var d=0;null!=a&&(this.gl.colorMask(!0,!0,!0,!0),this.curColorMask=15,this.gl.clearColor(a.x,a.y,a.z,a.w),d|=16384);null!=b&&(this.gl.depthMask(!0),0<=this.curMatBits&&(this.curMatBits|=4),this.gl.clearDepth(b),d|=256);null!=c&&(this.selectStencilBits(this.defStencil.opBits,this.defStencil.maskBits),this.gl.clearStencil(c),
d|=1024);0!=d&&this.gl.clear(d);null!=this.curTarget&&(this.curTarget.flags|=1<<T.WasCleared._hx_index)},resize:function(a,b){""==this.canvas.style.width&&(this.canvas.style.width=(a/window.devicePixelRatio|0)+"px",this.canvas.style.height=(b/window.devicePixelRatio|0)+"px");this.canvas.width=a;this.canvas.height=b;this.bufferWidth=a;this.bufferHeight=b;this.gl.viewport(0,0,a,b);null!=this.defaultDepth&&(this.disposeDepthBuffer(this.defaultDepth),this.defaultDepth.width=this.bufferWidth,this.defaultDepth.height=
this.bufferHeight,this.defaultDepth.b=this.allocDepthBuffer(this.defaultDepth))},getChannels:function(a){switch(a.internalFmt){case 6407:return 6407;case 6408:return 6408;case 32856:return 32993;case 32857:return 6408;case 6403:case 33321:case 33325:case 33326:return 6403;case 33319:case 33323:case 33327:case 33328:return 33319;case 33777:case 33778:case 33779:return 6408;case 34837:case 34843:return 6407;case 35898:return 6407;case 35904:case 35905:return 6407;case 34836:case 34842:case 35906:case 35907:return 6408;
default:throw new n("Invalid format "+a.internalFmt);}},isSupportedFormat:function(a){switch(a._hx_index){case 2:return!0;case 3:case 4:return this.hasFeature(Gb.FloatTextures);case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 16:case 17:return 3<=this.glES;case 14:case 15:return this.hasFeature(Gb.SRGBTextures);case 18:return a.v<=this.maxCompressedTexturesSupport;default:return!1}},getBindType:function(a){var b=0!=(a.flags&1<<T.IsArray._hx_index);return 0!=(a.flags&1<<T.Cube._hx_index)?
34067:b?35866:3553},allocTexture:function(a){var b=this.gl.createTexture(),c=this.getBindType(a),b={t:b,width:a.width,height:a.height,internalFmt:6408,pixelFmt:5121,bits:-1,bind:c},d=a.format;switch(d._hx_index){case 1:b.internalFmt=32856;break;case 2:break;case 3:if(this.hasFeature(Gb.FloatTextures))b.pixelFmt=5131,b.internalFmt=34842;else throw new n("Unsupported texture format "+r.string(a.format));break;case 4:if(this.hasFeature(Gb.FloatTextures))b.internalFmt=34836,b.pixelFmt=5126;else throw new n("Unsupported texture format "+
r.string(a.format));break;case 5:b.internalFmt=33321;break;case 6:b.internalFmt=33325;b.pixelFmt=5131;break;case 7:b.internalFmt=33326;b.pixelFmt=5126;break;case 8:b.internalFmt=33323;break;case 9:b.internalFmt=33327;b.pixelFmt=5131;break;case 10:b.internalFmt=33328;b.pixelFmt=5126;break;case 11:b.internalFmt=6407;break;case 12:b.internalFmt=34843;b.pixelFmt=5131;break;case 13:b.internalFmt=34837;b.pixelFmt=5126;break;case 14:b.internalFmt=35905;break;case 15:b.internalFmt=35907;break;case 16:b.internalFmt=
32857;b.pixelFmt=33640;break;case 17:b.internalFmt=35898;b.pixelFmt=35899;break;case 18:d=d.v;if(d<=this.maxCompressedTexturesSupport)switch(d){case 1:b.internalFmt=33777;break;case 2:b.internalFmt=33778;break;case 3:b.internalFmt=33779;break;default:throw new n("Unsupported texture format "+r.string(a.format));}else throw new n("Unsupported texture format "+r.string(a.format));break;default:throw new n("Unsupported texture format "+r.string(a.format));}a.lastFrame=this.frame;a.flags&=-1-(1<<T.WasCleared._hx_index);
this.gl.bindTexture(c,b.t);if(0!=(a.flags&1<<T.Cube._hx_index))for(a=0;6>a;)c=a++,this.gl.texImage2D(la.CUBE_FACES[c],0,b.internalFmt,b.width,b.height,0,this.getChannels(b),b.pixelFmt,null);else 0!=(a.flags&1<<T.IsArray._hx_index)?this.gl.texImage3D(35866,0,b.internalFmt,b.width,b.height,a.get_layerCount(),0,this.getChannels(b),b.pixelFmt,null):18!=a.format._hx_index&&this.gl.texImage2D(c,0,b.internalFmt,b.width,b.height,0,this.getChannels(b),b.pixelFmt,null);this.restoreBind();return b},restoreBind:function(){var a=
this.boundTextures[this.lastActiveIndex];null==a?this.gl.bindTexture(3553,null):this.gl.bindTexture(a.bind,a.t)},allocDepthBuffer:function(a){var b=this.gl.createRenderbuffer();null==a.format&&(a.format=3<=this.glES?Jh.Depth24Stencil8:Jh.Depth16);var c;switch(a.format._hx_index){case 0:c=33189;break;case 1:if(3<=this.glES)c=33190;else throw new n("Unsupported depth format "+r.string(a.format));break;case 2:c=34041;break;default:throw new n("Unsupported depth format "+r.string(a.format));}this.gl.bindRenderbuffer(36161,
b);this.gl.renderbufferStorage(36161,c,a.width,a.height);this.gl.bindRenderbuffer(36161,null);return{r:b}},disposeDepthBuffer:function(a){null!=a.b&&null!=a.b.r&&(this.gl.deleteRenderbuffer(a.b.r),a.b=null)},getDefaultDepthBuffer:function(){if(null!=this.defaultDepth)return this.defaultDepth;this.defaultDepth=new Je(0,0);this.defaultDepth.width=this.bufferWidth;this.defaultDepth.height=this.bufferHeight;this.defaultDepth.b=this.allocDepthBuffer(this.defaultDepth);return this.defaultDepth},discardError:function(){},
allocVertexes:function(a){var b=this.gl.createBuffer();this.gl.bindBuffer(34962,b);if(0==a.size*a.stride)throw new n("assert");this.gl.bufferData(34962,4*a.size*a.stride,0!=(a.flags&1<<Aa.Dynamic._hx_index)?35048:35044);this.gl.bindBuffer(34962,null);return{b:b,stride:a.stride}},allocIndexes:function(a,b){var c=this.gl.createBuffer(),d=b?4:2;this.gl.bindBuffer(34963,c);this.gl.bufferData(34963,a*d,35044);this.gl.bindBuffer(34963,null);this.curIndexBuffer=null;return{b:c,is32:b}},disposeTexture:function(a){var b=
a.t;if(null!=b){a.t=null;a=0;for(var c=this.boundTextures.length;a<c;){var d=a++;this.boundTextures[d]==b&&(this.boundTextures[d]=null)}this.gl.deleteTexture(b.t)}},disposeIndexes:function(a){this.gl.deleteBuffer(a.b)},disposeVertexes:function(a){this.gl.deleteBuffer(a.b)},generateMipMaps:function(a){var b=this.getBindType(a);this.gl.bindTexture(b,a.t.t);this.gl.generateMipmap(b);this.restoreBind()},uploadTextureBitmap:function(a,b,c,d){a.format!=ya.RGBA||0!=(a.flags&1<<T.Cube._hx_index)?(b=b.getPixels(),
this.uploadTexturePixels(a,b,c,d),b.dispose()):(d=b.ctx,this.gl.bindTexture(3553,a.t.t),this.gl.texImage2D(3553,c,a.t.internalFmt,this.getChannels(a.t),a.t.pixelFmt,d.getImageData(0,0,b.ctx.canvas.width,b.ctx.canvas.height)),this.restoreBind())},resetStream:function(){},streamData:function(a,b,c){return a},uploadTexturePixels:function(a,b,c,d){var e=0!=(a.flags&1<<T.Cube._hx_index),f=this.getBindType(a);if(0!=(a.flags&1<<T.IsArray._hx_index))throw new n("TODO:texImage3D");d=e?la.CUBE_FACES[d]:3553;
this.gl.bindTexture(f,a.t.t);b.convert(a.format);b.setFlip(!1);switch(a.format._hx_index){case 4:case 7:case 10:case 13:f=new Float32Array(b.bytes.b.buffer,b.offset);break;case 3:case 6:case 9:case 12:f=new Uint16Array(b.bytes.b.buffer,b.offset);break;case 16:case 17:f=new Uint32Array(b.bytes.b.buffer,b.offset);break;default:f=new Uint8Array(b.bytes.b.bufferValue,b.offset)}18==a.format._hx_index?this.gl.compressedTexImage2D(d,c,a.t.internalFmt,b.width,b.height,0,f):this.gl.texImage2D(d,c,a.t.internalFmt,
b.width,b.height,0,this.getChannels(a.t),a.t.pixelFmt,f);this.restoreBind()},uploadVertexBuffer:function(a,b,c,d,e){var f=a.stride;this.gl.bindBuffer(34962,a.b);a=new Float32Array(d.array.buffer,4*e,c*f);this.gl.bufferSubData(34962,4*b*f,a);this.gl.bindBuffer(34962,null)},uploadVertexBytes:function(a,b,c,d,e){var f=a.stride;this.gl.bindBuffer(34962,a.b);a=new Uint8Array(d.b.bufferValue,0);c=new Uint8Array(a.buffer,4*e,4*c*f);this.gl.bufferSubData(34962,4*b*f,c);this.gl.bindBuffer(34962,null)},uploadIndexBuffer:function(a,
b,c,d,e){var f=a.is32?2:1;this.gl.bindBuffer(34963,a.b);a=new Uint16Array(d);c=new Uint16Array(a.buffer,e<<f,c);this.gl.bufferSubData(34963,b<<f,c);this.gl.bindBuffer(34963,null);this.curIndexBuffer=null},uploadIndexBytes:function(a,b,c,d,e){var f=a.is32?2:1;this.gl.bindBuffer(34963,a.b);a=new Uint8Array(d.b.bufferValue,0);c=new Uint8Array(a.buffer,e<<f,c<<f);this.gl.bufferSubData(34963,b<<f,c);this.gl.bindBuffer(34963,null);this.curIndexBuffer=null},updateDivisor:function(a){this.currentDivisor[a.index]!=
a.divisor&&(this.currentDivisor[a.index]=a.divisor,this.gl.vertexAttribDivisor(a.index,a.divisor))},selectBuffer:function(a){if(a!=this.curBuffer)if(null!=this.curBuffer&&a.buffer==this.curBuffer.buffer&&0!=(a.buffer.flags&1<<Aa.RawFormat._hx_index)==(0!=(this.curBuffer.flags&1<<Aa.RawFormat._hx_index)))this.curBuffer=a;else{if(null==this.curShader)throw new n("No shader selected");this.curBuffer=a;var b=a.buffer.vbuf;if(b.stride<this.curShader.stride)throw new n("Buffer stride ("+b.stride+") and shader stride ("+
this.curShader.stride+") mismatch");this.gl.bindBuffer(34962,b.b);if(0!=(a.flags&1<<Aa.RawFormat._hx_index)){a=0;for(var c=this.curShader.attribs;a<c.length;){var d=c[a];++a;this.gl.vertexAttribPointer(d.index,d.size,d.type,!1,4*b.stride,4*d.offset);this.currentDivisor[d.index]!=d.divisor&&(this.currentDivisor[d.index]=d.divisor,this.gl.vertexAttribDivisor(d.index,d.divisor))}}else{a=8;c=0;for(d=this.curShader.attribs.length;c<d;){var e=c++,f=this.curShader.attribs[e],e=this.curShader.inputs.names[e];
switch(e){case "normal":if(6>b.stride)throw new n("Buffer is missing NORMAL data, set it to RAW format ?");e=3;break;case "position":e=0;break;case "uv":if(8>b.stride)throw new n("Buffer is missing UV data, set it to RAW format ?");e=6;break;default:var g=e,e=a;a+=f.size;if(a>b.stride)throw new n("Buffer is missing '"+g+"' data, set it to RAW format ?");}this.gl.vertexAttribPointer(f.index,f.size,f.type,!1,4*b.stride,4*e);this.currentDivisor[f.index]!=f.divisor&&(this.currentDivisor[f.index]=f.divisor,
this.gl.vertexAttribDivisor(f.index,f.divisor))}}}},selectMultiBuffers:function(a){for(var b=0,c=this.curShader.attribs;b<c.length;){var d=c[b];++b;this.gl.bindBuffer(34962,a.buffer.buffer.vbuf.b);this.gl.vertexAttribPointer(d.index,d.size,d.type,!1,4*a.buffer.buffer.stride,4*a.offset);this.currentDivisor[d.index]!=d.divisor&&(this.currentDivisor[d.index]=d.divisor,this.gl.vertexAttribDivisor(d.index,d.divisor));a=a.next}this.curBuffer=null},draw:function(a,b,c){a!=this.curIndexBuffer&&(this.curIndexBuffer=
a,this.gl.bindBuffer(34963,a.b));a.is32?this.gl.drawElements(this.drawMode,3*c,5125,4*b):this.gl.drawElements(this.drawMode,3*c,5123,2*b)},allocInstanceBuffer:function(a,b){for(var c=[],d=0,e=a.commandCount;d<e;){var f=20*d++,g=b.getInt32(f),h=b.getInt32(f+4),k=b.getInt32(f+8),l=b.getInt32(f+12),f=b.getInt32(f+16);if(0!=l||0!=f)throw new n("baseVertex and baseInstance must be zero on this platform");c.push(g);c.push(k);c.push(h)}a.data=c},disposeInstanceBuffer:function(a){a.data=null},drawInstanced:function(a,
b){a!=this.curIndexBuffer&&(this.curIndexBuffer=a,this.gl.bindBuffer(34963,a.b));for(var c=b.data,d=0,e=0,f=c.length/3|0;e<f;)e++,a.is32?this.gl.drawElementsInstanced(this.drawMode,c[d++],5125,c[d++],c[d++]):this.gl.drawElementsInstanced(this.drawMode,c[d++],5123,c[d++],c[d++])},end:function(){},present:function(){},isDisposed:function(){return this.gl.isContextLost()},setRenderZone:function(a,b,c,d){0==a&&0==b&&0>c&&0>d?this.gl.disable(3089):(this.gl.enable(3089),null==this.curTarget&&(b=this.bufferHeight-
(b+d)),this.gl.scissor(a,b,c,d))},setDrawBuffers:function(a){3<=this.glES?this.gl.drawBuffers(la.CBUFFERS[a]):null!=this.mrtExt&&this.mrtExt.drawBuffersWEBGL(la.CBUFFERS[a])},unbindTargets:function(){if(null!=this.curTarget&&1<this.numTargets){for(;1<this.numTargets;)this.gl.framebufferTexture2D(36160,36064+--this.numTargets,3553,null,0),this.curTargets[this.numTargets]=null;this.setDrawBuffers(1)}},capturePixels:function(a,b,c,d){var e,f,g;null!=d?(d.xMax>a.width&&(d.xMax=a.width),d.yMax>a.height&&
(d.yMax=a.height),0>d.xMin&&(d.xMin=0),0>d.yMin&&(d.yMin=0),e=Za.alloc(d.xMax-d.xMin>>c,d.yMax-d.yMin>>c,a.format),f=d.xMin,g=d.yMin):(e=Za.alloc(a.width>>c,a.height>>c,a.format),g=f=0);var h=this.curTarget;d=this.numTargets;var k=this.curTargetLayer,l=this.curTargetMip;if(1<d)for(var n=this.numTargets=1;n<d;){var t=n++;this.curTargets[t]==a&&this.gl.framebufferTexture2D(36160,36064+t,3553,null,0)}this.setRenderTarget(a,b,c);this.captureSubRenderBuffer(e,f,g);this.setRenderTarget(h,k,l);if(1<d){for(b=
1;b<d;)c=b++,this.curTargets[c]==a&&this.gl.framebufferTexture2D(36160,36064+c,3553,a.t.t,0);this.setDrawBuffers(d);this.numTargets=d}return e},setRenderTarget:function(a,b,c){null==c&&(c=0);null==b&&(b=0);this.unbindTargets();this.curTarget=a;if(null==a)this.gl.bindFramebuffer(36160,null),this.gl.viewport(0,0,this.bufferWidth,this.bufferHeight);else{if(null!=a.depthBuffer&&(a.depthBuffer.width!=a.width||a.depthBuffer.height!=a.height))throw new n("Invalid depth buffer size : does not match render target size");
if(0<c&&1==this.glES)throw new n("Cannot render to mipLevel in WebGL1, use upload() instead");null==a.t&&a.alloc();if(0!=(a.flags&1<<T.MipMapped._hx_index)&&0==(a.flags&1<<T.WasCleared._hx_index)){var d=this.getBindType(a);this.gl.bindTexture(d,a.t.t);this.gl.generateMipmap(d);this.restoreBind()}a.flags|=1<<T.WasCleared._hx_index;a.lastFrame=this.frame;this.curTargetLayer=b;this.curTargetMip=c;this.gl.bindFramebuffer(36160,this.commonFB);0!=(a.flags&1<<T.IsArray._hx_index)?this.gl.framebufferTextureLayer(36160,
36064,a.t.t,c,b):this.gl.framebufferTexture2D(36160,36064,0!=(a.flags&1<<T.Cube._hx_index)?la.CUBE_FACES[b]:3553,a.t.t,c);null!=a.depthBuffer?(this.gl.framebufferRenderbuffer(36160,36096,36161,a.depthBuffer.b.r),this.gl.framebufferRenderbuffer(36160,36128,36161,a.depthBuffer.hasStencil()?a.depthBuffer.b.r:null)):(this.gl.framebufferRenderbuffer(36160,36096,36161,null),this.gl.framebufferRenderbuffer(36160,36128,36161,null));this.gl.viewport(0,0,a.width>>c,a.height>>c);a=0;for(b=this.boundTextures.length;a<
b;)c=a++,this.boundTextures[c]=null;if(this.glDebug&&(a=this.gl.checkFramebufferStatus(36160),36053!=a))throw new n("Invalid frame buffer: "+a);}},setRenderTargets:function(a){this.unbindTargets();this.setRenderTarget(a[0]);if(!(2>a.length)){this.numTargets=a.length;for(var b=1,c=a.length;b<c;){var d=b++,e=a[d];null==e.t&&e.alloc();this.gl.framebufferTexture2D(36160,36064+d,3553,e.t.t,0);this.curTargets[d]=e;e.lastFrame=this.frame;e.flags|=1<<T.WasCleared._hx_index}this.setDrawBuffers(a.length)}},
init:function(a,b){null==b&&(b=!1);var c=!1;"complete"==window.document.readyState?ee.delay(function(){a(!1)},1):window.addEventListener("load",function(b){c||(c=!0,a(!1))})},hasFeature:function(a){return this.features.get(a)},makeFeatures:function(){for(var a=0,b=Gb.__empty_constructs__.slice();a<b.length;){var c=b[a];++a;this.features.set(c,this.checkFeature(c))}null!=this.gl.getExtension("WEBGL_compressed_texture_s3tc")&&(this.maxCompressedTexturesSupport=3)},checkFeature:function(a){switch(a._hx_index){case 0:return 3<=
this.glES?!0:null!=this.gl.getExtension("OES_standard_derivatives");case 1:return 3<=this.glES?null!=this.gl.getExtension("EXT_color_buffer_float")?null!=this.gl.getExtension("OES_texture_float_linear"):!1:null!=this.gl.getExtension("OES_texture_float")&&null!=this.gl.getExtension("OES_texture_float_linear")&&null!=this.gl.getExtension("OES_texture_half_float")?null!=this.gl.getExtension("OES_texture_half_float_linear"):!1;case 4:return 3<=this.glES?!0:null==this.mrtExt?null!=(this.mrtExt=this.gl.getExtension("WEBGL_draw_buffers")):
!0;case 6:return 3<=this.glES?!0:null!=this.gl.getExtension("EXT_sRGB");case 7:return 3<=this.glES?!0:!1;case 2:case 3:case 8:case 9:return!0;default:return!1}},uploadTextureVideoElement:function(a,b,c,d){var e=0!=(a.flags&1<<T.Cube._hx_index),f=this.getBindType(a);if(0!=(a.flags&1<<T.IsArray._hx_index))throw new n("TODO:texImage3D");d=e?la.CUBE_FACES[d]:3553;this.gl.bindTexture(f,a.t.t);3<=this.glES?this.gl.texImage2D(d,c,a.t.internalFmt,b.videoWidth,b.videoHeight,0,this.getChannels(a.t),a.t.pixelFmt,
b):this.gl.texImage2D(d,c,a.t.internalFmt,a.t.internalFmt,a.t.pixelFmt,b);this.restoreBind()},captureRenderBuffer:function(a){this.captureSubRenderBuffer(a,0,0)},captureSubRenderBuffer:function(a,b,c){if(null==this.curTarget)throw new n("Can't capture main render buffer in GL");var d=a.bytes.b;switch(this.curTarget.format._hx_index){case 4:case 7:case 10:case 13:d=new Float32Array(d.buffer);break;case 3:case 6:case 9:case 12:d=new Uint16Array(d.buffer);break;case 16:case 17:d=new Uint32Array(d.buffer)}this.gl.readPixels(b,
c,a.width,a.height,this.getChannels(this.curTarget.t),this.curTarget.t.pixelFmt,d);a.set_innerFormat(this.curTarget.format)},__class__:la});var Mk=function(a,b){for(var c=this.triCount=0;c<a;){var d=c++,e=b.getInt32(20*d),d=b.getInt32(20*d+4);this.triCount+=e*d/3|0}this.commandCount=a;this.driver=na.CURRENT.driver;this.driver.allocInstanceBuffer(this,b)};p["h3d.impl.InstanceBuffer"]=Mk;Mk.__name__="h3d.impl.InstanceBuffer";Mk.prototype={dispose:function(){null!=this.data&&this.driver.disposeInstanceBuffer(this)},
__class__:Mk};var Fg=function(a,b,c){this.pos=a;this.count=b;this.next=c};p["h3d.impl._ManagedBuffer.FreeCell"]=Fg;Fg.__name__="h3d.impl._ManagedBuffer.FreeCell";Fg.prototype={__class__:Fg};var Kh=function(a,b,c){this.flags=0;if(null!=c)for(var d=0;d<c.length;){var e=c[d];++d;this.flags|=1<<e._hx_index}this.size=b;this.stride=a;this.freeList=new Fg(0,b,null);this.mem=na.CURRENT.mem;this.mem.allocManaged(this)};p["h3d.impl.ManagedBuffer"]=Kh;Kh.__name__="h3d.impl.ManagedBuffer";Kh.prototype={uploadVertexBuffer:function(a,
b,c,d){null==d&&(d=0);this.mem.driver.uploadVertexBuffer(this.vbuf,a,b,c,d)},uploadVertexBytes:function(a,b,c,d){null==d&&(d=0);this.mem.driver.uploadVertexBytes(this.vbuf,a,b,c,d)},readVertexBytes:function(a,b,c,d){null==d&&(d=0);this.mem.driver.readVertexBytes(this.vbuf,a,b,c,d)},alloc:function(a,b){var c=this.allocPosition(a,b);if(0>c)return null;var d=new cb(a,this.stride,[Aa.NoAlloc]);d.position=c;d.buffer=this;return d},getFreeVertices:function(){for(var a=0,b=this.freeList;null!=b;)a+=b.count,
b=b.next;return a},allocPosition:function(a,b){for(var c=this.freeList;null!=c;){if(c.count>=a){var d=(b-c.pos%b)%b;if(0==d)break;if(c.count>=a+d){c.next=new Fg(c.pos+d,c.count-d,c.next);c.count=d;c=c.next;break}}c=c.next}if(null==c)return-1;d=c.pos;c.pos+=a;c.count-=a;return d},allocBuffer:function(a){var b=this.allocPosition(a.vertices,0!=(a.flags&1<<Aa.Quads._hx_index)?4:0!=(a.flags&1<<Aa.Triangles._hx_index)?3:1);if(0>b)return!1;a.position=b;a.buffer=this;return!0},freeBuffer:function(a){for(var b=
null,c=this.freeList,d=a.vertices,e=a.position+d;null!=c;){if(c.pos==e){c.pos-=d;c.count+=d;null!=b&&b.pos+b.count==c.pos&&(b.count+=c.count,b.next=c.next);d=0;break}if(c.pos>e){null!=b&&b.pos+b.count==a.position?b.count+=d:(a=new Fg(a.position,d,c),null==b?this.freeList=a:b.next=a);d=0;break}b=c;c=c.next}if(0!=d)throw new n("assert");this.freeList.count==this.size&&0==(this.flags&1<<Aa.Managed._hx_index)&&this.dispose()},dispose:function(){this.mem.freeManaged(this)},isDisposed:function(){return null==
this.vbuf},__class__:Kh};var Oc=function(a){this.usedMemory=this.texMemory=this.bufferCount=0;this.driver=a};p["h3d.impl.MemoryManager"]=Oc;Oc.__name__="h3d.impl.MemoryManager";Oc.prototype={init:function(){this.indexes=[];this.textures=[];this.buffers=[];this.depths=[];this.initIndexes()},initIndexes:function(){for(var a=[],b=0;65533>b;){var c=b++;a.push(c)}this.triIndexes=Yd.alloc(a);a=[];for(b=0;16383>b;)c=b++<<2,a.push(c),a.push(c+1),a.push(c+2),a.push(c+2),a.push(c+1),a.push(c+3);a.push(65533);
this.quadIndexes=Yd.alloc(a)},garbage:function(){},cleanManagedBuffers:function(){for(var a=1,b=this.buffers.length;a<b;)for(var c=a++,d=this.buffers[c],e=null;null!=d;)d.freeList.count==d.size?(d.dispose(),null==e?this.buffers[c]=d.next:e.next=d.next):e=d,d=d.next},allocManaged:function(a){if(null==a.vbuf){var b=4*a.size*a.stride;if(0!=b){for(;4294967296<this.usedMemory+b||65536<=this.bufferCount||null==(a.vbuf=this.driver.allocVertexes(a));){if(this.driver.isDisposed())return;var c=this.usedMemory-
this.freeMemorySize();this.garbage();this.cleanManagedBuffers();if(this.usedMemory-this.freeMemorySize()==c){if(65536<=this.bufferCount)throw new n("Too many buffers");throw new n("Memory full ("+Math.ceil(c/1024)+" KB,"+this.bufferCount+" buffers)");}}this.usedMemory+=b;this.bufferCount++}}},freeManaged:function(a){if(null!=a.vbuf&&(this.driver.disposeVertexes(a.vbuf),a.vbuf=null,this.usedMemory-=4*a.size*a.stride,this.bufferCount--,0==(a.flags&1<<Aa.Managed._hx_index)))for(var b=this.buffers[0],
c=null;null!=b;){if(b==a){null==c?this.buffers[0]=a.next:c.next=a.next;break}c=b;b=b.next}},allocBuffer:function(a,b){var c=0!=(a.flags&1<<Aa.Quads._hx_index)?65532:0!=(a.flags&1<<Aa.Triangles._hx_index)?65533:65534;if(a.vertices>c){if(65534==c)throw new n("Cannot split buffer with "+a.vertices+" vertices if it's not Quads/Triangles");var d=a.vertices-c;a.vertices=c;this.allocBuffer(a,b);for(c=a;null!=c.next;)c=c.next;for(var e=[],f=0,g=Oc.ALL_FLAGS;f<g.length;){var h=g[f];++f;0!=(a.flags&1<<h._hx_index)&&
e.push(h)}c.next=new cb(d,b,e)}else if(0==(a.flags&1<<Aa.Managed._hx_index)){if(d=null,0!=(a.flags&1<<Aa.Dynamic._hx_index)&&(null==d&&(d=[]),d.push(Aa.Dynamic)),0!=(a.flags&1<<Aa.UniformBuffer._hx_index)&&(null==d&&(d=[]),d.push(Aa.UniformBuffer)),d=new Kh(b,a.vertices,d),d.next=this.buffers[0],this.buffers[0]=d,!d.allocBuffer(a))throw new n("assert");}else{e=this.buffers[b];for(f=null;null!=e;){if(e.allocBuffer(a))return;f=e;e=e.next}g=0!=(a.flags&1<<Aa.Triangles._hx_index)?3:0!=(a.flags&1<<Aa.Quads._hx_index)?
4:0;if(null==e&&0<g){for(c=d=a.vertices;2048<c;){e=this.buffers[b];c>>=1;c-=c%g;for(a.vertices=c;null!=e;){if(e.allocBuffer(a)){e=[];f=0;for(g=Oc.ALL_FLAGS;f<g.length;)h=g[f],++f,0!=(a.flags&1<<h._hx_index)&&e.push(h);a.next=new cb(d-c,b,e);return}e=e.next}}a.vertices=d}e=new Kh(b,65533,[Aa.Managed]);null==f?this.buffers[b]=e:f.next=e;if(!e.allocBuffer(a))throw new n("assert");}},deleteIndexes:function(a){z.remove(this.indexes,a);this.driver.disposeIndexes(a.ibuf);a.ibuf=null;this.usedMemory-=a.count*
(a.is32?4:2)},allocIndexes:function(a){a.ibuf=this.driver.allocIndexes(a.count,a.is32);this.indexes.push(a);this.usedMemory+=a.count*(a.is32?4:2)},bpp:function(a){return 4},cleanTextures:function(a){null==a&&(a=!0);this.textures.sort(K(this,this.sortByLRU));for(var b=0,c=this.textures;b<c.length;){var d=c[b];++b;if(null!=d.realloc&&(a||d.lastFrame<da.frameCount-3600))return d.dispose(),!0}return!1},sortByLRU:function(a,b){return a.lastFrame-b.lastFrame},deleteTexture:function(a){z.remove(this.textures,
a)&&(this.driver.disposeTexture(a),this.texMemory-=a.width*a.height*this.bpp(a))},allocTexture:function(a){this.cleanTextures(!1);a.t=this.driver.allocTexture(a);if(null==a.t){if(!this.driver.isDisposed()){if(!this.cleanTextures(!0))throw new n("Maximum texture memory reached");this.allocTexture(a)}}else this.textures.push(a),this.texMemory+=a.width*a.height*this.bpp(a)},allocDepth:function(a){this.cleanTextures(!1);a.b=this.driver.allocDepthBuffer(a);if(null==a.b){if(!this.driver.isDisposed()){if(!this.cleanTextures(!0))throw new n("Maximum texture memory reached");
this.allocDepth(a)}}else this.depths.push(a),this.texMemory+=4*a.width*a.height},deleteDepth:function(a){z.remove(this.depths,a)&&(this.driver.disposeDepthBuffer(a),this.texMemory-=4*a.width*a.height)},onContextLost:function(){this.dispose();this.initIndexes()},dispose:function(){this.triIndexes.dispose();this.quadIndexes.dispose();this.quadIndexes=this.triIndexes=null;for(var a=0,b=this.textures.slice();a<b.length;){var c=b[a];++a;c.dispose()}a=0;for(b=this.depths.slice();a<b.length;)c=b[a],++a,
c.dispose();a=0;for(b=this.buffers.slice();a<b.length;){c=b[a];for(++a;null!=c;)c.dispose(),c=c.next}a=0;for(b=this.indexes.slice();a<b.length;)c=b[a],++a,c.dispose();this.buffers=[];this.indexes=[];this.textures=[];this.texMemory=this.usedMemory=this.bufferCount=0},freeMemorySize:function(){for(var a=0,b=0,c=this.buffers;b<c.length;){var d=c[b];for(++b;null!=d;){for(var e=d.freeList;null!=e;)a+=4*e.count*d.stride,e=e.next;d=d.next}}return a},stats:function(){for(var a=0,b=0,c=0,d=0,e=this.buffers;d<
e.length;){var f=e[d];for(++d;null!=f;){for(var a=a+4*f.stride*f.size,g=f.freeList;null!=g;)b+=4*g.count*f.stride,g=g.next;++c;f=f.next}}return{bufferCount:this.bufferCount,freeManagedMemory:b,managedMemory:a,totalMemory:this.usedMemory+this.texMemory,textureCount:this.textures.length,textureMemory:this.texMemory}},allocStats:function(){return[]},__class__:Oc};var nj=function(a){this.position=0;this.ctx=a;this.cache=[];this.defaultFormat=V.nativeFormat;this.defaultDepthBuffer=Je.getDefault()};p["h3d.impl.TextureCache"]=
nj;nj.__name__="h3d.impl.TextureCache";nj.prototype={get:function(a){null==a&&(a=0);return this.cache[a]},getNamed:function(a){for(var b=0,c=this.position;b<c;){var d=b++;if(this.cache[d].name==a)return this.cache[d]}return null},set:function(a,b){this.cache[b]=a},begin:function(){for(;this.cache.length>this.position;){var a=this.cache.pop();null!=a&&a.dispose()}this.position=0},allocTarget:function(a,b,c,d,e,f){null==f&&(f=!1);null==d&&(d=!0);var g=this.cache[this.position];null==e&&(e=this.defaultFormat);
if(null==g||null==g.t&&null==g.realloc||g.width!=b||g.height!=c||g.format!=e||f!=(0!=(g.flags&1<<T.Cube._hx_index)))null!=g&&g.dispose(),g=[T.Target],f&&g.push(T.Cube),g=new V(b,c,g,e),this.cache[this.position]=g;g.depthBuffer=d?this.defaultDepthBuffer:null;g.setName(a);this.position++;return g},allocTargetScale:function(a,b,c,d){null==c&&(c=!0);var e=na.CURRENT;return this.allocTarget(a,Math.ceil(e.width*b),Math.ceil(e.height*b),c,d)},allocTileTarget:function(a,b,c,d){null==c&&(c=!1);return this.allocTarget(a,
Math.ceil(b.width+b.x)-Math.floor(b.x),Math.ceil(b.height+b.y)-Math.floor(b.y),c,d)},dispose:function(){for(var a=0,b=this.cache;a<b.length;){var c=b[a];++a;c.dispose()}this.cache=[]},__class__:nj};var xf=function(){};p["hxd.impl.AnyProps"]=xf;xf.__name__="hxd.impl.AnyProps";xf.prototype={set_props:function(a){this.props=a;this.refreshProps();return a},setDefaultProps:function(a){this.set_props(this.getDefaultProps(a))},getDefaultProps:function(a){return{}},refreshProps:function(){},__class__:xf};
var Pc=function(a){null!=a&&this.addPass(new P("default",null)).addShader(a)};p["h3d.mat.BaseMaterial"]=Pc;Pc.__name__="h3d.mat.BaseMaterial";Pc.__interfaces__=[Vd];Pc.__super__=xf;Pc.prototype=J(xf.prototype,{addPass:function(a){for(var b=null,c=this.passes;null!=c;)b=c,c=c.nextPass;null==b?this.passes=a:b.nextPass=a;a.nextPass=null;return a},removePass:function(a){for(var b=null,c=this.passes;null!=c;){if(c==a)return null==b?this.passes=a.nextPass:b.nextPass=a.nextPass,a.nextPass=null,!0;b=c;c=
c.nextPass}return!1},get_mainPass:function(){return this.passes},getPasses:function(){for(var a=this.passes,b=[];null!=a;)b.push(a),a=a.nextPass;return b},getPass:function(a){for(var b=this.passes;null!=b;){if(b.name==a)return b;b=b.nextPass}return null},allocPass:function(a,b){null==b&&(b=!0);var c=this.getPass(a);if(null!=c)return c;c=new P(a,null,b?this.passes:null);this.addPass(c);return c},clone:function(a){null==a&&(a=new Pc);a.passes.load(this.passes);a.name=this.name;a.set_props(this.props);
return a},__class__:Pc});var Od=M["h3d.mat.Face"]={__ename__:!0,__constructs__:["None","Back","Front","Both"],None:{_hx_index:0,__enum__:"h3d.mat.Face",toString:m},Back:{_hx_index:1,__enum__:"h3d.mat.Face",toString:m},Front:{_hx_index:2,__enum__:"h3d.mat.Face",toString:m},Both:{_hx_index:3,__enum__:"h3d.mat.Face",toString:m}};Od.__empty_constructs__=[Od.None,Od.Back,Od.Front,Od.Both];var S=M["h3d.mat.Blend"]={__ename__:!0,__constructs__:"One Zero SrcAlpha SrcColor DstAlpha DstColor OneMinusSrcAlpha OneMinusSrcColor OneMinusDstAlpha OneMinusDstColor ConstantColor ConstantAlpha OneMinusConstantColor OneMinusConstantAlpha SrcAlphaSaturate".split(" "),
One:{_hx_index:0,__enum__:"h3d.mat.Blend",toString:m},Zero:{_hx_index:1,__enum__:"h3d.mat.Blend",toString:m},SrcAlpha:{_hx_index:2,__enum__:"h3d.mat.Blend",toString:m},SrcColor:{_hx_index:3,__enum__:"h3d.mat.Blend",toString:m},DstAlpha:{_hx_index:4,__enum__:"h3d.mat.Blend",toString:m},DstColor:{_hx_index:5,__enum__:"h3d.mat.Blend",toString:m},OneMinusSrcAlpha:{_hx_index:6,__enum__:"h3d.mat.Blend",toString:m},OneMinusSrcColor:{_hx_index:7,__enum__:"h3d.mat.Blend",toString:m},OneMinusDstAlpha:{_hx_index:8,
__enum__:"h3d.mat.Blend",toString:m},OneMinusDstColor:{_hx_index:9,__enum__:"h3d.mat.Blend",toString:m},ConstantColor:{_hx_index:10,__enum__:"h3d.mat.Blend",toString:m},ConstantAlpha:{_hx_index:11,__enum__:"h3d.mat.Blend",toString:m},OneMinusConstantColor:{_hx_index:12,__enum__:"h3d.mat.Blend",toString:m},OneMinusConstantAlpha:{_hx_index:13,__enum__:"h3d.mat.Blend",toString:m},SrcAlphaSaturate:{_hx_index:14,__enum__:"h3d.mat.Blend",toString:m}};S.__empty_constructs__=[S.One,S.Zero,S.SrcAlpha,S.SrcColor,
S.DstAlpha,S.DstColor,S.OneMinusSrcAlpha,S.OneMinusSrcColor,S.OneMinusDstAlpha,S.OneMinusDstColor,S.ConstantColor,S.ConstantAlpha,S.OneMinusConstantColor,S.OneMinusConstantAlpha,S.SrcAlphaSaturate];var Xb=M["h3d.mat.Compare"]={__ename__:!0,__constructs__:"Always Never Equal NotEqual Greater GreaterEqual Less LessEqual".split(" "),Always:{_hx_index:0,__enum__:"h3d.mat.Compare",toString:m},Never:{_hx_index:1,__enum__:"h3d.mat.Compare",toString:m},Equal:{_hx_index:2,__enum__:"h3d.mat.Compare",toString:m},
NotEqual:{_hx_index:3,__enum__:"h3d.mat.Compare",toString:m},Greater:{_hx_index:4,__enum__:"h3d.mat.Compare",toString:m},GreaterEqual:{_hx_index:5,__enum__:"h3d.mat.Compare",toString:m},Less:{_hx_index:6,__enum__:"h3d.mat.Compare",toString:m},LessEqual:{_hx_index:7,__enum__:"h3d.mat.Compare",toString:m}};Xb.__empty_constructs__=[Xb.Always,Xb.Never,Xb.Equal,Xb.NotEqual,Xb.Greater,Xb.GreaterEqual,Xb.Less,Xb.LessEqual];var Ab=M["h3d.mat.StencilOp"]={__ename__:!0,__constructs__:"Keep Zero Replace Increment IncrementWrap Decrement DecrementWrap Invert".split(" "),
Keep:{_hx_index:0,__enum__:"h3d.mat.StencilOp",toString:m},Zero:{_hx_index:1,__enum__:"h3d.mat.StencilOp",toString:m},Replace:{_hx_index:2,__enum__:"h3d.mat.StencilOp",toString:m},Increment:{_hx_index:3,__enum__:"h3d.mat.StencilOp",toString:m},IncrementWrap:{_hx_index:4,__enum__:"h3d.mat.StencilOp",toString:m},Decrement:{_hx_index:5,__enum__:"h3d.mat.StencilOp",toString:m},DecrementWrap:{_hx_index:6,__enum__:"h3d.mat.StencilOp",toString:m},Invert:{_hx_index:7,__enum__:"h3d.mat.StencilOp",toString:m}};
Ab.__empty_constructs__=[Ab.Keep,Ab.Zero,Ab.Replace,Ab.Increment,Ab.IncrementWrap,Ab.Decrement,Ab.DecrementWrap,Ab.Invert];var Lh=M["h3d.mat.MipMap"]={__ename__:!0,__constructs__:["None","Nearest","Linear"],None:{_hx_index:0,__enum__:"h3d.mat.MipMap",toString:m},Nearest:{_hx_index:1,__enum__:"h3d.mat.MipMap",toString:m},Linear:{_hx_index:2,__enum__:"h3d.mat.MipMap",toString:m}};Lh.__empty_constructs__=[Lh.None,Lh.Nearest,Lh.Linear];var le=M["h3d.mat.Filter"]={__ename__:!0,__constructs__:["Nearest",
"Linear"],Nearest:{_hx_index:0,__enum__:"h3d.mat.Filter",toString:m},Linear:{_hx_index:1,__enum__:"h3d.mat.Filter",toString:m}};le.__empty_constructs__=[le.Nearest,le.Linear];var xg=M["h3d.mat.Wrap"]={__ename__:!0,__constructs__:["Clamp","Repeat"],Clamp:{_hx_index:0,__enum__:"h3d.mat.Wrap",toString:m},Repeat:{_hx_index:1,__enum__:"h3d.mat.Wrap",toString:m}};xg.__empty_constructs__=[xg.Clamp,xg.Repeat];var Ea=M["h3d.mat.Operation"]={__ename__:!0,__constructs__:["Add","Sub","ReverseSub","Min","Max"],
Add:{_hx_index:0,__enum__:"h3d.mat.Operation",toString:m},Sub:{_hx_index:1,__enum__:"h3d.mat.Operation",toString:m},ReverseSub:{_hx_index:2,__enum__:"h3d.mat.Operation",toString:m},Min:{_hx_index:3,__enum__:"h3d.mat.Operation",toString:m},Max:{_hx_index:4,__enum__:"h3d.mat.Operation",toString:m}};Ea.__empty_constructs__=[Ea.Add,Ea.Sub,Ea.ReverseSub,Ea.Min,Ea.Max];var T=M["h3d.mat.TextureFlags"]={__ename__:!0,__constructs__:"Target Cube MipMapped ManualMipMapGen IsNPOT NoAlloc Dynamic AlphaPremultiplied WasCleared Loading Serialize IsArray".split(" "),
Target:{_hx_index:0,__enum__:"h3d.mat.TextureFlags",toString:m},Cube:{_hx_index:1,__enum__:"h3d.mat.TextureFlags",toString:m},MipMapped:{_hx_index:2,__enum__:"h3d.mat.TextureFlags",toString:m},ManualMipMapGen:{_hx_index:3,__enum__:"h3d.mat.TextureFlags",toString:m},IsNPOT:{_hx_index:4,__enum__:"h3d.mat.TextureFlags",toString:m},NoAlloc:{_hx_index:5,__enum__:"h3d.mat.TextureFlags",toString:m},Dynamic:{_hx_index:6,__enum__:"h3d.mat.TextureFlags",toString:m},AlphaPremultiplied:{_hx_index:7,__enum__:"h3d.mat.TextureFlags",
toString:m},WasCleared:{_hx_index:8,__enum__:"h3d.mat.TextureFlags",toString:m},Loading:{_hx_index:9,__enum__:"h3d.mat.TextureFlags",toString:m},Serialize:{_hx_index:10,__enum__:"h3d.mat.TextureFlags",toString:m},IsArray:{_hx_index:11,__enum__:"h3d.mat.TextureFlags",toString:m}};T.__empty_constructs__=[T.Target,T.Cube,T.MipMapped,T.ManualMipMapGen,T.IsNPOT,T.NoAlloc,T.Dynamic,T.AlphaPremultiplied,T.WasCleared,T.Loading,T.Serialize,T.IsArray];var ld=function(){};p["h3d.mat.Defaults"]=ld;ld.__name__=
"h3d.mat.Defaults";ld.get_shadowShader=function(){var a=ld.shadowShader;null==a&&(a=new Gg,ld.set_shadowShader(a),ld.shadowShader.setPriority(-1));return a};ld.set_shadowShader=function(a){return ld.shadowShader=a};ld.makeVolumeDecal=function(a){return new yf(a.xMax-a.xMin,a.yMax-a.yMin)};var Jh=M["h3d.mat.DepthFormat"]={__ename__:!0,__constructs__:["Depth16","Depth24","Depth24Stencil8"],Depth16:{_hx_index:0,__enum__:"h3d.mat.DepthFormat",toString:m},Depth24:{_hx_index:1,__enum__:"h3d.mat.DepthFormat",
toString:m},Depth24Stencil8:{_hx_index:2,__enum__:"h3d.mat.DepthFormat",toString:m}};Jh.__empty_constructs__=[Jh.Depth16,Jh.Depth24,Jh.Depth24Stencil8];var Je=function(a,b,c){this.width=a;this.height=b;this.format=c;0<a&&this.alloc()};p["h3d.mat.DepthBuffer"]=Je;Je.__name__="h3d.mat.DepthBuffer";Je.getDefault=function(){return na.CURRENT.driver.getDefaultDepthBuffer()};Je.prototype={hasStencil:function(){switch(this.format._hx_index){case 0:case 1:return!1;case 2:return!0}},alloc:function(){na.CURRENT.mem.allocDepth(this)},
dispose:function(){null!=this.b&&(na.CURRENT.mem.deleteDepth(this),this.b=null)},isDisposed:function(){return null==this.b},__class__:Je};var Af=function(a){this.mshader=new zf;this.set_blendMode(Ra.None);Pc.call(this,this.mshader);this.set_texture(a)};p["h3d.mat.Material"]=Af;Af.__name__="h3d.mat.Material";Af.create=function(a){var b=ae.current.createMaterial();b.set_texture(a);b.set_props(b.getDefaultProps());return b};Af.__super__=Pc;Af.prototype=J(Pc.prototype,{get_specularPower:function(){return this.mshader.specularPower__},
set_specularPower:function(a){return this.mshader.specularPower__=a},get_specularAmount:function(){return this.mshader.specularAmount__},set_specularAmount:function(a){return this.mshader.specularAmount__=a},get_color:function(){return this.mshader.color__},set_color:function(a){return this.mshader.color__=a},get_shadows:function(){return this.castShadows?this.receiveShadows:!1},set_shadows:function(a){this.set_castShadows(a);this.set_receiveShadows(a);return a},set_castShadows:function(a){if(this.castShadows==
a)return a;null!=this.passes&&(a?this.addPass(new P("shadow",null,this.passes)).set_isStatic(this.staticShadows):this.removePass(this.getPass("shadow")));return this.castShadows=a},set_receiveShadows:function(a){if(a==this.receiveShadows)return a;if(null!=this.passes){var b=ld.get_shadowShader();a?this.passes.addShader(b):this.passes.removeShader(b)}return this.receiveShadows=a},set_staticShadows:function(a){var b=this.getPass("shadow");null!=b&&b.set_isStatic(a);return this.staticShadows=a},clone:function(a){a=
null==a?new Af:a;Pc.prototype.clone.call(this,a);a.set_castShadows(this.castShadows);a.set_receiveShadows(this.receiveShadows);a.set_texture(this.get_texture());a.set_specularTexture(this.get_specularTexture());a.set_normalMap(this.get_normalMap());if(null!=this.textureShader){var b=a.textureShader;b.constModified=!0;b.additive__=this.textureShader.additive__;b=a.textureShader;b.constModified=!0;b.killAlpha__=this.textureShader.killAlpha__;a.textureShader.killAlphaThreshold__=this.textureShader.killAlphaThreshold__}a.mshader.color__=
this.mshader.color__;a.set_blendMode(this.blendMode);return a},set_blendMode:function(a){if(null!=this.passes)switch(this.passes.setBlendMode(a),a._hx_index){case 0:this.passes.set_depthWrite(!0);this.passes.setPassName("default");break;case 1:this.passes.set_depthWrite(!0);this.passes.setPassName("alpha");break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:this.passes.set_depthWrite(!1),this.passes.setPassName("additive")}return this.blendMode=a},get_specularTexture:function(){return null==
this.specularShader?null:this.specularShader.texture__},get_texture:function(){return null==this.textureShader?null:this.textureShader.texture__},set_texture:function(a){null==a?null!=this.textureShader&&(this.passes.removeShader(this.textureShader),this.textureShader=null):(null==this.textureShader&&(this.textureShader=new Bf,this.passes.addShader(this.textureShader)),this.textureShader.texture__=a);return a},get_normalMap:function(){return null==this.normalShader?null:this.normalShader.texture__},
set_normalMap:function(a){null==a?null!=this.normalShader&&(this.passes.removeShader(this.normalShader),this.normalShader=null):(null==this.normalShader&&(this.normalShader=new Cf,null!=this.textureShader?this.passes.addShaderAtIndex(this.normalShader,this.passes.getShaderIndex(this.textureShader)+1):this.passes.addShader(this.normalShader)),this.normalShader.texture__=a);return a},set_specularTexture:function(a){null==a?null!=this.specularShader&&(this.passes.removeShader(this.specularShader),this.specularShader=
null):(null==this.specularShader&&(this.specularShader=new Df,this.passes.addShader(this.specularShader)),this.specularShader.texture__=a);return a},getDefaultModelProps:function(){var a=this.getDefaultProps();switch(this.blendMode._hx_index){case 0:break;case 1:a.kind="Alpha";break;case 2:a.kind="Add";a.culling=!1;a.shadows=!1;a.light=!1;break;default:throw new n("Unsupported HMD material "+r.string(this.blendMode));}return a},getDefaultProps:function(a){if(null==a)a={kind:"Opaque",shadows:!0,culling:!0,
light:!0};else switch(a){case "particles3D":case "trail3D":a={kind:"Alpha",shadows:!1,culling:!1,light:!0};break;case "ui":a={kind:"Alpha",shadows:!1,culling:!1,light:!1};break;default:a={kind:"Opaque",shadows:!0,culling:!0,light:!0}}return a},refreshProps:function(){if(!(null==this.props||null==this.passes)){var a=this.props;switch(a.kind){case "Add":this.set_blendMode(Ra.Add);break;case "Alpha":this.set_blendMode(Ra.Alpha);break;case "AlphaKill":case "Opaque":this.set_blendMode(Ra.None);break;case "SoftAdd":this.set_blendMode(Ra.SoftAdd)}var b=
this.textureShader;null!=b&&(b.constModified=!0,b.killAlpha__="AlphaKill"==a.kind,b.killAlphaThreshold__=0.5);this.passes.set_culling(a.culling?Od.Back:Od.None);this.passes.set_enableLights(a.light);a=a.shadows;this.set_castShadows(a);this.set_receiveShadows(a);this.castShadows&&this.receiveShadows&&this.getPass("shadow").set_culling(this.passes.culling)}},__class__:Af});var yj=function(){this.db=new ia};p["h3d.mat.MaterialDatabase"]=yj;yj.__name__="h3d.mat.MaterialDatabase";yj.prototype={getFilePath:function(a){return a.entry.get_directory()+
"/materials.props"},getModelData:function(a){if(null==a)return null;var b=this.db,c=a.entry.get_directory(),b=null!=L[c]?b.getReserved(c):b.h[c];if(null!=b)return b.v;var b=this.getFilePath(a),d;try{d=JSON.parse(Cb.currentInstance.load(b).toText())}catch(e){if((e instanceof n?e.val:e)instanceof be)d={};else throw e;}b=this.db;a=a.entry.get_directory();c={v:d};null!=L[a]?b.setReserved(a,c):b.h[a]=c;return d},saveData:function(a,b){var c=this.getFilePath(a);throw new n("Can't save material props database "+
c);},loadMatProps:function(a,b){var c=this.getModelData(a.model);if(null==c)return c;c=c.materials;if(null==c)return c;c=xa.field(c,b.name);return null==c?c:xa.field(c,a.name)},saveMatProps:function(a,b){var c=["materials",b.name,a.name],d=this.getModelData(a.model);if(null!=d){for(var e=d,f=[],g=0,h=c.length-1;g<h;){var k=g++,l=xa.field(d,c[k]);null==l&&(l={},d[c[k]]=l);f.push(d);d=l}g=c.pop();xa.deleteField(d,g);h=a.props;k=a.getDefaultProps();if(null==h||r.string(k)==r.string(h))for(;0<c.length;){d=
c.pop();g=f.pop();if(0!=xa.fields(xa.field(g,d)).length)break;xa.deleteField(g,d)}else d[g]=h;this.getFilePath(a.model);0==xa.fields(e).length&&(e=null);this.saveData(a.model,e)}},__class__:yj};var ae=function(a){null==this.database&&(this.database=new yj);this.name=a};p["h3d.mat.MaterialSetup"]=ae;ae.__name__="h3d.mat.MaterialSetup";ae.prototype={createRenderer:function(){return new Mh},createLightSystem:function(){return new Nh},createMaterial:function(){return new Af},getDefaults:function(a){null==
this.emptyMat&&(this.emptyMat=this.createMaterial());return this.emptyMat.getDefaultProps(a)},loadMaterialProps:function(a){return this.database.loadMatProps(a,this)},saveMaterialProps:function(a){this.database.saveMatProps(a,this)},customMeshInit:function(a){},__class__:ae};var P=function(a,b,c){this.bits=0;this.parentPass=c;this.shaders=b;this.setPassName(a);this.set_culling(Od.Back);a=S.One;b=S.Zero;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.depth(!0,
Xb.Less);this.set_blendOp(this.set_blendAlphaOp(Ea.Add));this.colorMask=15};p["h3d.mat.Pass"]=P;P.__name__="h3d.mat.Pass";P.__interfaces__=[Vd];P.getEnableLights=function(a){return a&1};P.getDynamicParameters=function(a){return a>>1&1};P.getIsStatic=function(a){return a>>2&1};P.getBatchMode=function(a){return a>>3&1};P.getCulling=function(a){return a&3};P.getDepthWrite=function(a){return a>>2&1};P.getDepthTest=function(a){return a>>3&7};P.getBlendSrc=function(a){return a>>6&15};P.getBlendDst=function(a){return a>>
10&15};P.getBlendAlphaSrc=function(a){return a>>14&15};P.getBlendAlphaDst=function(a){return a>>18&15};P.getBlendOp=function(a){return a>>22&7};P.getBlendAlphaOp=function(a){return a>>25&7};P.getWireframe=function(a){return a>>28&1};P.getReserved=function(a){return a>>29&1};P.prototype={load:function(a){this.name=a.name;this.passId=a.passId;this.bits=a.bits;this.set_enableLights(a.enableLights);this.set_dynamicParameters(a.dynamicParameters);this.set_culling(a.culling);this.set_depthWrite(a.depthWrite);
this.set_depthTest(a.depthTest);this.set_blendSrc(a.blendSrc);this.set_blendDst(a.blendDst);this.set_blendOp(a.blendOp);this.set_blendAlphaSrc(a.blendAlphaSrc);this.set_blendAlphaDst(a.blendAlphaDst);this.set_blendAlphaOp(a.blendAlphaOp);this.colorMask=a.colorMask;null!=a.stencil&&(null==this.stencil&&(this.stencil=new ea),this.stencil.load(a.stencil))},setPassName:function(a){this.name=a;this.passId=Y.allocID(a)},blend:function(a,b){this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);
this.set_blendAlphaDst(b)},setBlendMode:function(a){switch(a._hx_index){case 0:a=S.One;var b=S.Zero;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.Add);this.set_blendAlphaOp(Ea.Add);break;case 1:a=S.SrcAlpha;b=S.OneMinusSrcAlpha;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.Add);this.set_blendAlphaOp(Ea.Add);break;case 2:a=S.SrcAlpha;b=S.One;this.set_blendSrc(a);this.set_blendAlphaSrc(a);
this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.Add);this.set_blendAlphaOp(Ea.Add);break;case 3:a=S.One;b=S.OneMinusSrcAlpha;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.Add);this.set_blendAlphaOp(Ea.Add);break;case 4:a=S.OneMinusDstColor;b=S.One;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.Add);this.set_blendAlphaOp(Ea.Add);break;case 5:a=S.DstColor;
b=S.Zero;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.Add);this.set_blendAlphaOp(Ea.Add);break;case 6:a=S.DstColor;b=S.OneMinusSrcAlpha;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.Add);this.set_blendAlphaOp(Ea.Add);break;case 7:a=S.Zero;b=S.OneMinusSrcColor;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.Add);
this.set_blendAlphaOp(Ea.Add);break;case 8:a=S.One;b=S.OneMinusSrcColor;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.Add);this.set_blendAlphaOp(Ea.Add);break;case 9:a=S.SrcAlpha;b=S.One;this.set_blendSrc(a);this.set_blendAlphaSrc(a);this.set_blendDst(b);this.set_blendAlphaDst(b);this.set_blendOp(Ea.ReverseSub);this.set_blendAlphaOp(Ea.ReverseSub);break;case 10:this.set_blendSrc(S.Zero);this.set_blendAlphaSrc(S.Zero);this.set_blendDst(S.Zero);
this.set_blendAlphaDst(S.Zero);this.set_blendAlphaSrc(S.Zero);this.set_blendAlphaDst(S.Zero);this.set_blendAlphaOp(Ea.Max);this.set_blendOp(Ea.Max);break;case 11:this.set_blendSrc(S.Zero),this.set_blendAlphaSrc(S.Zero),this.set_blendDst(S.Zero),this.set_blendAlphaDst(S.Zero),this.set_blendAlphaSrc(S.Zero),this.set_blendAlphaDst(S.Zero),this.set_blendAlphaOp(Ea.Min),this.set_blendOp(Ea.Min)}},depth:function(a,b){this.set_depthWrite(a);this.set_depthTest(b)},setColorMask:function(a,b,c,d){this.colorMask=
(a?1:0)|(b?2:0)|(c?4:0)|(d?8:0)},setColorChannel:function(a){switch(a._hx_index){case 1:this.setColorMask(!0,!1,!1,!1);break;case 2:this.setColorMask(!1,!0,!1,!1);break;case 3:this.setColorMask(!1,!1,!0,!1);break;case 4:this.setColorMask(!1,!1,!1,!0);break;default:throw new n("Unsupported channel "+r.string(a));}},addShader:function(a){if(null==a)return null;this.shaders=Wb.addSort(a,this.shaders);return a},addShaderAtIndex:function(a,b){for(var c=null,d=this.shaders;0<b&&d!=this.parentShaders;)c=
d,d=d.next,--b;null==c?this.shaders=new Wb(a,d):c.next=new Wb(a,d);return a},getShaderIndex:function(a){for(var b=0,c=this.shaders;c!=this.parentShaders;){if(c.s==a)return b;c=c.next;++b}return-1},removeShader:function(a){for(var b=this.shaders,c=null;null!=b;){if(b.s==a)return null==c?this.shaders=b.next:c.next=b.next,!0;c=b;b=b.next}return!1},getShader:function(a){for(var b=this.shaders;b!=this.parentShaders;){var c=b.s,c=c instanceof a?c:null;if(null!=c)return c;b=b.next}return null},getShaderByName:function(a){for(var b=
this.shaders;b!=this.parentShaders;){if(b.s.shader.data.name==a)return b.s;b=b.next}return null},getShaders:function(){return new pf(this.shaders,this.parentShaders)},getShadersRec:function(){if(null==this.parentPass||this.parentShaders==this.parentPass.shaders)return this.shaders;for(var a=this.shaders,b=null;null!=a&&a!=this.parentShaders;)b=a,a=a.next;this.parentShaders=this.parentPass.shaders;null==b?this.shaders=this.parentShaders:b.next=this.parentShaders;return this.shaders},clone:function(){var a=
new P(this.name,this.shaders.clone());a.bits=this.bits;a.set_enableLights(this.enableLights);null!=this.stencil&&(a.stencil=this.stencil.clone());return a},getDebugShaderCode:function(a,b){null==b&&(b=!0);var c=a.renderer.debugCompileShader(this);return b?"// vertex:\n"+qa.shaderToString(c.vertex.data,!0)+"\n\nfragment:\n"+qa.shaderToString(c.fragment.data,!0):na.CURRENT.driver.getNativeShaderCode(c)},set_enableLights:function(a){this.flags=this.flags&-2|(a?1:0);return this.enableLights=a},set_dynamicParameters:function(a){this.flags=
this.flags&-3|(a?1:0)<<1;return this.dynamicParameters=a},set_isStatic:function(a){this.flags=this.flags&-5|(a?1:0)<<2;return this.isStatic=a},set_batchMode:function(a){this.flags=this.flags&-9|(a?1:0)<<3;return this.batchMode=a},set_culling:function(a){this.bits=this.bits&-4|a._hx_index;return this.culling=a},set_depthWrite:function(a){this.bits=this.bits&-5|(a?1:0)<<2;return this.depthWrite=a},set_depthTest:function(a){this.bits=this.bits&-57|a._hx_index<<3;return this.depthTest=a},set_blendSrc:function(a){this.bits=
this.bits&-961|a._hx_index<<6;return this.blendSrc=a},set_blendDst:function(a){this.bits=this.bits&-15361|a._hx_index<<10;return this.blendDst=a},set_blendAlphaSrc:function(a){this.bits=this.bits&-245761|a._hx_index<<14;return this.blendAlphaSrc=a},set_blendAlphaDst:function(a){this.bits=this.bits&-3932161|a._hx_index<<18;return this.blendAlphaDst=a},set_blendOp:function(a){this.bits=this.bits&-29360129|a._hx_index<<22;return this.blendOp=a},set_blendAlphaOp:function(a){this.bits=this.bits&-234881025|
a._hx_index<<25;return this.blendAlphaOp=a},set_wireframe:function(a){this.bits=this.bits&-268435457|(a?1:0)<<28;return this.wireframe=a},set_reserved:function(a){this.bits=this.bits&-536870913|(a?1:0)<<29;return this.reserved=a},loadFlags:function(a){this.flags=a;this.set_enableLights(0!=(this.flags&1));this.set_dynamicParameters(0!=(this.flags>>1&1));this.set_isStatic(0!=(this.flags>>2&1));this.set_batchMode(0!=(this.flags>>3&1))},loadBits:function(a){this.bits=a;this.set_culling(ha.createEnumIndex(Od,
this.bits&3));this.set_depthWrite(0!=(this.bits>>2&1));this.set_depthTest(ha.createEnumIndex(Xb,this.bits>>3&7));this.set_blendSrc(ha.createEnumIndex(S,this.bits>>6&15));this.set_blendDst(ha.createEnumIndex(S,this.bits>>10&15));this.set_blendAlphaSrc(ha.createEnumIndex(S,this.bits>>14&15));this.set_blendAlphaDst(ha.createEnumIndex(S,this.bits>>18&15));this.set_blendOp(ha.createEnumIndex(Ea,this.bits>>22&7));this.set_blendAlphaOp(ha.createEnumIndex(Ea,this.bits>>25&7));this.set_wireframe(0!=(this.bits>>
28&1));this.set_reserved(0!=(this.bits>>29&1))},__class__:P};var ea=function(){this.maskBits=this.opBits=0;this.setOp(Ab.Keep,Ab.Keep,Ab.Keep);this.setFunc(Xb.Always)};p["h3d.mat.Stencil"]=ea;ea.__name__="h3d.mat.Stencil";ea.__interfaces__=[Vd];ea.getReadMask=function(a){return a&255};ea.getWriteMask=function(a){return a>>8&255};ea.getReference=function(a){return a>>16&255};ea.getFrontTest=function(a){return a&7};ea.getFrontPass=function(a){return a>>3&7};ea.getFrontSTfail=function(a){return a>>6&
7};ea.getFrontDPfail=function(a){return a>>9&7};ea.getBackTest=function(a){return a>>12&7};ea.getBackPass=function(a){return a>>15&7};ea.getBackSTfail=function(a){return a>>18&7};ea.getBackDPfail=function(a){return a>>21&7};ea.prototype={setFront:function(a,b,c){this.set_frontSTfail(a);this.set_frontDPfail(b);this.set_frontPass(c)},setBack:function(a,b,c){this.set_backSTfail(a);this.set_backDPfail(b);this.set_backPass(c)},setOp:function(a,b,c){this.setFront(a,b,c);this.setBack(a,b,c)},setFunc:function(a,
b,c,d){null==d&&(d=255);null==c&&(c=255);null==b&&(b=0);this.set_frontTest(this.set_backTest(a));this.set_reference(b);this.set_readMask(c);this.set_writeMask(d)},clone:function(){var a=new ea;a.opBits=this.opBits;a.maskBits=this.maskBits;return a},load:function(a){this.opBits=a.opBits;this.maskBits=a.maskBits},set_readMask:function(a){this.maskBits=this.maskBits&-256|a&255;return this.readMask=a},set_writeMask:function(a){this.maskBits=this.maskBits&-65281|(a&255)<<8;return this.writeMask=a},set_reference:function(a){this.maskBits=
this.maskBits&-16711681|(a&255)<<16;return this.reference=a},set_frontTest:function(a){this.opBits=this.opBits&-8|a._hx_index;return this.frontTest=a},set_frontPass:function(a){this.opBits=this.opBits&-57|a._hx_index<<3;return this.frontPass=a},set_frontSTfail:function(a){this.opBits=this.opBits&-449|a._hx_index<<6;return this.frontSTfail=a},set_frontDPfail:function(a){this.opBits=this.opBits&-3585|a._hx_index<<9;return this.frontDPfail=a},set_backTest:function(a){this.opBits=this.opBits&-28673|a._hx_index<<
12;return this.backTest=a},set_backPass:function(a){this.opBits=this.opBits&-229377|a._hx_index<<15;return this.backPass=a},set_backSTfail:function(a){this.opBits=this.opBits&-1835009|a._hx_index<<18;return this.backSTfail=a},set_backDPfail:function(a){this.opBits=this.opBits&-14680065|a._hx_index<<21;return this.backDPfail=a},loadOpBits:function(a){this.opBits=a;this.set_frontTest(ha.createEnumIndex(Xb,this.opBits&7));this.set_frontPass(ha.createEnumIndex(Ab,this.opBits>>3&7));this.set_frontSTfail(ha.createEnumIndex(Ab,
this.opBits>>6&7));this.set_frontDPfail(ha.createEnumIndex(Ab,this.opBits>>9&7));this.set_backTest(ha.createEnumIndex(Xb,this.opBits>>12&7));this.set_backPass(ha.createEnumIndex(Ab,this.opBits>>15&7));this.set_backSTfail(ha.createEnumIndex(Ab,this.opBits>>18&7));this.set_backDPfail(ha.createEnumIndex(Ab,this.opBits>>21&7))},loadMaskBits:function(a){this.maskBits=a;this.set_readMask(this.maskBits&255);this.set_writeMask(this.maskBits>>8&255);this.set_reference(this.maskBits>>16&255)},__class__:ea};
var ya=M["hxd.PixelFormat"]={__ename__:!0,__constructs__:"ARGB BGRA RGBA RGBA16F RGBA32F R8 R16F R32F RG8 RG16F RG32F RGB8 RGB16F RGB32F SRGB SRGB_ALPHA RGB10A2 RG11B10UF S3TC".split(" "),ARGB:{_hx_index:0,__enum__:"hxd.PixelFormat",toString:m},BGRA:{_hx_index:1,__enum__:"hxd.PixelFormat",toString:m},RGBA:{_hx_index:2,__enum__:"hxd.PixelFormat",toString:m},RGBA16F:{_hx_index:3,__enum__:"hxd.PixelFormat",toString:m},RGBA32F:{_hx_index:4,__enum__:"hxd.PixelFormat",toString:m},R8:{_hx_index:5,__enum__:"hxd.PixelFormat",
toString:m},R16F:{_hx_index:6,__enum__:"hxd.PixelFormat",toString:m},R32F:{_hx_index:7,__enum__:"hxd.PixelFormat",toString:m},RG8:{_hx_index:8,__enum__:"hxd.PixelFormat",toString:m},RG16F:{_hx_index:9,__enum__:"hxd.PixelFormat",toString:m},RG32F:{_hx_index:10,__enum__:"hxd.PixelFormat",toString:m},RGB8:{_hx_index:11,__enum__:"hxd.PixelFormat",toString:m},RGB16F:{_hx_index:12,__enum__:"hxd.PixelFormat",toString:m},RGB32F:{_hx_index:13,__enum__:"hxd.PixelFormat",toString:m},SRGB:{_hx_index:14,__enum__:"hxd.PixelFormat",
toString:m},SRGB_ALPHA:{_hx_index:15,__enum__:"hxd.PixelFormat",toString:m},RGB10A2:{_hx_index:16,__enum__:"hxd.PixelFormat",toString:m},RG11B10UF:{_hx_index:17,__enum__:"hxd.PixelFormat",toString:m},S3TC:(s=function(a){return{_hx_index:18,v:a,__enum__:"hxd.PixelFormat",toString:m}},s.__params__=["v"],s)};ya.__empty_constructs__=[ya.ARGB,ya.BGRA,ya.RGBA,ya.RGBA16F,ya.RGBA32F,ya.R8,ya.R16F,ya.R32F,ya.RG8,ya.RG16F,ya.RG32F,ya.RGB8,ya.RGB16F,ya.RGB32F,ya.SRGB,ya.SRGB_ALPHA,ya.RGB10A2,ya.RG11B10UF];var V=
function(a,b,c,d,e){this.mem=na.CURRENT.mem;null==d&&(d=V.nativeFormat);this.id=++V.UID;this.format=d;this.flags=0;if(null!=c)for(d=0;d<c.length;)e=c[d],++d,this.flags|=1<<e._hx_index;for(d=c=1;c<a;)c<<=1;for(;d<b;)d<<=1;if(c!=a||d!=b)this.flags|=1<<T.IsNPOT._hx_index;0!=(this.flags&1<<T.Target._hx_index)&&(this.realloc=function(){});this.width=a;this.height=b;this.set_mipMap(0!=(this.flags&1<<T.MipMapped._hx_index)?Lh.Nearest:Lh.None);this.set_filter(le.Linear);this.set_wrap(xg.Clamp);this.bits&=
32767;0==(this.flags&1<<T.NoAlloc._hx_index)&&this.alloc()};p["h3d.mat.Texture"]=V;V.__name__="h3d.mat.Texture";V.fromBitmap=function(a,b){var c=new V(a.ctx.canvas.width,a.ctx.canvas.height,null,null,b);c.uploadBitmap(a);return c};V.fromPixels=function(a,b){var c=new V(a.width,a.height,null,null,b);c.uploadPixels(a);return c};V.fromColor=function(a,b,c){null==b&&(b=1);var d=na.CURRENT,e=255*b|0;0>e?e=0:255<e&&(e=255);var e=a&16777215|e<<24,f=d.textureColorCache.h[e];if(null!=f)return f;var g=new V(1,
1,null,null,c);g.clear(a,b);g.realloc=function(){g.clear(a,b)};return d.textureColorCache.h[e]=g};V.defaultCubeTexture=function(){var a=na.CURRENT,b=a.resCache.h[V.__id__];if(null!=b)return b;b=new V(1,1,[T.Cube]);b.clear(2105376);b.realloc=function(){b.clear(2105376)};a.resCache.set(V,b);return b};V.genChecker=function(a){var b=na.CURRENT,c=V.checkerTextureKeys.h[a],d=null==c?null:b.resCache.h[c.__id__];if(null!=d&&!(null==d.t&&null==d.realloc))return d;null==c&&(c={},V.checkerTextureKeys.h[a]=c);
var e=new V(a,a,[T.NoAlloc]);e.realloc=function(){V.allocChecker(e,a)};b.resCache.set(c,e);return e};V.genNoise=function(a){var b=na.CURRENT,c=V.noiseTextureKeys.h[a],d=null==c?null:b.resCache.h[c.__id__];if(null!=d&&!(null==d.t&&null==d.realloc))return d;null==c&&(c={},V.noiseTextureKeys.h[a]=c);var e=new V(a,a,[T.NoAlloc]);e.realloc=function(){V.allocNoise(e,a)};b.resCache.set(c,e);return e};V.allocNoise=function(a,b){for(var c=new Qc(b,b),d=0;d<b;)for(var e=d++,f=0,g=b;f<g;){var h=f++,k=r.random(256);
c.setPixel(e,h,-16777216|k|k<<8|k<<16)}a.uploadBitmap(c);c.ctx=null;c.pixel=null};V.allocChecker=function(a,b){var c=new Qc(b,b);c.clear(-1);for(var d=0,e=b>>1;d<e;)for(var f=d++,g=0,h=b>>1;g<h;){var k=g++;c.setPixel(f,k,-16777216);c.setPixel(f+(b>>1),k+(b>>1),-16777216)}a.uploadBitmap(c);c.ctx=null;c.pixel=null};V.prototype={get_layerCount:function(){return 0!=(this.flags&1<<T.Cube._hx_index)?6:1},alloc:function(){null==this.t&&this.mem.allocTexture(this)},isSRGB:function(){switch(this.format._hx_index){case 14:case 15:return!0;
default:return!1}},checkAlloc:function(){null==this.t&&null!=this.realloc&&(this.alloc(),this.realloc())},clone:function(a){this.checkAlloc();if(null==this.t)throw new n("Can't clone disposed texture");var b=this.lastFrame;this.preventAutoDispose();var c=[],d=T.Target;0!=(this.flags&1<<d._hx_index)&&c.push(d);d=T.Cube;0!=(this.flags&1<<d._hx_index)&&c.push(d);d=T.MipMapped;0!=(this.flags&1<<d._hx_index)&&c.push(d);d=T.IsArray;0!=(this.flags&1<<d._hx_index)&&c.push(d);a=new V(this.width,this.height,
c,this.format,a);a.name=this.name;0!=(this.flags&1<<T.Cube._hx_index)?md.run(this,a):fc.run(this,a);this.lastFrame=b;return a},preventAutoDispose:function(){this.lastFrame=2147483647},waitLoad:function(a){0==(this.flags&1<<T.Loading._hx_index)?a():(null==this.waitLoads&&(this.waitLoads=[]),this.waitLoads.push(a))},toString:function(){var a=this.name;null==this.name&&(a="Texture_"+this.id);return a+"("+this.width+"x"+this.height+")"},setName:function(a){this.name=a},set_mipMap:function(a){this.bits=
this.bits&-4|a._hx_index;return this.mipMap=a},set_filter:function(a){this.bits=this.bits&-25|a._hx_index<<3;return this.filter=a},set_wrap:function(a){this.bits=this.bits&-193|a._hx_index<<6;return this.wrap=a},isDisposed:function(){return null==this.t?null==this.realloc:!1},resize:function(a,b){this.dispose();for(var c=1,d=1;c<a;)c<<=1;for(;d<b;)d<<=1;this.flags=c!=a||d!=b?this.flags|1<<T.IsNPOT._hx_index:this.flags&-1-(1<<T.IsNPOT._hx_index);this.width=a;this.height=b;0==(this.flags&1<<T.NoAlloc._hx_index)&&
this.alloc()},clear:function(a,b,c){null==c&&(c=-1);null==b&&(b=1);this.alloc();var d=na.CURRENT;a|=(255*(0>b?0:1<b?1:b)|0)<<24;if(0>c){b=0;for(c=this.get_layerCount();b<c;){var e=b++;d.pushTarget(this,e);d.clear(a);d.popTarget()}}else d.pushTarget(this,c),d.clear(a),d.popTarget()},checkSize:function(a,b,c){if(a!=this.width>>c||b!=this.height>>c)throw new n("Invalid upload size : "+a+"x"+b+" should be "+(this.width>>c)+"x"+(this.height>>c));},checkMipMapGen:function(a,b){0==a&&(0!=(this.flags&1<<
T.MipMapped._hx_index)&&0==(this.flags&1<<T.ManualMipMapGen._hx_index)&&(0==(this.flags&1<<T.Cube._hx_index)||5==b))&&this.mem.driver.generateMipMaps(this)},uploadBitmap:function(a,b,c){null==c&&(c=0);null==b&&(b=0);this.alloc();var d=a.ctx.canvas.width,e=a.ctx.canvas.height;if(d!=this.width>>b||e!=this.height>>b)throw new n("Invalid upload size : "+d+"x"+e+" should be "+(this.width>>b)+"x"+(this.height>>b));this.mem.driver.uploadTextureBitmap(this,a,b,c);this.flags|=1<<T.WasCleared._hx_index;this.checkMipMapGen(b,
c)},uploadPixels:function(a,b,c){null==c&&(c=0);null==b&&(b=0);this.alloc();var d=a.width,e=a.height;if(d!=this.width>>b||e!=this.height>>b)throw new n("Invalid upload size : "+d+"x"+e+" should be "+(this.width>>b)+"x"+(this.height>>b));this.mem.driver.uploadTexturePixels(this,a,b,c);this.flags|=1<<T.WasCleared._hx_index;this.checkMipMapGen(b,c)},dispose:function(){null!=this.t&&this.mem.deleteTexture(this)},swapTexture:function(a){this.checkAlloc();a.checkAlloc();if(null==this.t&&null==this.realloc||
null==a.t&&null==a.realloc)throw new n("One of the two texture is disposed");var b=this.t;this.t=a.t;a.t=b},capturePixels:function(a,b,c){null==b&&(b=0);null==a&&(a=0);var d=this.lastFrame;this.preventAutoDispose();a=this.mem.driver.capturePixels(this,a,b,c);this.lastFrame=d;return a},__class__:V};var Oh=function(a,b,c,d,e,f){this.layers=c;null==d&&(d=[]);d.push(T.IsArray);V.call(this,a,b,d,e,f)};p["h3d.mat.TextureArray"]=Oh;Oh.__name__="h3d.mat.TextureArray";Oh.__super__=V;Oh.prototype=J(V.prototype,
{get_layerCount:function(){return this.layers},clone:function(a){var b=this.lastFrame;this.preventAutoDispose();a=new Oh(this.width,this.height,this.layers,null,this.format,a);fc.run(this,a);this.lastFrame=b;return a},toString:function(){return V.prototype.toString.call(this)+"["+this.layers+"]"},__class__:Oh});var Ph=function(a){this.name=a};p["h3d.pass.Base"]=Ph;Ph.__name__="h3d.pass.Base";Ph.prototype={compileShader:function(a){throw new n("Not implemented for this pass");},setContext:function(a){this.ctx=
a},dispose:function(){},draw:function(a){},__class__:Ph};var Jb=function(a,b){this.shader=a;this.shaders=new Wb(a);this.manager=new zc(b);this.pass=new P(r.string(this),new Wb(a));this.pass.set_culling(Od.None);this.pass.depth(!1,Xb.Always)};p["h3d.pass.ScreenFx"]=Jb;Jb.__name__="h3d.pass.ScreenFx";Jb.prototype={get_engine:function(){null==this._engine&&(this._engine=na.CURRENT);return this._engine},copy:function(a,b){fc.run(a,b)},setGlobals:function(a){var b=0;for(a=a.sharedGlobals;b<a.length;){var c=
a[b];++b;this.manager.globals.map.h[c.gid]=c.value}},addShader:function(a){this.shaders=Wb.addSort(a,this.shaders);return this.pass.addShader(a)},removeShader:function(a){for(var b=null,c=this.shaders;null!=c;){if(c.s==a)return null==b?this.shaders=c.next:b.next=c.next,!0;b=c;c=c.next}return!1},getShader:function(a){for(var b=this.shaders;null!=b;){var c=b.s,b=b.next,c=c instanceof a?c:null;if(null!=c)return c}return null},render:function(){null==this.primitive&&(this.primitive=nd.get());this.shader.flipY__=
this.get_engine().driver.hasFeature(Gb.BottomLeftCoords)&&null!=this.get_engine().getCurrentTarget()?-1:1;var a=this.manager.compileShaders(this.shaders);this.get_engine().selectMaterial(this.pass);this.get_engine().selectShader(a);if(null==this.buffers)this.buffers=new wg(a);else{var b=this.buffers;b.vertex.grow(a.vertex);b.fragment.grow(a.fragment)}this.manager.fillGlobals(this.buffers,a);this.manager.fillParams(this.buffers,a,this.shaders);this.get_engine().uploadShaderBuffers(this.buffers,0);
this.get_engine().uploadShaderBuffers(this.buffers,1);this.get_engine().uploadShaderBuffers(this.buffers,2);this.primitive.render(this.get_engine())},dispose:function(){},__class__:Jb};var Hg=function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=1);null==a&&(a=1);this.cubeDir=[R.L([0,0,-1,0,0,-1,0,0,1,0,0,0]),R.L([0,0,1,0,0,-1,0,0,-1,0,0,0]),R.L([1,0,0,0,0,0,1,0,0,1,0,0]),R.L([1,0,0,0,0,0,-1,0,0,-1,0,0]),R.L([1,0,0,0,0,-1,0,0,0,1,0,0]),R.L([-1,0,0,0,0,-1,0,0,0,0,-1,0])];Jb.call(this,new Ef);
this.set_radius(a);this.set_quality(d);this.set_gain(b);this.set_linear(c)};p["h3d.pass.Blur"]=Hg;Hg.__name__="h3d.pass.Blur";Hg.__super__=Jb;Hg.prototype=J(Jb.prototype,{set_radius:function(a){if(this.radius==a)return a;this.values=null;return this.radius=a},set_quality:function(a){if(this.quality==a)return a;this.values=null;return this.quality=a},set_gain:function(a){if(this.gain==a)return a;this.values=null;return this.gain=a},set_linear:function(a){if(this.linear==a)return a;this.values=null;
return this.linear=a},gauss:function(a,b){if(0>=b)return 0==a?1:0;var c=b*b;return Math.pow(2.718281828459,-(a*a)/(2*c))/Math.sqrt(2*Math.PI*c)},calcValues:function(){this.values=[];this.offsets=[];var a=0,b=this.quality,b=0.7*(0>b?0:1<b?1:b)+0.3,c;if(0<this.radius){var d=this.radius-1;c=Math.ceil((1>d?1:d)*b/2)}else c=0;var d=Math.sqrt(this.radius),e=0;for(c+=1;e<c;){var f=e++,g=2*f,h=0==f?0:2*f-1,k=this.gauss(g,d),l=this.gauss(h,d),n=k+l;this.values[f]=n;this.offsets[f]=0==f?0:(k*g+l*h)/(n*f*Math.sqrt(b));
a+=n;0<f&&(a+=n)}for(d=this.values[0]*(0.01/b);2<this.values.length;){e=this.values[this.values.length-1];if(e>d)break;a-=2*e;this.values.pop()}a/=this.gain;d=0;for(e=this.values.length;d<e;)c=d++,this.values[c]/=a;if(0<this.linear){a=this.gain/(2*this.values.length-1);d=0;for(e=this.values.length;d<e;)c=d++,f=this.values[c],this.values[c]=f+this.linear*(a-f),f=this.offsets[c],this.offsets[c]=f+this.linear*((0==c?0:(2*c-0.5)/(c*b))-f)}},getKernelSize:function(){null==this.values&&this.calcValues();
return 0>=this.radius?0:2*this.values.length-1},apply:function(a,b,c){if(0>=this.radius&&null==this.shader.fixedColor__)null!=c&&fc.run(b,c);else{null==c&&(c=b);null==this.values&&this.calcValues();var d=0!=(b.flags&1<<T.Cube._hx_index),e=d?6:1;a=a.textures.allocTarget(b.name+"BlurTmp",b.width,b.height,!1,b.format,d);var f=this.shader;f.constModified=!0;f.Quality__=this.values.length;this.shader.values__=this.values;this.shader.offsets__=this.offsets;d?(this.shader.cubeTexture__=b,f=this.shader,f.constModified=
!0,f.isCube__=!0):(this.shader.texture__=b,f=this.shader,f.constModified=!0,f.isCube__=!1);f=this.shader.pixel__;f.x=1/b.width;f.y=0;f.z=0;f.w=1;for(f=0;f<e;){var g=f++;this.get_engine().pushTarget(a,g);d&&(this.shader.cubeDir__=this.cubeDir[g]);this.render();this.get_engine().popTarget()}d?this.shader.cubeTexture__=a:this.shader.texture__=a;a=this.shader.pixel__;a.x=0;a.y=1/b.height;a.z=0;a.w=1;b=c.depthBuffer;c.depthBuffer=null;for(a=0;a<e;)f=a++,this.get_engine().pushTarget(c,f),d&&(this.shader.cubeDir__=
this.cubeDir[f]),this.render(),this.get_engine().popTarget();c.depthBuffer=b}},__class__:Hg});var Q=function(){this.priority=0;this.initialize()};p["hxsl.Shader"]=Q;Q.__name__="hxsl.Shader";Q.prototype={initialize:function(){this.constModified=!0;if(null==this.shader){var a=Ba.getClass(this);this.shader=a._SHADER;if(null==this.shader){for(var b=a;null!=b&&null==b.SRC;)b=b.__super__;if(null==b)throw new n(a.__name__+" has no shader source");this.shader=b._SHADER;null==this.shader&&(this.shader=new Xc(b.SRC),
b._SHADER=this.shader)}}},setPriority:function(a){this.priority=a},getParamValue:function(a){throw new n("assert");},getParamFloatValue:function(a){throw new n("assert");},updateConstants:function(a){throw new n("assert");},updateConstantsFinal:function(a){for(var b=this.shader.consts;null!=b;){if(0!=b.globalId){var c=a.map.h[b.globalId],d=b.v.type;switch(d._hx_index){case 1:d=c;if(0!=d>>>b.bits)throw new n("Constant "+b.v.name+" is outside range ("+d+" > "+((1<<b.bits)-1)+")");this.constBits|=d<<
b.pos;break;case 2:c&&(this.constBits|=1<<b.pos);break;case 17:d=d.size;if(null==c){b=b.next;continue}var e=c.channel;if(null==c.texture)e=jb.Unknown;else if(null==e||e==jb.Unknown)switch(d){case 1:if(c.texture.format==V.nativeFormat)e=jb.PackedFloat;else throw new n("Constant "+b.v.name+" does not define channel select value");break;case 3:if(c.texture.format==V.nativeFormat)e=jb.PackedNormal;else throw new n("Constant "+b.v.name+" does not define channel select value");break;default:throw new n("Constant "+
b.v.name+" does not define channel select value");}this.constBits|=(a.allocChannelID(c.texture)<<3|e._hx_index)<<b.pos;break;default:throw new n("assert");}}b=b.next}a=this.shader;b=this.constBits;d=a.instanceCache.h[b];this.instance=null==d?a.makeInstance(b):d},clone:function(){return this},toString:function(){return Ba.getClass(this).__name__},__class__:Q};var bb=function(){this.flipY__=0;Q.call(this)};p["h3d.shader.ScreenShader"]=bb;bb.__name__="h3d.shader.ScreenShader";bb.__super__=Q;bb.prototype=
J(Q.prototype,{get_flipY:function(){return this.flipY__},set_flipY:function(a){return this.flipY__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){return 0==a?this.flipY__:null},getParamFloatValue:function(a){return 0==a?this.flipY__:0},clone:function(){var a=Object.create(bb.prototype);a.shader=this.shader;a.flipY__=this.flipY__;return a},__class__:bb});var Ff=function(){this.color__=new U;bb.call(this)};p["h3d.pass._Border.BorderShader"]=Ff;
Ff.__name__="h3d.pass._Border.BorderShader";Ff.__super__=bb;Ff.prototype=J(bb.prototype,{get_color:function(){return this.color__},set_color:function(a){return this.color__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.flipY__;case 1:return this.color__}return null},getParamFloatValue:function(a){return 0==a?this.flipY__:0},clone:function(){var a=Object.create(Ff.prototype);a.shader=this.shader;a.flipY__=this.flipY__;
a.color__=this.color__;return a},__class__:Ff});var Ig=function(a,b,c){null==c&&(c=1);Jb.call(this,new Ff);var d=db._new(0);if(d.pos==d.array.length){var e=d.array.length<<1;128>e&&(e=128);e=new Float32Array(e);e.set(d.array);d.array=e}d.array[d.pos++]=2*(0/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(0/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=
e);d.array[d.pos++]=2*(a/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(0/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(0/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(c/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),
e.set(d.array),d.array=e);d.array[d.pos++]=2*(a/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(c/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(0/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(0/b);d.pos==d.array.length&&(e=d.array.length<<1,128>
e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(c/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(0/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(0/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(b/b);d.pos==d.array.length&&
(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(c/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(b/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(0/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=
1-2*((b-c)/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(a/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*((b-c)/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(0/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),
e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(b/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(a/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(b/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*((a-c)/a)-1;d.pos==d.array.length&&(e=d.array.length<<
1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(0/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*(a/a)-1;d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=1-2*(0/b);d.pos==d.array.length&&(e=d.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(d.array),d.array=e);d.array[d.pos++]=2*((a-c)/a)-1;d.pos==
d.array.length&&(c=d.array.length<<1,128>c&&(c=128),c=new Float32Array(c),c.set(d.array),d.array=c);d.array[d.pos++]=1-2*(b/b);d.pos==d.array.length&&(c=d.array.length<<1,128>c&&(c=128),c=new Float32Array(c),c.set(d.array),d.array=c);d.array[d.pos++]=2*(a/a)-1;d.pos==d.array.length&&(a=d.array.length<<1,128>a&&(a=128),a=new Float32Array(a),a.set(d.array),d.array=a);d.array[d.pos++]=1-2*(b/b);this.primitive=new Qh({vbuf:d,stride:2,quads:!0},!0);b=this.shader.color__;b.x=1;b.y=1;b.z=1;b.w=1};p["h3d.pass.Border"]=
Ig;Ig.__name__="h3d.pass.Border";Ig.__super__=Jb;Ig.prototype=J(Jb.prototype,{dispose:function(){Jb.prototype.dispose.call(this);this.primitive.dispose()},__class__:Ig});var Gf=function(){bb.call(this)};p["h3d.pass._Copy.CopyShader"]=Gf;Gf.__name__="h3d.pass._Copy.CopyShader";Gf.__super__=bb;Gf.prototype=J(bb.prototype,{get_texture:function(){return this.texture__},set_texture:function(a){return this.texture__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.flipY__;
case 1:return this.texture__}return null},getParamFloatValue:function(a){return 0==a?this.flipY__:0},clone:function(){var a=Object.create(Gf.prototype);a.shader=this.shader;a.flipY__=this.flipY__;a.texture__=this.texture__;return a},__class__:Gf});var fc=function(){Jb.call(this,new Gf)};p["h3d.pass.Copy"]=fc;fc.__name__="h3d.pass.Copy";fc.run=function(a,b,c,d){var e=na.CURRENT;if(!(null!=b&&null!=a&&(null==c||c==Ra.None)&&null==d&&e.driver.copyTexture(a,b))){var f=e.resCache.h[fc.__id__];null==f&&
(f=new fc,e.resCache.set(fc,f));f.apply(a,b,c,d)}};fc.__super__=Jb;fc.prototype=J(Jb.prototype,{apply:function(a,b,c,d,e){null!=b&&this.get_engine().pushTarget(b,null!=e?e:0);this.shader.texture__=a;if(null!=d){a=this.pass;this.pass=d;null!=c&&this.pass.setBlendMode(c);for(c=this.shaders;null!=c.next;)c=c.next;c.next=this.pass.shaders;this.render();this.pass=a;c.next=null}else this.pass.setBlendMode(null==c?Ra.None:c),this.render();this.shader.texture__=null;null!=b&&this.get_engine().popTarget()},
__class__:fc});var Hf=function(){this.mat__=new R;bb.call(this)};p["h3d.pass._CubeCopy.CubeCopyShader"]=Hf;Hf.__name__="h3d.pass._CubeCopy.CubeCopyShader";Hf.__super__=bb;Hf.prototype=J(bb.prototype,{get_texture:function(){return this.texture__},set_texture:function(a){return this.texture__=a},get_mat:function(){return this.mat__},set_mat:function(a){return this.mat__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.flipY__;
case 1:return this.texture__;case 2:return this.mat__}return null},getParamFloatValue:function(a){return 0==a?this.flipY__:0},clone:function(){var a=Object.create(Hf.prototype);a.shader=this.shader;a.flipY__=this.flipY__;a.texture__=this.texture__;a.mat__=this.mat__;return a},__class__:Hf});var md=function(){this.cubeDir=[R.L([0,0,-1,0,0,-1,0,0,1,0,0,0]),R.L([0,0,1,0,0,-1,0,0,-1,0,0,0]),R.L([1,0,0,0,0,0,1,0,0,1,0,0]),R.L([1,0,0,0,0,0,-1,0,0,-1,0,0]),R.L([1,0,0,0,0,-1,0,0,0,1,0,0]),R.L([-1,0,0,0,0,
-1,0,0,0,0,-1,0])];Jb.call(this,new Hf)};p["h3d.pass.CubeCopy"]=md;md.__name__="h3d.pass.CubeCopy";md.run=function(a,b,c,d){var e=na.CURRENT;if(!(null!=b&&null!=a&&(null==c||c==Ra.None)&&null==d&&e.driver.copyTexture(a,b))){var f=e.resCache.h[md.__id__];null==f&&(f=new md,e.resCache.set(md,f));f.apply(a,b,c,d)}};md.__super__=Jb;md.prototype=J(Jb.prototype,{apply:function(a,b,c,d){this.shader.texture__=a;for(a=0;6>a;){var e=a++;null!=b&&this.get_engine().pushTarget(b,e);this.shader.mat__=this.cubeDir[e];
if(null!=d){e=this.pass;this.pass=d;null!=c&&this.pass.setBlendMode(c);for(var f=this.shaders;null!=f.next;)f=f.next;f.next=this.pass.shaders;this.render();this.pass=e;f.next=null}else this.pass.setBlendMode(null==c?Ra.None:c),this.render();null!=b&&this.get_engine().popTarget()}this.shader.texture__=null},__class__:md});var Xa=function(a){this.sortPasses=!0;this.shaderCount=this.textureCount=1;this.name=a;this.manager=new zc(this.getOutputs());this.shaderIdMap=[];this.textureIdMap=[];this.initGlobals()};
p["h3d.pass.Default"]=Xa;Xa.__name__="h3d.pass.Default";Xa.__super__=Ph;Xa.prototype=J(Ph.prototype,{get_globals:function(){return this.manager.globals},getOutputs:function(){return[Bc.Value("output.color")]},compileShader:function(a){var b=new Rh;b.pass=a;this.setupShaders(new If(b));return this.manager.compileShaders(b.shaders,a.batchMode)},processShaders:function(a,b){for(var c=this.ctx.extraShaders;null!=c;)b=this.ctx.allocShaderList(c.s,b),c=c.next;return b},setupShaders:function(a){var b=!1;
for(a=a.current;null!=a;){var c=a;a=a.next;var d=c.pass.getShadersRec(),d=this.processShaders(c,d);c.pass.enableLights&&null!=this.ctx.lightSystem&&(b||(this.ctx.lightSystem.initGlobals(this.manager.globals),b=!0),d=this.ctx.lightSystem.computeLight(c.obj,d));c.shader=this.manager.compileShaders(d,c.pass.batchMode);c.shaders=d;var e=c.shader.fragment.textures;if(null==e)c.texture=0;else{var f=this.manager;if(null!=e.perObjectGlobal){var g=f.globals.map.h[e.perObjectGlobal.gid];if(null==g)throw new n("Missing global value "+
e.perObjectGlobal.path+" for shader "+f.shaderInfo(d,e.perObjectGlobal.path));e=17==e.type._hx_index?g.texture:g}else{for(f=e.instance;0<--f;)d=d.next;e=d.s.getParamValue(e.index)}c.texture=null==e?0:e.id}}},log:function(a){},drawObject:function(a){this.ctx.drawPass=a;this.ctx.engine.selectMaterial(a.pass);a.obj.draw(this.ctx)},draw:function(a){if(null!=a.current){for(var b=0,c=this.ctx.sharedGlobals;b<c.length;){var d=c[b];++b;this.manager.globals.map.h[d.gid]=d.value}this.setGlobals();this.setupShaders(a);
if(this.sortPasses){b=this.shaderCount;c=this.textureCount;for(d=a.current;null!=d;){var e=d,d=d.next;if(this.shaderIdMap[e.shader.id]<b||null==this.shaderIdMap[e.shader.id])this.shaderIdMap[e.shader.id]=this.shaderCount++;if(this.textureIdMap[e.texture]<c||null==this.textureIdMap[e.shader.id])this.textureIdMap[e.texture]=this.textureCount++}b=a.current;if(null==b)b=null;else for(var c=1,f=e=0,g,h,k,l;;){g=b;l=b=null;for(d=0;null!=g;){++d;h=g;f=e=0;for(k=c;f<k&&!(f++,++e,h=h.next,null==h););for(f=
c;0<e||0<f&&null!=h;)0==e?(k=h,h=h.next,--f):(0==f||null==h?k=!0:(k=this.shaderIdMap[g.shader.id]-this.shaderIdMap[h.shader.id],k=0>=(0!=k?k:this.textureIdMap[g.texture]-this.textureIdMap[h.texture])),k?(k=g,g=g.next,--e):(k=h,h=h.next,--f)),null!=l?l.next=k:b=k,l=k;g=h}l.next=null;if(1>=d)break;c*=2}a.current=b}this.ctx.currentManager=this.manager;b=this.ctx.shaderBuffers;c=null;for(a=a.current;null!=a;)d=a,a=a.next,this.manager.globals.map.h[this.globalModelView_id]=d.obj.absPos,d.shader.globals.h.hasOwnProperty(this.globalModelViewInverse_id)&&
(e=d.obj.getInvPos(),this.manager.globals.map.h[this.globalModelViewInverse_id]=e),c!=d.shader&&(c=d.shader,this.ctx.engine.selectShader(d.shader),null==b?b=this.ctx.shaderBuffers=new wg(d.shader):(e=d.shader,b.vertex.grow(e.vertex),b.fragment.grow(e.fragment)),this.manager.fillGlobals(b,d.shader),this.ctx.engine.uploadShaderBuffers(b,0)),d.pass.dynamicParameters||(this.manager.fillParams(b,d.shader,d.shaders),this.ctx.engine.uploadShaderBuffers(b,1),this.ctx.engine.uploadShaderBuffers(b,2),this.ctx.engine.uploadShaderBuffers(b,
3)),this.drawObject(d);a=this.ctx;a.cachedPos=0;a.drawPass=null}},get_cameraView:function(){return this.manager.globals.map.h[this.cameraView_id]},set_cameraView:function(a){return this.manager.globals.map.h[this.cameraView_id]=a},get_cameraNear:function(){return this.manager.globals.map.h[this.cameraNear_id]},set_cameraNear:function(a){return this.manager.globals.map.h[this.cameraNear_id]=a},get_cameraFar:function(){return this.manager.globals.map.h[this.cameraFar_id]},set_cameraFar:function(a){return this.manager.globals.map.h[this.cameraFar_id]=
a},get_cameraProj:function(){return this.manager.globals.map.h[this.cameraProj_id]},set_cameraProj:function(a){return this.manager.globals.map.h[this.cameraProj_id]=a},get_cameraPos:function(){return this.manager.globals.map.h[this.cameraPos_id]},set_cameraPos:function(a){return this.manager.globals.map.h[this.cameraPos_id]=a},get_cameraProjDiag:function(){return this.manager.globals.map.h[this.cameraProjDiag_id]},set_cameraProjDiag:function(a){return this.manager.globals.map.h[this.cameraProjDiag_id]=
a},get_cameraProjFlip:function(){return this.manager.globals.map.h[this.cameraProjFlip_id]},set_cameraProjFlip:function(a){return this.manager.globals.map.h[this.cameraProjFlip_id]=a},get_cameraViewProj:function(){return this.manager.globals.map.h[this.cameraViewProj_id]},set_cameraViewProj:function(a){return this.manager.globals.map.h[this.cameraViewProj_id]=a},get_cameraInverseViewProj:function(){return this.manager.globals.map.h[this.cameraInverseViewProj_id]},set_cameraInverseViewProj:function(a){return this.manager.globals.map.h[this.cameraInverseViewProj_id]=
a},get_globalTime:function(){return this.manager.globals.map.h[this.globalTime_id]},set_globalTime:function(a){return this.manager.globals.map.h[this.globalTime_id]=a},get_pixelSize:function(){return this.manager.globals.map.h[this.pixelSize_id]},set_pixelSize:function(a){return this.manager.globals.map.h[this.pixelSize_id]=a},get_globalModelView:function(){return this.manager.globals.map.h[this.globalModelView_id]},set_globalModelView:function(a){return this.manager.globals.map.h[this.globalModelView_id]=
a},get_globalModelViewInverse:function(){return this.manager.globals.map.h[this.globalModelViewInverse_id]},set_globalModelViewInverse:function(a){return this.manager.globals.map.h[this.globalModelViewInverse_id]=a},initGlobals:function(){this.cameraView_id=Y.allocID("camera.view");this.cameraNear_id=Y.allocID("camera.zNear");this.cameraFar_id=Y.allocID("camera.zFar");this.cameraProj_id=Y.allocID("camera.proj");this.cameraPos_id=Y.allocID("camera.position");this.cameraProjDiag_id=Y.allocID("camera.projDiag");
this.cameraProjFlip_id=Y.allocID("camera.projFlip");this.cameraViewProj_id=Y.allocID("camera.viewProj");this.cameraInverseViewProj_id=Y.allocID("camera.inverseViewProj");this.globalTime_id=Y.allocID("global.time");this.pixelSize_id=Y.allocID("global.pixelSize");this.globalModelView_id=Y.allocID("global.modelView");this.globalModelViewInverse_id=Y.allocID("global.modelViewInverse")},setGlobals:function(){this.manager.globals.map.h[this.cameraView_id]=this.ctx.camera.mcam;this.manager.globals.map.h[this.cameraNear_id]=
this.ctx.camera.zNear;this.manager.globals.map.h[this.cameraFar_id]=this.ctx.camera.zFar;this.manager.globals.map.h[this.cameraProj_id]=this.ctx.camera.mproj;this.manager.globals.map.h[this.cameraPos_id]=this.ctx.camera.pos;var a=new U(this.ctx.camera.mproj._11,this.ctx.camera.mproj._22,this.ctx.camera.mproj._33,this.ctx.camera.mproj._44);this.manager.globals.map.h[this.cameraProjDiag_id]=a;a=this.ctx.engine.driver.hasFeature(Gb.BottomLeftCoords)&&null!=this.ctx.engine.getCurrentTarget()?-1:1;this.manager.globals.map.h[this.cameraProjFlip_id]=
a;this.manager.globals.map.h[this.cameraViewProj_id]=this.ctx.camera.m;a=this.ctx.camera.getInverseViewProj();this.manager.globals.map.h[this.cameraInverseViewProj_id]=a;this.manager.globals.map.h[this.globalTime_id]=this.ctx.time;a=new U(2/this.ctx.engine.width,2/this.ctx.engine.height);this.manager.globals.map.h[this.pixelSize_id]=a},__class__:Xa});var Kc=function(a){this.bias=0.01;this.power=30;this.size=1024;this.mode=lb.None;null==this.format&&(this.format=ya.R16F);na.CURRENT.driver.isSupportedFormat(this.format)||
(this.format=V.nativeFormat);Xa.call(this,"shadow");this.light=a;this.blur=new Hg(5);this.blur.set_quality(0.5);a=this.blur.shader;a.constModified=!0;a.isDepth__=this.format==V.nativeFormat};p["h3d.pass.Shadows"]=Kc;Kc.__name__="h3d.pass.Shadows";Kc.__super__=Xa;Kc.prototype=J(Xa.prototype,{set_mode:function(a){if(a!=lb.None)throw new n("Shadow mode "+r.string(a)+" not supported for "+r.string(this.light));return this.mode=a},set_size:function(a){a!=this.size&&null!=this.staticTexture&&(this.staticTexture.dispose(),
this.staticTexture=null);return this.size=a},dispose:function(){Xa.prototype.dispose.call(this);this.blur.dispose();null!=this.staticTexture&&this.staticTexture.dispose()},getShadowProj:function(){return this.lightCamera.m},getShadowTex:function(){return null},isUsingWorldDist:function(){return!1},getOutputs:function(){return this.isUsingWorldDist()?[Bc.Swiz(Bc.Value("output.worldDist",1),[aa.X,aa.X,aa.X,aa.X])]:this.format==V.nativeFormat?[Bc.PackFloat(Bc.Value("output.depth"))]:[Bc.Swiz(Bc.Value("output.depth",
1),[aa.X,aa.X,aa.X,aa.X])]},loadStaticData:function(a){return!1},saveStaticData:function(){return null},computeStatic:function(a){throw new n("Not implemented");},createDefaultShadowMap:function(){var a=V.fromColor(16777215);a.name="defaultShadowMap";return a},syncShader:function(a){},filterPasses:function(a){if(!this.ctx.computingStatic)switch(this.mode._hx_index){case 0:return!1;case 1:return null!=this.staticTexture?(a=this.staticTexture,a=null==a.t&&null==a.realloc):a=!0,a&&(this.staticTexture=
this.createDefaultShadowMap()),this.syncShader(this.staticTexture),!1;case 3:var b;null!=this.staticTexture?(b=this.staticTexture,b=null==b.t&&null==b.realloc):b=!0;b&&(this.staticTexture=this.createDefaultShadowMap())}switch(this.mode._hx_index){case 0:a.clear();break;case 1:if(this.ctx.computingStatic){for(var c=b=null,d=a.discarded,e=a.lastDisc,f=a.current;null!=f;)!0==f.pass.isStatic?null==b?b=c=f:c=c.next=f:null==d?d=e=f:e=e.next=f,f=f.next;null!=c&&(c.next=null);null!=e&&(e.next=null);a.current=
b;a.discarded=d;a.lastDisc=e}else a.clear();break;case 2:this.ctx.computingStatic&&a.clear();break;case 3:c=b=null;d=a.discarded;e=a.lastDisc;for(f=a.current;null!=f;)f.pass.isStatic==this.ctx.computingStatic?null==b?b=c=f:c=c.next=f:null==d?d=e=f:e=e.next=f,f=f.next;null!=c&&(c.next=null);null!=e&&(e.next=null);a.current=b;a.discarded=d;a.lastDisc=e}return!0},cullPasses:function(a,b){for(var c=null,d=!0,e=null,f=null,g=a.discarded,h=a.lastDisc,k=a.current;null!=k;){var l=k.obj.cullingCollider;null==
l?l=!0:(l!=c&&(c=l,d=b(l)),l=d);l?null==e?e=f=k:f=f.next=k:null==g?g=h=k:h=h.next=k;k=k.next}null!=f&&(f.next=null);null!=h&&(h.next=null);a.current=e;a.discarded=g;a.lastDisc=h},__class__:Kc});var Ue=function(a){this.mergePass=new Jb(new Jf);Kc.call(this,a);this.lightCamera=new zg;this.lightCamera.orthoBounds=new tb;this.shader=this.dshader=new Kf;this.border=new Ig(this.size,this.size);this.customDepth=na.CURRENT.driver.hasFeature(Gb.AllocDepthBuffer);this.customDepth||(this.depth=Je.getDefault())};
p["h3d.pass.DirShadowMap"]=Ue;Ue.__name__="h3d.pass.DirShadowMap";Ue.__super__=Kc;Ue.prototype=J(Kc.prototype,{set_mode:function(a){var b=this.dshader;b.constModified=!0;b.enable__=a!=lb.None;return this.mode=a},set_size:function(a){null!=this.border&&this.size!=a&&(this.border.dispose(),this.border=new Ig(a,a));return Kc.prototype.set_size.call(this,a)},dispose:function(){Kc.prototype.dispose.call(this);this.customDepth&&null!=this.depth&&this.depth.dispose()},getShadowTex:function(){return this.dshader.shadowMap__},
calcShadowBounds:function(a){var b=a.orthoBounds,c=new R;this.ctx.scene.iterVisibleMeshes(function(d){if(null!=d.primitive&&d.material.castShadows){var e=d.primitive.getBounds();if(!(e.xMin>e.xMax)){d=d.getAbsPos();c.multiply3x4(d,a.mcam);d=e.xMin;var f=e.yMin,g=e.zMin,h=d*c._12+f*c._22+g*c._32+c._42,k=d*c._13+f*c._23+g*c._33+c._43;d=d*c._11+f*c._21+g*c._31+c._41;f=h;g=k;d<b.xMin&&(b.xMin=d);d>b.xMax&&(b.xMax=d);f<b.yMin&&(b.yMin=f);f>b.yMax&&(b.yMax=f);g<b.zMin&&(b.zMin=g);g>b.zMax&&(b.zMax=g);d=
e.xMin;f=e.yMin;g=e.zMax;h=d*c._12+f*c._22+g*c._32+c._42;k=d*c._13+f*c._23+g*c._33+c._43;d=d*c._11+f*c._21+g*c._31+c._41;f=h;g=k;d<b.xMin&&(b.xMin=d);d>b.xMax&&(b.xMax=d);f<b.yMin&&(b.yMin=f);f>b.yMax&&(b.yMax=f);g<b.zMin&&(b.zMin=g);g>b.zMax&&(b.zMax=g);d=e.xMin;f=e.yMax;g=e.zMin;h=d*c._12+f*c._22+g*c._32+c._42;k=d*c._13+f*c._23+g*c._33+c._43;d=d*c._11+f*c._21+g*c._31+c._41;f=h;g=k;d<b.xMin&&(b.xMin=d);d>b.xMax&&(b.xMax=d);f<b.yMin&&(b.yMin=f);f>b.yMax&&(b.yMax=f);g<b.zMin&&(b.zMin=g);g>b.zMax&&
(b.zMax=g);d=e.xMin;f=e.yMax;g=e.zMax;h=d*c._12+f*c._22+g*c._32+c._42;k=d*c._13+f*c._23+g*c._33+c._43;d=d*c._11+f*c._21+g*c._31+c._41;f=h;g=k;d<b.xMin&&(b.xMin=d);d>b.xMax&&(b.xMax=d);f<b.yMin&&(b.yMin=f);f>b.yMax&&(b.yMax=f);g<b.zMin&&(b.zMin=g);g>b.zMax&&(b.zMax=g);d=e.xMax;f=e.yMin;g=e.zMin;h=d*c._12+f*c._22+g*c._32+c._42;k=d*c._13+f*c._23+g*c._33+c._43;d=d*c._11+f*c._21+g*c._31+c._41;f=h;g=k;d<b.xMin&&(b.xMin=d);d>b.xMax&&(b.xMax=d);f<b.yMin&&(b.yMin=f);f>b.yMax&&(b.yMax=f);g<b.zMin&&(b.zMin=
g);g>b.zMax&&(b.zMax=g);d=e.xMax;f=e.yMin;g=e.zMax;h=d*c._12+f*c._22+g*c._32+c._42;k=d*c._13+f*c._23+g*c._33+c._43;d=d*c._11+f*c._21+g*c._31+c._41;f=h;g=k;d<b.xMin&&(b.xMin=d);d>b.xMax&&(b.xMax=d);f<b.yMin&&(b.yMin=f);f>b.yMax&&(b.yMax=f);g<b.zMin&&(b.zMin=g);g>b.zMax&&(b.zMax=g);d=e.xMax;f=e.yMax;g=e.zMin;h=d*c._12+f*c._22+g*c._32+c._42;k=d*c._13+f*c._23+g*c._33+c._43;d=d*c._11+f*c._21+g*c._31+c._41;f=h;g=k;d<b.xMin&&(b.xMin=d);d>b.xMax&&(b.xMax=d);f<b.yMin&&(b.yMin=f);f>b.yMax&&(b.yMax=f);g<b.zMin&&
(b.zMin=g);g>b.zMax&&(b.zMax=g);d=e.xMax;f=e.yMax;e=e.zMax;g=d*c._12+f*c._22+e*c._32+c._42;h=d*c._13+f*c._23+e*c._33+c._43;d=d*c._11+f*c._21+e*c._31+c._41;f=g;e=h;d<b.xMin&&(b.xMin=d);d>b.xMax&&(b.xMax=d);f<b.yMin&&(b.yMin=f);f>b.yMax&&(b.yMax=f);e<b.zMin&&(b.zMin=e);e>b.zMax&&(b.zMax=e)}}});if(this.mode==lb.Dynamic){for(var d=new tb,e=0,f=this.ctx.camera.getFrustumCorners();e<f.length;){var g=f[e];++e;var h=a.mcam,k=g.x*h._12+g.y*h._22+g.z*h._32+g.w*h._42,l=g.x*h._13+g.y*h._23+g.z*h._33+g.w*h._43,
n=g.x*h._14+g.y*h._24+g.z*h._34+g.w*h._44;g.x=g.x*h._11+g.y*h._21+g.z*h._31+g.w*h._41;g.y=k;g.z=l;g.w=n;h=g.x;k=g.y;g=g.z;h<d.xMin&&(d.xMin=h);h>d.xMax&&(d.xMax=h);k<d.yMin&&(d.yMin=k);k>d.yMax&&(d.yMax=k);g<d.zMin&&(d.zMin=g);g>d.zMax&&(d.zMax=g)}d.zMin=b.zMin;b.intersection(b,d)}b.scaleCenter(1.01)},setGlobals:function(){Kc.prototype.setGlobals.call(this);if(this.mode!=lb.Mixed||this.ctx.computingStatic){var a=this.lightCamera.orthoBounds;a.xMin=1E20;a.xMax=-1E20;a.yMin=1E20;a.yMax=-1E20;a.zMin=
1E20;a.zMax=-1E20;this.calcShadowBounds(this.lightCamera);this.lightCamera.update()}a=this.getShadowProj();this.manager.globals.map.h[this.cameraViewProj_id]=a},syncShader:function(a){var b=this.dshader;b.constModified=!0;b.shadowMap__=a;a=this.dshader;a.constModified=!0;a.shadowMapChannel__=this.format==V.nativeFormat?jb.PackedFloat:jb.R;this.dshader.shadowBias__=this.bias;this.dshader.shadowPower__=this.power;this.dshader.shadowProj__=this.getShadowProj()},saveStaticData:function(){if(this.mode!=
lb.Mixed&&this.mode!=lb.Static)return null;if(null==this.staticTexture)throw new n("Data not computed");var a=kj.run(this.staticTexture.capturePixels().bytes,9),b=new je;b.addInt32(this.staticTexture.width);b.addFloat(this.lightCamera.pos.x);b.addFloat(this.lightCamera.pos.y);b.addFloat(this.lightCamera.pos.z);b.addFloat(this.lightCamera.target.x);b.addFloat(this.lightCamera.target.y);b.addFloat(this.lightCamera.target.z);b.addFloat(this.lightCamera.orthoBounds.xMin);b.addFloat(this.lightCamera.orthoBounds.yMin);
b.addFloat(this.lightCamera.orthoBounds.zMin);b.addFloat(this.lightCamera.orthoBounds.xMax);b.addFloat(this.lightCamera.orthoBounds.yMax);b.addFloat(this.lightCamera.orthoBounds.zMax);b.addInt32(a.length);b.add(a);return b.getBytes()},loadStaticData:function(a){if(this.mode!=lb.Mixed&&this.mode!=lb.Static||null==a)return!1;var b=new Ob(a);a=b.readInt32();if(a!=this.size)return!1;this.lightCamera.pos.x=b.readFloat();this.lightCamera.pos.y=b.readFloat();this.lightCamera.pos.z=b.readFloat();this.lightCamera.target.x=
b.readFloat();this.lightCamera.target.y=b.readFloat();this.lightCamera.target.z=b.readFloat();this.lightCamera.orthoBounds.xMin=b.readFloat();this.lightCamera.orthoBounds.yMin=b.readFloat();this.lightCamera.orthoBounds.zMin=b.readFloat();this.lightCamera.orthoBounds.xMax=b.readFloat();this.lightCamera.orthoBounds.yMax=b.readFloat();this.lightCamera.orthoBounds.zMax=b.readFloat();this.lightCamera.update();var c=b.readInt32(),b=new Za(a,a,lj.run(b.read(c)),this.format);null!=this.staticTexture&&this.staticTexture.dispose();
this.staticTexture=new V(a,a,[T.Target],this.format);this.staticTexture.uploadPixels(b);this.staticTexture.name="defaultDirShadowMap";this.syncShader(this.staticTexture);return!0},draw:function(a){if(this.filterPasses(a)){var b=this.ctx.textures.allocTarget("dirShadowMap",this.size,this.size,!1,this.format);if(this.customDepth&&(null==this.depth||this.depth.width!=this.size||this.depth.height!=this.size||this.depth.isDisposed()))null!=this.depth&&this.depth.dispose(),this.depth=new Je(this.size,this.size);
b.depthBuffer=this.depth;if(this.mode!=lb.Mixed||this.ctx.computingStatic){var c=this.ctx.camera.target,d=null==this.light?this.ctx.lightSystem.shadowLight:this.light,d=null==d?null:d.getShadowDirection();if(null==d)d=this.lightCamera.target,d.x=0,d.y=0,d.z=-1,d.w=1;else{var e=this.lightCamera.target;e.x=d.x;e.y=d.y;e.z=d.z;e.w=1;this.lightCamera.target.normalize()}this.lightCamera.target.x+=c.x;this.lightCamera.target.y+=c.y;this.lightCamera.target.z+=c.z;d=this.lightCamera.pos;d.x=c.x;d.y=c.y;d.z=
c.z;d.w=c.w;this.lightCamera.update()}this.ctx.engine.pushTarget(b);this.ctx.engine.clear(16777215,1);Kc.prototype.draw.call(this,a);null!=this.border&&this.border.render();this.ctx.engine.popTarget();this.mode==lb.Mixed&&!this.ctx.computingStatic&&(a=this.ctx.textures.allocTarget("mergedDirShadowMap",this.size,this.size,!1,this.format),this.mergePass.shader.texA__=b,this.mergePass.shader.texB__=this.staticTexture,this.ctx.engine.pushTarget(a),this.mergePass.render(),this.ctx.engine.popTarget(),b=
a);0<this.blur.radius&&(this.mode!=lb.Mixed||!this.ctx.computingStatic)&&this.blur.apply(this.ctx,b);this.syncShader(b)}},computeStatic:function(a){this.mode!=lb.Static&&this.mode!=lb.Mixed||(this.draw(a),a=this.dshader.shadowMap__,null!=this.staticTexture&&this.staticTexture.dispose(),this.staticTexture=a.clone(),a=this.dshader,a.constModified=!0,a.shadowMap__=this.staticTexture)},__class__:Ue});var Sh=function(a,b){null==a&&(a=1024);null!=b&&(this.format=b);Ue.call(this,null);this.set_size(a);this.color=
new U;this.set_mode(lb.Dynamic);this.shadowMapId=Y.allocID("shadow.map");this.shadowProjId=Y.allocID("shadow.proj");this.shadowColorId=Y.allocID("shadow.color");this.shadowPowerId=Y.allocID("shadow.power");this.shadowBiasId=Y.allocID("shadow.bias")};p["h3d.pass.DefaultShadowMap"]=Sh;Sh.__name__="h3d.pass.DefaultShadowMap";Sh.__super__=Ue;Sh.prototype=J(Ue.prototype,{draw:function(a){Ue.prototype.draw.call(this,a);this.ctx.setGlobalID(this.shadowMapId,{texture:this.dshader.shadowMap__,channel:this.format==
V.nativeFormat?jb.PackedFloat:jb.R});this.ctx.setGlobalID(this.shadowProjId,this.getShadowProj());this.ctx.setGlobalID(this.shadowColorId,this.color);this.ctx.setGlobalID(this.shadowPowerId,this.power);this.ctx.setGlobalID(this.shadowBiasId,this.bias)},__class__:Sh});var Lf=function(){this.viewport__=new U;this.colorID__=new U;Q.call(this)};p["h3d.pass._HardwarePick.FixedColor"]=Lf;Lf.__name__="h3d.pass._HardwarePick.FixedColor";Lf.__super__=Q;Lf.prototype=J(Q.prototype,{get_colorID:function(){return this.colorID__},
set_colorID:function(a){return this.colorID__=a},get_viewport:function(){return this.viewport__},set_viewport:function(a){return this.viewport__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.colorID__;case 1:return this.viewport__}return null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(Lf.prototype);a.shader=this.shader;a.colorID__=this.colorID__;a.viewport__=this.viewport__;return a},
__class__:Lf});var Th=function(){this.pickedIndex=-1;this.fixedColor=new Lf;Xa.call(this,"hwpick");var a=this.material=new P(""),b=S.One,c=S.Zero;a.set_blendSrc(b);a.set_blendAlphaSrc(b);a.set_blendDst(c);a.set_blendAlphaDst(c);this.texOut=new V(3,3,[T.Target]);this.texOut.depthBuffer=new Je(3,3)};p["h3d.pass.HardwarePick"]=Th;Th.__name__="h3d.pass.HardwarePick";Th.__super__=Xa;Th.prototype=J(Xa.prototype,{dispose:function(){Xa.prototype.dispose.call(this);this.texOut.dispose();this.texOut.depthBuffer.dispose()},
getOutputs:function(){return[Bc.Value("output.colorID")]},drawObject:function(a){Xa.prototype.drawObject.call(this,a);a=this.fixedColor.colorID__;var b=-16777216|++this.colorID;a.x=(b>>16&255)/255;a.y=(b>>8&255)/255;a.z=(b&255)/255;a.w=(b>>>24)/255},nextID:function(){var a=this.fixedColor.colorID__,b=-16777216|++this.colorID;a.x=(b>>16&255)/255;a.y=(b>>8&255)/255;a.z=(b&255)/255;a.w=(b>>>24)/255},draw:function(a){for(var b=a.current;null!=b;){var c=b,b=b.next;c.pass.bits&=-268435393;c.pass.bits|=
this.material.bits&268435392}this.colorID=0;b=this.fixedColor.colorID__;c=-16777216|++this.colorID;b.x=(c>>16&255)/255;b.y=(c>>8&255)/255;b.z=(c&255)/255;b.w=(c>>>24)/255;b=this.fixedColor.viewport__;b.x=-(2*this.pickX/this.ctx.engine.width-1);b.y=2*this.pickY/this.ctx.engine.height-1;b.z=this.ctx.engine.width/this.texOut.width;b.w=this.ctx.engine.height/this.texOut.height;this.ctx.engine.pushTarget(this.texOut);this.ctx.engine.clear(-16777216,1);this.ctx.extraShaders=this.ctx.allocShaderList(this.fixedColor);
Xa.prototype.draw.call(this,a);this.ctx.extraShaders=null;this.ctx.engine.popTarget();for(a=a.current;null!=a;)b=a,a=a.next,b.pass.set_blendSrc(b.pass.blendSrc),b.pass.set_blendDst(b.pass.blendDst),b.pass.set_blendOp(b.pass.blendOp),b.pass.set_blendAlphaSrc(b.pass.blendAlphaSrc),b.pass.set_blendAlphaDst(b.pass.blendAlphaDst),b.pass.set_blendAlphaOp(b.pass.blendAlphaOp),b.pass.colorMask=b.pass.colorMask;this.ctx.engine.clear(null,null,0);a=this.texOut.capturePixels();this.pickedIndex=(a.getPixel(a.width>>
1,a.height>>1)&16777215)-1},__class__:Th});var Uh=function(a){this.o=a};p["h3d.pass.PassListIterator"]=Uh;Uh.__name__="h3d.pass.PassListIterator";Uh.prototype={hasNext:function(){return null!=this.o},next:function(){var a=this.o;this.o=this.o.next;return a},__class__:Uh};var If=function(a){this.current=a;this.discarded=this.lastDisc=null};p["h3d.pass.PassList"]=If;If.__name__="h3d.pass.PassList";If.prototype={init:function(a){this.current=a;this.discarded=this.lastDisc=null},reset:function(){null!=
this.discarded&&(this.lastDisc.next=this.current,this.current=this.discarded,this.discarded=this.lastDisc=null)},save:function(){return this.lastDisc},load:function(a){this.lastDisc!=a&&(this.lastDisc.next=this.current,null==a?(this.current=this.discarded,this.discarded=null):(this.current=a.next,a.next=null),this.lastDisc=a)},isEmpty:function(){return null==this.current},clear:function(){if(null!=this.current){null==this.discarded?this.discarded=this.current:this.lastDisc.next=this.current;for(var a=
this.current;null!=a.next;)a=a.next;this.lastDisc=a;this.current=null}},sort:function(a){var b=this.current;if(null==b)a=null;else{for(var c=1,d,e=0,f=0,g,h,k,l;;){g=b;l=b=null;for(d=0;null!=g;){++d;h=g;f=e=0;for(k=c;f<k&&!(f++,++e,h=h.next,null==h););for(f=c;0<e||0<f&&null!=h;)0==e?(k=h,h=h.next,--f):0==f||null==h||0>=a(g,h)?(k=g,g=g.next,--e):(k=h,h=h.next,--f),null!=l?l.next=k:b=k,l=k;g=h}l.next=null;if(1>=d)break;c*=2}a=b}this.current=a},filter:function(a){for(var b=null,c=null,d=this.discarded,
e=this.lastDisc,f=this.current;null!=f;)a(f)?null==b?b=c=f:c=c.next=f:null==d?d=e=f:e=e.next=f,f=f.next;null!=c&&(c.next=null);null!=e&&(e.next=null);this.current=b;this.discarded=d;this.lastDisc=e},iterator:function(){return new Uh(this.current)},getFiltered:function(){return new Uh(this.discarded)},__class__:If};var Rh=function(){this.texture=0};p["h3d.pass.PassObject"]=Rh;Rh.__name__="h3d.pass.PassObject";Rh.prototype={__class__:Rh};var zc=function(a){this.shaderCache=Pd.get();this.globals=new Y;
this.currentOutput=new Wb(null);this.setOutput(a)};p["h3d.pass.ShaderManager"]=zc;zc.__name__="h3d.pass.ShaderManager";zc.prototype={setOutput:function(a){null==a&&(a=[Bc.Value("output.color")]);this.currentOutput.s=this.shaderCache.getLinkShader(a)},fillRec:function(a,b,c,d){switch(b._hx_index){case 1:return c[d]=a,1;case 3:return c[d]=a,1;case 5:var e=b.size;c[d++]=a.x;c[d++]=a.y;switch(e){case 3:c[d++]=a.z;break;case 4:c[d++]=a.z,c[d++]=a.w}return e;case 6:return c[d++]=a._11,c[d++]=a._21,c[d++]=
a._31,c[d++]=0,c[d++]=a._12,c[d++]=a._22,c[d++]=a._32,c[d++]=0,c[d++]=a._13,c[d++]=a._23,c[d++]=a._33,c[d++]=0,12;case 7:return c[d++]=a._11,c[d++]=a._21,c[d++]=a._31,c[d++]=a._41,c[d++]=a._12,c[d++]=a._22,c[d++]=a._32,c[d++]=a._42,c[d++]=a._13,c[d++]=a._23,c[d++]=a._33,c[d++]=a._43,c[d++]=a._14,c[d++]=a._24,c[d++]=a._34,c[d++]=a._44,16;case 8:return c[d++]=a._11,c[d++]=a._21,c[d++]=a._31,c[d++]=a._41,c[d++]=a._12,c[d++]=a._22,c[d++]=a._32,c[d++]=a._42,c[d++]=a._13,c[d++]=a._23,c[d++]=a._33,c[d++]=
a._43,12;case 13:for(var e=b.vl,f=b=0;f<e.length;){var g=e[f];++f;b+=this.fillRec(xa.field(a,g.name),g.type,c,d+b)}return b;case 15:switch(b.t._hx_index){case 3:if(0==b.size._hx_index){e=b.size.v;b=0;for(f=a.length<e?a.length:e;b<f;)g=b++,c[d++]=a[g];return e}throw new n("assert "+r.string(b));case 5:if(4==b.t.size&&1==b.t.t._hx_index){if(0==b.size._hx_index){e=b.size.v;for(b=0;b<e;){f=b++;f=a[f];if(null==f)break;c[d++]=f.x;c[d++]=f.y;c[d++]=f.z;c[d++]=f.w}return 4*e}}else if(0==b.size._hx_index){e=
b.size.v;b=b.t;for(g=f=0;g<e;){var h=g++,h=a[h];if(null==h)break;f=this.fillRec(h,b,c,d);d+=f}return e*f}throw new n("assert "+r.string(b));case 8:if(0==b.size._hx_index){e=b.size.v;for(b=0;b<e;){f=b++;f=a[f];if(null==f)break;c[d++]=f._11;c[d++]=f._21;c[d++]=f._31;c[d++]=f._41;c[d++]=f._12;c[d++]=f._22;c[d++]=f._32;c[d++]=f._42;c[d++]=f._13;c[d++]=f._23;c[d++]=f._33;c[d++]=f._43}return 12*e}throw new n("assert "+r.string(b));default:if(0==b.size._hx_index){e=b.size.v;b=b.t;for(g=f=0;g<e;){h=g++;h=
a[h];if(null==h)break;f=this.fillRec(h,b,c,d);d+=f}return e*f}throw new n("assert "+r.string(b));}default:throw new n("assert "+r.string(b));}},shaderInfo:function(a,b){for(var c=b.split(".").pop();null!=a;){for(var d=0,e=a.s.instance.shader.vars;d<e.length;){var f=e[d];++d;if(f.name==c)return a.s.toString()}a=a.next}return"(not found)"},getPtr:function(a){return a},getParamValue:function(a,b,c){null==c&&(c=!1);if(null!=a.perObjectGlobal){c=this.globals.map.h[a.perObjectGlobal.gid];if(null==c)throw new n("Missing global value "+
a.perObjectGlobal.path+" for shader "+this.shaderInfo(b,a.perObjectGlobal.path));return 17==a.type._hx_index?c.texture:c}for(var d=a.instance;0<--d;)b=b.next;d=b.s.getParamValue(a.index);if(null==d&&!c)throw new n("Missing param value "+r.string(b.s)+"."+a.name);return d},fillGlobals:function(a,b){for(var c=b.vertex,d=c.globals,e=a.vertex.globals;null!=d;){var f=this.globals.map.h[d.gid];if(null==f){if("__consts__"==d.path){this.fillRec(c.consts,d.type,e,d.pos);d=d.next;continue}throw new n("Missing global value "+
d.path);}this.fillRec(f,d.type,e,d.pos);d=d.next}c=b.fragment;d=c.globals;for(e=a.fragment.globals;null!=d;){f=this.globals.map.h[d.gid];if(null==f){if("__consts__"==d.path){this.fillRec(c.consts,d.type,e,d.pos);d=d.next;continue}throw new n("Missing global value "+d.path);}this.fillRec(f,d.type,e,d.pos);d=d.next}},fillParams:function(a,b,c){for(var d=-1,e=null,f=a.vertex,g=b.vertex,h=g.params,k=f.params;null!=h;){var l;if(null==h.perObjectGlobal){if(h.type==u.TFloat){l=h.instance;if(d!=l){e=c;for(d=
l;0<--l;)e=e.next;e=e.s}k[h.pos]=e.getParamFloatValue(h.index);h=h.next;continue}l=h.instance;if(d!=l){e=c;for(d=l;0<--l;)e=e.next;e=e.s}l=e.getParamValue(h.index);if(null==l)throw new n("Missing param value "+r.string(e)+"."+h.name);}else if(null!=h.perObjectGlobal){l=this.globals.map.h[h.perObjectGlobal.gid];if(null==l)throw new n("Missing global value "+h.perObjectGlobal.path+" for shader "+this.shaderInfo(c,h.perObjectGlobal.path));l=17==h.type._hx_index?l.texture:l}else{l=c;for(var m=h.instance;0<
--m;)l=l.next;m=l.s.getParamValue(h.index);if(null==m)throw new n("Missing param value "+r.string(l.s)+"."+h.name);l=m}this.fillRec(l,h.type,k,h.pos);h=h.next}h=0;for(k=g.textures;null!=k;){l=f.tex;var m=h++,t=!zc.STRICT;if(null!=k.perObjectGlobal){t=this.globals.map.h[k.perObjectGlobal.gid];if(null==t)throw new n("Missing global value "+k.perObjectGlobal.path+" for shader "+this.shaderInfo(c,k.perObjectGlobal.path));t=17==k.type._hx_index?t.texture:t}else{for(var x=c,p=k.instance;0<--p;)x=x.next;
p=x.s.getParamValue(k.index);if(null==p&&!t)throw new n("Missing param value "+r.string(x.s)+"."+k.name);t=p}l[m]=t;k=k.next}g=g.buffers;for(h=0;null!=g;){k=!zc.STRICT;if(null!=g.perObjectGlobal){k=this.globals.map.h[g.perObjectGlobal.gid];if(null==k)throw new n("Missing global value "+g.perObjectGlobal.path+" for shader "+this.shaderInfo(c,g.perObjectGlobal.path));k=17==g.type._hx_index?k.texture:k}else{l=c;for(m=g.instance;0<--m;)l=l.next;m=l.s.getParamValue(g.index);if(null==m&&!k)throw new n("Missing param value "+
r.string(l.s)+"."+g.name);k=m}f.buffers[h++]=k;g=g.next}a=a.fragment;b=b.fragment;f=b.params;for(g=a.params;null!=f;){if(null==f.perObjectGlobal){if(f.type==u.TFloat){h=f.instance;if(d!=h){e=c;for(d=h;0<--h;)e=e.next;e=e.s}g[f.pos]=e.getParamFloatValue(f.index);f=f.next;continue}h=f.instance;if(d!=h){e=c;for(d=h;0<--h;)e=e.next;e=e.s}h=e.getParamValue(f.index);if(null==h)throw new n("Missing param value "+r.string(e)+"."+f.name);}else if(null!=f.perObjectGlobal){h=this.globals.map.h[f.perObjectGlobal.gid];
if(null==h)throw new n("Missing global value "+f.perObjectGlobal.path+" for shader "+this.shaderInfo(c,f.perObjectGlobal.path));h=17==f.type._hx_index?h.texture:h}else{h=c;for(k=f.instance;0<--k;)h=h.next;k=h.s.getParamValue(f.index);if(null==k)throw new n("Missing param value "+r.string(h.s)+"."+f.name);h=k}this.fillRec(h,f.type,g,f.pos);f=f.next}d=0;for(e=b.textures;null!=e;){f=a.tex;g=d++;h=!zc.STRICT;if(null!=e.perObjectGlobal){h=this.globals.map.h[e.perObjectGlobal.gid];if(null==h)throw new n("Missing global value "+
e.perObjectGlobal.path+" for shader "+this.shaderInfo(c,e.perObjectGlobal.path));h=17==e.type._hx_index?h.texture:h}else{k=c;for(l=e.instance;0<--l;)k=k.next;l=k.s.getParamValue(e.index);if(null==l&&!h)throw new n("Missing param value "+r.string(k.s)+"."+e.name);h=l}f[g]=h;e=e.next}d=b.buffers;for(e=0;null!=d;){b=!zc.STRICT;if(null!=d.perObjectGlobal){b=this.globals.map.h[d.perObjectGlobal.gid];if(null==b)throw new n("Missing global value "+d.perObjectGlobal.path+" for shader "+this.shaderInfo(c,
d.perObjectGlobal.path));b=17==d.type._hx_index?b.texture:b}else{f=c;for(g=d.instance;0<--g;)f=f.next;g=f.s.getParamValue(d.index);if(null==g&&!b)throw new n("Missing param value "+r.string(f.s)+"."+d.name);b=g}a.buffers[e++]=b;d=d.next}},compileShaders:function(a,b){null==b&&(b=!1);this.globals.maxChannels=0;for(var c=a;null!=c;){var d=c.s,c=c.next;d.updateConstants(this.globals)}this.currentOutput.next=a;c=this.shaderCache.link(this.currentOutput,b);this.currentOutput.next=null;return c},__class__:zc};
var lb=M["h3d.pass.RenderMode"]={__ename__:!0,__constructs__:["None","Static","Dynamic","Mixed"],None:{_hx_index:0,__enum__:"h3d.pass.RenderMode",toString:m},Static:{_hx_index:1,__enum__:"h3d.pass.RenderMode",toString:m},Dynamic:{_hx_index:2,__enum__:"h3d.pass.RenderMode",toString:m},Mixed:{_hx_index:3,__enum__:"h3d.pass.RenderMode",toString:m}};lb.__empty_constructs__=[lb.None,lb.Static,lb.Dynamic,lb.Mixed];var Cc=function(a,b,c){null==b&&(b=!1);this.isStatic=!0;this.hasTangents=!1;this.bufPos=this.idxPos=
this.startIndex=0;this.isRaw=b;this.buffers=[];this.allIndexes=[];this.bounds=new tb;this.stride=a;if(3>a)throw new n("Minimum stride = 3");};p["h3d.prim.BigPrimitive"]=Cc;Cc.__name__="h3d.prim.BigPrimitive";Cc.__super__=Ac;Cc.prototype=J(Ac.prototype,{begin:function(a,b){this.startIndex=this.bufPos/this.stride|0;if(65535<=this.startIndex+a){if(65535<=a)throw new n("Too many vertices in begin()");this.flush()}if(null==this.tmpBuf&&(this.tmpBuf=Cc.PREV_BUFFER,null==this.tmpBuf?this.tmpBuf=db._new(0):
Cc.PREV_BUFFER=null,this.isStatic))for(var c=this.tmpBuf,d=c.pos,e=65535*this.stride;d<e;){d++;if(c.pos==c.array.length){var f=c.array.length<<1;128>f&&(f=128);f=new Float32Array(f);f.set(c.array);c.array=f}c.array[c.pos++]=0}if(!this.isStatic){c=this.tmpBuf;d=c.pos;for(e=a*this.stride+this.bufPos;d<e;)d++,c.pos==c.array.length&&(f=c.array.length<<1,128>f&&(f=128),f=new Float32Array(f),f.set(c.array),c.array=f),c.array[c.pos++]=0}null==this.tmpIdx&&(this.tmpIdx=Cc.PREV_INDEX,null==this.tmpIdx?this.tmpIdx=
[]:Cc.PREV_INDEX=null);if(this.idxPos+b>this.tmpIdx.length){c=0==this.tmpIdx.length?1024:this.tmpIdx.length;for(d=this.idxPos+b;c<d;)c<<=1;for(d=this.tmpIdx;d.length<c;)d.push(0)}},addPoint:function(a,b,c){this.tmpBuf.array[this.bufPos++]=a;this.tmpBuf.array[this.bufPos++]=b;this.tmpBuf.array[this.bufPos++]=c;var d=this.bounds;a<d.xMin&&(d.xMin=a);a>d.xMax&&(d.xMax=a);b<d.yMin&&(d.yMin=b);b>d.yMax&&(d.yMax=b);c<d.zMin&&(d.zMin=c);c>d.zMax&&(d.zMax=c)},addBounds:function(a,b,c){var d=this.bounds;a<
d.xMin&&(d.xMin=a);a>d.xMax&&(d.xMax=a);b<d.yMin&&(d.yMin=b);b>d.yMax&&(d.yMax=b);c<d.zMin&&(d.zMin=c);c>d.zMax&&(d.zMax=c)},addVertexValue:function(a){this.tmpBuf.array[this.bufPos++]=a},addIndex:function(a){this.tmpIdx[this.idxPos++]=a+this.startIndex},triCount:function(){for(var a=0,b=0,c=this.allIndexes;b<c.length;){var d=c[b];++b;a+=d.count}a+=this.idxPos;return a/3|0},vertexCount:function(){for(var a=0,b=0,c=this.buffers;b<c.length;){var d=c[b];++b;a+=d.vertices}return a+=this.bufPos/this.stride|
0},flush:function(){if(null!=this.tmpBuf){if(0<this.bufPos&&0<this.idxPos){this.flushing=!0;var a=cb.ofSubFloats(this.tmpBuf,this.stride,this.bufPos/this.stride|0);this.isRaw&&(a.flags|=1<<Aa.RawFormat._hx_index);this.buffers.push(a);this.allIndexes.push(Yd.alloc(this.tmpIdx,0,this.idxPos));this.flushing=!1}if(null==Cc.PREV_BUFFER||Cc.PREV_BUFFER.pos<this.tmpBuf.pos)Cc.PREV_BUFFER=this.tmpBuf;if(null==Cc.PREV_INDEX||Cc.PREV_INDEX.length<this.tmpIdx.length)Cc.PREV_INDEX=this.tmpIdx;this.tmpIdx=this.tmpBuf=
null;this.startIndex=this.idxPos=this.bufPos=0}},render:function(a){null!=this.tmpBuf&&this.flush();for(var b=0,c=this.buffers.length;b<c;){var d=b++;a.renderIndexed(this.buffers[d],this.allIndexes[d])}},getBounds:function(){return this.bounds},dispose:function(){this.clear()},clear:function(){if(this.flushing)throw new n("Cannot clear() BigPrimitive while it's flushing");var a=this.bounds;a.xMin=1E20;a.xMax=-1E20;a.yMin=1E20;a.yMax=-1E20;a.zMin=1E20;a.zMax=-1E20;for(var a=0,b=this.buffers;a<b.length;){var c=
b[a];++a;c.dispose()}a=0;for(b=this.allIndexes;a<b.length;)c=b[a],++a,c.dispose();this.buffers=[];this.allIndexes=[];this.idxPos=this.bufPos=0;this.tmpIdx=this.tmpBuf=null},add:function(a,b,c,d,e,f,g,h){null==h&&(h=-1);null==g&&(g=1);null==f&&(f=0);null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);this.addSub(a,b,0,0,a.pos/(0>h?this.stride:h)|0,b.length/3|0,c,d,e,f,g,h)},addSub:function(a,b,c,d,e,f,g,h,k,l,m,t,x,p,q,r){null==q&&(q=1);null==p&&(p=0);null==x&&(x=0);null==t&&(t=-1);null==m&&(m=1);null==l&&
(l=0);null==k&&(k=0);null==h&&(h=0);null==g&&(g=0);0>t&&(t=this.stride);if(t<this.stride)throw new n("only stride >= "+this.stride+" allowed");this.begin(e,3*f);var s=this.startIndex,ba=Math.cos(l);l=Math.sin(l);for(var E=this.bufPos,C=this.tmpBuf,u=0;u<e;){var y=(u++ +c)*t,v=a.array[y++],z=a.array[y++],w=a.array[y++];if(null!=r)var B=v,v=B*r._12+z*r._22+w*r._32+r._42,D=B*r._13+z*r._23+w*r._33+r._43,B=B*r._11+z*r._21+w*r._31+r._41,z=v,w=D;else B=g+(v*ba-z*l)*m,z=h+(v*l+z*ba)*m,w=k+w*m;C.array[E++]=
B;C.array[E++]=z;C.array[E++]=w;v=this.bounds;B<v.xMin&&(v.xMin=B);B>v.xMax&&(v.xMax=B);z<v.yMin&&(v.yMin=z);z>v.yMax&&(v.yMax=z);w<v.zMin&&(v.zMin=w);w>v.zMax&&(v.zMax=w);6<=this.stride&&(z=a.array[y++],v=a.array[y++],B=a.array[y++],null!=r?(B=new ma(z,v,B),w=B.x*r._12+B.y*r._22+B.z*r._32,z=B.x*r._13+B.y*r._23+B.z*r._33,B.x=B.x*r._11+B.y*r._21+B.z*r._31,B.y=w,B.z=z,B.normalize(),C.array[E++]=B.x,C.array[E++]=B.y,C.array[E++]=B.z):(w=z*ba-v*l,z=z*l+v*ba,C.array[E++]=w,C.array[E++]=z,C.array[E++]=
B));B=this.stride;this.hasTangents&&(v=a.array[y++],D=a.array[y++],w=a.array[y++],null!=r?(w=new ma(v,D,w),z=w.x*w.x+w.y*w.y+w.z*w.z,v=w.x*r._12+w.y*r._22+w.z*r._32,D=w.x*r._13+w.y*r._23+w.z*r._33,w.x=w.x*r._11+w.y*r._21+w.z*r._31,w.y=v,w.z=D,w.normalize(),0.5>z&&(w.x*=0.5,w.y*=0.5,w.z*=0.5),C.array[E++]=w.x,C.array[E++]=w.y,C.array[E++]=w.z):(z=v*ba-D*l,v=v*l+D*ba,C.array[E++]=z,C.array[E++]=v,C.array[E++]=w),B-=3);switch(B){case 3:case 6:continue;case 4:case 7:C.array[E++]=a.array[y++]+x;break;
case 5:case 8:case 9:case 10:C.array[E++]=a.array[y++]+x;C.array[E++]=a.array[y++]+p;for(w=8;w<B;)w++,C.array[E++]=a.array[y++];break;default:C.array[E++]=a.array[y++]+x;C.array[E++]=a.array[y++]+p;C.array[E++]=a.array[y++]*q;C.array[E++]=a.array[y++]*q;C.array[E++]=a.array[y++]*q;for(w=11;w<B;)w++,C.array[E++]=a.array[y++]}}this.bufPos=E;s-=c;a=0;for(f*=3;a<f;)c=a++,c=b[c+3*d]+s,this.tmpIdx[this.idxPos++]=c},__class__:Cc});var Lc=function(){};p["h3d.prim.MeshPrimitive"]=Lc;Lc.__name__="h3d.prim.MeshPrimitive";
Lc.__super__=Ac;Lc.prototype=J(Ac.prototype,{allocBuffer:function(a,b){return null},hasBuffer:function(a){if(null==this.bufferCache)return!1;var b=this.bufferCache;a=Y.allocID(a);return b.h.hasOwnProperty(a)},addBuffer:function(a,b,c){null==c&&(c=0);null==this.bufferCache&&(this.bufferCache=new oa);a=Y.allocID(a);var d=this.bufferCache.h[a];null!=d&&d.dispose();d=this.bufferCache;b=new yg(b,c);d.h[a]=b},dispose:function(){Ac.prototype.dispose.call(this);if(null!=this.bufferCache)for(var a=this.bufferCache.iterator();a.hasNext();)a.next().dispose();
this.layouts=this.bufferCache=null},getBuffers:function(a){null==this.bufferCache&&(this.bufferCache=new oa);null==this.layouts&&(this.layouts=new oa);var b=a.driver.getShaderInputNames(),c=this.layouts.h[b.id];if(null!=c)return c;for(var d=null,e=0,f=b.names;e<f.length;){var g=f[e];++e;var h=Y.allocID(g),k=this.bufferCache.h[h];if(null==k){k=this.allocBuffer(a,g);if(null==k)throw new n("Buffer "+g+" is not available");this.bufferCache.h[h]=k}k=new yg(k.buffer,k.offset);null==d?c=d=k:d=d.next=k}return this.layouts.h[b.id]=
c},render:function(a){(null==this.indexes||this.indexes.isDisposed())&&this.alloc(a);a.renderMultiBuffers(this.getBuffers(a),this.indexes)},__class__:Lc});var Jg=function(a,b,c){this.bufferAliases=new ia;this.data=a;this.dataPosition=b;this.lib=c};p["h3d.prim.HMDModel"]=Jg;Jg.__name__="h3d.prim.HMDModel";Jg.__super__=Lc;Jg.prototype=J(Lc.prototype,{triCount:function(){return this.data.get_indexCount()/3|0},vertexCount:function(){return this.data.vertexCount},getBounds:function(){return this.data.bounds},
selectMaterial:function(a){this.curMaterial=a},getDataBuffers:function(a,b,c){return this.lib.getBuffers(this.data,a,b,c)},loadSkin:function(a){this.lib.loadSkin(this.data,a)},addAlias:function(a,b,c){null==c&&(c=0);var d=this.bufferAliases;b={realName:b,offset:c};null!=L[a]?d.setReserved(a,b):d.h[a]=b},alloc:function(a){this.dispose();this.buffer=new cb(this.data.vertexCount,this.data.vertexStride);a=this.lib.resource.entry;a.open();a.skip(this.dataPosition+this.data.vertexPosition);var b=4*this.data.vertexCount*
this.data.vertexStride,c=new N(new ArrayBuffer(b));a.read(c,0,b);this.buffer.uploadBytes(c,0,this.data.vertexCount);this.indexCount=0;this.indexesTriPos=[];for(var c=0,d=this.data.indexCounts;c<d.length;){var e=d[c];++c;this.indexesTriPos.push(this.indexCount/3|0);this.indexCount+=e}this.indexes=new Yd(this.indexCount);a.skip(this.data.indexPosition-(this.data.vertexPosition+b));b=new N(new ArrayBuffer(2*this.indexCount));a.read(b,0,2*this.indexCount);this.indexes.uploadBytes(b,0,this.indexCount);
a.close();b=a=0;for(c=this.data.vertexFormat;b<c.length;)d=c[b],++b,this.addBuffer(d.name,this.buffer,a),a+=d.format&7;null!=this.normalsRecomputed&&this.recomputeNormals(this.normalsRecomputed);for(a=this.bufferAliases.keys();a.hasNext();){b=a.next();c=this.bufferAliases;c=null!=L[b]?c.getReserved(b):c.h[b];d=this.bufferCache;e=Y.allocID(c.realName);d=d.h[e];if(null==d)throw new n("Buffer "+c.realName+" not found for alias "+b);if(d.offset+c.offset>d.buffer.buffer.stride)throw new n("Alias "+b+" for buffer "+
c.realName+" outside stride");this.addBuffer(b,d.buffer,d.offset+c.offset)}},recomputeNormals:function(a){null==a&&(a="normal");for(var b=this.lib.getBuffers(this.data,[new Qd("position",3)]),c=[],d=[],e=0,f=this.data.vertexCount;e<f;){for(var g=e++,h=!1,g=new ma(b.vertexes[3*g],b.vertexes[3*g+1],b.vertexes[3*g+2]),k=0,l=d.length;k<l;){var n=k++,t=d[n];if(t.x==g.x&&t.y==g.y&&t.z==g.z){c.push(n);h=!0;break}}h||(c.push(d.length),d.push(g))}e=[];f=0;for(b=b.indexes;f<b.length;)h=b[f],++f,e.push(c[h]);
d=new Vh(d,e);d.addNormals();b=db._new(0);e=0;for(f=this.data.vertexCount;e<f;)h=e++,h=d.normals[c[h]],g=h.x,b.pos==b.array.length&&(k=b.array.length<<1,128>k&&(k=128),k=new Float32Array(k),k.set(b.array),b.array=k),b.array[b.pos++]=g,g=h.y,b.pos==b.array.length&&(k=b.array.length<<1,128>k&&(k=128),k=new Float32Array(k),k.set(b.array),b.array=k),b.array[b.pos++]=g,h=h.z,b.pos==b.array.length&&(g=b.array.length<<1,128>g&&(g=128),g=new Float32Array(g),g.set(b.array),b.array=g),b.array[b.pos++]=h;c=
cb.ofFloats(b,3);this.addBuffer(a,c,0);this.normalsRecomputed=a},render:function(a){0>this.curMaterial?Lc.prototype.render.call(this,a):((null==this.indexes||this.indexes.isDisposed())&&this.alloc(a),a.renderMultiBuffers(this.getBuffers(a),this.indexes,this.indexesTriPos[this.curMaterial],this.data.indexCounts[this.curMaterial]/3|0),this.curMaterial=-1)},initCollider:function(a){var b=this.lib.getBuffers(this.data,[new Qd("position",3)]);a.setData(b.vertexes,b.indexes);if(null==this.collider){var b=
this.data.bounds,c=b.xMax-b.xMin,d=b.yMax-b.yMin,e=b.zMax-b.zMin,b=new vf(0.5*(b.xMin+b.xMax),0.5*(b.yMin+b.yMax),0.5*(b.zMin+b.zMax),0.5*Math.sqrt(c*c+d*d+e*e));this.collider=new Bg(b,a)}},getCollider:function(){if(null!=this.collider)return this.collider;var a=new wf;a.source={entry:this.lib.resource.entry,geometryName:null};for(var b=0,c=this.lib.header.models;b<c.length;){var d=c[b];++b;if(this.lib.header.geometries[d.geometry]==this.data){a.source.geometryName=d.name;break}}this.initCollider(a);
return this.collider},__class__:Jg});var zj=function(){this.models=new ia;this.textures=new ia;this.anims=new ia};p["h3d.prim.ModelCache"]=zj;zj.__name__="h3d.prim.ModelCache";zj.prototype={dispose:function(){this.anims=new ia;this.models=new ia;for(var a=this.textures,a=new Kg(a,a.arrayKeys());a.hasNext();)a.next().dispose();this.textures=new ia},loadLibrary:function(a){var b=a.entry.get_path(),c=this.models,c=null!=L[b]?c.getReserved(b):c.h[b];null==c&&(c=a.toHmd(),a=this.models,null!=L[b]?a.setReserved(b,
c):a.h[b]=c,a=c,b=b.split("/"),b.pop(),b=b.join("/")+"/model.props",Cb.currentInstance.exists(b)?(b=Cb.currentInstance.load(b).toText(),b=JSON.parse(b)):b=null,a.hideData=b);return c},loadModel:function(a){var b=K(this,this.loadTexture);return this.loadLibrary(a).makeObject(function(c){return b(a,c)})},loadTexture:function(a,b){var c=b;null!=a&&(c=a.entry.get_path()+"@"+c);var d=this.textures,d=null!=L[c]?d.getReserved(c):d.h[c];if(null!=d)return d;var e;try{e=Cb.currentInstance.load(b)}catch(f){if(d=
f instanceof n?f.val:f,d instanceof be){if(null==a)throw new n(d);var g=a.entry.get_directory();""!=g&&(g+="/");g+=b.split("/").pop();try{e=Cb.currentInstance.load(g)}catch(h){if((h instanceof n?h.val:h)instanceof be)try{var k=g.split("/").pop(),l=k.charAt(0),k=l==l.toLowerCase()?l.toUpperCase()+z.substr(k,1,null):l.toLowerCase()+z.substr(k,1,null),g=z.substr(g,0,-k.length)+k;e=Cb.currentInstance.load(g)}catch(m){if((m instanceof n?m.val:m)instanceof be)throw new n(d);throw m;}else throw h;}}else throw f;
}d=e.toTexture();e=this.textures;null!=L[c]?e.setReserved(c,d):e.h[c]=d;return d},loadAnimation:function(a,b){var c=a.entry.get_path();null!=b&&(c+=":"+b);var d=this.anims,d=null!=L[c]?d.getReserved(c):d.h[c];if(null!=d)return d;var d=this.initAnimation(a,b),e=this.anims;null!=L[c]?e.setReserved(c,d):e.h[c]=d;return d},initAnimation:function(a,b){return this.loadLibrary(a).loadAnimation(b)},__class__:zj};var nd=function(){};p["h3d.prim.Plane2D"]=nd;nd.__name__="h3d.prim.Plane2D";nd.get=function(){var a=
na.CURRENT,b=a.resCache.h[nd.__id__];null==b&&(b=new nd,a.resCache.set(nd,b));return b};nd.__super__=Ac;nd.prototype=J(Ac.prototype,{triCount:function(){return 2},vertexCount:function(){return 4},alloc:function(a){a=db._new(0);if(a.pos==a.array.length){var b=a.array.length<<1;128>b&&(b=128);b=new Float32Array(b);b.set(a.array);a.array=b}a.array[a.pos++]=-1;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=-1;a.pos==a.array.length&&
(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=0;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=1;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=-1;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=1;a.pos==a.array.length&&
(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=0;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=0;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=1;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=-1;a.pos==a.array.length&&
(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=1;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=1;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=1;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=1;a.pos==a.array.length&&
(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=1;a.pos==a.array.length&&(b=a.array.length<<1,128>b&&(b=128),b=new Float32Array(b),b.set(a.array),a.array=b);a.array[a.pos++]=0;this.buffer=cb.ofFloats(a,4,[Aa.Quads,Aa.RawFormat])},render:function(a){(null==this.buffer||this.buffer.isDisposed())&&this.alloc(a);a.renderBuffer(this.buffer,a.mem.quadIndexes,2,0,-1)},__class__:nd});var Vh=function(a,b){this.translatedX=this.translatedY=this.translatedZ=
0;this.scaled=1;this.points=a;this.idx=b};p["h3d.prim.Polygon"]=Vh;Vh.__name__="h3d.prim.Polygon";Vh.__super__=Lc;Vh.prototype=J(Lc.prototype,{getBounds:function(){for(var a=new tb,b=0,c=this.points;b<c.length;){var d=c[b];++b;d.x<a.xMin&&(a.xMin=d.x);d.x>a.xMax&&(a.xMax=d.x);d.y<a.yMin&&(a.yMin=d.y);d.y>a.yMax&&(a.yMax=d.y);d.z<a.zMin&&(a.zMin=d.z);d.z>a.zMax&&(a.zMax=d.z)}return a},alloc:function(a){this.dispose();var b=3;a=["position"];var c=[0];null!=this.normals&&(a.push("normal"),c.push(b),
b+=3);null!=this.tangents&&(a.push("tangent"),c.push(b),b+=3);null!=this.uvs&&(a.push("uv"),c.push(b),b+=2);null!=this.colors&&(a.push("color"),c.push(b),b+=3);for(var d=db._new(0),e=0,f=this.points.length;e<f;){var g=e++,h=this.points[g],k=h.x;if(d.pos==d.array.length){var l=d.array.length<<1;128>l&&(l=128);l=new Float32Array(l);l.set(d.array);d.array=l}d.array[d.pos++]=k;k=h.y;d.pos==d.array.length&&(l=d.array.length<<1,128>l&&(l=128),l=new Float32Array(l),l.set(d.array),d.array=l);d.array[d.pos++]=
k;h=h.z;d.pos==d.array.length&&(k=d.array.length<<1,128>k&&(k=128),k=new Float32Array(k),k.set(d.array),d.array=k);d.array[d.pos++]=h;null!=this.normals&&(h=this.normals[g],k=h.x,d.pos==d.array.length&&(l=d.array.length<<1,128>l&&(l=128),l=new Float32Array(l),l.set(d.array),d.array=l),d.array[d.pos++]=k,k=h.y,d.pos==d.array.length&&(l=d.array.length<<1,128>l&&(l=128),l=new Float32Array(l),l.set(d.array),d.array=l),d.array[d.pos++]=k,h=h.z,d.pos==d.array.length&&(k=d.array.length<<1,128>k&&(k=128),
k=new Float32Array(k),k.set(d.array),d.array=k),d.array[d.pos++]=h);null!=this.tangents&&(h=this.tangents[g],k=h.x,d.pos==d.array.length&&(l=d.array.length<<1,128>l&&(l=128),l=new Float32Array(l),l.set(d.array),d.array=l),d.array[d.pos++]=k,k=h.y,d.pos==d.array.length&&(l=d.array.length<<1,128>l&&(l=128),l=new Float32Array(l),l.set(d.array),d.array=l),d.array[d.pos++]=k,h=h.z,d.pos==d.array.length&&(k=d.array.length<<1,128>k&&(k=128),k=new Float32Array(k),k.set(d.array),d.array=k),d.array[d.pos++]=
h);null!=this.uvs&&(h=this.uvs[g],k=h.u,d.pos==d.array.length&&(l=d.array.length<<1,128>l&&(l=128),l=new Float32Array(l),l.set(d.array),d.array=l),d.array[d.pos++]=k,h=h.v,d.pos==d.array.length&&(k=d.array.length<<1,128>k&&(k=128),k=new Float32Array(k),k.set(d.array),d.array=k),d.array[d.pos++]=h);null!=this.colors&&(g=this.colors[g],h=g.x,d.pos==d.array.length&&(k=d.array.length<<1,128>k&&(k=128),k=new Float32Array(k),k.set(d.array),d.array=k),d.array[d.pos++]=h,h=g.y,d.pos==d.array.length&&(k=d.array.length<<
1,128>k&&(k=128),k=new Float32Array(k),k.set(d.array),d.array=k),d.array[d.pos++]=h,g=g.z,d.pos==d.array.length&&(h=d.array.length<<1,128>h&&(h=128),h=new Float32Array(h),h.set(d.array),d.array=h),d.array[d.pos++]=g)}e=[];null==this.idx&&e.push(Aa.Triangles);(null==this.normals||null!=this.tangents)&&e.push(Aa.RawFormat);this.buffer=cb.ofFloats(d,b,e);b=0;for(d=a.length;b<d;)e=b++,this.addBuffer(a[e],this.buffer,c[e]);null!=this.idx&&(this.indexes=Yd.alloc(this.idx))},unindex:function(){if(null!=
this.idx&&this.points.length!=this.idx.length){for(var a=[],b=0,c=this.idx.length;b<c;){var d=b++,d=this.points[this.idx[d]];a.push(new ma(d.x,d.y,d.z))}if(null!=this.normals){b=[];c=0;for(d=this.idx.length;c<d;){var e=c++,e=this.normals[this.idx[e]];b.push(new ma(e.x,e.y,e.z))}this.normals=b}if(null!=this.tangents){b=[];c=0;for(d=this.idx.length;c<d;)e=c++,e=this.tangents[this.idx[e]],b.push(new ma(e.x,e.y,e.z));this.tangents=b}if(null!=this.colors){b=[];c=0;for(d=this.idx.length;c<d;)e=c++,e=this.colors[this.idx[e]],
b.push(new ma(e.x,e.y,e.z));this.colors=b}if(null!=this.uvs){b=[];c=0;for(d=this.idx.length;c<d;)e=c++,b.push(this.uvs[this.idx[e]].clone());this.uvs=b}this.points=a;this.idx=null}},translate:function(a,b,c){this.translatedX+=a;this.translatedY+=b;this.translatedZ+=c;for(var d=0,e=this.points;d<e.length;){var f=e[d];++d;f.x+=a;f.y+=b;f.z+=c}},scale:function(a){this.scaled*=a;for(var b=0,c=this.points;b<c.length;){var d=c[b];++b;d.x*=a;d.y*=a;d.z*=a}},addNormals:function(){this.normals=[];for(var a=
0,b=this.points.length;a<b;){var c=a++;this.normals[c]=new ma}b=a=0;for(c=this.triCount();b<c;){b++;var d,e,f;null==this.idx?(++a,d=a-1,++a,e=a-1,++a,f=a-1):(d=this.idx[a++],e=this.idx[a++],f=this.idx[a++]);var g=this.points[d],h=this.points[e],k=this.points[f],l=h.x-g.x,n=h.y-g.y,t=h.z-g.z,h=k.x-g.x,m=k.y-g.y,k=k.z-g.z,g=n*k-t*m,t=t*h-l*k,l=l*m-n*h;this.normals[d].x+=g;this.normals[d].y+=t;this.normals[d].z+=l;this.normals[e].x+=g;this.normals[e].y+=t;this.normals[e].z+=l;this.normals[f].x+=g;this.normals[f].y+=
t;this.normals[f].z+=l}a=0;for(b=this.normals;a<b.length;)c=b[a],++a,c.normalize()},addTangents:function(){null==this.normals&&this.addNormals();null==this.uvs&&this.addUVs();this.tangents=[];for(var a=0,b=this.points.length;a<b;){var c=a++;this.tangents[c]=new ma}b=a=0;for(c=this.triCount();b<c;){b++;var d,e,f;null==this.idx?(++a,d=a-1,++a,e=a-1,++a,f=a-1):(d=this.idx[a++],e=this.idx[a++],f=this.idx[a++]);var g=this.points[d],h=this.points[e],k=this.points[f],l=this.uvs[d],n=this.uvs[e],t=this.normals[d],
m=h.x-g.x,p=h.y-g.y,h=h.z-g.z,q=k.x-g.x,r=k.y-g.y,g=k.z-g.z,k=this.uvs[f].v-l.v,m=m*k,p=p*k,h=h*k,l=n.v-l.v,q=q*l,r=r*l,g=g*l,m=new ma(m-q,p-r,h-g),m=new ma(t.y*m.z-t.z*m.y,t.z*m.x-t.x*m.z,t.x*m.y-t.y*m.x);m.normalize();m=new ma(m.y*t.z-m.z*t.y,m.z*t.x-m.x*t.z,m.x*t.y-m.y*t.x);m.normalize();this.tangents[d].x+=m.x;this.tangents[d].y+=m.y;this.tangents[d].z+=m.z;this.tangents[e].x+=m.x;this.tangents[e].y+=m.y;this.tangents[e].z+=m.z;this.tangents[f].x+=m.x;this.tangents[f].y+=m.y;this.tangents[f].z+=
m.z}a=0;for(b=this.tangents;a<b.length;)c=b[a],++a,c.normalize()},addUVs:function(){this.uvs=[];for(var a=0,b=this.points.length;a<b;){var c=a++;this.uvs[c]=new Wh(this.points[c].x,this.points[c].y)}},uvScale:function(a,b){if(null==this.uvs)throw new n("Missing UVs");for(var c=new Ha,d=0,e=this.uvs;d<e.length;){var f=e[d];++d;null==c.h.__keys__[f.__id__]&&(c.set(f,!0),f.u*=a,f.v*=b)}},triCount:function(){var a=Lc.prototype.triCount.call(this);return 0!=a?a:(null==this.idx?this.points.length:this.idx.length)/
3|0},vertexCount:function(){return this.points.length},getCollider:function(){for(var a=Array(3*this.points.length),b=Array(this.idx.length),c=0,d=0,e=this.points;d<e.length;){var f=e[d];++d;a[c++]=f.x;a[c++]=f.y;a[c++]=f.z}c=0;for(d=this.idx.length;c<d;)e=c++,b[e]=this.idx[e];c=new Eg;c.addBuffers(a,b);return c},render:function(a){(null==this.buffer||this.buffer.isDisposed())&&this.alloc(a);var b=this.getBuffers(a);null!=this.indexes?a.renderMultiBuffers(b,this.indexes):0!=(this.buffer.flags&1<<
Aa.Quads._hx_index)?a.renderMultiBuffers(b,a.mem.quadIndexes,0,this.triCount()):a.renderMultiBuffers(b,a.mem.triIndexes,0,this.triCount())},__class__:Vh});var Qh=function(a,b){null==b&&(b=!1);this.onContextLost=function(){return a};this.bounds=a.bounds;this.alloc(null);b||(this.onContextLost=null)};p["h3d.prim.RawPrimitive"]=Qh;Qh.__name__="h3d.prim.RawPrimitive";Qh.__super__=Ac;Qh.prototype=J(Ac.prototype,{alloc:function(a){if(null==this.onContextLost)throw new n("Cannot realloc "+r.string(this));
a=this.onContextLost();var b=[];null==a.ibuf&&b.push(a.quads?Aa.Quads:Aa.Triangles);8>a.stride&&b.push(Aa.RawFormat);this.buffer=cb.ofFloats(a.vbuf,a.stride,b);this.vcount=this.buffer.vertices;this.tcount=null!=a.ibuf?a.ibuf.length/3|0:a.quads?this.vcount>>1:this.vcount/3|0;null!=a.ibuf?this.indexes=Yd.alloc(a.ibuf):null!=this.indexes&&(this.indexes.dispose(),this.indexes=null)},getBounds:function(){if(null==this.bounds)throw new n("Bounds not defined for "+r.string(this));return this.bounds},triCount:function(){return this.tcount},
vertexCount:function(){return this.vcount},__class__:Qh});var Wh=function(a,b){this.u=a;this.v=b};p["h3d.prim.UV"]=Wh;Wh.__name__="h3d.prim.UV";Wh.prototype={clone:function(){return new Wh(this.u,this.v)},toString:function(){return"{"+I.fmt(this.u)+","+I.fmt(this.v)+"}"},__class__:Wh};var Mf=function(a,b,c,d,e,f,g){this.x=a;this.y=b;this.z=c;this.r=d;this.g=e;this.b=f;this.a=g};p["h3d.scene._Graphics.GPoint"]=Mf;Mf.__name__="h3d.scene._Graphics.GPoint";Mf.prototype={__class__:Mf};var Fa=function(a){this.flags=
0;this.absPos=new R;this.absPos.identity();this.x=0;this.flags|=1;this.y=0;this.flags|=1;this.z=0;this.flags|=1;this.scaleX=1;this.flags|=1;this.scaleY=1;this.flags|=1;this.scaleZ=1;this.flags|=1;this.qRot=new Ad;this.flags=null!=this.follow?this.flags|1:this.flags&-2;this.flags|=2;this.children=[];null!=a&&a.addChild(this)};p["h3d.scene.Object"]=Fa;Fa.__name__="h3d.scene.Object";Fa.__interfaces__=[Vd];Fa.prototype={get_visible:function(){return 0!=(this.flags&2)},get_allocated:function(){return 0!=
(this.flags&32)},get_posChanged:function(){return 0!=(this.flags&1)},get_culled:function(){return 0!=(this.flags&4)},get_followPositionOnly:function(){return 0!=(this.flags&8)},get_lightCameraCenter:function(){return 0!=(this.flags&16)},get_alwaysSync:function(){return 0!=(this.flags&64)},get_inheritCulled:function(){return 0!=(this.flags&128)},get_ignoreBounds:function(){return 0!=(this.flags&512)},get_ignoreCollide:function(){return 0!=(this.flags&1024)},get_allowSerialize:function(){return 0==
(this.flags&256)},get_ignoreParentTransform:function(){return 0!=(this.flags&2048)},set_posChanged:function(a){this.flags=(a=a||null!=this.follow)?this.flags|1:this.flags&-2;return a},set_culled:function(a){this.flags=a?this.flags|4:this.flags&-5;return a},set_visible:function(a){this.flags=a?this.flags|2:this.flags&-3;return a},set_allocated:function(a){this.flags=a?this.flags|32:this.flags&-33;return a},set_followPositionOnly:function(a){this.flags=a?this.flags|8:this.flags&-9;return a},set_lightCameraCenter:function(a){this.flags=
a?this.flags|16:this.flags&-17;return a},set_alwaysSync:function(a){this.flags=a?this.flags|64:this.flags&-65;return a},set_ignoreBounds:function(a){this.flags=a?this.flags|512:this.flags&-513;return a},set_inheritCulled:function(a){this.flags=a?this.flags|128:this.flags&-129;return a},set_ignoreCollide:function(a){this.flags=a?this.flags|1024:this.flags&-1025;return a},set_allowSerialize:function(a){this.flags=(a=!a)?this.flags|256:this.flags&-257;return!a},set_ignoreParentTransform:function(a){this.flags=
a?this.flags|2048:this.flags&-2049;return a},playAnimation:function(a){return this.currentAnimation=a.createInstance(this)},switchToAnimation:function(a){return this.currentAnimation=a},stopAnimation:function(a){null==a&&(a=!1);this.currentAnimation=null;if(a){a=0;for(var b=this.children;a<b.length;){var c=b[a];++a;c.stopAnimation(!0)}}},applyAnimationTransform:function(a){null==a&&(a=!0);if(null!=this.defaultTransform){var b=this.defaultTransform,c=0,d=0,e=0,c=Math.sqrt(b._11*b._11+b._12*b._12+b._13*
b._13),d=Math.sqrt(b._21*b._21+b._22*b._22+b._23*b._23),e=Math.sqrt(b._31*b._31+b._32*b._32+b._33*b._33);0>b._11*(b._22*b._33-b._23*b._32)+b._12*(b._23*b._31-b._21*b._33)+b._13*(b._21*b._32-b._22*b._31)&&(c*=-1,d*=-1,e*=-1);this.scaleX=c;this.flags|=1;this.scaleY=d;this.flags|=1;this.scaleZ=e;this.flags|=1;this.qRot.initRotateMatrix(this.defaultTransform);this.x=this.defaultTransform._41;this.flags|=1;this.y=this.defaultTransform._42;this.flags|=1;this.z=this.defaultTransform._43;this.flags|=1;this.defaultTransform=
null;this.flags|=1}if(a){a=0;for(b=this.children;a<b.length;)c=b[a],++a,c.applyAnimationTransform()}},getObjectsCount:function(){for(var a=0,b=0,c=this.children;b<c.length;){var d=c[b];++b;a+=d.getObjectsCount()+1}return a},getMaterialByName:function(a){for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d=d.getMaterialByName(a);if(null!=d)return d}return null},find:function(a){var b=a(this);if(null!=b)return b;for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d=d.find(a);if(null!=d)return d}return null},
findAll:function(a,b){null==b&&(b=[]);var c=a(this);null!=c&&b.push(c);for(var c=0,d=this.children;c<d.length;){var e=d[c];++c;e.findAll(a,b)}return b},getMaterials:function(a){null==a&&(a=[]);for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d.getMaterials(a)}return a},localToGlobal:function(a){this.syncPos();null==a&&(a=new U);var b=this.absPos,c=a.x*b._12+a.y*b._22+a.z*b._32+a.w*b._42,d=a.x*b._13+a.y*b._23+a.z*b._33+a.w*b._43;a.x=a.x*b._11+a.y*b._21+a.z*b._31+a.w*b._41;a.y=c;a.z=d;return a},
globalToLocal:function(a){var b=this.getInvPos(),c=a.x*b._12+a.y*b._22+a.z*b._32+a.w*b._42,d=a.x*b._13+a.y*b._23+a.z*b._33+a.w*b._43;a.x=a.x*b._11+a.y*b._21+a.z*b._31+a.w*b._41;a.y=c;a.z=d;return a},getInvPos:function(){this.syncPos();null==this.invPos&&(this.invPos=new R,this.invPos._44=0);0==this.invPos._44&&this.invPos.inverse3x4(this.absPos);return this.invPos},getBounds:function(a){null==a&&(a=new tb);null!=this.parent&&this.parent.syncPos();return this.getBoundsRec(a)},getBoundsRec:function(a){if(0!=
(this.flags&1)){for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d.flags|=1}this.flags=null!=this.follow?this.flags|1:this.flags&-2;this.calcAbsPos()}b=0;for(c=this.children;b<c.length;)d=c[b],++b,d.getBoundsRec(a);return a},getMeshes:function(a){null==a&&(a=[]);var b=this instanceof eb?this:null;null!=b&&a.push(b);for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d.getMeshes(a)}return a},getMeshByName:function(a){a=this.getObjectByName(a);return a instanceof eb?a:null},getObjectByName:function(a){if(this.name==
a)return this;for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d=d.getObjectByName(a);if(null!=d)return d}return null},clone:function(a){null==a&&(a=new Fa);a.x=this.x;a.flags|=1;a.y=this.y;a.flags|=1;a.z=this.z;a.flags|=1;a.scaleX=this.scaleX;a.flags|=1;a.scaleY=this.scaleY;a.flags|=1;a.scaleZ=this.scaleZ;a.flags|=1;var b=a.qRot,c=this.qRot;b.x=c.x;b.y=c.y;b.z=c.z;b.w=c.w;a.name=this.name;a.set_follow(this.follow);a.flags=0!=(this.flags&8)?a.flags|8:a.flags&-9;a.flags=0!=(this.flags&2)?a.flags|
2:a.flags&-3;null!=this.defaultTransform&&(b=this.defaultTransform.clone(),a.defaultTransform=b,a.flags|=1);b=0;for(c=this.children;b<c.length;){var d=c[b];++b;d=d.clone();d.parent=a;a.children.push(d)}return a},addChild:function(a){this.addChildAt(a,this.children.length)},addChildAt:function(a,b){0>b&&(b=0);b>this.children.length&&(b=this.children.length);for(var c=this;null!=c;){if(c==a)throw new n("Recursive addChild");c=c.parent}null!=a.parent&&(c=0!=(a.flags&32),a.flags&=-33,a.parent.removeChild(a),
a.flags=c?a.flags|32:a.flags&-33);this.children.splice(b,0,a);if(0==(this.flags&32)&&0!=(a.flags&32))a.onRemove();a.parent=this;a.flags|=1;if(0!=(this.flags&32))if(0==(a.flags&32))a.onAdd();else a.onParentChanged()},iterVisibleMeshes:function(a){if(!(0==(this.flags&2)||0!=(this.flags&4)&&0!=(this.flags&128))){if(0==(this.flags&4)){var b=this instanceof eb?this:null;null!=b&&a(b)}for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d.iterVisibleMeshes(a)}}},onParentChanged:function(){for(var a=
0,b=this.children;a<b.length;){var c=b[a];++a;c.onParentChanged()}},onAdd:function(){this.flags|=32;for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.onAdd()}},onRemove:function(){this.flags&=-33;for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.onRemove()}},removeChild:function(a){if(z.remove(this.children,a)){if(0!=(a.flags&32))a.onRemove();a.parent=null;a.flags|=1}},removeChildren:function(){for(;0<this.children.length;)this.removeChild(this.children[0])},remove:function(){null!=
this.parent&&this.parent.removeChild(this)},getScene:function(){for(var a=this;null!=a.parent;)a=a.parent;return a instanceof hd?a:null},getAbsPos:function(){this.syncPos();return this.absPos},isMesh:function(){return null!=(this instanceof eb?this:null)},toMesh:function(){var a=this instanceof eb?this:null;if(null!=a)return a;throw new n(r.string(this)+" is not a Mesh");},getCollider:function(){if(0!=(this.flags&1024))return null;var a=[],b=this.getGlobalCollider();null!=b&&a.push(b);for(var b=0,
c=this.children;b<c.length;){var d=c[b];++b;d=d.getCollider();if(null!=d){var e=d instanceof Cg?d:null;if(null!=e){d=0;for(e=e.colliders;d<e.length;){var f=e[d];++d;a.push(f)}}else a.push(d)}}return 0==a.length?null:1==a.length?a[0]:new Cg(a)},getGlobalCollider:function(){if(0!=(this.flags&1024))return null;var a=this.getLocalCollider();return null==a?null:new Gh(this,a)},getLocalCollider:function(){return null},draw:function(a){},set_follow:function(a){this.flags|=1;return this.follow=a},calcAbsPos:function(){this.qRot.toMatrix(this.absPos);
this.absPos._11*=this.scaleX;this.absPos._12*=this.scaleX;this.absPos._13*=this.scaleX;this.absPos._21*=this.scaleY;this.absPos._22*=this.scaleY;this.absPos._23*=this.scaleY;this.absPos._31*=this.scaleZ;this.absPos._32*=this.scaleZ;this.absPos._33*=this.scaleZ;this.absPos._41=this.x;this.absPos._42=this.y;this.absPos._43=this.z;if(null!=this.follow)if(this.follow.syncPos(),0!=(this.flags&8)){var a=this.absPos,b=this.absPos,c=this.parent.absPos,d=b._11,e=b._12,f=b._13,g=b._21,h=b._22,k=b._23,l=b._31,
n=b._32,m=b._33,p=b._41,q=b._42,b=b._43,r=c._11,s=c._12,u=c._13,ba=c._21,E=c._22,C=c._23,w=c._31,v=c._32,y=c._33,z=c._41,B=c._42,c=c._43;a._11=d*r+e*ba+f*w;a._12=d*s+e*E+f*v;a._13=d*u+e*C+f*y;a._14=0;a._21=g*r+h*ba+k*w;a._22=g*s+h*E+k*v;a._23=g*u+h*C+k*y;a._24=0;a._31=l*r+n*ba+m*w;a._32=l*s+n*E+m*v;a._33=l*u+n*C+m*y;a._34=0;a._41=p*r+q*ba+b*w+z;a._42=p*s+q*E+b*v+B;a._43=p*u+q*C+b*y+c;a._44=1;this.absPos._41=this.x+this.follow.absPos._41;this.absPos._42=this.y+this.follow.absPos._42;this.absPos._43=
this.z+this.follow.absPos._43}else this.absPos.multiply3x4(this.absPos,this.follow.absPos);else null!=this.parent&&0==(this.flags&2048)&&(b=a=this.absPos,c=this.parent.absPos,d=b._11,e=b._12,f=b._13,g=b._21,h=b._22,k=b._23,l=b._31,n=b._32,m=b._33,p=b._41,q=b._42,b=b._43,r=c._11,s=c._12,u=c._13,ba=c._21,E=c._22,C=c._23,w=c._31,v=c._32,y=c._33,z=c._41,B=c._42,c=c._43,a._11=d*r+e*ba+f*w,a._12=d*s+e*E+f*v,a._13=d*u+e*C+f*y,a._14=0,a._21=g*r+h*ba+k*w,a._22=g*s+h*E+k*v,a._23=g*u+h*C+k*y,a._24=0,a._31=l*
r+n*ba+m*w,a._32=l*s+n*E+m*v,a._33=l*u+n*C+m*y,a._34=0,a._41=p*r+q*ba+b*w+z,a._42=p*s+q*E+b*v+B,a._43=p*u+q*C+b*y+c,a._44=1);null!=this.defaultTransform&&(a=this.absPos,b=this.defaultTransform,c=this.absPos,d=b._11,e=b._12,f=b._13,g=b._21,h=b._22,k=b._23,l=b._31,n=b._32,m=b._33,p=b._41,q=b._42,b=b._43,r=c._11,s=c._12,u=c._13,ba=c._21,E=c._22,C=c._23,w=c._31,v=c._32,y=c._33,z=c._41,B=c._42,c=c._43,a._11=d*r+e*ba+f*w,a._12=d*s+e*E+f*v,a._13=d*u+e*C+f*y,a._14=0,a._21=g*r+h*ba+k*w,a._22=g*s+h*E+k*v,a._23=
g*u+h*C+k*y,a._24=0,a._31=l*r+n*ba+m*w,a._32=l*s+n*E+m*v,a._33=l*u+n*C+m*y,a._34=0,a._41=p*r+q*ba+b*w+z,a._42=p*s+q*E+b*v+B,a._43=p*u+q*C+b*y+c,a._44=1);null!=this.invPos&&(this.invPos._44=0)},sync:function(a){},syncRec:function(a){if(null!=this.currentAnimation){for(var b=this.parent,c=a.elapsedTime;0<c&&null!=this.currentAnimation;)c=this.currentAnimation.update(c);null!=this.currentAnimation&&(a.visibleFlag&&0!=(this.flags&2)&&0==(this.flags&4)||0!=(this.flags&64))&&this.currentAnimation.sync();
if(null==this.parent&&null!=b)return}b=a.visibleFlag;if(0==(this.flags&2)||0!=(this.flags&4)&&0!=(this.flags&128))a.visibleFlag=!1;(c=0!=(this.flags&1))&&this.calcAbsPos();this.sync(a);this.flags=null!=this.follow?this.flags|1:this.flags&-2;this.lastFrame=a.frame;for(var d=0,e=this.children.length;d<e;){var f=this.children[d];if(null==f)break;f.lastFrame!=a.frame&&(c&&(f.flags|=1),f.syncRec(a));this.children[d]!=f?(d=0,e=this.children.length):++d}a.visibleFlag=b},syncPos:function(){null!=this.parent&&
this.parent.syncPos();if(0!=(this.flags&1)){this.flags=null!=this.follow?this.flags|1:this.flags&-2;this.calcAbsPos();for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.flags|=1}}},emit:function(a){},emitRec:function(a){if(!(0==(this.flags&2)||0!=(this.flags&4)&&0!=(this.flags&128))){if(0!=(this.flags&1)){null!=this.currentAnimation&&this.currentAnimation.sync();this.flags=null!=this.follow?this.flags|1:this.flags&-2;this.calcAbsPos();for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;
d.flags|=1}}0==(this.flags&4)&&this.emit(a);b=0;for(c=this.children;b<c.length;)d=c[b],++b,d.emitRec(a)}},set_x:function(a){this.x=a;this.flags|=1;return a},set_y:function(a){this.y=a;this.flags|=1;return a},set_z:function(a){this.z=a;this.flags|=1;return a},set_scaleX:function(a){this.scaleX=a;this.flags|=1;return a},set_scaleY:function(a){this.scaleY=a;this.flags|=1;return a},set_scaleZ:function(a){this.scaleZ=a;this.flags|=1;return a},set_defaultTransform:function(a){this.defaultTransform=a;this.flags|=
1;return a},setPosition:function(a,b,c){this.x=a;this.flags|=1;this.y=b;this.flags|=1;this.z=c;this.flags|=1;this.flags|=1},setTransform:function(a){var b=0,c=0,d=0,b=Math.sqrt(a._11*a._11+a._12*a._12+a._13*a._13),c=Math.sqrt(a._21*a._21+a._22*a._22+a._23*a._23),d=Math.sqrt(a._31*a._31+a._32*a._32+a._33*a._33);0>a._11*(a._22*a._33-a._23*a._32)+a._12*(a._23*a._31-a._21*a._33)+a._13*(a._21*a._32-a._22*a._31)&&(b*=-1,c*=-1,d*=-1);this.x=a._41;this.flags|=1;this.y=a._42;this.flags|=1;this.z=a._43;this.flags|=
1;this.scaleX=b;this.flags|=1;this.scaleY=c;this.flags|=1;this.scaleZ=d;this.flags|=1;a.prependScale(1/b,1/c,1/d);this.qRot.initRotateMatrix(a);this.flags|=1},rotate:function(a,b,c){var d=new Ad;d.initRotation(a,b,c);this.qRot.multiply(d,this.qRot);this.flags|=1},setRotation:function(a,b,c){this.qRot.initRotation(a,b,c);this.flags|=1},setRotationAxis:function(a,b,c,d){this.qRot.initRotateAxis(a,b,c,d);this.flags|=1},setDirection:function(a){this.qRot.initDirection(a);this.flags|=1},getDirection:function(){var a=
this.qRot;return new U(1-2*(a.y*a.y+a.z*a.z),2*(a.x*a.y-a.z*a.w),2*(a.x*a.z+a.y*a.w))},getRotationQuat:function(){return this.qRot},setRotationQuat:function(a){this.qRot=a;this.flags|=1},scale:function(a){this.scaleX*=a;this.flags|=1;this.scaleY*=a;this.flags|=1;this.scaleZ*=a;this.flags|=1;this.flags|=1},setScale:function(a){this.scaleX=a;this.flags|=1;this.scaleY=a;this.flags|=1;this.scaleZ=a;this.flags|=1;this.flags|=1},toString:function(){return Ba.getClass(this).__name__.split(".").pop()+(null==
this.name?"":"("+this.name+")")},getChildAt:function(a){return this.children[a]},getChildIndex:function(a){for(var b=0,c=this.children.length;b<c;){var d=b++;if(this.children[d]==a)return d}return-1},get_numChildren:function(){return this.children.length},iterator:function(){return new Aj(this.children)},dispose:function(){for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.dispose()}},__class__:Fa};var eb=function(a,b,c){Fa.call(this,c);this.primitive=a;null==b&&(b=ae.current.createMaterial(),
b.set_props(b.getDefaultProps()));this.material=b};p["h3d.scene.Mesh"]=eb;eb.__name__="h3d.scene.Mesh";eb.__super__=Fa;eb.prototype=J(Fa.prototype,{getMeshMaterials:function(){return[this.material]},getBoundsRec:function(a){a=Fa.prototype.getBoundsRec.call(this,a);if(null==this.primitive||0!=(this.flags&512))return a;var b=this.primitive.getBounds(),c=new tb;c.xMin=b.xMin;c.xMax=b.xMax;c.yMin=b.yMin;c.yMax=b.yMax;c.zMin=b.zMin;c.zMax=b.zMax;c.transform(this.absPos);c.xMin<a.xMin&&(a.xMin=c.xMin);
c.xMax>a.xMax&&(a.xMax=c.xMax);c.yMin<a.yMin&&(a.yMin=c.yMin);c.yMax>a.yMax&&(a.yMax=c.yMax);c.zMin<a.zMin&&(a.zMin=c.zMin);c.zMax>a.zMax&&(a.zMax=c.zMax);return a},clone:function(a){a=null==a?new eb(null,this.material):a;a.primitive=this.primitive;a.material=this.material.clone();Fa.prototype.clone.call(this,a);return a},getLocalCollider:function(){return this.primitive.getCollider()},draw:function(a){this.primitive.render(a.engine)},emit:function(a){for(var b=this.material.passes;null!=b;)a.emitPass(b,
this).index=0,b=b.nextPass},getMaterialByName:function(a){return null!=this.material&&this.material.name==a?this.material:Fa.prototype.getMaterialByName.call(this,a)},getMaterials:function(a){null==a&&(a=[]);null!=this.material&&0>a.indexOf(this.material)&&a.push(this.material);return Fa.prototype.getMaterials.call(this,a)},dispose:function(){null!=this.primitive&&this.primitive.dispose();Fa.prototype.dispose.call(this)},__class__:eb});var Xh=function(a){this.curX=this.curY=this.curZ=this.curR=this.lineSize=
0;this.bprim=new Cc(12);this.bprim.isStatic=!1;eb.call(this,this.bprim,null,a);this.tmpPoints=[];this.lineShader=new Nf;this.lineShader.setPriority(-100);a=this.material;a.set_castShadows(!1);a.set_receiveShadows(!1);this.material.passes.set_enableLights(!1);this.material.passes.addShader(this.lineShader);a=new Of;a.setPriority(-100);this.material.passes.addShader(a);this.material.passes.set_culling(Od.None)};p["h3d.scene.Graphics"]=Xh;Xh.__name__="h3d.scene.Graphics";Xh.__super__=eb;Xh.prototype=
J(eb.prototype,{onRemove:function(){eb.prototype.onRemove.call(this);this.bprim.clear()},set_is3D:function(a){if(this.is3D==a)return a;a?this.material.passes.removeShader(this.lineShader):this.material.passes.addShader(this.lineShader);this.bprim.clear();this.tmpPoints=[];return this.is3D=a},flushLine:function(){var a=this.tmpPoints,b=a.length-1,c=a[b],d=a[0],e=d.x==c.x&&d.y==c.y&&d.z==c.z,f=a.length;if(e)d!=c&&(--f,--b,c=a[b]);else{var g=a[b-1];null==g&&(g=d);a.push(new Mf(2*c.x-g.x,2*c.y-g.y,2*
c.z-g.z,0,0,0,0));g=a[1];null==g&&(g=d);c=new Mf(2*d.x-g.x,2*d.y-g.y,2*d.z-g.z,0,0,0,0)}for(var h=g=this.bprim.vertexCount(),k=0,l=0,n=f;l<n;){var m=l++,p=a[(m+1)%a.length],q=c.y-d.y,r=d.x-c.x,s=1/Math.sqrt(q*q+r*r),c=d.y-p.y,u=p.x-d.x,ba=1/Math.sqrt(c*c+u*u),c=q*s+c*ba,u=r*s+u*ba,ba=1/Math.sqrt(c*c+u*u),c=c*ba,u=u*ba,q=0.5*this.lineSize/(c*q*s+u*r*s),c=c*q,u=u*q,q=m<f-1||e;this.bprim.begin(2,q?6:0);r=this.bprim;r.tmpBuf.array[r.bufPos++]=d.x+c;r=this.bprim;r.tmpBuf.array[r.bufPos++]=d.y+u;r=this.bprim;
r.tmpBuf.array[r.bufPos++]=d.z;r=this.bprim;r.tmpBuf.array[r.bufPos++]=0;r=this.bprim;r.tmpBuf.array[r.bufPos++]=0;r=this.bprim;r.tmpBuf.array[r.bufPos++]=1;r=this.bprim;r.tmpBuf.array[r.bufPos++]=0;r=this.bprim;r.tmpBuf.array[r.bufPos++]=k;r=this.bprim;r.tmpBuf.array[r.bufPos++]=d.r;r=this.bprim;r.tmpBuf.array[r.bufPos++]=d.g;r=this.bprim;r.tmpBuf.array[r.bufPos++]=d.b;r=this.bprim;r.tmpBuf.array[r.bufPos++]=d.a;r=this.bprim;r.tmpBuf.array[r.bufPos++]=d.x-c;c=this.bprim;c.tmpBuf.array[c.bufPos++]=
d.y-u;c=this.bprim;c.tmpBuf.array[c.bufPos++]=d.z;c=this.bprim;c.tmpBuf.array[c.bufPos++]=0;c=this.bprim;c.tmpBuf.array[c.bufPos++]=0;c=this.bprim;c.tmpBuf.array[c.bufPos++]=1;c=this.bprim;c.tmpBuf.array[c.bufPos++]=1;c=this.bprim;c.tmpBuf.array[c.bufPos++]=k;c=this.bprim;c.tmpBuf.array[c.bufPos++]=d.r;c=this.bprim;c.tmpBuf.array[c.bufPos++]=d.g;c=this.bprim;c.tmpBuf.array[c.bufPos++]=d.b;c=this.bprim;c.tmpBuf.array[c.bufPos++]=d.a;k=1-k;q&&(m=m==b?g-h:2,q=this.bprim,q.tmpIdx[q.idxPos++]=q.startIndex,
q=this.bprim,q.tmpIdx[q.idxPos++]=1+q.startIndex,q=this.bprim,q.tmpIdx[q.idxPos++]=m+q.startIndex,q=this.bprim,q.tmpIdx[q.idxPos++]=m+q.startIndex,q=this.bprim,q.tmpIdx[q.idxPos++]=1+q.startIndex,q=this.bprim,q.tmpIdx[q.idxPos++]=m+1+q.startIndex);h+=2;c=d;d=p}},flush:function(){0!=this.tmpPoints.length&&this.is3D&&(this.flushLine(),this.tmpPoints=[])},sync:function(a){eb.prototype.sync.call(this,a);this.flush();this.bprim.flush()},draw:function(a){this.flush();this.bprim.flush();eb.prototype.draw.call(this,
a)},clear:function(){this.flush();this.bprim.clear()},lineStyle:function(a,b,c){null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);this.flush();0<a&&this.lineSize!=a&&(this.lineSize=a,this.is3D||(this.lineShader.width__=this.lineSize));this.setColor(b,c)},setColor:function(a,b){null==b&&(b=1);this.curA=b;this.curR=(a>>16&255)/255;this.curG=(a>>8&255)/255;this.curB=(a&255)/255},drawLine:function(a,b){this.moveTo(a.x,a.y,a.z);this.lineTo(b.x,b.y,b.z)},moveTo:function(a,b,c){this.is3D?(this.flush(),this.lineTo(a,
b,c)):(this.curX=a,this.curY=b,this.curZ=c)},addVertex:function(a,b,c,d,e,f,g){this.tmpPoints.push(new Mf(a,b,c,d,e,f,g))},lineTo:function(a,b,c){if(this.is3D)this.tmpPoints.push(new Mf(a,b,c,this.curR,this.curG,this.curB,this.curA));else{this.bprim.begin(4,6);var d=a-this.curX,e=b-this.curY,f=c-this.curZ,g=this.curX,h=this.curY,k=this.curZ,l=this.bprim.bounds;g<l.xMin&&(l.xMin=g);g>l.xMax&&(l.xMax=g);h<l.yMin&&(l.yMin=h);h>l.yMax&&(l.yMax=h);k<l.zMin&&(l.zMin=k);k>l.zMax&&(l.zMax=k);g=this.bprim.bounds;
a<g.xMin&&(g.xMin=a);a>g.xMax&&(g.xMax=a);b<g.yMin&&(g.yMin=b);b>g.yMax&&(g.yMax=b);c<g.zMin&&(g.zMin=c);c>g.zMax&&(g.zMax=c);g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curX;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curY;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curZ;g=this.bprim;g.tmpBuf.array[g.bufPos++]=d;g=this.bprim;g.tmpBuf.array[g.bufPos++]=e;g=this.bprim;g.tmpBuf.array[g.bufPos++]=f;g=this.bprim;g.tmpBuf.array[g.bufPos++]=0;g=this.bprim;g.tmpBuf.array[g.bufPos++]=0;g=this.bprim;g.tmpBuf.array[g.bufPos++]=
this.curR;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curG;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curB;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curA;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curX;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curY;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curZ;g=this.bprim;g.tmpBuf.array[g.bufPos++]=d;g=this.bprim;g.tmpBuf.array[g.bufPos++]=e;g=this.bprim;g.tmpBuf.array[g.bufPos++]=f;g=this.bprim;g.tmpBuf.array[g.bufPos++]=0;g=this.bprim;g.tmpBuf.array[g.bufPos++]=
1;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curR;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curG;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curB;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curA;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curX;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curY;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curZ;g=this.bprim;g.tmpBuf.array[g.bufPos++]=d;g=this.bprim;g.tmpBuf.array[g.bufPos++]=e;g=this.bprim;g.tmpBuf.array[g.bufPos++]=f;g=this.bprim;g.tmpBuf.array[g.bufPos++]=
1;g=this.bprim;g.tmpBuf.array[g.bufPos++]=0;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curR;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curG;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curB;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curA;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curX;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curY;g=this.bprim;g.tmpBuf.array[g.bufPos++]=this.curZ;g=this.bprim;g.tmpBuf.array[g.bufPos++]=d;d=this.bprim;d.tmpBuf.array[d.bufPos++]=e;e=this.bprim;e.tmpBuf.array[e.bufPos++]=
f;f=this.bprim;f.tmpBuf.array[f.bufPos++]=1;f=this.bprim;f.tmpBuf.array[f.bufPos++]=1;f=this.bprim;f.tmpBuf.array[f.bufPos++]=this.curR;f=this.bprim;f.tmpBuf.array[f.bufPos++]=this.curG;f=this.bprim;f.tmpBuf.array[f.bufPos++]=this.curB;f=this.bprim;f.tmpBuf.array[f.bufPos++]=this.curA;f=this.bprim;f.tmpIdx[f.idxPos++]=f.startIndex;f=this.bprim;f.tmpIdx[f.idxPos++]=1+f.startIndex;f=this.bprim;f.tmpIdx[f.idxPos++]=2+f.startIndex;f=this.bprim;f.tmpIdx[f.idxPos++]=2+f.startIndex;f=this.bprim;f.tmpIdx[f.idxPos++]=
3+f.startIndex;f=this.bprim;f.tmpIdx[f.idxPos++]=1+f.startIndex;this.curX=a;this.curY=b;this.curZ=c}},__class__:Xh});var Yh=function(a,b){this.hitPoint=new U;this.mouseDownButton=-1;this.cancelEvents=this.propagateEvents=!1;Fa.call(this,b);this.shape=a;this.set_cursor(yd.Button)};p["h3d.scene.Interactive"]=Yh;Yh.__name__="h3d.scene.Interactive";Yh.__interfaces__=[Ch];Yh.__super__=Fa;Yh.prototype=J(Fa.prototype,{onAdd:function(){this.scene=this.getScene();null!=this.scene&&this.scene.addEventTarget(this);
Fa.prototype.onAdd.call(this)},onRemove:function(){null!=this.scene&&(this.scene.removeEventTarget(this),this.scene=null);Fa.prototype.onRemove.call(this)},preventClick:function(){this.mouseDownButton=-1},getInteractiveScene:function(){return this.scene},handleEvent:function(a){this.propagateEvents&&(a.propagate=!0);this.cancelEvents&&(a.cancel=!0);switch(a.kind._hx_index){case 0:if(this.enableRightButton||0==a.button)this.mouseDownButton=a.button,this.onPush(a);break;case 1:if(this.enableRightButton||
0==a.button)if(this.onRelease(a),this.mouseDownButton==a.button)this.onClick(a);this.mouseDownButton=-1;break;case 2:this.onMove(a);break;case 3:this.onOver(a);break;case 4:this.onOut(a);break;case 5:this.onWheel(a);break;case 6:this.onFocus(a);break;case 7:this.onFocusLost(a);break;case 8:this.onKeyDown(a);break;case 9:this.onKeyUp(a);break;case 10:if(this.enableRightButton||0==a.button)if(this.onRelease(a),this.mouseDownButton==a.button)this.onReleaseOutside(a);this.mouseDownButton=-1;break;case 11:this.onTextInput(a);
break;case 12:this.onCheck(a)}},set_cursor:function(a){this.cursor=a;null!=this.scene&&null!=this.scene.events&&this.scene.events.updateCursor(this);return a},focus:function(){null==this.scene||null==this.scene.events||this.scene.events.focus(this)},blur:function(){this.hasFocus()&&this.scene.events.blur()},isOver:function(){return null!=this.scene&&null!=this.scene.events?-1!=this.scene.events.overList.indexOf(this):!1},hasFocus:function(){return null!=this.scene&&null!=this.scene.events?this.scene.events.currentFocus==
this:!1},onOver:function(a){},onOut:function(a){},onPush:function(a){},onRelease:function(a){},onReleaseOutside:function(a){},onClick:function(a){},onMove:function(a){},onWheel:function(a){},onFocus:function(a){},onFocusLost:function(a){},onKeyUp:function(a){},onKeyDown:function(a){},onCheck:function(a){},onTextInput:function(a){},__class__:Yh});var Bj=function(a,b){this.priority=0;this.cullingDistance=-1;Fa.call(this,b);this.shader=a};p["h3d.scene.Light"]=Bj;Bj.__name__="h3d.scene.Light";Bj.__super__=
Fa;Bj.prototype=J(Fa.prototype,{get_color:function(){return new U},set_color:function(a){return a},get_enableSpecular:function(){return!1},set_enableSpecular:function(a){if(a)throw new n("Not implemented for this light");return!1},emit:function(a){a.emitLight(this)},getShadowDirection:function(){return null},__class__:Bj});var Pf=function(){this.drawPasses=0;this.ambientLight=new U(1,1,1)};p["h3d.scene.LightSystem"]=Pf;Pf.__name__="h3d.scene.LightSystem";Pf.prototype={initGlobals:function(a){},cullLights:function(){for(var a=
this.ctx.lights,b=null,c=new vf;null!=a;)c.x=a.absPos._41,c.y=a.absPos._42,c.z=a.absPos._43,c.r=a.cullingDistance,0<a.cullingDistance&&!this.ctx.computingStatic&&!this.ctx.camera.frustum.hasSphere(c)?null==b?this.ctx.lights=a.next:b.next=a.next:(this.lightCount++,a.objectDistance=0,b=a),a=a.next},initLights:function(a){this.lightCount=0;this.ctx=a;this.cullLights();if(null==this.shadowLight||0==(this.shadowLight.flags&32))for(a=a.lights;null!=a;){if(null!=a.getShadowDirection()){this.shadowLight=
a;break}a=a.next}},computeLight:function(a,b){return b},__class__:Pf};var Rc=function(a,b,c){eb.call(this,a,null==b?null:b[0],c);this.materials=null==b?[this.material]:b};p["h3d.scene.MultiMaterial"]=Rc;Rc.__name__="h3d.scene.MultiMaterial";Rc.__super__=eb;Rc.prototype=J(eb.prototype,{getMeshMaterials:function(){return this.materials.slice()},clone:function(a){a=null==a?new Rc(null,this.materials):a;a.materials=[];for(var b=0,c=this.materials;b<c.length;){var d=c[b];++b;a.materials.push(null==d?null:
d.clone())}eb.prototype.clone.call(this,a);a.material=a.materials[0];return a},emit:function(a){for(var b=0,c=this.materials.length;b<c;){var d=b++,e=this.materials[d];if(null!=e)for(e=e.passes;null!=e;)a.emitPass(e,this).index=d,e=e.nextPass}},getMaterialByName:function(a){for(var b=0,c=this.materials;b<c.length;){var d=c[b];++b;if(null!=d&&d.name==a)return d}return eb.prototype.getMaterialByName.call(this,a)},getMaterials:function(a){null==a&&(a=[]);for(var b=0,c=this.materials;b<c.length;){var d=
c[b];++b;null!=d&&0>a.indexOf(d)&&a.push(d)}b=0;for(c=this.children;b<c.length;)d=c[b],++b,d.getMaterials(a);return a},draw:function(a){1<this.materials.length&&this.primitive.selectMaterial(a.drawPass.index);eb.prototype.draw.call(this,a)},__class__:Rc});var Hb={};p["h3d.scene._Object.ObjectFlags_Impl_"]=Hb;Hb.__name__="h3d.scene._Object.ObjectFlags_Impl_";Hb._new=function(a){return a};Hb.toInt=function(a){return a};Hb.has=function(a,b){return 0!=(a&b)};Hb.set=function(a,b,c){return c};var Cj=function(a,
b){this.gid=a;this.value=b};p["h3d.scene._RenderContext.SharedGlobal"]=Cj;Cj.__name__="h3d.scene._RenderContext.SharedGlobal";Cj.prototype={__class__:Cj};var Zh=function(){Fe.call(this);this.cachedShaderList=[];this.cachedPassObjects=[]};p["h3d.scene.RenderContext"]=Zh;Zh.__name__="h3d.scene.RenderContext";Zh.__super__=Fe;Zh.prototype=J(Fe.prototype,{emit:function(a,b,c){null==c&&(c=0);for(a=a.passes;null!=a;)this.emitPass(a,b).index=c,a=a.nextPass},start:function(){this.sharedGlobals=[];this.lights=
this.passes=this.drawPass=this.lights=null;this.cachedPos=0;this.visibleFlag=!0;this.time+=this.elapsedTime;this.frame++},nextPass:function(){this.cachedPos=0;this.drawPass=null},getGlobal:function(a){a=Y.allocID(a);for(var b=0,c=this.sharedGlobals;b<c.length;){var d=c[b];++b;if(d.gid==a)return d.value}return null},setGlobal:function(a,b){this.setGlobalID(Y.allocID(a),b)},setGlobalID:function(a,b){for(var c=0,d=this.sharedGlobals;c<d.length;){var e=d[c];++c;if(e.gid==a){e.value=b;return}}this.sharedGlobals.push(new Cj(a,
b))},emitPass:function(a,b){var c=this.allocPool;null==c?(c=new Rh,c.nextAlloc=this.allocFirst,this.allocFirst=c):this.allocPool=c.nextAlloc;c.pass=a;c.obj=b;c.next=this.passes;return this.passes=c},allocShaderList:function(a,b){var c=this.cachedShaderList[this.cachedPos++];null==c&&(c=new Wb(null),this.cachedShaderList[this.cachedPos-1]=c);c.s=a;c.next=b;return c},emitLight:function(a){a.next=this.lights;this.lights=a},uploadParams:function(){this.currentManager.fillParams(this.shaderBuffers,this.drawPass.shader,
this.drawPass.shaders);this.engine.uploadShaderBuffers(this.shaderBuffers,1);this.engine.uploadShaderBuffers(this.shaderBuffers,2)},done:function(){this.drawPass=null;for(var a=this.allocFirst;null!=a&&a!=this.allocPool;)a.obj=null,a.pass=null,a.shader=null,a.shaders=null,a.next=null,a.index=0,a.texture=0,a=a.nextAlloc;null!=this.allocPool&&(this.allocFirst=this.allocFirst.nextAlloc);this.allocPool=this.allocFirst;for(var a=0,b=this.cachedShaderList;a<b.length;){var c=b[a];++a;c.s=null;c.next=null}this.lights=
this.passes=null},__class__:Zh});var Dj=function(){this.passes=new If};p["h3d.scene.PassObjects"]=Dj;Dj.__name__="h3d.scene.PassObjects";Dj.prototype={__class__:Dj};var Nk=M["h3d.scene.RenderMode"]={__ename__:!0,__constructs__:["Default","LightProbe"],Default:{_hx_index:0,__enum__:"h3d.scene.RenderMode",toString:m},LightProbe:{_hx_index:1,__enum__:"h3d.scene.RenderMode",toString:m}};Nk.__empty_constructs__=[Nk.Default,Nk.LightProbe];var Ve=function(){this.renderMode=Nk.Default;this.effects=[];this.hasSetTarget=
!1;this.emptyPasses=new If;this.allPasses=[];this.passObjects=new ia;this.set_props(this.getDefaultProps())};p["h3d.scene.Renderer"]=Ve;Ve.__name__="h3d.scene.Renderer";Ve.__super__=xf;Ve.prototype=J(xf.prototype,{dispose:function(){for(var a=0,b=this.allPasses;a<b.length;){var c=b[a];++a;c.dispose()}a=0;for(b=this.effects;a<b.length;)c=b[a],++a,c.dispose();this.passObjects=new ia},getPass:function(a){for(var b=0,c=this.allPasses;b<c.length;){var d=c[b];++b;if(Ba.__instanceof(d,a))return d}return null},
getPassByName:function(a){for(var b=0,c=this.allPasses;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null},debugCompileShader:function(a){var b=this.getPassByName(a.name);null==b&&(b=this.defaultPass);b.setContext(this.ctx);return b.compileShader(a)},hasFeature:function(a){return na.CURRENT.driver.hasFeature(a)},getDefaultLight:function(a){return a},getLightSystem:function(){return this.ctx.scene.lightSystem},time:function(a){},depthSort:function(a,b){null==b&&(b=!1);for(var c=this.ctx.camera.m,
d=a.current;null!=d;){var e=d,d=d.next;e.depth=(e.obj.absPos._41*c._13+e.obj.absPos._42*c._23+e.obj.absPos._43*c._33+c._43)/(e.obj.absPos._41*c._14+e.obj.absPos._42*c._24+e.obj.absPos._43*c._34+c._44)}if(b)if(c=a.current,null==c)c=null;else for(var d=1,f=0,g=0,h,k,l,n;;){h=c;n=c=null;for(e=0;null!=h;){++e;k=h;g=f=0;for(l=d;g<l&&!(g++,++f,k=k.next,null==k););for(g=d;0<f||0<g&&null!=k;)0==f?(l=k,k=k.next,--g):0==g||null==k||0>=(h.depth>k.depth?1:-1)?(l=h,h=h.next,--f):(l=k,k=k.next,--g),null!=n?n.next=
l:c=l,n=l;h=k}n.next=null;if(1>=e)break;d*=2}else if(c=a.current,null==c)c=null;else{d=1;for(g=f=0;;){h=c;n=c=null;for(e=0;null!=h;){++e;k=h;g=f=0;for(l=d;g<l&&!(g++,++f,k=k.next,null==k););for(g=d;0<f||0<g&&null!=k;)0==f?(l=k,k=k.next,--g):0==g||null==k||0>=(h.depth>k.depth?-1:1)?(l=h,h=h.next,--f):(l=k,k=k.next,--g),null!=n?n.next=l:c=l,n=l;h=k}n.next=null;if(1>=e)break;d*=2}}a.current=c},clear:function(a,b,c){this.ctx.engine.clear(a,b,c)},allocTarget:function(a,b,c,d){null==c&&(c=1);null==b&&(b=
!0);return this.ctx.textures.allocTarget(a,Math.round(this.ctx.engine.width*c),Math.round(this.ctx.engine.height*c),b,d)},copy:function(a,b,c){fc.run(a,b,c)},setTarget:function(a){this.hasSetTarget&&this.ctx.engine.popTarget();this.ctx.engine.pushTarget(a);this.hasSetTarget=!0},setTargets:function(a){this.hasSetTarget&&this.ctx.engine.popTarget();this.ctx.engine.pushTargets(a);this.hasSetTarget=!0},resetTarget:function(){this.hasSetTarget&&(this.ctx.engine.popTarget(),this.hasSetTarget=!1)},has:function(a){var b=
this.passObjects;return null!=(null!=L[a]?b.getReserved(a):b.h[a])},get:function(a){var b=this.passObjects;a=null!=L[a]?b.getReserved(a):b.h[a];if(null==a)return this.emptyPasses;a.rendered=!0;return a.passes},getSort:function(a,b){null==b&&(b=!1);var c=this.passObjects,c=null!=L[a]?c.getReserved(a):c.h[a];if(null==c)return this.emptyPasses;this.depthSort(c.passes,b);c.rendered=!0;return c.passes},draw:function(a){this.defaultPass.draw(this.get(a))},render:function(){throw new n("Not implemented");
},computeStatic:function(){throw new n("Not implemented");},start:function(){},process:function(a){this.hasSetTarget=!1;for(var b=0,c=this.allPasses;b<c.length;){var d=c[b];++b;d.setContext(this.ctx)}for(b=0;b<a.length;){c=a[b];++b;var d=c.name,e=this.passObjects;null!=L[d]?e.setReserved(d,c):e.h[d]=c}this.ctx.textures.begin();this.ctx.computingStatic?this.computeStatic():this.render();this.resetTarget();for(b=0;b<a.length;)c=a[b],++b,c=c.name,d=this.passObjects,null!=L[c]?d.setReserved(c,null):d.h[c]=
null},__class__:Ve});var hd=function(a,b){null==b&&(b=!0);null==a&&(a=!0);Fa.call(this,null);this.window=Pa.getInstance();this.eventListeners=[];this.hitInteractives=[];this.interactives=[];this.camera=new zg;var c=na.CURRENT;null!=c&&(this.camera.screenRatio=c.width/c.height);this.ctx=new Zh;a&&this.set_renderer(ae.current.createRenderer());b&&(this.lightSystem=ae.current.createLightSystem())};p["h3d.scene.Scene"]=hd;hd.__name__="h3d.scene.Scene";hd.__interfaces__=[Dh,ig];hd.__super__=Fa;hd.prototype=
J(Fa.prototype,{setEvents:function(a){this.events=a},addEventListener:function(a){this.eventListeners.push(a)},removeEventListener:function(a){for(var b=0,c=this.eventListeners;b<c.length;){var d=c[b];++b;if(xa.compareMethods(d,a))return z.remove(this.eventListeners,d),!0}return!1},dispatchListeners:function(a){for(var b=0,c=this.eventListeners;b<c.length;){var d=c[b];++b;d(a);if(!a.propagate)break}},set_renderer:function(a){this.renderer=a;null!=a&&(a.ctx=this.ctx);return a},sortHitPointByCameraDistance:function(a,
b){return a.hitPoint.w>b.hitPoint.w?-1:1},dispatchEvent:function(a,b){b.handleEvent(a)},isInteractiveVisible:function(a){for(;null!=a;){if(0==(a.flags&2))return!1;a=a.parent}return!0},handleEvent:function(a,b){if(0==this.interactives.length)return null;if(0==this.hitInteractives.length){var c=2*(a.relX/this.window.get_width()-0.5),d=2*-(a.relY/this.window.get_height()-0.5),e=this.camera.unproject(c,d,0),c=this.camera.unproject(c,d,1),d=e.x,f=e.y,e=e.z,g=c.x,h=c.y,k=c.z,c=new Xd;c.px=d;c.py=f;c.pz=
e;c.lx=g-d;c.ly=h-f;c.lz=k-e;c.normalize();for(var d=c.px,f=c.py,e=c.pz,g=c.lx,h=c.ly,k=c.lz,l=-2147483648,n=0,m=this.interactives;n<m.length;){var q=m[n];++n;if(!(q.priority<l)){for(var p=q;null!=p&&0!=(p.flags&2);)p=p.parent;if(null==p){var p=q.getInvPos(),r=c.px,s=c.py,u=c.pz,ba=r*p._12+s*p._22+u*p._32+1*p._42,E=r*p._13+s*p._23+u*p._33+1*p._43,r=r*p._11+s*p._21+u*p._31+1*p._41,s=ba,u=E;c.px=r;c.py=s;c.pz=u;r=c.lx;s=c.ly;u=c.lz;ba=r*p._12+s*p._22+u*p._32;E=r*p._13+s*p._23+u*p._33;r=r*p._11+s*p._21+
u*p._31;s=ba;u=E;c.lx=r;c.ly=s;c.lz=u;c.normalize();if(c.lx!=c.lx)c.px=d,c.py=f,c.pz=e,c.lx=g,c.ly=h,c.lz=k;else if(s=q.shape.rayIntersection(c,q.bestMatch),0>s)c.px=d,c.py=f,c.pz=e,c.lx=g,c.ly=h,c.lz=k;else{p=c.px+s*c.lx;r=c.py+s*c.ly;s=c.pz+s*c.lz;c.px=d;c.py=f;c.pz=e;c.lx=g;c.ly=h;c.lz=k;q.hitPoint.x=p;q.hitPoint.y=r;q.hitPoint.z=s;if(q.priority>l){for(;0<this.hitInteractives.length;)this.hitInteractives.pop();l=q.priority}this.hitInteractives.push(q)}}}}if(0==this.hitInteractives.length)return null;
if(1<this.hitInteractives.length){l=0;for(n=this.hitInteractives;l<n.length;){m=n[l];++l;p=m.invPos;q=0;null!=m.preciseShape&&(r=c.px,s=c.py,u=c.pz,ba=r*p._12+s*p._22+u*p._32+1*p._42,E=r*p._13+s*p._23+u*p._33+1*p._43,r=r*p._11+s*p._21+u*p._31+1*p._41,s=ba,u=E,c.px=r,c.py=s,c.pz=u,r=c.lx,s=c.ly,u=c.lz,ba=r*p._12+s*p._22+u*p._32,E=r*p._13+s*p._23+u*p._33,r=r*p._11+s*p._21+u*p._31,s=ba,u=E,c.lx=r,c.ly=s,c.lz=u,c.normalize(),p=m.preciseShape.rayIntersection(c,m.bestMatch),0<p?(r=c.py+p*c.ly,s=c.pz+p*
c.lz,m.hitPoint.x=c.px+p*c.lx,m.hitPoint.y=r,m.hitPoint.z=s):q=1,c.px=d,c.py=f,c.pz=e,c.lx=g,c.ly=h,c.lz=k);var u=m.hitPoint,p=u.x,r=u.y,s=u.z,u=u.w,u=1,ba=m.absPos,E=p*ba._12+r*ba._22+s*ba._32+u*ba._42,C=p*ba._13+r*ba._23+s*ba._33+u*ba._43,p=p*ba._11+r*ba._21+s*ba._31+u*ba._41,r=E,s=C,ba=this.camera.m,s=(p*ba._13+r*ba._23+s*ba._33+u*ba._43)*(1/(p*ba._14+r*ba._24+s*ba._34+u*ba._44));m.hitPoint.w=s+q}this.hitInteractives.sort(K(this,this.sortHitPointByCameraDistance))}this.hitInteractives.unshift(null)}for(;0<
this.hitInteractives.length;){c=this.hitInteractives.pop();if(null==c)break;a.relX=c.hitPoint.x;a.relY=c.hitPoint.y;a.relZ=c.hitPoint.z;c.handleEvent(a);if(a.cancel)a.cancel=!1,a.propagate=!1;else return a.propagate||(this.hitInteractives=[]),c}return null},clone:function(a){a=null==a?new hd:a;a.camera=this.camera.clone();Fa.prototype.clone.call(this,a);return a},dispose:function(){Fa.prototype.dispose.call(this);null!=this.hardwarePass&&(this.hardwarePass.dispose(),this.hardwarePass=null);this.renderer.dispose();
this.set_renderer(new Ve)},addEventTarget:function(a){this.interactives.push(a)},removeEventTarget:function(a){if(z.remove(this.interactives,a)&&null!=this.events)this.events.onRemove(a)},setElapsedTime:function(a){this.ctx.elapsedTime=a},hardwarePick:function(a,b){var c=this,d=na.CURRENT;this.camera.screenRatio=d.width/d.height;this.camera.update();this.ctx.camera=this.camera;this.ctx.engine=d;this.ctx.scene=this;this.ctx.start();var e=this.camera.rayFromScreen(a,b),f,g,h,k,l,n;h=e.px;g=e.py;f=e.pz;
n=e.lx;l=e.ly;k=e.lz;this.iterVisibleMeshes(function(a){if(null!=a.primitive){var b=a.getInvPos(),d=e.px,m=e.py,p=e.pz,t=d*b._12+m*b._22+p*b._32+1*b._42,q=d*b._13+m*b._23+p*b._33+1*b._43,d=d*b._11+m*b._21+p*b._31+1*b._41;e.px=d;e.py=t;e.pz=q;d=e.lx;m=e.ly;p=e.lz;t=d*b._12+m*b._22+p*b._32;q=d*b._13+m*b._23+p*b._33;d=d*b._11+m*b._21+p*b._31;e.lx=d;e.ly=t;e.lz=q;e.normalize();0<=a.primitive.getBounds().rayIntersection(e,!1)&&c.ctx.emitPass(a.material.passes,a);e.px=h;e.py=g;e.pz=f;e.lx=n;e.ly=l;e.lz=
k}});var d=this.ctx.lightSystem=null,m=new If(this.ctx.passes);if(null!=m.current){var p=this.hardwarePass;null==p&&(this.hardwarePass=p=new Th);var q=this.ctx,r={texture:V.fromColor(267386880,0)};q.setGlobalID(Y.allocID("depthMap"),r);p.pickX=a;p.pickY=b;p.setContext(this.ctx);p.draw(m);if(0<=p.pickedIndex)for(m=m.current;null!=m;)if(q=m,m=m.next,0==p.pickedIndex--){d=q.obj;break}}this.ctx.done();this.ctx.camera=null;this.ctx.engine=null;this.ctx.scene=null;return d},syncOnly:function(a){var b=na.CURRENT;
this.setElapsedTime(a);a=b.getCurrentTarget();this.camera.screenRatio=null==a?b.width/b.height:a.width/a.height;this.camera.update();this.ctx.camera=this.camera;this.ctx.engine=b;this.ctx.scene=this;this.ctx.start();this.syncRec(this.ctx);this.ctx.camera=null;this.ctx.engine=null;this.ctx.scene=null},computeStatic:function(){var a=this.ctx.elapsedTime;this.ctx.elapsedTime=0;this.ctx.computingStatic=!0;this.render(na.CURRENT);this.ctx.computingStatic=!1;this.ctx.elapsedTime=a},render:function(a){if(0==
(this.flags&32))this.onAdd();var b=a.getCurrentTarget();this.camera.screenRatio=null==b?a.width/a.height:b.width/b.height;this.camera.update();this.camera.rightHanded&&a.driver.setRenderFlag(Kk.CameraHandness,1);this.ctx.camera=this.camera;this.ctx.engine=a;this.ctx.scene=this;this.ctx.start();this.renderer.start();this.syncRec(this.ctx);this.emitRec(this.ctx);b=this.ctx.passes;if(null==b)b=null;else for(var c=1,d,e=0,f=0,g,h,k,l;;){g=b;l=b=null;for(d=0;null!=g;){++d;h=g;f=e=0;for(k=c;f<k&&!(f++,
++e,h=h.next,null==h););for(f=c;0<e||0<f&&null!=h;)0==e?(k=h,h=h.next,--f):0==f||null==h||0>=g.pass.passId-h.pass.passId?(k=g,g=g.next,--e):(k=h,h=h.next,--f),null!=l?l.next=k:b=k,l=k;g=h}l.next=null;if(1>=d)break;c*=2}this.ctx.passes=b;c=this.ctx.passes;d=[];for(b=-1;null!=c;){g=c.pass.passId;e=c;for(h=null;null!=e&&e.pass.passId==g;)h=e,e=e.next;h.next=null;g=this.ctx.cachedPassObjects[++b];null==g&&(g=new Dj,this.ctx.cachedPassObjects[b]=g);g.name=c.pass.name;h=g.passes;h.current=c;h.discarded=
h.lastDisc=null;d.push(g);c=e}null!=this.lightSystem&&(this.ctx.lightSystem=this.lightSystem,this.lightSystem.initLights(this.ctx));this.renderer.process(d);this.camera.rightHanded&&a.driver.setRenderFlag(Kk.CameraHandness,0);this.ctx.done();this.ctx.scene=null;this.ctx.camera=null;this.ctx.engine=null;for(a=0;a<b;)c=a++,c=this.ctx.cachedPassObjects[c],c.name=null,c=c.passes,c.current=null,c.discarded=c.lastDisc=null},serializeScene:function(){throw new n("You need -lib hxbit to serialize the scene data");
},__class__:hd});var tf=function(a,b){Fa.call(this,null);this.name=b.name;this.parent=this.skin=a;this.index=b.index};p["h3d.scene.Joint"]=tf;tf.__name__="h3d.scene.Joint";tf.__super__=Fa;tf.prototype=J(Fa.prototype,{getObjectByName:function(a){var b=this.skin.getSkinData(),c=b.namedJoints;a=null!=L[a]?c.getReserved(a):c.h[a];if(null==a)return null;b=b.allJoints[this.index];if(b.index!=this.index)throw new n("assert");for(c=a.parent;null!=c;){if(c==b)return b=new tf(this.skin,a),b.parent=this,b;c=
c.parent}return null},syncPos:function(){for(var a=this.parent;null!=a;){if(0!=(a.flags&1)){null==this.skin.jointsAbsPosInv&&(this.skin.jointsAbsPosInv=new R,this.skin.jointsAbsPosInv.zero());0==this.skin.jointsAbsPosInv._44&&this.skin.jointsAbsPosInv.inverse3x4(this.parent.absPos);this.parent.syncPos();this.lastFrame=-1;break}a=a.parent}this.lastFrame!=this.skin.lastFrame&&(this.lastFrame=this.skin.lastFrame,this.absPos.load(this.skin.currentAbsPose[this.index]),null!=this.skin.jointsAbsPosInv&&
0!=this.skin.jointsAbsPosInv._44&&(this.absPos.multiply3x4(this.absPos,this.skin.jointsAbsPosInv),this.absPos.multiply3x4(this.absPos,this.parent.absPos)))},__class__:tf});var Lg=function(a,b,c){Rc.call(this,null,b,c);null!=a&&this.setSkinData(a)};p["h3d.scene.Skin"]=Lg;Lg.__name__="h3d.scene.Skin";Lg.__super__=Rc;Lg.prototype=J(Rc.prototype,{clone:function(a){a=null==a?new Lg(null,this.materials.slice()):a;Rc.prototype.clone.call(this,a);a.setSkinData(this.skinData);a.currentRelPose=this.currentRelPose.slice();
return a},getBoundsRec:function(a){a=Rc.prototype.getBoundsRec.call(this,a);var b=this.primitive.getBounds(),c=new tb;c.xMin=b.xMin;c.xMax=b.xMax;c.yMin=b.yMin;c.yMax=b.yMax;c.zMin=b.zMin;c.zMax=b.zMax;b=this.skinData.allJoints[0];if(null!=b&&null==b.parent){var d=this.absPos.clone(),e=this.currentRelPose[b.index];null!=e?d.multiply3x4(e,d):d.multiply3x4(b.defMat,d);null!=b.transPos&&d.multiply3x4(b.transPos,d);c.transform(d)}else c.transform(this.absPos);c.xMin<a.xMin&&(a.xMin=c.xMin);c.xMax>a.xMax&&
(a.xMax=c.xMax);c.yMin<a.yMin&&(a.yMin=c.yMin);c.yMax>a.yMax&&(a.yMax=c.yMax);c.zMin<a.zMin&&(a.zMin=c.zMin);c.zMax>a.zMax&&(a.zMax=c.zMax);return a},getObjectByName:function(a){if(null!=this.skinData&&this.skinData.name==a)return this;var b=Rc.prototype.getObjectByName.call(this,a);return null!=b?b:null!=this.skinData&&(b=this.skinData.namedJoints,a=null!=L[a]?b.getReserved(a):b.h[a],null!=a)?new tf(this,a):null},getLocalCollider:function(){throw new n("Not implemented");},getGlobalCollider:function(){var a=
Ba.__cast(this.primitive.getCollider(),Bg);Ba.__cast(this.primitive,Jg).loadSkin(this.skinData);return new Hh(this,Ba.__cast(a.b,wf))},calcAbsPos:function(){Rc.prototype.calcAbsPos.call(this);this.jointsUpdated=!0},getSkinData:function(){return this.skinData},setSkinData:function(a,b){null==b&&(b=!0);this.skinData=a;this.jointsUpdated=!0;this.primitive=a.primitive;if(b){for(var c=!1,d=0,e=this.materials;d<e.length;){var f=e[d];++d;if(null!=f&&null!=f.get_normalMap()){c=!0;break}}this.skinShader=c?
new Qf:new Rf;c=0;if(null!=this.skinData.splitJoints){d=0;for(e=this.skinData.splitJoints;d<e.length;)f=e[d],++d,f.joints.length>c&&(c=f.joints.length)}else c=this.skinData.boundJoints.length;this.skinShader.MaxBones__<c&&(d=this.skinShader,d.constModified=!0,d.MaxBones__=c);c=0;for(d=this.materials;c<d.length;)e=d[c],++c,null!=e&&(null!=e.get_normalMap()?e.passes.addShaderAtIndex(this.skinShader,e.passes.getShaderIndex(e.normalShader)+1):e.passes.addShader(this.skinShader),null!=this.skinData.splitJoints&&
e.passes.set_dynamicParameters(!0))}this.currentRelPose=[];this.currentAbsPose=[];this.currentPalette=[];this.paletteChanged=!0;c=0;for(d=this.skinData.allJoints;c<d.length;)++c,this.currentAbsPose.push(R.I());c=0;for(d=this.skinData.boundJoints.length;c<d;)c++,this.currentPalette.push(R.I());if(null!=this.skinData.splitJoints){this.splitPalette=[];c=0;for(d=this.skinData.splitJoints;c<d.length;){var g=d[c];++c;for(var e=this.splitPalette,f=[],h=0,g=g.joints;h<g.length;){var k=g[h];++h;f.push(this.currentPalette[k.bindIndex])}e.push(f)}}else this.splitPalette=
null},sync:function(a){(a.visibleFlag||0!=(this.flags&64))&&this.syncJoints()},syncJoints:function(){if(this.jointsUpdated){for(var a=0,b=this.skinData.allJoints;a<b.length;){var c=b[a];++a;var d=c.index,e=this.currentAbsPose[d],f=this.currentRelPose[d],d=c.bindIndex;null==f?f=c.defMat:c.retargetAnim&&(f._41=c.defMat._41,f._42=c.defMat._42,f._43=c.defMat._43);if(null==c.parent)var g=this.absPos,h=f._11,k=f._12,l=f._13,n=f._21,m=f._22,p=f._23,q=f._31,r=f._32,s=f._33,u=f._41,ba=f._42,f=f._43,w=g._11,
C=g._12,v=g._13,y=g._21,z=g._22,B=g._23,D=g._31,G=g._32,H=g._33,J=g._41,I=g._42;else g=this.currentAbsPose[c.parent.index],h=f._11,k=f._12,l=f._13,n=f._21,m=f._22,p=f._23,q=f._31,r=f._32,s=f._33,u=f._41,ba=f._42,f=f._43,w=g._11,C=g._12,v=g._13,y=g._21,z=g._22,B=g._23,D=g._31,G=g._32,H=g._33,J=g._41,I=g._42;g=g._43;e._11=h*w+k*y+l*D;e._12=h*C+k*z+l*G;e._13=h*v+k*B+l*H;e._14=0;e._21=n*w+m*y+p*D;e._22=n*C+m*z+p*G;e._23=n*v+m*B+p*H;e._24=0;e._31=q*w+r*y+s*D;e._32=q*C+r*z+s*G;e._33=q*v+r*B+s*H;e._34=0;
e._41=u*w+ba*y+f*D+J;e._42=u*C+ba*z+f*G+I;e._43=u*v+ba*B+f*H+g;e._44=1;0<=d&&(d=this.currentPalette[d],ba=c.transPos,c=ba._11,h=ba._12,k=ba._13,l=ba._21,n=ba._22,m=ba._23,p=ba._31,q=ba._32,r=ba._33,s=ba._41,u=ba._42,ba=ba._43,f=e._11,g=e._12,w=e._13,C=e._21,v=e._22,y=e._23,z=e._31,B=e._32,D=e._33,G=e._41,H=e._42,e=e._43,d._11=c*f+h*C+k*z,d._12=c*g+h*v+k*B,d._13=c*w+h*y+k*D,d._14=0,d._21=l*f+n*C+m*z,d._22=l*g+n*v+m*B,d._23=l*w+n*y+m*D,d._24=0,d._31=p*f+q*C+r*z,d._32=p*g+q*v+r*B,d._33=p*w+q*y+r*D,d._34=
0,d._41=s*f+u*C+ba*z+G,d._42=s*g+u*v+ba*B+H,d._43=s*w+u*y+ba*D+e,d._44=1)}this.skinShader.bonesMatrixes__=this.currentPalette;null!=this.jointsAbsPosInv&&(this.jointsAbsPosInv._44=0);this.jointsUpdated=!1}},emit:function(a){if(null==this.splitPalette)Rc.prototype.emit.call(this,a);else for(var b=0,c=this.splitPalette.length;b<c;){var d=b++,e=this.materials[this.skinData.splitJoints[d].material];if(null!=e)for(e=e.passes;null!=e;)a.emitPass(e,this).index=d,e=e.nextPass}if(this.showJoints){null==this.jointsGraphics&&
(this.jointsGraphics=new Xh(this),this.jointsGraphics.material.passes.depth(!1,Xb.Always),this.jointsGraphics.material.passes.setPassName("add"));for(a=this;null!=a.parent;)a=a.parent;this.jointsGraphics.set_follow(a);a=this.jointsGraphics;a.clear();b=0;for(c=this.skinData.allJoints;b<c.length;){d=c[b];++b;var e=this.currentAbsPose[d.index],f=null==d.parent?this.absPos:this.currentAbsPose[d.parent.index];a.lineStyle(1,null==d.parent?-16776961:-256);a.moveTo(f._41,f._42,f._43);a.lineTo(e._41,e._42,
e._43)}}else null!=this.jointsGraphics&&(a=this.jointsGraphics,null!=a&&null!=a.parent&&a.parent.removeChild(a),this.jointsGraphics=null)},draw:function(a){if(null==this.splitPalette)Rc.prototype.draw.call(this,a);else{var b=a.drawPass.index;this.skinShader.bonesMatrixes__=this.splitPalette[b];this.primitive.selectMaterial(b);a.uploadParams();this.primitive.render(a.engine)}},__class__:Lg});var Nh=function(){this.perPixelLighting=!0;this.maxLightsPerObject=6;Pf.call(this);var a=this.ambientLight;
a.x=0.5;a.y=0.5;a.z=0.5;a.w=1;this.ambientShader=new od;this.set_additiveLighting(!0)};p["h3d.scene.fwd.LightSystem"]=Nh;Nh.__name__="h3d.scene.fwd.LightSystem";Nh.__super__=Pf;Nh.prototype=J(Pf.prototype,{get_additiveLighting:function(){var a=this.ambientShader;return(a instanceof od?a:null).additive__},set_additiveLighting:function(a){var b=this.ambientShader,b=b instanceof od?b:null;b.constModified=!0;return b.additive__=a},initLights:function(a){Pf.prototype.initLights.call(this,a);if(this.lightCount<=
this.maxLightsPerObject){var b=a.lights,c=K(this,this.sortLight);if(null==b)b=null;else for(var d=1,e,f=0,g=0,h,k,l,n;;){h=b;n=b=null;for(e=0;null!=h;){++e;k=h;g=f=0;for(l=d;g<l&&!(g++,++f,k=k.next,null==k););for(g=d;0<f||0<g&&null!=k;)0==f?(l=k,k=k.next,--g):0==g||null==k||0>=c(h,k)?(l=h,h=h.next,--f):(l=k,k=k.next,--g),null!=n?n.next=l:b=l,n=l;h=k}n.next=null;if(1>=e)break;d*=2}a.lights=b}},initGlobals:function(a){a.set("global.ambientLight",this.ambientLight);a.set("global.perPixelLighting",this.perPixelLighting)},
sortLight:function(a,b){var c=a.priority-b.priority;return 0!=c?-c:a.objectDistance<b.objectDistance?-1:1},computeLight:function(a,b){if(this.lightCount>this.maxLightsPerObject){for(var c=this.ctx.lights;null!=c;){if(0!=(a.flags&16))var d=c.absPos._41-this.ctx.camera.target.x,e=c.absPos._42-this.ctx.camera.target.y,f=c.absPos._43-this.ctx.camera.target.z;else d=c.absPos._41-a.absPos._41,e=c.absPos._42-a.absPos._42,f=c.absPos._43-a.absPos._43;c.objectDistance=d*d+e*e+f*f;c=c.next}c=this.ctx.lights;
d=K(this,this.sortLight);if(null==c)c=null;else for(var e=1,g=0,h=0,k,l,n,m;;){k=c;m=c=null;for(f=0;null!=k;){++f;l=k;h=g=0;for(n=e;h<n&&!(h++,++g,l=l.next,null==l););for(h=e;0<g||0<h&&null!=l;)0==g?(n=l,l=l.next,--h):0==h||null==l||0>=d(k,l)?(n=k,k=k.next,--g):(n=l,l=l.next,--h),null!=m?m.next=n:c=n,m=n;k=l}m.next=null;if(1>=f)break;e*=2}this.ctx.lights=c}b=this.ctx.allocShaderList(this.ambientShader,b);c=this.ctx.lights;for(d=0;null!=c&&d++!=this.maxLightsPerObject;)b=this.ctx.allocShaderList(c.shader,
b),c=c.next;return b},__class__:Nh});var $h=function(){this.enableSky=!1;Xa.call(this,"depth");this.depthMapId=Y.allocID("depthMap")};p["h3d.scene.fwd.DepthPass"]=$h;$h.__name__="h3d.scene.fwd.DepthPass";$h.__super__=Xa;$h.prototype=J(Xa.prototype,{getOutputs:function(){return[Bc.PackFloat(Bc.Value("output.depth"))]},draw:function(a){var b=this.ctx.textures.allocTarget("depthMap",this.ctx.engine.width,this.ctx.engine.height,!0);this.ctx.engine.pushTarget(b);this.ctx.engine.clear(this.enableSky?0:
16711680,1);Xa.prototype.draw.call(this,a);this.ctx.engine.popTarget();this.ctx.setGlobalID(this.depthMapId,{texture:b})},__class__:$h});var ai=function(){Xa.call(this,"normal");this.normalMapId=Y.allocID("normalMap")};p["h3d.scene.fwd.NormalPass"]=ai;ai.__name__="h3d.scene.fwd.NormalPass";ai.__super__=Xa;ai.prototype=J(Xa.prototype,{getOutputs:function(){return[Bc.PackNormal(Bc.Value("output.normal"))]},draw:function(a){var b=this.ctx.textures.allocTarget("normalMap",this.ctx.engine.width,this.ctx.engine.height);
this.ctx.engine.pushTarget(b);this.ctx.engine.clear(8421504,1);Xa.prototype.draw.call(this,a);this.ctx.engine.popTarget();this.ctx.setGlobalID(this.normalMapId,b)},__class__:ai});var Mh=function(){this.shadow=new Sh(1024);this.normal=new ai;this.depth=new $h;Ve.call(this);this.defaultPass=new Xa("default");this.allPasses=[this.defaultPass,this.depth,this.normal,this.shadow]};p["h3d.scene.fwd.Renderer"]=Mh;Mh.__name__="h3d.scene.fwd.Renderer";Mh.__super__=Ve;Mh.prototype=J(Ve.prototype,{get_def:function(){return this.defaultPass},
renderPass:function(a,b){a.draw(b)},render:function(){this.has("shadow")&&this.renderPass(this.shadow,this.get("shadow"));this.has("depth")&&this.renderPass(this.depth,this.get("depth"));this.has("normal")&&this.renderPass(this.normal,this.get("normal"));this.renderPass(this.defaultPass,this.getSort("default",!0));this.renderPass(this.defaultPass,this.getSort("alpha"));this.renderPass(this.defaultPass,this.get("additive"))},__class__:Mh});var od=function(){Q.call(this)};p["h3d.shader.AmbientLight"]=
od;od.__name__="h3d.shader.AmbientLight";od.__super__=Q;od.prototype=J(Q.prototype,{get_additive:function(){return this.additive__},set_additive:function(a){this.constModified=!0;return this.additive__=a},updateConstants:function(a){this.constBits=0;this.additive__&&(this.constBits|=2);this.updateConstantsFinal(a)},getParamValue:function(a){return 0==a?this.additive__:null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(od.prototype);a.shader=this.shader;a.additive__=
this.additive__;return a},__class__:od});var qf=function(){this.viewport__=new U;this.halfPixelInverse__=new U;this.uvPos__=new U;this.filterMatrixB__=new U;this.filterMatrixA__=new U;this.absoluteMatrixB__=new U;this.absoluteMatrixA__=new U;this.color__=new U;this.zValue__=0;Q.call(this)};p["h3d.shader.Base2d"]=qf;qf.__name__="h3d.shader.Base2d";qf.__super__=Q;qf.prototype=J(Q.prototype,{get_zValue:function(){return this.zValue__},set_zValue:function(a){return this.zValue__=a},get_texture:function(){return this.texture__},
set_texture:function(a){return this.texture__=a},get_isRelative:function(){return this.isRelative__},set_isRelative:function(a){this.constModified=!0;return this.isRelative__=a},get_color:function(){return this.color__},set_color:function(a){return this.color__=a},get_absoluteMatrixA:function(){return this.absoluteMatrixA__},set_absoluteMatrixA:function(a){return this.absoluteMatrixA__=a},get_absoluteMatrixB:function(){return this.absoluteMatrixB__},set_absoluteMatrixB:function(a){return this.absoluteMatrixB__=
a},get_filterMatrixA:function(){return this.filterMatrixA__},set_filterMatrixA:function(a){return this.filterMatrixA__=a},get_filterMatrixB:function(){return this.filterMatrixB__},set_filterMatrixB:function(a){return this.filterMatrixB__=a},get_hasUVPos:function(){return this.hasUVPos__},set_hasUVPos:function(a){this.constModified=!0;return this.hasUVPos__=a},get_uvPos:function(){return this.uvPos__},set_uvPos:function(a){return this.uvPos__=a},get_killAlpha:function(){return this.killAlpha__},set_killAlpha:function(a){this.constModified=
!0;return this.killAlpha__=a},get_pixelAlign:function(){return this.pixelAlign__},set_pixelAlign:function(a){this.constModified=!0;return this.pixelAlign__=a},get_halfPixelInverse:function(){return this.halfPixelInverse__},set_halfPixelInverse:function(a){return this.halfPixelInverse__=a},get_viewport:function(){return this.viewport__},set_viewport:function(a){return this.viewport__=a},updateConstants:function(a){this.constBits=0;this.isRelative__&&(this.constBits|=1);this.hasUVPos__&&(this.constBits|=
2);this.killAlpha__&&(this.constBits|=4);this.pixelAlign__&&(this.constBits|=8);this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.zValue__;case 1:return this.texture__;case 2:return this.isRelative__;case 3:return this.color__;case 4:return this.absoluteMatrixA__;case 5:return this.absoluteMatrixB__;case 6:return this.filterMatrixA__;case 7:return this.filterMatrixB__;case 8:return this.hasUVPos__;case 9:return this.uvPos__;case 10:return this.killAlpha__;case 11:return this.pixelAlign__;
case 12:return this.halfPixelInverse__;case 13:return this.viewport__}return null},getParamFloatValue:function(a){return 0==a?this.zValue__:0},clone:function(){var a=Object.create(qf.prototype);a.shader=this.shader;a.zValue__=this.zValue__;a.texture__=this.texture__;a.isRelative__=this.isRelative__;a.color__=this.color__;a.absoluteMatrixA__=this.absoluteMatrixA__;a.absoluteMatrixB__=this.absoluteMatrixB__;a.filterMatrixA__=this.filterMatrixA__;a.filterMatrixB__=this.filterMatrixB__;a.hasUVPos__=this.hasUVPos__;
a.uvPos__=this.uvPos__;a.killAlpha__=this.killAlpha__;a.pixelAlign__=this.pixelAlign__;a.halfPixelInverse__=this.halfPixelInverse__;a.viewport__=this.viewport__;return a},__class__:qf});var zf=function(){this.specularColor__=new U;this.specularPower__=this.specularAmount__=0;this.color__=new U;Q.call(this);var a=this.color__;a.x=1;a.y=1;a.z=1;a.w=1;a=this.specularColor__;a.x=1;a.y=1;a.z=1;a.w=1;this.specularPower__=50;this.specularAmount__=1};p["h3d.shader.BaseMesh"]=zf;zf.__name__="h3d.shader.BaseMesh";
zf.__super__=Q;zf.prototype=J(Q.prototype,{get_color:function(){return this.color__},set_color:function(a){return this.color__=a},get_specularPower:function(){return this.specularPower__},set_specularPower:function(a){return this.specularPower__=a},get_specularAmount:function(){return this.specularAmount__},set_specularAmount:function(a){return this.specularAmount__=a},get_specularColor:function(){return this.specularColor__},set_specularColor:function(a){return this.specularColor__=a},updateConstants:function(a){this.constBits=
0;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.color__;case 1:return this.specularPower__;case 2:return this.specularAmount__;case 3:return this.specularColor__}return null},getParamFloatValue:function(a){switch(a){case 1:return this.specularPower__;case 2:return this.specularAmount__}return 0},clone:function(){var a=Object.create(zf.prototype);a.shader=this.shader;a.color__=this.color__;a.specularPower__=this.specularPower__;a.specularAmount__=this.specularAmount__;
a.specularColor__=this.specularColor__;return a},__class__:zf});var Ef=function(){this.cubeDir__=new R;this.fixedColor__=new U;this.pixel__=new U;this.offsets__=[];this.values__=[];this.Quality__=0;this.cameraInverseViewProj__=new R;bb.call(this)};p["h3d.shader.Blur"]=Ef;Ef.__name__="h3d.shader.Blur";Ef.__super__=bb;Ef.prototype=J(bb.prototype,{get_cameraInverseViewProj:function(){return this.cameraInverseViewProj__},set_cameraInverseViewProj:function(a){return this.cameraInverseViewProj__=a},get_texture:function(){return this.texture__},
set_texture:function(a){return this.texture__=a},get_depthTexture:function(){return this.depthTexture__},set_depthTexture:function(a){return this.depthTexture__=a},get_Quality:function(){return this.Quality__},set_Quality:function(a){this.constModified=!0;return this.Quality__=a},get_isDepth:function(){return this.isDepth__},set_isDepth:function(a){this.constModified=!0;return this.isDepth__=a},get_values:function(){return this.values__},set_values:function(a){return this.values__=a},get_offsets:function(){return this.offsets__},
set_offsets:function(a){return this.offsets__=a},get_pixel:function(){return this.pixel__},set_pixel:function(a){return this.pixel__=a},get_hasFixedColor:function(){return this.hasFixedColor__},set_hasFixedColor:function(a){this.constModified=!0;return this.hasFixedColor__=a},get_smoothFixedColor:function(){return this.smoothFixedColor__},set_smoothFixedColor:function(a){this.constModified=!0;return this.smoothFixedColor__=a},get_fixedColor:function(){return this.fixedColor__},set_fixedColor:function(a){return this.fixedColor__=
a},get_isDepthDependant:function(){return this.isDepthDependant__},set_isDepthDependant:function(a){this.constModified=!0;return this.isDepthDependant__=a},get_hasNormal:function(){return this.hasNormal__},set_hasNormal:function(a){this.constModified=!0;return this.hasNormal__=a},get_normalTexture:function(){return this.normalTexture__},set_normalTexture:function(a){return this.normalTexture__=a},get_isCube:function(){return this.isCube__},set_isCube:function(a){this.constModified=!0;return this.isCube__=
a},get_cubeTexture:function(){return this.cubeTexture__},set_cubeTexture:function(a){return this.cubeTexture__=a},get_cubeDir:function(){return this.cubeDir__},set_cubeDir:function(a){return this.cubeDir__=a},updateConstants:function(a){this.constBits=0;var b=this.Quality__;if(0!=b>>>8)throw new n("Quality is out of range "+b+">255");this.constBits|=b;this.isDepth__&&(this.constBits|=256);this.hasFixedColor__&&(this.constBits|=512);this.smoothFixedColor__&&(this.constBits|=1024);this.isDepthDependant__&&
(this.constBits|=2048);this.hasNormal__&&(this.constBits|=4096);this.isCube__&&(this.constBits|=8192);this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.flipY__;case 1:return this.cameraInverseViewProj__;case 2:return this.texture__;case 3:return this.depthTexture__;case 4:return this.Quality__;case 5:return this.isDepth__;case 6:return this.values__;case 7:return this.offsets__;case 8:return this.pixel__;case 9:return this.hasFixedColor__;case 10:return this.smoothFixedColor__;
case 11:return this.fixedColor__;case 12:return this.isDepthDependant__;case 13:return this.hasNormal__;case 14:return this.normalTexture__;case 15:return this.isCube__;case 16:return this.cubeTexture__;case 17:return this.cubeDir__}return null},getParamFloatValue:function(a){return 0==a?this.flipY__:0},clone:function(){var a=Object.create(Ef.prototype);a.shader=this.shader;a.flipY__=this.flipY__;a.cameraInverseViewProj__=this.cameraInverseViewProj__;a.texture__=this.texture__;a.depthTexture__=this.depthTexture__;
a.Quality__=this.Quality__;a.isDepth__=this.isDepth__;a.values__=this.values__;a.offsets__=this.offsets__;a.pixel__=this.pixel__;a.hasFixedColor__=this.hasFixedColor__;a.smoothFixedColor__=this.smoothFixedColor__;a.fixedColor__=this.fixedColor__;a.isDepthDependant__=this.isDepthDependant__;a.hasNormal__=this.hasNormal__;a.normalTexture__=this.normalTexture__;a.isCube__=this.isCube__;a.cubeTexture__=this.cubeTexture__;a.cubeDir__=this.cubeDir__;return a},__class__:Ef});var bi=function(a){this.globals=
new Float32Array(a.globalsSize<<2);this.params=new Float32Array(a.paramsSize<<2);this.tex=Array(a.texturesCount);this.buffers=0<a.bufferCount?Array(a.bufferCount):null};p["h3d.shader.ShaderBuffers"]=bi;bi.__name__="h3d.shader.ShaderBuffers";bi.prototype={grow:function(a){var b=a.globalsSize<<2,c=a.paramsSize<<2,d=a.texturesCount;a=a.bufferCount;this.globals.length<b&&(this.globals=new Float32Array(b));this.params.length<c&&(this.params=new Float32Array(c));this.tex.length<d&&(this.tex=Array(d));if(0<
a&&(null==this.buffers||this.buffers.length<a))this.buffers=Array(a)},__class__:bi};var wg=function(a){this.vertex=new bi(a.vertex);this.fragment=new bi(a.fragment)};p["h3d.shader.Buffers"]=wg;wg.__name__="h3d.shader.Buffers";wg.prototype={grow:function(a){this.vertex.grow(a.vertex);this.fragment.grow(a.fragment)},__class__:wg};var De=function(a){null==a&&(a=0);this.color__=new U;Q.call(this);var b=this.color__;b.x=(a>>16&255)/255;b.y=(a>>8&255)/255;b.z=(a&255)/255;b.w=(a>>>24)/255};p["h3d.shader.ColorAdd"]=
De;De.__name__="h3d.shader.ColorAdd";De.__super__=Q;De.prototype=J(Q.prototype,{get_color:function(){return this.color__},set_color:function(a){return this.color__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){return 0==a?this.color__:null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(De.prototype);a.shader=this.shader;a.color__=this.color__;return a},__class__:De});var xd=function(a){null==a&&(a=0);this.colorKey__=
new U;Q.call(this);var b=this.colorKey__;b.x=(a>>16&255)/255;b.y=(a>>8&255)/255;b.z=(a&255)/255;b.w=(a>>>24)/255};p["h3d.shader.ColorKey"]=xd;xd.__name__="h3d.shader.ColorKey";xd.__super__=Q;xd.prototype=J(Q.prototype,{get_colorKey:function(){return this.colorKey__},set_colorKey:function(a){return this.colorKey__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){return 0==a?this.colorKey__:null},getParamFloatValue:function(a){return 0},clone:function(){var a=
Object.create(xd.prototype);a.shader=this.shader;a.colorKey__=this.colorKey__;return a},__class__:xd});var Ee=function(a){this.matrix__=new R;Q.call(this);null!=a?this.matrix__.loadValues(a):this.matrix__.identity()};p["h3d.shader.ColorMatrix"]=Ee;Ee.__name__="h3d.shader.ColorMatrix";Ee.__super__=Q;Ee.prototype=J(Q.prototype,{get_matrix:function(){return this.matrix__},set_matrix:function(a){return this.matrix__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){return 0==
a?this.matrix__:null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(Ee.prototype);a.shader=this.shader;a.matrix__=this.matrix__;return a},__class__:Ee});var Kf=function(){this.shadowPower__=this.shadowBias__=0;this.shadowProj__=new R;this.shadowMapChannel__=jb.Unknown;Q.call(this)};p["h3d.shader.DirShadow"]=Kf;Kf.__name__="h3d.shader.DirShadow";Kf.__super__=Q;Kf.prototype=J(Q.prototype,{get_enable:function(){return this.enable__},set_enable:function(a){this.constModified=
!0;return this.enable__=a},get_shadowMap:function(){return this.shadowMap__},set_shadowMap:function(a){this.constModified=!0;return this.shadowMap__=a},get_shadowMapChannel:function(){return this.shadowMapChannel__},set_shadowMapChannel:function(a){this.constModified=!0;return this.shadowMapChannel__=a},get_shadowProj:function(){return this.shadowProj__},set_shadowProj:function(a){return this.shadowProj__=a},get_shadowPower:function(){return this.shadowPower__},set_shadowPower:function(a){return this.shadowPower__=
a},get_shadowBias:function(){return this.shadowBias__},set_shadowBias:function(a){return this.shadowBias__=a},updateConstants:function(a){this.constBits=0;this.enable__&&(this.constBits|=1);if(null==this.shadowMap__)this.shadowMapChannel__=jb.Unknown;else if(this.shadowMapChannel__==jb.Unknown)if(this.shadowMap__.format==V.nativeFormat)this.shadowMapChannel__=jb.PackedFloat;else throw new n("shadowMapChannel is not set");this.constBits|=(a.allocChannelID(this.shadowMap__)<<3|this.shadowMapChannel__._hx_index)<<
1;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.enable__;case 1:return this.shadowMap__;case 2:return this.shadowProj__;case 3:return this.shadowPower__;case 4:return this.shadowBias__}return null},getParamFloatValue:function(a){switch(a){case 3:return this.shadowPower__;case 4:return this.shadowBias__}return 0},clone:function(){var a=Object.create(Kf.prototype);a.shader=this.shader;a.enable__=this.enable__;a.shadowMap__=this.shadowMap__;a.shadowProj__=this.shadowProj__;
a.shadowPower__=this.shadowPower__;a.shadowBias__=this.shadowBias__;return a},__class__:Kf});var Nf=function(a,b){null==b&&(b=1);null==a&&(a=1.5);this.lengthScale__=this.width__=0;Q.call(this);this.width__=a;this.lengthScale__=b};p["h3d.shader.LineShader"]=Nf;Nf.__name__="h3d.shader.LineShader";Nf.__super__=Q;Nf.prototype=J(Q.prototype,{get_lengthScale:function(){return this.lengthScale__},set_lengthScale:function(a){return this.lengthScale__=a},get_width:function(){return this.width__},set_width:function(a){return this.width__=
a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.lengthScale__;case 1:return this.width__}return null},getParamFloatValue:function(a){switch(a){case 0:return this.lengthScale__;case 1:return this.width__}return 0},clone:function(){var a=Object.create(Nf.prototype);a.shader=this.shader;a.lengthScale__=this.lengthScale__;a.width__=this.width__;return a},__class__:Nf});var Jf=function(){bb.call(this)};p["h3d.shader.MinMaxShader"]=
Jf;Jf.__name__="h3d.shader.MinMaxShader";Jf.__super__=bb;Jf.prototype=J(bb.prototype,{get_texA:function(){return this.texA__},set_texA:function(a){return this.texA__=a},get_texB:function(){return this.texB__},set_texB:function(a){return this.texB__=a},get_isMax:function(){return this.isMax__},set_isMax:function(a){this.constModified=!0;return this.isMax__=a},updateConstants:function(a){this.constBits=0;this.isMax__&&(this.constBits|=1);this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.flipY__;
case 1:return this.texA__;case 2:return this.texB__;case 3:return this.isMax__}return null},getParamFloatValue:function(a){return 0==a?this.flipY__:0},clone:function(){var a=Object.create(Jf.prototype);a.shader=this.shader;a.flipY__=this.flipY__;a.texA__=this.texA__;a.texB__=this.texB__;a.isMax__=this.isMax__;return a},__class__:Jf});var Mg=function(){this.mat__=new R;bb.call(this)};p["h3d.shader.CubeMinMaxShader"]=Mg;Mg.__name__="h3d.shader.CubeMinMaxShader";Mg.__super__=bb;Mg.prototype=J(bb.prototype,
{get_texA:function(){return this.texA__},set_texA:function(a){return this.texA__=a},get_texB:function(){return this.texB__},set_texB:function(a){return this.texB__=a},get_isMax:function(){return this.isMax__},set_isMax:function(a){this.constModified=!0;return this.isMax__=a},get_mat:function(){return this.mat__},set_mat:function(a){return this.mat__=a},updateConstants:function(a){this.constBits=0;this.isMax__&&(this.constBits|=1);this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.flipY__;
case 1:return this.texA__;case 2:return this.texB__;case 3:return this.isMax__;case 4:return this.mat__}return null},getParamFloatValue:function(a){return 0==a?this.flipY__:0},clone:function(){var a=Object.create(Mg.prototype);a.shader=this.shader;a.flipY__=this.flipY__;a.texA__=this.texA__;a.texB__=this.texB__;a.isMax__=this.isMax__;a.mat__=this.mat__;return a},__class__:Mg});var Cf=function(a){Q.call(this);this.texture__=a};p["h3d.shader.NormalMap"]=Cf;Cf.__name__="h3d.shader.NormalMap";Cf.__super__=
Q;Cf.prototype=J(Q.prototype,{get_texture:function(){return this.texture__},set_texture:function(a){return this.texture__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){return 0==a?this.texture__:null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(Cf.prototype);a.shader=this.shader;a.texture__=this.texture__;return a},__class__:Cf});var Gg=function(){Q.call(this)};p["h3d.shader.Shadow"]=Gg;Gg.__name__="h3d.shader.Shadow";
Gg.__super__=Q;Gg.prototype=J(Q.prototype,{updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){return null},getParamFloatValue:function(a){return 0},__class__:Gg});var rf=function(){this.smoothing__=0.041666666666666664;this.alphaCutoff__=0.5;this.channel__=0;Q.call(this)};p["h3d.shader.SignedDistanceField"]=rf;rf.__name__="h3d.shader.SignedDistanceField";rf.__super__=Q;rf.prototype=J(Q.prototype,{get_channel:function(){return this.channel__},set_channel:function(a){this.constModified=
!0;return this.channel__=a},get_alphaCutoff:function(){return this.alphaCutoff__},set_alphaCutoff:function(a){return this.alphaCutoff__=a},get_smoothing:function(){return this.smoothing__},set_smoothing:function(a){return this.smoothing__=a},updateConstants:function(a){this.constBits=0;var b=this.channel__;if(0!=b>>>8)throw new n("channel is out of range "+b+">255");this.constBits|=b;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.channel__;case 1:return this.alphaCutoff__;
case 2:return this.smoothing__}return null},getParamFloatValue:function(a){switch(a){case 1:return this.alphaCutoff__;case 2:return this.smoothing__}return 0},clone:function(){var a=Object.create(rf.prototype);a.shader=this.shader;a.channel__=this.channel__;a.alphaCutoff__=this.alphaCutoff__;a.smoothing__=this.smoothing__;return a},__class__:rf});var Rd=function(){this.bonesMatrixes__=[];this.MaxBones__=0;Q.call(this);this.constModified=!0;this.MaxBones__=34};p["h3d.shader.SkinBase"]=Rd;Rd.__name__=
"h3d.shader.SkinBase";Rd.__super__=Q;Rd.prototype=J(Q.prototype,{get_MaxBones:function(){return this.MaxBones__},set_MaxBones:function(a){this.constModified=!0;return this.MaxBones__=a},get_bonesMatrixes:function(){return this.bonesMatrixes__},set_bonesMatrixes:function(a){return this.bonesMatrixes__=a},updateConstants:function(a){this.constBits=0;var b=this.MaxBones__;if(0!=b>>>8)throw new n("MaxBones is out of range "+b+">255");this.constBits|=b;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.MaxBones__;
case 1:return this.bonesMatrixes__}return null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(Rd.prototype);a.shader=this.shader;a.MaxBones__=this.MaxBones__;a.bonesMatrixes__=this.bonesMatrixes__;return a},__class__:Rd});var Rf=function(){Rd.call(this)};p["h3d.shader.Skin"]=Rf;Rf.__name__="h3d.shader.Skin";Rf.__super__=Rd;Rf.prototype=J(Rd.prototype,{updateConstants:function(a){this.constBits=0;var b=this.MaxBones__;if(0!=b>>>8)throw new n("MaxBones is out of range "+
b+">255");this.constBits|=b;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.MaxBones__;case 1:return this.bonesMatrixes__}return null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(Rf.prototype);a.shader=this.shader;a.MaxBones__=this.MaxBones__;a.bonesMatrixes__=this.bonesMatrixes__;return a},__class__:Rf});var Qf=function(){Rd.call(this)};p["h3d.shader.SkinTangent"]=Qf;Qf.__name__="h3d.shader.SkinTangent";Qf.__super__=Rd;Qf.prototype=
J(Rd.prototype,{updateConstants:function(a){this.constBits=0;var b=this.MaxBones__;if(0!=b>>>8)throw new n("MaxBones is out of range "+b+">255");this.constBits|=b;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.MaxBones__;case 1:return this.bonesMatrixes__}return null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(Qf.prototype);a.shader=this.shader;a.MaxBones__=this.MaxBones__;a.bonesMatrixes__=this.bonesMatrixes__;return a},__class__:Qf});
var Df=function(a){Q.call(this);this.texture__=a};p["h3d.shader.SpecularTexture"]=Df;Df.__name__="h3d.shader.SpecularTexture";Df.__super__=Q;Df.prototype=J(Q.prototype,{get_texture:function(){return this.texture__},set_texture:function(a){return this.texture__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){return 0==a?this.texture__:null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(Df.prototype);a.shader=this.shader;
a.texture__=this.texture__;return a},__class__:Df});var Bf=function(a){this.killAlphaThreshold__=0;Q.call(this);this.texture__=a;this.killAlphaThreshold__=ld.defaultKillAlphaThreshold};p["h3d.shader.Texture"]=Bf;Bf.__name__="h3d.shader.Texture";Bf.__super__=Q;Bf.prototype=J(Q.prototype,{get_additive:function(){return this.additive__},set_additive:function(a){this.constModified=!0;return this.additive__=a},get_killAlpha:function(){return this.killAlpha__},set_killAlpha:function(a){this.constModified=
!0;return this.killAlpha__=a},get_specularAlpha:function(){return this.specularAlpha__},set_specularAlpha:function(a){this.constModified=!0;return this.specularAlpha__=a},get_killAlphaThreshold:function(){return this.killAlphaThreshold__},set_killAlphaThreshold:function(a){return this.killAlphaThreshold__=a},get_texture:function(){return this.texture__},set_texture:function(a){return this.texture__=a},updateConstants:function(a){this.constBits=0;this.additive__&&(this.constBits|=1);this.killAlpha__&&
(this.constBits|=2);this.specularAlpha__&&(this.constBits|=4);this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.additive__;case 1:return this.killAlpha__;case 2:return this.specularAlpha__;case 3:return this.killAlphaThreshold__;case 4:return this.texture__}return null},getParamFloatValue:function(a){return 3==a?this.killAlphaThreshold__:0},clone:function(){var a=Object.create(Bf.prototype);a.shader=this.shader;a.additive__=this.additive__;a.killAlpha__=this.killAlpha__;
a.specularAlpha__=this.specularAlpha__;a.killAlphaThreshold__=this.killAlphaThreshold__;a.texture__=this.texture__;return a},__class__:Bf});var Bd=function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);this.uvScale__=new U;this.uvDelta__=new U;Q.call(this);var e=this.uvDelta__;e.x=a;e.y=b;e.z=0;e.w=1;a=this.uvScale__;a.x=c;a.y=d;a.z=0;a.w=1};p["h3d.shader.UVDelta"]=Bd;Bd.__name__="h3d.shader.UVDelta";Bd.__super__=Q;Bd.prototype=J(Q.prototype,{get_uvDelta:function(){return this.uvDelta__},
set_uvDelta:function(a){return this.uvDelta__=a},get_uvScale:function(){return this.uvScale__},set_uvScale:function(a){return this.uvScale__=a},updateConstants:function(a){this.constBits=0;this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.uvDelta__;case 1:return this.uvScale__}return null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(Bd.prototype);a.shader=this.shader;a.uvDelta__=this.uvDelta__;a.uvScale__=this.uvScale__;return a},
__class__:Bd});var Of=function(){Q.call(this)};p["h3d.shader.VertexColorAlpha"]=Of;Of.__name__="h3d.shader.VertexColorAlpha";Of.__super__=Q;Of.prototype=J(Q.prototype,{get_additive:function(){return this.additive__},set_additive:function(a){this.constModified=!0;return this.additive__=a},updateConstants:function(a){this.constBits=0;this.additive__&&(this.constBits|=1);this.updateConstantsFinal(a)},getParamValue:function(a){return 0==a?this.additive__:null},getParamFloatValue:function(a){return 0},
clone:function(){var a=Object.create(Of.prototype);a.shader=this.shader;a.additive__=this.additive__;return a},__class__:Of});var yf=function(a,b){this.isCentered__=!0;this.tangent__=new U;this.normal__=new U;this.scale__=new U;Q.call(this);var c=this.normal__;c.x=0;c.y=0;c.z=1;c.w=1;c=this.tangent__;c.x=1;c.y=0;c.z=0;c.w=1;c=this.scale__;c.x=1/a;c.y=1/b;c.z=0;c.w=1};p["h3d.shader.VolumeDecal"]=yf;yf.__name__="h3d.shader.VolumeDecal";yf.__super__=Q;yf.prototype=J(Q.prototype,{get_scale:function(){return this.scale__},
set_scale:function(a){return this.scale__=a},get_normal:function(){return this.normal__},set_normal:function(a){return this.normal__=a},get_tangent:function(){return this.tangent__},set_tangent:function(a){return this.tangent__=a},get_isCentered:function(){return this.isCentered__},set_isCentered:function(a){this.constModified=!0;return this.isCentered__=a},updateConstants:function(a){this.constBits=0;this.isCentered__&&(this.constBits|=64);this.updateConstantsFinal(a)},getParamValue:function(a){switch(a){case 0:return this.scale__;
case 1:return this.normal__;case 2:return this.tangent__;case 3:return this.isCentered__}return null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(yf.prototype);a.shader=this.shader;a.scale__=this.scale__;a.normal__=this.normal__;a.tangent__=this.tangent__;a.isCentered__=this.isCentered__;return a},__class__:yf});var Sf=M["haxe.StackItem"]={__ename__:!0,__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"],CFunction:{_hx_index:0,__enum__:"haxe.StackItem",
toString:m},Module:(s=function(a){return{_hx_index:1,m:a,__enum__:"haxe.StackItem",toString:m}},s.__params__=["m"],s),FilePos:(s=function(a,b,c,d){return{_hx_index:2,s:a,file:b,line:c,column:d,__enum__:"haxe.StackItem",toString:m}},s.__params__=["s","file","line","column"],s),Method:(s=function(a,b){return{_hx_index:3,classname:a,method:b,__enum__:"haxe.StackItem",toString:m}},s.__params__=["classname","method"],s),LocalFunction:(s=function(a){return{_hx_index:4,v:a,__enum__:"haxe.StackItem",toString:m}},
s.__params__=["v"],s)};Sf.__empty_constructs__=[Sf.CFunction];var ab=function(){};p["haxe.CallStack"]=ab;ab.__name__="haxe.CallStack";ab.getStack=function(a){if(null==a)return[];var b=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){for(var e=[],f=0;f<b.length;){var g=b[f];++f;null!=ab.wrapCallSite&&(g=ab.wrapCallSite(g));var h=null,k=g.getFunctionName();if(null!=k){var l=k.lastIndexOf(".");0<=l&&(h=z.substr(k,0,l),k=z.substr(k,l+1,null),h=Sf.Method(h,k))}k=g.getFileName();l=null==k?
-1:k.indexOf("file:");null!=ab.wrapCallSite&&0<l&&(k=z.substr(k,l+6,null));e.push(Sf.FilePos(h,k,g.getLineNumber(),g.getColumnNumber()))}return e};a=ab.makeStack(a.stack);Error.prepareStackTrace=b;return a};ab.callStack=function(){try{throw Error();}catch(a){var b=ab.getStack(a);b.shift();return b}};ab.toString=function(a){for(var b=new Bb,c=0;c<a.length;){var d=a[c];++c;b.b+="\nCalled from ";ab.itemToString(b,d)}return b.b};ab.itemToString=function(a,b){switch(b._hx_index){case 0:a.b+="a C function";
break;case 1:var c=b.m;a.b+="module ";a.b+=null==c?"null":""+c;break;case 2:var c=b.column,d=b.line,e=b.file,f=b.s;null!=f&&(ab.itemToString(a,f),a.b+=" (");a.b+=null==e?"null":""+e;a.b+=" line ";a.b+=null==d?"null":""+d;null!=c&&(a.b+=" column ",a.b+=null==c?"null":""+c);null!=f&&(a.b+=")");break;case 3:c=b.method;d=b.classname;a.b+=null==d?"null":""+d;a.b+=".";a.b+=null==c?"null":""+c;break;case 4:c=b.v,a.b+="local function #",a.b+=null==c?"null":""+c}};ab.makeStack=function(a){if(null==a)return[];
if("string"==typeof a){a=a.split("\n");"Error"==a[0]&&a.shift();for(var b=[],c=new Ze("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",""),d=0;d<a.length;){var e=a[d];++d;if(c.match(e)){var e=c.matched(1).split("."),f=e.pop(),g=c.matched(2),h=r.parseInt(c.matched(3)),k=r.parseInt(c.matched(4));b.push(Sf.FilePos("Anonymous function"==f?Sf.LocalFunction():"Global code"==f?null:Sf.Method(e.join("."),f),g,h,k))}else b.push(Sf.Module(ga.trim(e)))}return b}return a};var bd=function(){};p["haxe.EntryPoint"]=
bd;bd.__name__="haxe.EntryPoint";bd.processEvents=function(){for(;;){var a=bd.pending.shift();if(null==a)break;a()}a=Kb.tick();return!Kb.hasEvents()&&0==bd.threadCount?-1:a};bd.run=function(){bd.processEvents();var a=window;(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame)(bd.run)};var Uc={};p["haxe._Exception.Stack_Impl_"]=Uc;Uc.__name__="haxe._Exception.Stack_Impl_";Uc._new=function(){return ab.callStack()};Uc.toString=function(a){return ab.toString(a)};Uc.subtract=
function(a,b){for(var c=-1,d=-1;++d<a.length;){for(var e=0,f=b.length;e<f;){var g=e++;if(Uc.equalItems(a[d],b[g])){if(0>c&&(c=d),++d,d>=a.length)break}else c=-1}if(0<=c)break}return 0<=c?a.slice(0,c):a};Uc.get=function(a,b){return a[b]};Uc.iterator=function(a){return new Ej(a)};Uc.equalItems=function(a,b){if(null==a)return null==b?!0:!1;switch(a._hx_index){case 0:return null==b?!1:0==b._hx_index?!0:!1;case 1:return null==b?!1:1==b._hx_index?a.m==b.m:!1;case 2:if(null==b)return!1;if(2==b._hx_index){var c=
a.s,d=a.line,e=a.column,f=b.column,g=b.line,h=b.s;return a.file==b.file&&d==g&&e==f?Uc.equalItems(c,h):!1}return!1;case 3:return null==b?!1:3==b._hx_index?(c=a.method,d=b.method,a.classname==b.classname?c==d:!1):!1;case 4:return null==b?!1:4==b._hx_index?a.v==b.v:!1}};var Ej=function(a){this.current=0;this.array=a};p["haxe._Exception.StackIterator"]=Ej;Ej.__name__="haxe._Exception.StackIterator";Ej.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},
__class__:Ej};var de=function(a,b){this.high=a;this.low=b};p["haxe._Int64.___Int64"]=de;de.__name__="haxe._Int64.___Int64";de.prototype={__class__:de};var Sb=function(){};p["haxe.Log"]=Sb;Sb.__name__="haxe.Log";Sb.formatOutput=function(a,b){var c=r.string(a);if(null==b)return c;var d=b.fileName+":"+b.lineNumber;if(null!=b&&null!=b.customParams)for(var e=0,f=b.customParams;e<f.length;){var g=f[e];++e;c+=", "+r.string(g)}return d+": "+c};Sb.trace=function(a,b){var c=Sb.formatOutput(a,b);"undefined"!=
typeof console&&null!=console.log&&console.log(c)};var Fj=function(a,b){this.isBlocking=!0;this.f=a;this.priority=b;this.nextRun=-1};p["haxe.MainEvent"]=Fj;Fj.__name__="haxe.MainEvent";Fj.prototype={stop:function(){null!=this.f&&(this.f=null,this.nextRun=-1,null==this.prev?Kb.pending=this.next:this.prev.next=this.next,null!=this.next&&(this.next.prev=this.prev))},__class__:Fj};var Kb=function(){};p["haxe.MainLoop"]=Kb;Kb.__name__="haxe.MainLoop";Kb.hasEvents=function(){for(var a=Kb.pending;null!=
a;){if(a.isBlocking)return!0;a=a.next}return!1};Kb.add=function(a,b){null==b&&(b=0);if(null==a)throw new n("Event function is null");var c=new Fj(a,b),d=Kb.pending;null!=d&&(d.prev=c);c.next=d;return Kb.pending=c};Kb.sortEvents=function(){var a=Kb.pending;if(null!=a){for(var b=1,c,d=0,e=0,f,g,h,k;;){f=a;k=a=null;for(c=0;null!=f;){++c;g=f;e=d=0;for(h=b;e<h&&!(e++,++d,g=g.next,null==g););for(e=b;0<d||0<e&&null!=g;)0==d?(h=g,g=g.next,--e):0==e||null==g||f.priority>g.priority||f.priority==g.priority&&
f.nextRun<=g.nextRun?(h=f,f=f.next,--d):(h=g,g=g.next,--e),null!=k?k.next=h:a=h,h.prev=k,k=h;f=g}k.next=null;if(1>=c)break;b*=2}a.prev=null;Kb.pending=a}};Kb.tick=function(){Kb.sortEvents();for(var a=Kb.pending,b=Date.now()/1E3,c=1E9;null!=a;){var d=a.next,e=a.nextRun-b;0>a.nextRun||0>=e?(c=0,null!=a.f&&a.f()):c>e&&(c=e);a=d}return c};var lh=function(){};p["haxe.Resource"]=lh;lh.__name__="haxe.Resource";lh.getBytes=function(a){for(var b=0,c=lh.content;b<c.length;){var d=c[b];++b;if(d.name==a)return null!=
d.str?N.ofString(d.str):cd.decode(d.data)}return null};var ee=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};p["haxe.Timer"]=ee;ee.__name__="haxe.Timer";ee.delay=function(a,b){var c=new ee(b);c.run=function(){c.stop();a()};return c};ee.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:ee};var ci=function(){};p["haxe._Unserializer.DefaultResolver"]=ci;ci.__name__="haxe._Unserializer.DefaultResolver";ci.prototype={resolveClass:function(a){return p[a]},
resolveEnum:function(a){return M[a]},__class__:ci};var Qb=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=Qb.DEFAULT_RESOLVER;null==a&&(a=new ci,Qb.DEFAULT_RESOLVER=a);this.resolver=a};p["haxe.Unserializer"]=Qb;Qb.__name__="haxe.Unserializer";Qb.initCodes=function(){for(var a=[],b=0,c=Qb.BASE64.length;b<c;){var d=b++;a[Qb.BASE64.charCodeAt(d)]=d}return a};Qb.run=function(a){return(new Qb(a)).unserialize()};Qb.prototype={readDigits:function(){for(var a=0,b=!1,
c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},readFloat:function(){for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(b!=b)break;if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return parseFloat(z.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw new n("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;
var b=this.unserialize();if("string"!=typeof b)throw new n("Invalid object key");var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw new n("Invalid enum format");var c=this.readDigits();if(0==c)return ha.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return ha.createEnum(a,b,d)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var a=this.unserialize(),b=this.resolver.resolveClass(a);if(null==b)throw new n("Class not found "+
a);return b;case 66:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new n("Enum not found "+a);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new n("Class not found "+a);a=Object.create(b.prototype);this.cache.push(a);a.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw new n("Invalid custom data");return a;case 77:a=new Ha;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());
this.pos++;return a;case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw new n("Invalid string reference");return this.scache[a];case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 98:a=new ia;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);){var b=this.unserialize(),c=this.unserialize();null!=L[b]?a.setReserved(b,c):a.h[b]=c}this.pos++;
return a;case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new n("Class not found "+a);a=Object.create(b.prototype);this.cache.push(a);this.unserializeObject(a);return a;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new n("Enum not found "+a);this.pos++;var c=this.readDigits(),d=b.__constructs__.slice()[c];if(null==d)throw new n("Unknown enum index "+a+"@"+
c);a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 107:return NaN;case 108:a=new uc;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 109:return-Infinity;case 110:return null;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 112:return Infinity;case 113:a=new oa;this.cache.push(a);for(b=this.buf.charCodeAt(this.pos++);58==b;)b=this.readDigits(),c=this.unserialize(),a.h[b]=c,b=this.buf.charCodeAt(this.pos++);
if(104!=b)throw new n("Invalid IntMap format");return a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw new n("Invalid reference");return this.cache[a];case 115:a=this.readDigits();d=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw new n("Invalid bytes length");var e=Qb.CODES;null==e&&(e=Qb.initCodes(),Qb.CODES=e);for(var f=this.pos,g=a&3,h=f+(a-g),b=new N(new ArrayBuffer(3*(a>>2)+(2<=g?g-1:0))),c=0;f<h;){var k=e[d.charCodeAt(f++)],l=e[d.charCodeAt(f++)];
b.b[c++]=k<<2|l>>4;k=e[d.charCodeAt(f++)];b.b[c++]=l<<4|k>>2;l=e[d.charCodeAt(f++)];b.b[c++]=k<<6|l}2<=g&&(l=e[d.charCodeAt(f++)],h=e[d.charCodeAt(f++)],b.b[c++]=l<<2|h>>4,3==g&&(d=e[d.charCodeAt(f++)],b.b[c++]=h<<4|d>>2));this.pos+=a;this.cache.push(b);return b;case 116:return!0;case 118:return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+1)&&48<=this.buf.charCodeAt(this.pos+2)&&57>=this.buf.charCodeAt(this.pos+
2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+3)&&45==this.buf.charCodeAt(this.pos+4)?(a=z.strDate(z.substr(this.buf,this.pos,19)),this.pos+=19):a=new Date(this.readFloat()),this.cache.push(a),a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new n("Enum not found "+a);a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 120:throw n.wrap(this.unserialize());case 121:a=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||
this.length-this.pos<a)throw new n("Invalid string length");b=z.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 122:return 0}this.pos--;throw new n("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos);},__class__:Qb};var Tf=function(){this.a1=1;this.a2=0};p["haxe.crypto.Adler32"]=Tf;Tf.__name__="haxe.crypto.Adler32";Tf.read=function(a){var b=new Tf,c=a.readByte(),d=a.readByte(),e=a.readByte();a=a.readByte();b.a1=
e<<8|a;b.a2=c<<8|d;return b};Tf.prototype={update:function(a,b,c){var d=this.a1,e=this.a2,f=b;for(b+=c;f<b;)c=f++,d=(d+a.b[c])%65521,e=(e+d)%65521;this.a1=d;this.a2=e},equals:function(a){return a.a1==this.a1?a.a2==this.a2:!1},__class__:Tf};var N=function(a){this.length=a.byteLength;this.b=new Uint8Array(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};p["haxe.io.Bytes"]=N;N.__name__="haxe.io.Bytes";N.ofString=function(a,b){if(b==Gj.RawNative){for(var c=new Uint8Array(a.length<<1),d=0,e=a.length;d<
e;){var f=d++,g=a.charCodeAt(f);c[f<<1]=g&255;c[f<<1|1]=g>>8}return new N(c.buffer)}c=[];for(d=0;d<a.length;)e=a.charCodeAt(d++),55296<=e&&56319>=e&&(e=e-55232<<10|a.charCodeAt(d++)&1023),127>=e?c.push(e):(2047>=e?c.push(192|e>>6):(65535>=e?c.push(224|e>>12):(c.push(240|e>>18),c.push(128|e>>12&63)),c.push(128|e>>6&63)),c.push(128|e&63));return new N((new Uint8Array(c)).buffer)};N.ofData=function(a){var b=a.hxBytes;return null!=b?b:new N(a)};N.prototype={blit:function(a,b,c,d){if(0>a||0>c||0>d||a+
d>this.length||c+d>b.length)throw new n(Mc.OutsideBounds);0==c&&d==b.b.byteLength?this.b.set(b.b,a):this.b.set(b.b.subarray(c,c+d),a)},fill:function(a,b,c){for(var d=0;d<b;)d++,this.b[a++]=c},sub:function(a,b){if(0>a||0>b||a+b>this.length)throw new n(Mc.OutsideBounds);return new N(this.b.buffer.slice(a+this.b.byteOffset,a+this.b.byteOffset+b))},getFloat:function(a){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength));return this.data.getFloat32(a,!0)},setFloat:function(a,
b){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength));this.data.setFloat32(a,b,!0)},getUInt16:function(a){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength));return this.data.getUint16(a,!0)},setUInt16:function(a,b){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength));this.data.setUint16(a,b,!0)},getInt32:function(a){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,
this.b.byteLength));return this.data.getInt32(a,!0)},setInt32:function(a,b){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength));this.data.setInt32(a,b,!0)},getString:function(a,b,c){if(0>a||0>b||a+b>this.length)throw new n(Mc.OutsideBounds);null==c&&(c=Gj.UTF8);var d="",e=this.b,f=a;a+=b;switch(c._hx_index){case 0:for(;f<a;){c=e[f++];if(128>c){if(0==c)break}else if(224>c)c=(c&63)<<6|e[f++]&127;else if(240>c)b=e[f++],c=(c&31)<<12|(b&127)<<6|e[f++]&127;else{b=
e[f++];var g=e[f++];c=(c&15)<<18|(b&127)<<12|(g&127)<<6|e[f++]&127}d+=String.fromCodePoint(c)}break;case 1:for(;f<a;)c=e[f++]|e[f++]<<8,d+=String.fromCodePoint(c)}return d},toString:function(){return this.getString(0,this.length)},__class__:N};var Gj=M["haxe.io.Encoding"]={__ename__:!0,__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:m},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:m}};Gj.__empty_constructs__=[Gj.UTF8,Gj.RawNative];var cd=function(){};
p["haxe.crypto.Base64"]=cd;cd.__name__="haxe.crypto.Base64";cd.encode=function(a,b){null==b&&(b=!0);var c=(new di(cd.BYTES)).encodeBytes(a).toString();if(b)switch(a.length%3){case 1:c+="==";break;case 2:c+="="}return c};cd.decode=function(a,b){null==b&&(b=!0);if(b)for(;61==z.cca(a,a.length-1);)a=z.substr(a,0,-1);return(new di(cd.BYTES)).decodeBytes(N.ofString(a))};var di=function(a){for(var b=a.length,c=1;b>1<<c;)++c;if(8<c||b!=1<<c)throw new n("BaseCode : base length must be a power of two.");this.base=
a;this.nbits=c};p["haxe.crypto.BaseCode"]=di;di.__name__="haxe.crypto.BaseCode";di.prototype={encodeBytes:function(a){for(var b=this.nbits,c=this.base,d=8*a.length/b|0,e=new N(new ArrayBuffer(d+(0==8*a.length%b?0:1))),f=0,g=0,h=(1<<b)-1,k=0,l=0;l<d;){for(;g<b;)g+=8,f<<=8,f|=a.b[k++];g-=b;e.b[l++]=c.b[f>>g&h]}0<g&&(e.b[l++]=c.b[f<<b-g&h]);return e},initTable:function(){for(var a=[],b=0;256>b;){var c=b++;a[c]=-1}b=0;for(c=this.base.length;b<c;){var d=b++;a[this.base.b[d]]=d}this.tbl=a},decodeBytes:function(a){var b=
this.nbits;null==this.tbl&&this.initTable();for(var c=this.tbl,d=a.length*b>>3,e=new N(new ArrayBuffer(d)),f=0,g=0,h=0,k=0;k<d;){for(;8>g;){var g=g+b,f=f<<b,l=c[a.b[h++]];if(-1==l)throw new n("BaseCode : invalid encoded char");f|=l}g-=8;e.b[k++]=f>>g&255}return e},__class__:di};var me=function(){};p["haxe.crypto.Md5"]=me;me.__name__="haxe.crypto.Md5";me.encode=function(a){var b=new me;a=b.doEncode(me.str2blks(a));return b.hex(a)};me.str2blks=function(a){var b=N.ofString(a),c=(b.length+8>>6)+1;a=[];
for(var d=0,e=16*c;d<e;){var f=d++;a[f]=0}e=0;f=b.length;for(d=8*f;e<f;)a[e>>2]|=b.b[e]<<8*((d+e)%4),++e;a[e>>2]|=128<<8*((d+e)%4);b=16*c-2;a[b]=d&255;a[b]|=(d>>>8&255)<<8;a[b]|=(d>>>16&255)<<16;a[b]|=(d>>>24&255)<<24;return a};me.prototype={bitOR:function(a,b){return(a>>>1|b>>>1)<<1|a&1|b&1},bitXOR:function(a,b){return(a>>>1^b>>>1)<<1|a&1^b&1},bitAND:function(a,b){return(a>>>1&b>>>1)<<1|a&1&b&1},addme:function(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535},hex:function(a){for(var b=
"",c=0;c<a.length;){var d=a[c];++c;b+="0123456789abcdef".charAt(d>>4&15)+"0123456789abcdef".charAt(d&15);b+="0123456789abcdef".charAt(d>>12&15)+"0123456789abcdef".charAt(d>>8&15);b+="0123456789abcdef".charAt(d>>20&15)+"0123456789abcdef".charAt(d>>16&15);b+="0123456789abcdef".charAt(d>>28&15)+"0123456789abcdef".charAt(d>>24&15)}return b},rol:function(a,b){return a<<b|a>>>32-b},cmn:function(a,b,c,d,e,f){return this.addme(this.rol(this.addme(this.addme(b,a),this.addme(d,f)),e),c)},ff:function(a,b,c,
d,e,f,g){return this.cmn(this.bitOR(this.bitAND(b,c),this.bitAND(~b,d)),a,b,e,f,g)},gg:function(a,b,c,d,e,f,g){return this.cmn(this.bitOR(this.bitAND(b,d),this.bitAND(c,~d)),a,b,e,f,g)},hh:function(a,b,c,d,e,f,g){return this.cmn(this.bitXOR(this.bitXOR(b,c),d),a,b,e,f,g)},ii:function(a,b,c,d,e,f,g){return this.cmn(this.bitXOR(c,this.bitOR(b,~d)),a,b,e,f,g)},doEncode:function(a){for(var b=1732584193,c=-271733879,d=-1732584194,e=271733878,f=0;f<a.length;)var g=b,h=c,k=d,l=e,b=this.ff(b,c,d,e,a[f],7,
-680876936),e=this.ff(e,b,c,d,a[f+1],12,-389564586),d=this.ff(d,e,b,c,a[f+2],17,606105819),c=this.ff(c,d,e,b,a[f+3],22,-1044525330),b=this.ff(b,c,d,e,a[f+4],7,-176418897),e=this.ff(e,b,c,d,a[f+5],12,1200080426),d=this.ff(d,e,b,c,a[f+6],17,-1473231341),c=this.ff(c,d,e,b,a[f+7],22,-45705983),b=this.ff(b,c,d,e,a[f+8],7,1770035416),e=this.ff(e,b,c,d,a[f+9],12,-1958414417),d=this.ff(d,e,b,c,a[f+10],17,-42063),c=this.ff(c,d,e,b,a[f+11],22,-1990404162),b=this.ff(b,c,d,e,a[f+12],7,1804603682),e=this.ff(e,
b,c,d,a[f+13],12,-40341101),d=this.ff(d,e,b,c,a[f+14],17,-1502002290),c=this.ff(c,d,e,b,a[f+15],22,1236535329),b=this.gg(b,c,d,e,a[f+1],5,-165796510),e=this.gg(e,b,c,d,a[f+6],9,-1069501632),d=this.gg(d,e,b,c,a[f+11],14,643717713),c=this.gg(c,d,e,b,a[f],20,-373897302),b=this.gg(b,c,d,e,a[f+5],5,-701558691),e=this.gg(e,b,c,d,a[f+10],9,38016083),d=this.gg(d,e,b,c,a[f+15],14,-660478335),c=this.gg(c,d,e,b,a[f+4],20,-405537848),b=this.gg(b,c,d,e,a[f+9],5,568446438),e=this.gg(e,b,c,d,a[f+14],9,-1019803690),
d=this.gg(d,e,b,c,a[f+3],14,-187363961),c=this.gg(c,d,e,b,a[f+8],20,1163531501),b=this.gg(b,c,d,e,a[f+13],5,-1444681467),e=this.gg(e,b,c,d,a[f+2],9,-51403784),d=this.gg(d,e,b,c,a[f+7],14,1735328473),c=this.gg(c,d,e,b,a[f+12],20,-1926607734),b=this.hh(b,c,d,e,a[f+5],4,-378558),e=this.hh(e,b,c,d,a[f+8],11,-2022574463),d=this.hh(d,e,b,c,a[f+11],16,1839030562),c=this.hh(c,d,e,b,a[f+14],23,-35309556),b=this.hh(b,c,d,e,a[f+1],4,-1530992060),e=this.hh(e,b,c,d,a[f+4],11,1272893353),d=this.hh(d,e,b,c,a[f+
7],16,-155497632),c=this.hh(c,d,e,b,a[f+10],23,-1094730640),b=this.hh(b,c,d,e,a[f+13],4,681279174),e=this.hh(e,b,c,d,a[f],11,-358537222),d=this.hh(d,e,b,c,a[f+3],16,-722521979),c=this.hh(c,d,e,b,a[f+6],23,76029189),b=this.hh(b,c,d,e,a[f+9],4,-640364487),e=this.hh(e,b,c,d,a[f+12],11,-421815835),d=this.hh(d,e,b,c,a[f+15],16,530742520),c=this.hh(c,d,e,b,a[f+2],23,-995338651),b=this.ii(b,c,d,e,a[f],6,-198630844),e=this.ii(e,b,c,d,a[f+7],10,1126891415),d=this.ii(d,e,b,c,a[f+14],15,-1416354905),c=this.ii(c,
d,e,b,a[f+5],21,-57434055),b=this.ii(b,c,d,e,a[f+12],6,1700485571),e=this.ii(e,b,c,d,a[f+3],10,-1894986606),d=this.ii(d,e,b,c,a[f+10],15,-1051523),c=this.ii(c,d,e,b,a[f+1],21,-2054922799),b=this.ii(b,c,d,e,a[f+8],6,1873313359),e=this.ii(e,b,c,d,a[f+15],10,-30611744),d=this.ii(d,e,b,c,a[f+6],15,-1560198380),c=this.ii(c,d,e,b,a[f+13],21,1309151649),b=this.ii(b,c,d,e,a[f+4],6,-145523070),e=this.ii(e,b,c,d,a[f+11],10,-1120210379),d=this.ii(d,e,b,c,a[f+2],15,718787259),c=this.ii(c,d,e,b,a[f+9],21,-343485551),
b=this.addme(b,g),c=this.addme(c,h),d=this.addme(d,k),e=this.addme(e,l),f=f+16;return[b,c,d,e]},__class__:me};var Da=function(){};p["haxe.ds.ArraySort"]=Da;Da.__name__="haxe.ds.ArraySort";Da.sort=function(a,b){Da.rec(a,b,0,a.length)};Da.rec=function(a,b,c,d){var e=c+d>>1;if(12>d-c){if(!(d<=c))for(e=c+1;e<d;)for(var f=e++;f>c;){if(0>b(a[f],a[f-1]))Da.swap(a,f-1,f);else break;--f}}else Da.rec(a,b,c,e),Da.rec(a,b,e,d),Da.doMerge(a,b,c,e,d,e-c,d-e)};Da.doMerge=function(a,b,c,d,e,f,g){var h,k,l,n;0==f||
0==g||(2==f+g?0>b(a[d],a[c])&&Da.swap(a,d,c):(f>g?(l=f>>1,h=c+l,k=Da.lower(a,b,d,e,h),n=k-d):(n=g>>1,k=d+n,h=Da.upper(a,b,c,d,k),l=h-c),Da.rotate(a,b,h,d,k),d=h+n,Da.doMerge(a,b,c,h,d,l,n),Da.doMerge(a,b,d,k,e,f-l,g-n)))};Da.rotate=function(a,b,c,d,e){if(!(c==d||d==e))for(b=Da.gcd(e-c,d-c);0!=b--;){for(var f=a[c+b],g=d-c,h=c+b,k=c+b+g;k!=c+b;)a[h]=a[k],h=k,k=e-k>g?k+g:c+(g-(e-k));a[h]=f}};Da.gcd=function(a,b){for(;0!=b;){var c=a%b;a=b;b=c}return a};Da.upper=function(a,b,c,d,e){d-=c;for(var f,g;0<
d;)f=d>>1,g=c+f,0>b(a[e],a[g])?d=f:(c=g+1,d=d-f-1);return c};Da.lower=function(a,b,c,d,e){d-=c;for(var f,g;0<d;)f=d>>1,g=c+f,0>b(a[g],a[e])?(c=g+1,d=d-f-1):d=f;return c};Da.swap=function(a,b,c){var d=a[b];a[b]=a[c];a[c]=d};var Uf=function(){};p["haxe.ds.BalancedTree"]=Uf;Uf.__name__="haxe.ds.BalancedTree";Uf.__interfaces__=[Nc];Uf.prototype={set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return b.value;b=0>
c?b.left:b.right}return null},remove:function(a){try{return this.root=this.removeLoop(a,this.root),!0}catch(b){if("string"==typeof(b instanceof n?b.val:b))return!1;throw b;}},exists:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return!0;b=0>c?b.left:b.right}return!1},iterator:function(){var a=[];this.iteratorLoop(this.root,a);return z.iter(a)},keyValueIterator:function(){return new dd(this)},keys:function(){var a=[];this.keysLoop(this.root,a);return z.iter(a)},copy:function(){var a=
new Uf;a.root=this.root;return a},setLoop:function(a,b,c){if(null==c)return new Nb(null,a,b,null);var d=this.compare(a,c.key);if(0==d)return new Nb(c.left,a,b,c.right,null==c?0:c._height);if(0>d)return a=this.setLoop(a,b,c.left),this.balance(a,c.key,c.value,c.right);a=this.setLoop(a,b,c.right);return this.balance(c.left,c.key,c.value,a)},removeLoop:function(a,b){if(null==b)throw new n("Not_found");var c=this.compare(a,b.key);return 0==c?this.merge(b.left,b.right):0>c?this.balance(this.removeLoop(a,
b.left),b.key,b.value,b.right):this.balance(b.left,b.key,b.value,this.removeLoop(a,b.right))},iteratorLoop:function(a,b){null!=a&&(this.iteratorLoop(a.left,b),b.push(a.value),this.iteratorLoop(a.right,b))},keysLoop:function(a,b){null!=a&&(this.keysLoop(a.left,b),b.push(a.key),this.keysLoop(a.right,b))},merge:function(a,b){if(null==a)return b;if(null==b)return a;var c=this.minBinding(b);return this.balance(a,c.key,c.value,this.removeMinBinding(b))},minBinding:function(a){if(null==a)throw new n("Not_found");
return null==a.left?a:this.minBinding(a.left)},removeMinBinding:function(a){return null==a.left?a.right:this.balance(this.removeMinBinding(a.left),a.key,a.value,a.right)},balance:function(a,b,c,d){var e=null==a?0:a._height,f=null==d?0:d._height;return e>f+2?(e=a.left,f=a.right,(null==e?0:e._height)>=(null==f?0:f._height)?new Nb(a.left,a.key,a.value,new Nb(a.right,b,c,d)):new Nb(new Nb(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new Nb(a.right.right,b,c,d))):f>e+2?(e=d.right,f=d.left,
(null==e?0:e._height)>(null==f?0:f._height)?new Nb(new Nb(a,b,c,d.left),d.key,d.value,d.right):new Nb(new Nb(a,b,c,d.left.left),d.left.key,d.left.value,new Nb(d.left.right,d.key,d.value,d.right))):new Nb(a,b,c,d,(e>f?e:f)+1)},compare:function(a,b){return xa.compare(a,b)},toString:function(){return null==this.root?"{}":"{"+this.root.toString()+"}"},__class__:Uf};var Nb=function(a,b,c,d,e){null==e&&(e=-1);this.left=a;this.key=b;this.value=c;this.right=d;-1==e?(a=this.left,b=this.right,a=(null==a?0:
a._height)>(null==b?0:b._height)?this.left:this.right,a=null==a?0:a._height,this._height=a+1):this._height=e};p["haxe.ds.TreeNode"]=Nb;Nb.__name__="haxe.ds.TreeNode";Nb.prototype={toString:function(){return(null==this.left?"":this.left.toString()+", ")+(""+r.string(this.key)+"="+r.string(this.value))+(null==this.right?"":", "+this.right.toString())},__class__:Nb};var Cd=function(){};p["haxe.ds.EnumValueMap"]=Cd;Cd.__name__="haxe.ds.EnumValueMap";Cd.__interfaces__=[Nc];Cd.__super__=Uf;Cd.prototype=
J(Uf.prototype,{compare:function(a,b){var c=a._hx_index-b._hx_index;if(0!=c)return c;var c=ha.enumParameters(a),d=ha.enumParameters(b);return 0==c.length&&0==d.length?0:this.compareArgs(c,d)},compareArgs:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=0,d=a.length;c<d;){var e=c++,e=this.compareArg(a[e],b[e]);if(0!=e)return e}return 0},compareArg:function(a,b){return xa.isEnumValue(a)&&xa.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==
b.__enum__?this.compareArgs(a,b):xa.compare(a,b)},copy:function(){var a=new Cd;a.root=this.root;return a},__class__:Cd});var oa=function(){this.h={}};p["haxe.ds.IntMap"]=oa;oa.__name__="haxe.ds.IntMap";oa.__interfaces__=[Nc];oa.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)?
a.push(b|0):null;return z.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},keyValueIterator:function(){return new dd(this)},copy:function(){for(var a=new oa,b=this.keys();b.hasNext();){var c=b.next();a.h[c]=this.h[c]}return a},toString:function(){var a;a="{";for(var b=this.keys();b.hasNext();){var c=b.next();a+=null==c?"null":""+c;a+=" => ";a+=r.string(r.string(this.h[c]));b.hasNext()&&
(a+=", ")}return a+"}"},__class__:oa};var uc=function(){this.length=0};p["haxe.ds.List"]=uc;uc.__name__="haxe.ds.List";uc.prototype={add:function(a){a=new ei(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;this.length++},push:function(a){this.h=a=new ei(a,this.h);null==this.q&&(this.q=a);this.length++},remove:function(a){for(var b=null,c=this.h;null!=c;){if(c.item==a)return null==b?this.h=c.next:b.next=c.next,this.q==c&&(this.q=b),this.length--,!0;b=c;c=c.next}return!1},__class__:uc};var ei=
function(a,b){this.item=a;this.next=b};p["haxe.ds._List.ListNode"]=ei;ei.__name__="haxe.ds._List.ListNode";ei.prototype={__class__:ei};var Ha=function(){this.h={__keys__:{}}};p["haxe.ds.ObjectMap"]=Ha;Ha.__name__="haxe.ds.ObjectMap";Ha.__interfaces__=[Nc];Ha.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++Ha.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;
delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return z.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a.__id__]}}},keyValueIterator:function(){return new dd(this)},copy:function(){for(var a=new Ha,b=this.keys();b.hasNext();){var c=b.next();a.set(c,this.h[c.__id__])}return a},
toString:function(){var a;a="{";for(var b=this.keys();b.hasNext();){var c=b.next();a+=r.string(r.string(c));a+=" => ";a+=r.string(r.string(this.h[c.__id__]));b.hasNext()&&(a+=", ")}return a+"}"},__class__:Ha};var Tb=M["haxe.ds.Option"]={__ename__:!0,__constructs__:["Some","None"],Some:(s=function(a){return{_hx_index:0,v:a,__enum__:"haxe.ds.Option",toString:m}},s.__params__=["v"],s),None:{_hx_index:1,__enum__:"haxe.ds.Option",toString:m}};Tb.__empty_constructs__=[Tb.None];var Kg=function(a,b){this.map=
a;this.keys=b;this.index=0;this.count=b.length};p["haxe.ds._StringMap.StringMapIterator"]=Kg;Kg.__name__="haxe.ds._StringMap.StringMapIterator";Kg.prototype={hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=L[b]?a.getReserved(b):a.h[b]},__class__:Kg};var ia=function(){this.h={}};p["haxe.ds.StringMap"]=ia;ia.__name__="haxe.ds.StringMap";ia.__interfaces__=[Nc];ia.prototype={set:function(a,b){null!=L[a]?this.setReserved(a,b):this.h[a]=
b},get:function(a){return null!=L[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=L[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=L[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a]}return!0},keys:function(){return z.iter(this.arrayKeys())},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new Kg(this,this.arrayKeys())},keyValueIterator:function(){return new dd(this)},copy:function(){for(var a=new ia,b=this.keys();b.hasNext();){var c=b.next(),d=null!=L[c]?this.getReserved(c):this.h[c];null!=L[c]?a.setReserved(c,d):
a.h[c]=d}return a},toString:function(){var a;a="{";for(var b=this.arrayKeys(),c=0,d=b.length;c<d;){var e=c++,f=b[e];a+=null==f?"null":""+f;a+=" => ";a+=r.string(r.string(null!=L[f]?this.getReserved(f):this.h[f]));e<b.length-1&&(a+=", ")}return a+"}"},__class__:ia};var Ui={};p["haxe.ds._Vector.Vector_Impl_"]=Ui;Ui.__name__="haxe.ds._Vector.Vector_Impl_";Ui.blit=function(a,b,c,d,e){if(a==c)if(b<d){b+=e;d+=e;for(c=0;c<e;)c++,--b,--d,a[d]=a[b]}else{if(b>d)for(c=0;c<e;)c++,a[d]=a[b],++b,++d}else for(var f=
0;f<e;){var g=f++;c[d+g]=a[b+g]}};var je=function(){this.size=this.pos=0};p["haxe.io.BytesBuffer"]=je;je.__name__="haxe.io.BytesBuffer";je.prototype={addByte:function(a){this.pos==this.size&&this.grow(1);this.view.setUint8(this.pos++,a)},add:function(a){this.pos+a.length>this.size&&this.grow(a.length);if(0!=this.size){var b=new Uint8Array(a.b.buffer,a.b.byteOffset,a.length);this.u8.set(b,this.pos);this.pos+=a.length}},addInt32:function(a){this.pos+4>this.size&&this.grow(4);this.view.setInt32(this.pos,
a,!0);this.pos+=4},addFloat:function(a){this.pos+4>this.size&&this.grow(4);this.view.setFloat32(this.pos,a,!0);this.pos+=4},addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw new n(Mc.OutsideBounds);this.pos+c>this.size&&this.grow(c);0!=this.size&&(a=new Uint8Array(a.b.buffer,a.b.byteOffset+b,c),this.u8.set(a,this.pos),this.pos+=c)},grow:function(a){var b=this.pos+a;for(a=0==this.size?16:this.size;a<b;)a=3*a>>1;var b=new ArrayBuffer(a),c=new Uint8Array(b);0<this.size&&c.set(this.u8);this.size=
a;this.buffer=b;this.u8=c;this.view=new DataView(this.buffer)},getBytes:function(){if(0==this.size)return new N(new ArrayBuffer(0));var a=new N(this.buffer);a.length=this.pos;return a},__class__:je};var Vf=function(){};p["haxe.io.Input"]=Vf;Vf.__name__="haxe.io.Input";Vf.prototype={readByte:function(){throw new n("Not implemented");},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw new n(Mc.OutsideBounds);try{for(;0<d;)e[b]=this.readByte(),++b,--d}catch(f){if(!((f instanceof
n?f.val:f)instanceof ie))throw f;}return c-d},set_bigEndian:function(a){return this.bigEndian=a},readAll:function(a){null==a&&(a=16384);var b=new N(new ArrayBuffer(a)),c=new je;try{for(;;){var d=this.readBytes(b,0,a);if(0==d)throw new n(Mc.Blocked);c.addBytes(b,0,d)}}catch(e){if(!((e instanceof n?e.val:e)instanceof ie))throw e;}return c.getBytes()},readFullBytes:function(a,b,c){for(;0<c;){var d=this.readBytes(a,b,c);if(0==d)throw new n(Mc.Blocked);b+=d;c-=d}},read:function(a){for(var b=new N(new ArrayBuffer(a)),
c=0;0<a;){var d=this.readBytes(b,c,a);if(0==d)throw new n(Mc.Blocked);c+=d;a-=d}return b},readUntil:function(a){for(var b=new je,c;;){c=this.readByte();if(c==a)break;b.addByte(c)}return b.getBytes().toString()},readFloat:function(){return Ng.i32ToFloat(this.readInt32())},readInt16:function(){var a=this.readByte(),b=this.readByte(),a=this.bigEndian?b|a<<8:a|b<<8;return 0!=(a&32768)?a-65536:a},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},readUInt24:function(){var a=
this.readByte(),b=this.readByte(),c=this.readByte();return this.bigEndian?c|b<<8|a<<16:a|b<<8|c<<16},readInt32:function(){var a=this.readByte(),b=this.readByte(),c=this.readByte(),d=this.readByte();return this.bigEndian?d|c<<8|b<<16|a<<24:a|b<<8|c<<16|d<<24},readString:function(a,b){var c=new N(new ArrayBuffer(a));this.readFullBytes(c,0,a);return c.getString(0,a,b)},__class__:Vf};var Ob=function(a,b,c){null==b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw new n(Mc.OutsideBounds);
this.b=a.b;this.pos=b;this.totlen=this.len=c};p["haxe.io.BytesInput"]=Ob;Ob.__name__="haxe.io.BytesInput";Ob.__super__=Vf;Ob.prototype=J(Vf.prototype,{set_position:function(a){0>a?a=0:a>this.totlen&&(a=this.totlen);this.len=this.totlen-a;return this.pos=a},readByte:function(){if(0==this.len)throw new n(new ie);this.len--;return this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw new n(Mc.OutsideBounds);if(0==this.len&&0<c)throw new n(new ie);this.len<c&&(c=this.len);var d=
this.b;a=a.b;for(var e=0,f=c;e<f;){var g=e++;a[b+g]=d[this.pos+g]}this.pos+=c;this.len-=c;return c},__class__:Ob});var fi=function(){};p["haxe.io.Output"]=fi;fi.__name__="haxe.io.Output";fi.prototype={writeByte:function(a){throw new n("Not implemented");},writeBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw new n(Mc.OutsideBounds);a=a.b;for(var d=c;0<d;)this.writeByte(a[b]),++b,--d;return c},flush:function(){},close:function(){},set_bigEndian:function(a){return this.bigEndian=a},write:function(a){for(var b=
a.length,c=0;0<b;){var d=this.writeBytes(a,c,b);if(0==d)throw new n(Mc.Blocked);c+=d;b-=d}},writeFullBytes:function(a,b,c){for(;0<c;){var d=this.writeBytes(a,b,c);b+=d;c-=d}},writeUInt16:function(a){if(0>a||65536<=a)throw new n(Mc.Overflow);this.bigEndian?(this.writeByte(a>>8),this.writeByte(a&255)):(this.writeByte(a&255),this.writeByte(a>>8))},writeInt32:function(a){this.bigEndian?(this.writeByte(a>>>24),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(a&255)):(this.writeByte(a&
255),this.writeByte(a>>8&255),this.writeByte(a>>16&255),this.writeByte(a>>>24))},writeString:function(a,b){var c=N.ofString(a,b);this.writeFullBytes(c,0,c.length)},__class__:fi};var td=function(){this.b=new je};p["haxe.io.BytesOutput"]=td;td.__name__="haxe.io.BytesOutput";td.__super__=fi;td.prototype=J(fi.prototype,{writeByte:function(a){this.b.addByte(a)},writeBytes:function(a,b,c){this.b.addBytes(a,b,c);return c},getBytes:function(){return this.b.getBytes()},__class__:td});var ie=function(){};p["haxe.io.Eof"]=
ie;ie.__name__="haxe.io.Eof";ie.prototype={toString:function(){return"Eof"},__class__:ie};var Mc=M["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:m},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:m},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:m},Custom:(s=function(a){return{_hx_index:3,e:a,__enum__:"haxe.io.Error",toString:m}},s.__params__=["e"],s)};Mc.__empty_constructs__=
[Mc.Blocked,Mc.Overflow,Mc.OutsideBounds];var Ng=function(){};p["haxe.io.FPHelper"]=Ng;Ng.__name__="haxe.io.FPHelper";Ng.i32ToFloat=function(a){Ng.helper.setInt32(0,a,!0);return Ng.helper.getFloat32(0,!0)};var sa=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=z.substr(a,0,c),a=z.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=z.substr(a,0,b),a=z.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=
z.substr(a,b+1,null),this.file=z.substr(a,0,b)):(this.ext=null,this.file=a)};p["haxe.io.Path"]=sa;sa.__name__="haxe.io.Path";sa.directory=function(a){a=new sa(a);return null==a.dir?"":a.dir};sa.extension=function(a){a=new sa(a);return null==a.ext?"":a.ext};sa.withExtension=function(a,b){var c=new sa(a);c.ext=b;return c.toString()};sa.join=function(a){a=a.filter(function(a){return null!=a?""!=a:!1});if(0==a.length)return"";for(var b=a[0],c=1,d=a.length;c<d;)var e=c++,b=sa.addTrailingSlash(b),b=b+a[e];
return sa.normalize(b)};sa.normalize=function(a){a=a.split("\\").join("/");if("/"==a)return"/";for(var b=[],c=0,d=a.split("/");c<d.length;){var e=d[c];++c;".."==e&&0<b.length&&".."!=b[b.length-1]?b.pop():""==e?(0<b.length||47==z.cca(a,0))&&b.push(e):"."!=e&&b.push(e)}a=b.join("/");for(var b="",d=c=!1,e=0,f=a.length;e<f;){var g=e++,g=a.charCodeAt(g);switch(g){case 47:c?(c=!1,d&&(b+="/",d=!1),b+=String.fromCodePoint(g)):d=!0;break;case 58:b+=":";c=!0;break;default:c=!1,d&&(b+="/",d=!1),b+=String.fromCodePoint(g)}}return b};
sa.addTrailingSlash=function(a){if(0==a.length)return"/";var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");return b<c?c!=a.length-1?a+"\\":a:b!=a.length-1?a+"/":a};sa.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:sa};var dd=function(a){this.map=a;this.keys=a.keys()};p["haxe.iterators.MapKeyValueIterator"]=dd;dd.__name__="haxe.iterators.MapKeyValueIterator";dd.prototype={hasNext:function(){return this.keys.hasNext()},
next:function(){var a=this.keys.next();return{value:this.map.get(a),key:a}},__class__:dd};var fa=M["haxe.macro.Binop"]={__ename__:!0,__constructs__:"OpAdd OpMult OpDiv OpSub OpAssign OpEq OpNotEq OpGt OpGte OpLt OpLte OpAnd OpOr OpXor OpBoolAnd OpBoolOr OpShl OpShr OpUShr OpMod OpAssignOp OpInterval OpArrow OpIn".split(" "),OpAdd:{_hx_index:0,__enum__:"haxe.macro.Binop",toString:m},OpMult:{_hx_index:1,__enum__:"haxe.macro.Binop",toString:m},OpDiv:{_hx_index:2,__enum__:"haxe.macro.Binop",toString:m},
OpSub:{_hx_index:3,__enum__:"haxe.macro.Binop",toString:m},OpAssign:{_hx_index:4,__enum__:"haxe.macro.Binop",toString:m},OpEq:{_hx_index:5,__enum__:"haxe.macro.Binop",toString:m},OpNotEq:{_hx_index:6,__enum__:"haxe.macro.Binop",toString:m},OpGt:{_hx_index:7,__enum__:"haxe.macro.Binop",toString:m},OpGte:{_hx_index:8,__enum__:"haxe.macro.Binop",toString:m},OpLt:{_hx_index:9,__enum__:"haxe.macro.Binop",toString:m},OpLte:{_hx_index:10,__enum__:"haxe.macro.Binop",toString:m},OpAnd:{_hx_index:11,__enum__:"haxe.macro.Binop",
toString:m},OpOr:{_hx_index:12,__enum__:"haxe.macro.Binop",toString:m},OpXor:{_hx_index:13,__enum__:"haxe.macro.Binop",toString:m},OpBoolAnd:{_hx_index:14,__enum__:"haxe.macro.Binop",toString:m},OpBoolOr:{_hx_index:15,__enum__:"haxe.macro.Binop",toString:m},OpShl:{_hx_index:16,__enum__:"haxe.macro.Binop",toString:m},OpShr:{_hx_index:17,__enum__:"haxe.macro.Binop",toString:m},OpUShr:{_hx_index:18,__enum__:"haxe.macro.Binop",toString:m},OpMod:{_hx_index:19,__enum__:"haxe.macro.Binop",toString:m},OpAssignOp:(s=
function(a){return{_hx_index:20,op:a,__enum__:"haxe.macro.Binop",toString:m}},s.__params__=["op"],s),OpInterval:{_hx_index:21,__enum__:"haxe.macro.Binop",toString:m},OpArrow:{_hx_index:22,__enum__:"haxe.macro.Binop",toString:m},OpIn:{_hx_index:23,__enum__:"haxe.macro.Binop",toString:m}};fa.__empty_constructs__=[fa.OpAdd,fa.OpMult,fa.OpDiv,fa.OpSub,fa.OpAssign,fa.OpEq,fa.OpNotEq,fa.OpGt,fa.OpGte,fa.OpLt,fa.OpLte,fa.OpAnd,fa.OpOr,fa.OpXor,fa.OpBoolAnd,fa.OpBoolOr,fa.OpShl,fa.OpShr,fa.OpUShr,fa.OpMod,
fa.OpInterval,fa.OpArrow,fa.OpIn];var gi=M["haxe.macro.Unop"]={__ename__:!0,__constructs__:["OpIncrement","OpDecrement","OpNot","OpNeg","OpNegBits"],OpIncrement:{_hx_index:0,__enum__:"haxe.macro.Unop",toString:m},OpDecrement:{_hx_index:1,__enum__:"haxe.macro.Unop",toString:m},OpNot:{_hx_index:2,__enum__:"haxe.macro.Unop",toString:m},OpNeg:{_hx_index:3,__enum__:"haxe.macro.Unop",toString:m},OpNegBits:{_hx_index:4,__enum__:"haxe.macro.Unop",toString:m}};gi.__empty_constructs__=[gi.OpIncrement,gi.OpDecrement,
gi.OpNot,gi.OpNeg,gi.OpNegBits];var pd={};p["haxe.xml._Access.NodeAccess_Impl_"]=pd;pd.__name__="haxe.xml._Access.NodeAccess_Impl_";pd.resolve=function(a,b){var c=a.elementsNamed(b).next();if(null==c){if(a.nodeType==H.Document)c="Document";else{if(a.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+a.nodeType);c=a.nodeName}throw new n(c+" is missing element "+b);}if(c.nodeType!=H.Document&&c.nodeType!=H.Element)throw new n("Invalid nodeType "+c.nodeType);return c};var Ja=
{};p["haxe.xml._Access.AttribAccess_Impl_"]=Ja;Ja.__name__="haxe.xml._Access.AttribAccess_Impl_";Ja.resolve=function(a,b){if(a.nodeType==H.Document)throw new n("Cannot access document attribute "+b);var c=a.get(b);if(null==c){if(a.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+a.nodeType);throw new n(a.nodeName+" is missing attribute "+b);}return c};var Ok={};p["haxe.xml._Access.HasNodeAccess_Impl_"]=Ok;Ok.__name__="haxe.xml._Access.HasNodeAccess_Impl_";Ok.resolve=function(a,
b){return a.elementsNamed(b).hasNext()};var Db=function(a,b,c){this.xml=b;this.message=a;this.position=c;this.lineNumber=1;for(a=this.positionAtLine=0;a<c;){var d=a++,d=b.charCodeAt(d);10==d?(this.lineNumber++,this.positionAtLine=0):13!=d&&this.positionAtLine++}};p["haxe.xml.XmlParserException"]=Db;Db.__name__="haxe.xml.XmlParserException";Db.prototype={toString:function(){return Ba.getClass(this).__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:Db};var we=
function(){};p["haxe.xml.Parser"]=we;we.__name__="haxe.xml.Parser";we.parse=function(a,b){null==b&&(b=!1);var c=H.createDocument();we.doParse(a,b,0,c);return c};we.doParse=function(a,b,c,d){null==c&&(c=0);for(var e=null,f=1,g=1,h=null,k=0,l=0,m=0,p=a.charCodeAt(c),q=new Bb,s=1,u=-1;p==p;){switch(f){case 0:switch(p){case 9:case 10:case 13:case 32:break;default:f=g;continue}break;case 1:if(60==p)f=0,g=2;else{k=c;f=13;continue}break;case 2:switch(p){case 33:if(91==a.charCodeAt(c+1)){c+=2;if("CDATA["!=
z.substr(a,c,6).toUpperCase())throw new n(new Db("Expected <![CDATA[",a,c));c+=5;f=17}else if(68==a.charCodeAt(c+1)||100==a.charCodeAt(c+1)){if("OCTYPE"!=z.substr(a,c+2,6).toUpperCase())throw new n(new Db("Expected <!DOCTYPE",a,c));c+=8;f=16}else{if(45!=a.charCodeAt(c+1)||45!=a.charCodeAt(c+2))throw new n(new Db("Expected \x3c!--",a,c));c+=2;f=15}k=c+1;break;case 47:if(null==d)throw new n(new Db("Expected node name",a,c));k=c+1;f=0;g=10;break;case 63:f=14;k=c;break;default:f=3;k=c;continue}break;
case 3:if(!(97<=p&&122>=p||65<=p&&90>=p||48<=p&&57>=p||58==p||46==p||95==p||45==p)){if(c==k)throw new n(new Db("Expected node name",a,c));e=H.createElement(z.substr(a,k,c-k));d.addChild(e);++l;f=0;g=4;continue}break;case 4:switch(p){case 47:f=11;break;case 62:f=9;break;default:f=5;k=c;continue}break;case 5:if(!(97<=p&&122>=p||65<=p&&90>=p||48<=p&&57>=p||58==p||46==p||95==p||45==p)){if(k==c)throw new n(new Db("Expected attribute name",a,c));h=z.substr(a,k,c-k);if(e.exists(h))throw new n(new Db("Duplicate attribute ["+
h+"]",a,c));f=0;g=6;continue}break;case 6:if(61==p)f=0,g=7;else throw new n(new Db("Expected =",a,c));break;case 7:switch(p){case 34:case 39:q=new Bb;f=8;k=c+1;u=p;break;default:throw new n(new Db('Expected "',a,c));}break;case 8:switch(p){case 38:s=c-k;q.b+=null==s?z.substr(a,k,null):z.substr(a,k,s);f=18;s=8;k=c+1;break;case 60:case 62:if(b)throw new n(new Db("Invalid unescaped "+String.fromCodePoint(p)+" in attribute value",a,c));p==u&&(g=c-k,q.b+=null==g?z.substr(a,k,null):z.substr(a,k,g),g=q.b,
q=new Bb,e.set(h,g),f=0,g=4);break;default:p==u&&(g=c-k,q.b+=null==g?z.substr(a,k,null):z.substr(a,k,g),g=q.b,q=new Bb,e.set(h,g),f=0,g=4)}break;case 9:k=c=we.doParse(a,b,c,e);f=1;break;case 10:if(!(97<=p&&122>=p||65<=p&&90>=p||48<=p&&57>=p||58==p||46==p||95==p||45==p)){if(k==c)throw new n(new Db("Expected node name",a,c));g=z.substr(a,k,c-k);if(null==d||0!=d.nodeType)throw new n(new Db("Unexpected </"+g+">, tag is not open",a,c));if(d.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+
d.nodeType);if(g!=d.nodeName){if(d.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+d.nodeType);throw new n(new Db("Expected </"+d.nodeName+">",a,c));}f=0;g=12;continue}break;case 11:if(62==p)f=1;else throw new n(new Db("Expected >",a,c));break;case 12:if(62==p)return 0==l&&d.addChild(H.createPCData("")),c;throw new n(new Db("Expected >",a,c));case 13:60==p?(g=c-k,q.b+=null==g?z.substr(a,k,null):z.substr(a,k,g),g=H.createPCData(q.b),q=new Bb,d.addChild(g),++l,f=0,g=2):
38==p&&(s=c-k,q.b+=null==s?z.substr(a,k,null):z.substr(a,k,s),f=18,s=13,k=c+1);break;case 14:63==p&&62==a.charCodeAt(c+1)&&(++c,p=z.substr(a,k+1,c-k-2),d.addChild(H.createProcessingInstruction(p)),++l,f=1);break;case 15:45==p&&(45==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2))&&(d.addChild(H.createComment(z.substr(a,k,c-k))),++l,c+=2,f=1);break;case 16:91==p?++m:93==p?--m:62==p&&0==m&&(d.addChild(H.createDocType(z.substr(a,k,c-k))),++l,f=1);break;case 17:93==p&&(93==a.charCodeAt(c+1)&&62==a.charCodeAt(c+
2))&&(p=H.createCData(z.substr(a,k,c-k)),d.addChild(p),++l,c+=2,f=1);break;case 18:if(59==p){k=z.substr(a,k,c-k);if(35==k.charCodeAt(0))k=120==k.charCodeAt(1)?r.parseInt("0"+z.substr(k,1,k.length-1)):r.parseInt(z.substr(k,1,k.length-1)),q.b+=String.fromCodePoint(k);else if(p=we.escapes,null!=L[k]?p.existsReserved(k):p.h.hasOwnProperty(k))p=we.escapes,k=null!=L[k]?p.getReserved(k):p.h[k],q.b+=r.string(k);else{if(b)throw new n(new Db("Undefined entity: "+k,a,c));q.b+=r.string("&"+k+";")}k=c+1;f=s}else if(!(97<=
p&&122>=p||65<=p&&90>=p||48<=p&&57>=p||58==p||46==p||95==p||45==p)&&35!=p){if(b)throw new n(new Db("Invalid character in entity: "+String.fromCodePoint(p),a,c));q.b+=String.fromCodePoint(38);p=c-k;q.b+=null==p?z.substr(a,k,null):z.substr(a,k,p);--c;k=c+1;f=s}}p=a.charCodeAt(++c)}1==f&&(k=c,f=13);if(13==f){if(0==d.nodeType){if(d.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+d.nodeType);throw new n(new Db("Unclosed node <"+d.nodeName+">",a,c));}if(c!=k||0==l)b=c-k,q.b+=
null==b?z.substr(a,k,null):z.substr(a,k,b),d.addChild(H.createPCData(q.b));return c}if(!b&&18==f&&13==s)return q.b+=String.fromCodePoint(38),b=c-k,q.b+=null==b?z.substr(a,k,null):z.substr(a,k,b),d.addChild(H.createPCData(q.b)),c;throw new n(new Db("Unexpected end",a,c));};var eg=function(a){this.output=new Bb;this.pretty=a};p["haxe.xml.Printer"]=eg;eg.__name__="haxe.xml.Printer";eg.print=function(a,b){null==b&&(b=!1);var c=new eg(b);c.writeNode(a,"");return c.output.b};eg.prototype={writeNode:function(a,
b){switch(a.nodeType){case 0:this.output.b+=r.string(b+"<");if(a.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+a.nodeType);this.output.b+=r.string(a.nodeName);for(var c=a.attributes();c.hasNext();){var d=c.next();this.output.b+=r.string(" "+d+'="');d=ga.htmlEscape(a.get(d),!0);this.output.b+=r.string(d);this.output.b+='"'}if(this.hasChildren(a)){this.output.b+=">";this.pretty&&(this.output.b+="\n");if(a.nodeType!=H.Document&&a.nodeType!=H.Element)throw new n("Bad node type, expected Element or Document but found "+
a.nodeType);for(c=z.iter(a.children);c.hasNext();)d=c.next(),this.writeNode(d,this.pretty?b+"\t":b);this.output.b+=r.string(b+"</");if(a.nodeType!=H.Element)throw new n("Bad node type, expected Element but found "+a.nodeType);this.output.b+=r.string(a.nodeName);this.output.b+=">"}else this.output.b+="/>";this.pretty&&(this.output.b+="\n");break;case 1:if(a.nodeType==H.Document||a.nodeType==H.Element)throw new n("Bad node type, unexpected "+a.nodeType);c=a.nodeValue;0!=c.length&&(c=b+ga.htmlEscape(c),
this.output.b+=r.string(c),this.pretty&&(this.output.b+="\n"));break;case 2:this.output.b+=r.string(b+"<![CDATA[");if(a.nodeType==H.Document||a.nodeType==H.Element)throw new n("Bad node type, unexpected "+a.nodeType);this.output.b+=r.string(a.nodeValue);this.output.b+="]]\x3e";this.pretty&&(this.output.b+="\n");break;case 3:if(a.nodeType==H.Document||a.nodeType==H.Element)throw new n("Bad node type, unexpected "+a.nodeType);c=a.nodeValue;c=c.replace(/[\n\r\t]+/g,"");this.output.b+=null==b?"null":
""+b;c=ga.trim("\x3c!--"+c+"--\x3e");this.output.b+=r.string(c);this.pretty&&(this.output.b+="\n");break;case 4:if(a.nodeType==H.Document||a.nodeType==H.Element)throw new n("Bad node type, unexpected "+a.nodeType);this.output.b+=r.string("<!DOCTYPE "+a.nodeValue+">");this.pretty&&(this.output.b+="\n");break;case 5:if(a.nodeType==H.Document||a.nodeType==H.Element)throw new n("Bad node type, unexpected "+a.nodeType);this.output.b+=r.string("<?"+a.nodeValue+"?>");this.pretty&&(this.output.b+="\n");break;
case 6:if(a.nodeType!=H.Document&&a.nodeType!=H.Element)throw new n("Bad node type, expected Element or Document but found "+a.nodeType);for(c=z.iter(a.children);c.hasNext();)d=c.next(),this.writeNode(d,b)}},hasChildren:function(a){if(a.nodeType!=H.Document&&a.nodeType!=H.Element)throw new n("Bad node type, expected Element or Document but found "+a.nodeType);for(a=z.iter(a.children);a.hasNext();){var b=a.next();switch(b.nodeType){case 0:case 1:return!0;case 2:case 3:if(b.nodeType==H.Document||b.nodeType==
H.Element)throw new n("Bad node type, unexpected "+b.nodeType);if(0!=ga.ltrim(b.nodeValue).length)return!0}}return!1},__class__:eg};var kj=function(){};p["haxe.zip.Compress"]=kj;kj.__name__="haxe.zip.Compress";kj.run=function(a,b){throw new n("Not implemented for this platform");};var Og=M["haxe.zip.Huffman"]={__ename__:!0,__constructs__:["Found","NeedBit","NeedBits"],Found:(s=function(a){return{_hx_index:0,i:a,__enum__:"haxe.zip.Huffman",toString:m}},s.__params__=["i"],s),NeedBit:(s=function(a,b){return{_hx_index:1,
left:a,right:b,__enum__:"haxe.zip.Huffman",toString:m}},s.__params__=["left","right"],s),NeedBits:(s=function(a,b){return{_hx_index:2,n:a,table:b,__enum__:"haxe.zip.Huffman",toString:m}},s.__params__=["n","table"],s)};Og.__empty_constructs__=[];var Hj=function(){};p["haxe.zip.HuffTools"]=Hj;Hj.__name__="haxe.zip.HuffTools";Hj.prototype={treeDepth:function(a){switch(a._hx_index){case 0:return 0;case 1:var b=a.right;a=this.treeDepth(a.left);b=this.treeDepth(b);return 1+(a<b?a:b);case 2:throw new n("assert");
}},treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==b){if(1==a._hx_index)return b=a.right,Og.NeedBit(this.treeCompress(a.left),this.treeCompress(b));throw new n("assert");}for(var c=[],d=0,e=1<<b;d<e;)d++,c.push(Og.Found(-1));this.treeWalk(c,0,0,b,a);return Og.NeedBits(b,c)},treeWalk:function(a,b,c,d,e){if(1==e._hx_index){var f=e.right,g=e.left;0<d?(this.treeWalk(a,b,c+1,d-1,g),this.treeWalk(a,b|1<<c,c+1,d-1,f)):a[b]=this.treeCompress(e)}else a[b]=this.treeCompress(e)},treeMake:function(a,
b,c,d){if(d>b)throw new n("Invalid huffman");var e=c<<5|d;if(a.h.hasOwnProperty(e))return Og.Found(a.h[e]);c<<=1;++d;return Og.NeedBit(this.treeMake(a,b,c,d),this.treeMake(a,b,c|1,d))},make:function(a,b,c,d){var e=[],f=[];if(32<d)throw new n("Invalid huffman");for(var g=0;g<d;)g++,e.push(0),f.push(0);for(g=0;g<c;){var h=g++,h=a[h+b];if(h>=d)throw new n("Invalid huffman");e[h]++}for(var g=0,h=1,k=d-1;h<k;){var l=h++,g=g+e[l]<<1;f[l]=g}e=new oa;for(g=0;g<c;)h=g++,k=a[h+b],0!=k&&(l=f[k-1],f[k-1]=l+1,
e.h[l<<5|k]=h);return this.treeCompress(Og.NeedBit(this.treeMake(e,d,0,1),this.treeMake(e,d,1,1)))},__class__:Hj};var Ij=function(a){this.buffer=new N(new ArrayBuffer(65536));this.pos=0;a&&(this.crc=new Tf)};p["haxe.zip._InflateImpl.Window"]=Ij;Ij.__name__="haxe.zip._InflateImpl.Window";Ij.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=new N(new ArrayBuffer(65536));this.pos-=32768;a.blit(0,this.buffer,32768,this.pos);this.buffer=a},addBytes:function(a,b,c){65536<
this.pos+c&&this.slide();this.buffer.blit(this.pos,a,b,c);this.pos+=c},addByte:function(a){65536==this.pos&&this.slide();this.buffer.b[this.pos]=a;this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},__class__:Ij};var $a=M["haxe.zip._InflateImpl.State"]={__ename__:!0,__constructs__:"Head Block CData Flat Crc Dist DistOne Done".split(" "),Head:{_hx_index:0,
__enum__:"haxe.zip._InflateImpl.State",toString:m},Block:{_hx_index:1,__enum__:"haxe.zip._InflateImpl.State",toString:m},CData:{_hx_index:2,__enum__:"haxe.zip._InflateImpl.State",toString:m},Flat:{_hx_index:3,__enum__:"haxe.zip._InflateImpl.State",toString:m},Crc:{_hx_index:4,__enum__:"haxe.zip._InflateImpl.State",toString:m},Dist:{_hx_index:5,__enum__:"haxe.zip._InflateImpl.State",toString:m},DistOne:{_hx_index:6,__enum__:"haxe.zip._InflateImpl.State",toString:m},Done:{_hx_index:7,__enum__:"haxe.zip._InflateImpl.State",
toString:m}};$a.__empty_constructs__=[$a.Head,$a.Block,$a.CData,$a.Flat,$a.Crc,$a.Dist,$a.DistOne,$a.Done];var mb=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);this.isFinal=!1;this.htools=new Hj;this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?$a.Head:$a.Block;this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=0;this.lengths=[];this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);
this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.window=new Ij(c)};p["haxe.zip.InflateImpl"]=mb;mb.__name__="haxe.zip.InflateImpl";mb.run=function(a,b){null==b&&(b=65536);for(var c=new N(new ArrayBuffer(b)),d=new je,e=new mb(a);;){var f=
e.readBytes(c,0,b);d.addBytes(c,0,f);if(f<b)break}return d.getBytes()};mb.prototype={buildFixedHuffman:function(){if(null!=mb.FIXED_HUFFMAN)return mb.FIXED_HUFFMAN;for(var a=[],b=0;288>b;){var c=b++;a.push(143>=c?8:255>=c?9:279>=c?7:8)}mb.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return mb.FIXED_HUFFMAN},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=a;if(0<c)for(;this.inflateLoop(););return c-this.needed},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<
this.nbits,this.nbits+=8;var b=this.bits&(1<<a)-1;this.nbits-=a;this.bits>>=a;return b},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=1;return a},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},resetBits:function(){this.nbits=this.bits=0},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},addByte:function(a){this.window.addByte(a);
this.output.b[this.outpos]=a;this.needed--;this.outpos++},addDistOne:function(a){for(var b=this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addDist:function(a,b){this.addBytes(this.window.buffer,this.window.pos-a,b)},applyHuffman:function(a){switch(a._hx_index){case 0:return a.i;case 1:var b=a.right;a=a.left;return this.applyHuffman(this.getBit()?b:a);case 2:return this.applyHuffman(a.table[this.getBits(a.n)])}},inflateLengths:function(a,b){for(var c=0,d=0;c<b;){var e=this.applyHuffman(this.huffman);
switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:d=e;a[c]=e;++c;break;case 16:e=c+3+this.getBits(2);if(e>b)throw new n("Invalid data");for(;c<e;)a[c]=d,++c;break;case 17:c+=3+this.getBits(3);if(c>b)throw new n("Invalid data");break;case 18:c+=11+this.getBits(7);if(c>b)throw new n("Invalid data");break;default:throw new n("Invalid data");}}},inflateLoop:function(){switch(this.state._hx_index){case 0:var a=this.input.readByte();
if(8!=(a&15))throw new n("Invalid data");var b=this.input.readByte(),c=0!=(b&32);if(0!=((a<<8)+b)%31)throw new n("Invalid data");if(c)throw new n("Unsupported dictionary");this.state=$a.Block;return!0;case 1:switch(this.isFinal=this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw new n("Invalid data");this.state=$a.Flat;a=this.inflateLoop();this.resetBits();return a;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=
null,this.state=$a.CData,!0;case 2:for(var a=this.getBits(5)+257,b=this.getBits(5)+1,c=this.getBits(4)+4,d=0;d<c;){var e=d++;this.lengths[mb.CODE_LENGTHS_POS[e]]=this.getBits(3)}for(;19>c;)d=c++,this.lengths[mb.CODE_LENGTHS_POS[d]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);c=[];d=0;for(e=a+b;d<e;)d++,c.push(0);this.inflateLengths(c,a+b);this.huffdist=this.htools.make(c,a,b,16);this.huffman=this.htools.make(c,0,a,16);this.state=$a.CData;return!0;default:throw new n("Invalid data");}case 2:b=
this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),0<this.needed;if(256==b)this.state=this.isFinal?$a.Crc:$a.Block;else{b-=257;a=mb.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw new n("Invalid data");this.len=mb.LEN_BASE_VAL_TBL[b]+this.getBits(a);b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=mb.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw new n("Invalid data");this.dist=mb.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw new n("Invalid data");
this.state=1==this.dist?$a.DistOne:$a.Dist}return!0;case 3:return a=this.len<this.needed?this.len:this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this.isFinal?$a.Crc:$a.Block),0<this.needed;case 4:a=this.window.checksum();if(null==a)return this.state=$a.Done,!0;b=Tf.read(this.input);if(!a.equals(b))throw new n("Invalid CRC");this.state=$a.Done;return!0;case 5:for(;0<this.len&&0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:
a,this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=$a.CData);return 0<this.needed;case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=$a.CData),0<this.needed;case 7:return!1}},__class__:mb};var lj=function(){};p["haxe.zip.Uncompress"]=lj;lj.__name__="haxe.zip.Uncompress";lj.run=function(a,b){return mb.run(new Ob(a),b)};var Qc=function(a,b){if(!(-101==a&&-102==b)){var c=window.document.createElement("canvas");c.width=a;c.height=
b;this.ctx=c.getContext("2d",null)}};p["hxd.BitmapData"]=Qc;Qc.__name__="hxd.BitmapData";Qc.notImplemented=function(){throw new n("Not implemented");};Qc.fromNative=function(a){var b=new Qc(-101,-102);b.ctx=a;return b};Qc.prototype={clear:function(a){this.fill(0,0,this.ctx.canvas.width,this.ctx.canvas.height,a)},fill:function(a,b,c,d,e){this.ctx.fillStyle="rgba("+(e>>16&255)+", "+(e>>8&255)+", "+(e&255)+", "+(e>>>24)/255+")";this.ctx.fillRect(a,b,c,d)},draw:function(a,b,c,d,e,f,g,h){throw new n("Not implemented");
},drawScaled:function(a,b,c,d,e,f,g,h,k,l,m){throw new n("Not implemented");},line:function(a,b,c,d,e){var f,g=d-b;if(0==c-a){if(d<b){var h=b;b=d;d=h}0>b&&(b=0);d>this.ctx.canvas.height-1&&(d=this.ctx.canvas.height-1);for(var h=b,k=d+1;h<k;){var l=h++;this.setPixel(a,l,e)}}else if(0==g){c<a&&(h=a,a=c,c=h);0>a&&(a=0);c>this.ctx.canvas.width-1&&(c=this.ctx.canvas.width-1);h=a;for(k=c+1;h<k;)l=h++,this.setPixel(l,b,e)}else{var n,m,p,q;if(a<c){if(a>=this.ctx.canvas.width||0>c)return;h=1;n=0;p=this.ctx.canvas.width-
1}else{if(c>=this.ctx.canvas.width||0>a)return;h=-1;c=-c;a=-a;n=1-this.ctx.canvas.width;p=0}if(b<d){if(b>=this.ctx.canvas.height||0>d)return;k=1;m=0;q=this.ctx.canvas.height-1}else{if(d>=this.ctx.canvas.width||0>b)return;k=-1;d=-d;b=-b;m=1-this.ctx.canvas.height;q=0}f=c-a;var g=d-b,l=f<<1,r=g<<1,s=a,u=b;if(f>=g){var w=r-f,g=!1;if(b<m){b=l*(m-b)-f;var v=b/r,s=s+(v|0);if(s>p)return;s>=n&&(b-=v*r,w-=(b|0)+f,u=m,0<b&&(++s,w+=r),g=!0)}if(!g&&a<n){a=r*(n-a);u+=a/l|0;a%=l;if(u>q||u==q&&a>f)return;s=n;w+=
a|0;a>=f&&(++u,w-=l)}d>q&&(q=l*(q-d)+f,d=q/r,c+=d|0,0==q-d*r&&--c);c>p?c=p+1:++c;-1==h&&(s=-s,c=-c);-1==k&&(u=-u);for(l-=r;s!=c;)this.setPixel(s,u,e),0<=w?(u+=k,w-=l):w+=r,s+=h}else{w=l-g;f=!1;if(a<n){a=r*(n-a)-g;v=a/l;u+=v|0;if(u>q)return;u>=m&&(a-=v*l,w-=(a|0)+g,s=n,0<a&&(++u,w+=l),f=!0)}if(!f&&b<m){a=l*(m-b);s+=a/r|0;a%=r;if(s>p||s==p&&a>g)return;u=m;w+=a|0;a>=g&&(++s,w-=r)}c>p&&(p=r*(p-c)+g,c=p/l,d+=c|0,0==p-c*l&&--d);d>q?d=q+1:++d;-1==h&&(s=-s);-1==k&&(u=-u,d=-d);for(r-=l;u!=d;)this.setPixel(s,
u,e),0<=w?(s+=h,w-=r):w+=l,u+=k}}},dispose:function(){this.pixel=this.ctx=null},clone:function(){return this.sub(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},sub:function(a,b,c,d){var e=window.document.createElement("canvas");e.width=c;e.height=d;c=e.getContext("2d",null);c.drawImage(this.ctx.canvas,a,b);return Qc.fromNative(c)},lock:function(){null==this.lockImage&&(this.lockImage=this.ctx.getImageData(0,0,this.ctx.canvas.width,this.ctx.canvas.height))},unlock:function(){null!=this.lockImage&&
(this.ctx.putImageData(this.lockImage,0,0),this.lockImage=null)},getPixel:function(a,b){var c=this.lockImage,d;null!=c?d=a+b*c.width<<2:(d=0,c=this.ctx.getImageData(a,b,1,1));return c.data[d]<<16|c.data[d|1]<<8|c.data[d|2]|c.data[d|3]<<24},setPixel:function(a,b,c){var d=this.lockImage;null!=d?(a=a+b*d.width<<2,d.data[a]=c>>16&255,d.data[a|1]=c>>8&255,d.data[a|2]=c&255,d.data[a|3]=c>>>24&255):(d=this.pixel,null==d&&(this.pixel=d=this.ctx.createImageData(1,1)),d.data[0]=c>>16&255,d.data[1]=c>>8&255,
d.data[2]=c&255,d.data[3]=c>>>24&255,this.ctx.putImageData(d,a,b))},get_width:function(){return this.ctx.canvas.width},get_height:function(){return this.ctx.canvas.height},getPixels:function(){var a=this.ctx.canvas.width,b=this.ctx.canvas.height,c=this.ctx.getImageData(0,0,a,b).data.buffer;return new Za(a,b,N.ofData(c),ya.RGBA)},setPixels:function(a){if(a.width!=this.ctx.canvas.width||a.height!=this.ctx.canvas.height)throw new n("Invalid pixels size");a.setFlip(!1);var b=this.ctx.createImageData(a.width,
a.height);a.convert(ya.RGBA);for(var c=0,d=4*a.width*a.height;c<d;){var e=c++;b.data[e]=a.bytes.b[e]}this.ctx.putImageData(b,0,0)},toNative:function(){return this.ctx},toPNG:function(){var a=this.getPixels(),b=a.toPNG();a.dispose();return b},__class__:Qc};var Pb=function(){this.map=new oa;for(var a=0;94>a;){var b=a++;this.map.h[65281+b]=33+b}for(a=192;199>a;)b=a++,this.map.h[b]=65;for(a=224;231>a;)b=a++,this.map.h[b]=97;for(a=200;204>a;)b=a++,this.map.h[b]=69;for(a=232;236>a;)b=a++,this.map.h[b]=
101;for(a=204;208>a;)b=a++,this.map.h[b]=73;for(a=236;240>a;)b=a++,this.map.h[b]=105;for(a=210;215>a;)b=a++,this.map.h[b]=79;for(a=242;247>a;)b=a++,this.map.h[b]=111;for(a=217;221>a;)b=a++,this.map.h[b]=85;for(a=249;253>a;)b=a++,this.map.h[b]=117;this.map.h[199]=67;this.map.h[231]=67;this.map.h[208]=68;this.map.h[222]=100;this.map.h[209]=78;this.map.h[241]=110;this.map.h[221]=89;this.map.h[253]=121;this.map.h[255]=121;this.map.h[8364]=69;this.map.h[12288]=32;this.map.h[160]=32;this.map.h[171]=34;
this.map.h[187]=34;this.map.h[8220]=34;this.map.h[8221]=34;this.map.h[8216]=39;this.map.h[8217]=39;this.map.h[180]=39;this.map.h[8216]=39;this.map.h[8249]=60;this.map.h[8250]=62;this.map.h[8211]=45};p["hxd.Charset"]=Pb;Pb.__name__="hxd.Charset";Pb.getDefault=function(){null==Pb.inst&&(Pb.inst=new Pb);return Pb.inst};Pb.prototype={resolveChar:function(a,b){for(var c=a;null!=c;){var d=b.h[c];if(null!=d)return d;c=this.map.h[c]}return null},isCJK:function(a){return 19968<=a?40959>=a:!1},isSpace:function(a){return 32!=
a?12288==a:!0},isBreakChar:function(a){return this.isSpace(a)?!0:this.isCJK(a)},__class__:Pb};var yd=M["hxd.Cursor"]={__ename__:!0,__constructs__:"Default Button Move TextInput Hide Custom".split(" "),Default:{_hx_index:0,__enum__:"hxd.Cursor",toString:m},Button:{_hx_index:1,__enum__:"hxd.Cursor",toString:m},Move:{_hx_index:2,__enum__:"hxd.Cursor",toString:m},TextInput:{_hx_index:3,__enum__:"hxd.Cursor",toString:m},Hide:{_hx_index:4,__enum__:"hxd.Cursor",toString:m},Custom:(s=function(a){return{_hx_index:5,
custom:a,__enum__:"hxd.Cursor",toString:m}},s.__params__=["custom"],s)};yd.__empty_constructs__=[yd.Default,yd.Button,yd.Move,yd.TextInput,yd.Hide];var Pk=function(a,b,c,d){this.frames=a;this.speed=b;this.offsetX=c;this.offsetY=d;this.frameDelay=1/b;this.frameIndex=this.frameTime=0};p["hxd.CustomCursor"]=Pk;Pk.__name__="hxd.CustomCursor";Pk.prototype={reset:function(){this.frameIndex=this.frameTime=0},update:function(a){a=this.frameTime+a;for(var b=this.frameDelay,c=this.frameIndex;a>=b;)a-=b,++c;
this.frameTime=a;c>=this.frames.length&&(c%=this.frames.length);return c!=this.frameIndex?this.frameIndex=c:-1},dispose:function(){for(var a=0,b=this.frames;a<b.length;){var c=b[a];++a;c.ctx=null;c.pixel=null}this.frames=[];null!=this.alloc&&(this.alloc=null)},__class__:Pk};var ca=M["hxd.EventKind"]={__ename__:!0,__constructs__:"EPush ERelease EMove EOver EOut EWheel EFocus EFocusLost EKeyDown EKeyUp EReleaseOutside ETextInput ECheck".split(" "),EPush:{_hx_index:0,__enum__:"hxd.EventKind",toString:m},
ERelease:{_hx_index:1,__enum__:"hxd.EventKind",toString:m},EMove:{_hx_index:2,__enum__:"hxd.EventKind",toString:m},EOver:{_hx_index:3,__enum__:"hxd.EventKind",toString:m},EOut:{_hx_index:4,__enum__:"hxd.EventKind",toString:m},EWheel:{_hx_index:5,__enum__:"hxd.EventKind",toString:m},EFocus:{_hx_index:6,__enum__:"hxd.EventKind",toString:m},EFocusLost:{_hx_index:7,__enum__:"hxd.EventKind",toString:m},EKeyDown:{_hx_index:8,__enum__:"hxd.EventKind",toString:m},EKeyUp:{_hx_index:9,__enum__:"hxd.EventKind",
toString:m},EReleaseOutside:{_hx_index:10,__enum__:"hxd.EventKind",toString:m},ETextInput:{_hx_index:11,__enum__:"hxd.EventKind",toString:m},ECheck:{_hx_index:12,__enum__:"hxd.EventKind",toString:m}};ca.__empty_constructs__=[ca.EPush,ca.ERelease,ca.EMove,ca.EOver,ca.EOut,ca.EWheel,ca.EFocus,ca.EFocusLost,ca.EKeyDown,ca.EKeyUp,ca.EReleaseOutside,ca.ETextInput,ca.ECheck];var nb=function(a,b,c){null==c&&(c=0);null==b&&(b=0);this.button=0;this.kind=a;this.relX=b;this.relY=c};p["hxd.Event"]=nb;nb.__name__=
"hxd.Event";nb.prototype={toString:function(){var a=r.string(this.kind)+"["+(this.relX|0)+","+(this.relY|0)+"]",b;switch(this.kind._hx_index){case 0:case 1:case 10:b=",button="+this.button;break;case 2:case 3:case 4:case 6:case 7:case 12:b="";break;case 5:b=",wheelDelta="+this.wheelDelta;break;case 8:case 9:b=",keyCode="+this.keyCode;break;case 11:b=",charCode="+this.charCode}return a+b},__class__:nb};var db={};p["hxd._FloatBuffer.Float32Expand_Impl_"]=db;db.__name__="hxd._FloatBuffer.Float32Expand_Impl_";
db._new=function(a){return{pos:0,array:new Float32Array(new ArrayBuffer(a<<2))}};db.get_length=function(a){return a.pos};db.set_length=function(a,b){if(a.pos!=b){var c=new Float32Array(b);c.set(a.array);a.array=c}return a.pos=b};db.push=function(a,b){if(a.pos==a.array.length){var c=a.array.length<<1;128>c&&(c=128);c=new Float32Array(c);c.set(a.array);a.array=c}a.array[a.pos++]=b};db.get=function(a,b){return a.array[b]};db.set=function(a,b,c){return a.array[b]=c};db.toF32Array=function(a){return a.array};
db.toArray=function(a){for(var b=[],c=0,d=a.pos;c<d;){var e=c++;b.push(a.array[e])}return b};var Jj=function(a){this.b=a;this.len=this.b.pos;this.pos=0};p["hxd._FloatBuffer.InnerIterator"]=Jj;Jj.__name__="hxd._FloatBuffer.InnerIterator";Jj.prototype={hasNext:function(){return this.pos<this.len},next:function(){return this.b.array[this.pos++]},__class__:Jj};var ne={};p["hxd._FloatBuffer.FloatBuffer_Impl_"]=ne;ne.__name__="hxd._FloatBuffer.FloatBuffer_Impl_";ne._new=function(a){null==a&&(a=0);return db._new(a)};
ne.push=function(a,b){if(a.pos==a.array.length){var c=a.array.length<<1;128>c&&(c=128);c=new Float32Array(c);c.set(a.array);a.array=c}a.array[a.pos++]=b};ne.grow=function(a,b){for(var c=a.pos;c<b;){c++;if(a.pos==a.array.length){var d=a.array.length<<1;128>d&&(d=128);d=new Float32Array(d);d.set(a.array);a.array=d}a.array[a.pos++]=0}};ne.resize=function(a,b){if(a.pos!=b){var c=new Float32Array(b);c.set(a.array);a.array=c}a.pos=b};ne.arrayRead=function(a,b){return a.array[b]};ne.arrayWrite=function(a,
b,c){return a.array[b]=c};ne.getNative=function(a){return a};ne.iterator=function(a){return new Jj(a)};ne.get_length=function(a){return a.pos};var Kj=function(a){this.b=a;this.len=this.b.length;this.pos=0};p["hxd._IndexBuffer.InnerIterator"]=Kj;Kj.__name__="hxd._IndexBuffer.InnerIterator";Kj.prototype={hasNext:function(){return this.pos<this.len},next:function(){return this.b[this.pos++]},__class__:Kj};var qd={};p["hxd._IndexBuffer.IndexBuffer_Impl_"]=qd;qd.__name__="hxd._IndexBuffer.IndexBuffer_Impl_";
qd._new=function(a){null==a&&(a=0);return Array(a)};qd.push=function(a,b){a.push(b)};qd.grow=function(a,b){for(;a.length<b;)a.push(0)};qd.arrayRead=function(a,b){return a[b]};qd.arrayWrite=function(a,b,c){return a[b]=c};qd.getNative=function(a){return a};qd.iterator=function(a){return new Kj(a)};qd.get_length=function(a){return a.length};var w=function(){};p["hxd.Key"]=w;w.__name__="hxd.Key";w.isDown=function(a){return 0<w.keyPressed[a]};w.getFrame=function(){return da.frameCount+1};w.isPressed=function(a){return w.keyPressed[a]==
da.frameCount+1-1};w.isReleased=function(a){return w.keyPressed[a]==-(da.frameCount+1)+1};w.initialize=function(){w.initDone&&w.dispose();w.initDone=!0;w.keyPressed=[];Pa.getInstance().addEventTarget(w.onEvent)};w.dispose=function(){w.initDone&&(Pa.getInstance().removeEventTarget(w.onEvent),w.initDone=!1,w.keyPressed=[])};w.onEvent=function(a){switch(a.kind._hx_index){case 0:5>a.button&&(w.keyPressed[a.button]=da.frameCount+1);break;case 1:5>a.button&&(w.keyPressed[a.button]=-(da.frameCount+1));break;
case 5:w.keyPressed[0<a.wheelDelta?6:5]=da.frameCount+1;break;case 8:if(!w.ALLOW_KEY_REPEAT&&0<w.keyPressed[a.keyCode])break;w.keyPressed[a.keyCode]=da.frameCount+1;break;case 9:w.keyPressed[a.keyCode]=-(da.frameCount+1)}};w.getKeyName=function(a){switch(a){case 0:return"MouseLeft";case 1:return"MouseRight";case 2:return"MouseMiddle";case 8:return"Backspace";case 9:return"Tab";case 13:return"Enter";case 16:return"Shift";case 17:return"Ctrl";case 18:return"Alt";case 19:return"PauseBreak";case 20:return"CapsLock";
case 27:return"Escape";case 32:return"Space";case 33:return"PageUp";case 34:return"PageDown";case 35:return"End";case 36:return"Home";case 37:return"Left";case 38:return"Up";case 39:return"Right";case 40:return"Down";case 45:return"Insert";case 46:return"Delete";case 91:return"LeftWindowKey";case 92:return"RightWindowKey";case 93:return"ContextMenu";case 106:return"NumPad*";case 107:return"NumPad+";case 108:return"NumPadEnter";case 109:return"NumPad-";case 110:return"NumPad.";case 111:return"NumPad/";
case 144:return"NumLock";case 145:return"ScrollLock";case 186:return"Semicolon";case 187:return"Equals";case 188:return"Comma";case 189:return"Minus";case 190:return"Period";case 191:return"Slash";case 192:return"Tilde";case 219:return"BracketLeft";case 220:return"Backslash";case 221:return"BacketRight";case 222:return"Quote";case 226:return"IntlBackslash";case 272:return"LShift";case 273:return"LCtrl";case 274:return"LAlt";case 528:return"RShift";case 529:return"RCtrl";case 530:return"RAlt";default:return 48<=
a&&57>=a?""+(a-48):96<=a&&105>=a?"NumPad"+(a-96):65<=a&&90>=a?String.fromCodePoint(65+a-65):112<=a&&135>=a?"F"+(a-112+1):null}};var I=function(){};p["hxd.Math"]=I;I.__name__="hxd.Math";I.get_POSITIVE_INFINITY=function(){return Infinity};I.get_NEGATIVE_INFINITY=function(){return-Infinity};I.get_NaN=function(){return NaN};I.isNaN=function(a){return isNaN(a)};I.fmt=function(a){var b;0>a?(b=-1,a=-a):b=1;if(isNaN(a)||!isFinite(a))return a;var c=4-Math.log(a)/Math.log(10)|0;if(1>c)c=1;else if(10<=c)return 0;
c=Math.pow(10,c);return Math.floor(a*c+0.49999)*b/c};I.floor=function(a){return Math.floor(a)};I.ceil=function(a){return Math.ceil(a)};I.round=function(a){return Math.round(a)};I.clamp=function(a,b,c){null==c&&(c=1);null==b&&(b=0);return a<b?b:a>c?c:a};I.pow=function(a,b){return Math.pow(a,b)};I.scaleTime=function(a,b){return Math.pow(a,b*da.wantedFPS)};I.cos=function(a){return Math.cos(a)};I.sin=function(a){return Math.sin(a)};I.tan=function(a){return Math.tan(a)};I.acos=function(a){return Math.acos(a)};
I.asin=function(a){return Math.asin(a)};I.atan=function(a){return Math.atan(a)};I.sqrt=function(a){return Math.sqrt(a)};I.invSqrt=function(a){return 1/Math.sqrt(a)};I.atan2=function(a,b){return Math.atan2(a,b)};I.abs=function(a){return 0>a?-a:a};I.max=function(a,b){return a<b?b:a};I.min=function(a,b){return a>b?b:a};I.iabs=function(a){return 0>a?-a:a};I.imax=function(a,b){return a<b?b:a};I.imin=function(a,b){return a>b?b:a};I.iclamp=function(a,b,c){return a<b?b:a>c?c:a};I.lerp=function(a,b,c){return a+
c*(b-a)};I.bitCount=function(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24};I.distanceSq=function(a,b,c){null==c&&(c=0);return a*a+b*b+c*c};I.distance=function(a,b,c){null==c&&(c=0);return Math.sqrt(a*a+b*b+c*c)};I.colorLerp=function(a,b,c){return((a>>>24)*(1-c)+(b>>>24)*c|0)<<24|((a>>16&255)*(1-c)+(b>>16&255)*c|0)<<16|((a>>8&255)*(1-c)+(b>>8&255)*c|0)<<8|(a&255)*(1-c)+(b&255)*c|0};I.angle=function(a){a%=6.283185307179586;3.141592653589793<a?a-=6.283185307179586:
-3.141592653589793>=a&&(a+=6.283185307179586);return a};I.angleLerp=function(a,b,c){b=(b-a)%6.283185307179586;3.141592653589793<b?b-=6.283185307179586:-3.141592653589793>=b&&(b+=6.283185307179586);return a+b*c};I.angleMove=function(a,b,c){var d;d=(b-a)%6.283185307179586;3.141592653589793<d?d-=6.283185307179586:-3.141592653589793>=d&&(d+=6.283185307179586);return d>-c&&d<c?b:a+(0>d?-c:c)};I.shuffle=function(a){for(var b=a.length,c=0;c<b;){c++;var d=r.random(b),e=r.random(b),f=a[d];a[d]=a[e];a[e]=f}};
I.random=function(a){null==a&&(a=1);return Math.random()*a};I.srand=function(a){null==a&&(a=1);return(Math.random()-0.5)*2*a};I.b2f=function(a){return 0.00392156862745098*(a&255)};I.f2b=function(a){return 255*(0>a?0:1<a?1:a)|0};I.umod=function(a,b){var c=a%b;return 0<=c?c:c+b};I.ufmod=function(a,b){var c=a%b;return 0<=c?c:c+b};I.degToRad=function(a){return 3.141592653589793*a/180};I.radToDeg=function(a){return 180*a/3.141592653589793};var Ya=M["hxd.Flags"]={__ename__:!0,__constructs__:["ReadOnly",
"AlphaPremultiplied","FlipY"],ReadOnly:{_hx_index:0,__enum__:"hxd.Flags",toString:m},AlphaPremultiplied:{_hx_index:1,__enum__:"hxd.Flags",toString:m},FlipY:{_hx_index:2,__enum__:"hxd.Flags",toString:m}};Ya.__empty_constructs__=[Ya.ReadOnly,Ya.AlphaPremultiplied,Ya.FlipY];var hi={};p["hxd._Pixels.PixelsARGB_Impl_"]=hi;hi.__name__="hxd._Pixels.PixelsARGB_Impl_";hi.getPixel=function(a,b,c){a=a.bytes.getInt32((b+c*a.width<<2)+a.offset);return a>>>24|a>>8&65280|a<<8&16711680|a<<24};hi.setPixel=function(a,
b,c,d){a.bytes.setInt32((b+c*a.width<<2)+a.offset,d>>>24|d>>8&65280|d<<8&16711680|d<<24)};hi.fromPixels=function(a){a.convert(ya.ARGB);a.setFlip(!1);return a};var Lj={};p["hxd._Pixels.PixelsFloat_Impl_"]=Lj;Lj.__name__="hxd._Pixels.PixelsFloat_Impl_";Lj.getPixelF=function(a,b,c){b=(b+c*a.width<<4)+a.offset;return new U(a.bytes.getFloat(b),a.bytes.getFloat(b+4),a.bytes.getFloat(b+8),a.bytes.getFloat(b+12))};Lj.setPixelF=function(a,b,c,d){b=(b+c*a.width<<4)+a.offset;a.bytes.setFloat(b,d.x);a.bytes.setFloat(b+
4,d.y);a.bytes.setFloat(b+8,d.z);a.bytes.setFloat(b+12,d.w)};Lj.fromPixels=function(a){a.convert(ya.RGBA32F);a.setFlip(!1);return a};var Wf={};p["hxd._Pixels.Channel_Impl_"]=Wf;Wf.__name__="hxd._Pixels.Channel_Impl_";Wf.toInt=function(a){return a};Wf.fromInt=function(a){return a};var Za=function(a,b,c,d,e){null==e&&(e=0);this.width=a;this.height=b;this.bytes=c;this.set_innerFormat(d);this.offset=e;this.flags=0};p["hxd.Pixels"]=Za;Za.__name__="hxd.Pixels";Za.switchEndian=function(a){return a>>>24|
a>>8&65280|a<<8&16711680|a<<24};Za.switchBR=function(a){return a&-16711936|a<<16&16711680|a>>16&255};Za.calcStride=function(a,b){var c;switch(b._hx_index){case 3:c=8;break;case 4:c=16;break;case 5:c=1;break;case 6:c=2;break;case 7:c=4;break;case 8:c=2;break;case 9:c=4;break;case 10:c=8;break;case 11:c=3;break;case 12:c=6;break;case 13:c=12;break;case 0:case 1:case 2:case 14:case 15:c=4;break;case 16:c=4;break;case 17:c=4;break;case 18:c=b.v;if(1==c||4==c)return a>>1;c=1}return a*c};Za.getChannelOffset=
function(a,b){switch(a._hx_index){case 0:return[1,2,3,0][b];case 1:return[2,1,0,3][b];case 3:return 2*b;case 4:return 4*b;case 5:case 6:case 7:return 0==b?0:-1;case 8:case 9:case 10:return[0,Za.calcStride(1,a),-1,-1][b];case 11:case 12:case 13:var c=Za.calcStride(1,a);return[0,c,c<<1,-1][b];case 2:case 14:case 15:return b;case 16:case 17:throw new n("Bit packed format");case 18:throw new n("Not supported");}};Za.alloc=function(a,b,c){return new Za(a,b,new N(new ArrayBuffer(b*Za.calcStride(a,c))),
c)};Za.prototype={get_format:function(){return this.innerFormat},set_innerFormat:function(a){this.innerFormat=a;this.stride=Za.calcStride(this.width,a);this.bytesPerPixel=Za.calcStride(1,a);return a},invalidFormat:function(){throw new n("Unsupported format for this operation : "+r.string(this.innerFormat));},sub:function(a,b,c,d){if(0>a||0>b||a+c>this.width||b+d>this.height)throw new n("Pixels.sub() outside bounds");for(var e=new N(new ArrayBuffer(d*this.stride)),f=Za.calcStride(c,this.innerFormat),
g=0,h=0;h<d;){var k=h++,k=b+k;e.blit(g,this.bytes,(a+(0!=(this.flags&1<<Ya.FlipY._hx_index)?this.height-1-k:k)*this.width)*this.bytesPerPixel+this.offset,f);g+=f}return new Za(c,d,e,this.innerFormat)},yflip:function(a){return 0!=(this.flags&1<<Ya.FlipY._hx_index)?this.height-1-a:a},blit:function(a,b,c,d,e,f,g){if(0>a||0>b||a+f>this.width||b+g>this.height)throw new n("Pixels.blit() outside bounds");if(0>d||0>d||d+f>c.width||e+g>c.height)throw new n("Pixels.blit() outside src bounds");0!=(this.flags&
1<<Ya.ReadOnly._hx_index)&&this.copyInner();c.convert(this.innerFormat);var h=this.bytesPerPixel;if(0==h)throw new n("assert");f=Za.calcStride(f,this.innerFormat);for(var k=0;k<g;){var l=k++,m=l+e,l=l+b;this.bytes.blit((a+(0!=(this.flags&1<<Ya.FlipY._hx_index)?this.height-1-l:l)*this.width)*h+this.offset,c.bytes,(d+(0!=(c.flags&1<<Ya.FlipY._hx_index)?c.height-1-m:m)*c.width)*h+c.offset,f)}},clear:function(a,b){null==b&&(b=0);var c=b;0!=(this.flags&1<<Ya.ReadOnly._hx_index)&&this.copyInner();if(0==
a&&0==c)this.bytes.fill(this.offset,this.width*this.height*this.bytesPerPixel,0);else{switch(this.innerFormat._hx_index){case 0:a=a>>>24|a>>8&65280|a<<8&16711680|a<<24;c=c>>>24|c>>8&65280|c<<8&16711680|c<<24;break;case 1:break;case 2:a=a&-16711936|a<<16&16711680|a>>16&255;c=c&-16711936|c<<16&16711680|c>>16&255;break;default:this.invalidFormat()}var d=this.offset;if(0==c)for(var c=0,e=this.width*this.height;c<e;)c++,this.bytes.setInt32(d,a),d+=4;else for(var e=0,f=this.width*this.height;e<f;)e++,this.bytes.setInt32(d,
a|this.bytes.getInt32(d)&c),d+=4}},toVector:function(){var a=Array(this.width*this.height),b=0,c=this.offset,d=0;0!=(this.flags&1<<Ya.FlipY._hx_index)&&(c+=(this.height-1)*this.width*this.bytesPerPixel,d=2*-this.width*this.bytesPerPixel);switch(this.innerFormat._hx_index){case 0:for(var e=0,f=this.height;e<f;){e++;for(var g=0,h=this.width;g<h;){g++;var k=this.bytes.getInt32(c);a[b++]=k>>>24|k>>8&65280|k<<8&16711680|k<<24;c+=4}c+=d}break;case 1:e=0;for(f=this.height;e<f;){e++;g=0;for(h=this.width;g<
h;)g++,a[b++]=this.bytes.getInt32(c),c+=4;c+=d}break;case 2:e=0;for(f=this.height;e<f;){e++;g=0;for(h=this.width;g<h;)g++,k=this.bytes.getInt32(c),a[b++]=k&-16711936|k<<16&16711680|k>>16&255,c+=4;c+=d}break;default:this.invalidFormat()}return a},makeSquare:function(a){for(var b=this.width,c=this.height,d=0==b?0:1,e=0==c?0:1;d<b;)d<<=1;for(;e<c;)e<<=1;if(b==d&&c==e)return this;for(var f=this.bytesPerPixel,g=new N(new ArrayBuffer(d*e*f)),h=0,k=this.offset,l=0;l<c;){l++;g.blit(h,this.bytes,k,b*f);for(var h=
h+b*f,k=k+b*f,n=0,m=(d-b)*f>>2;n<m;)n++,g.setInt32(h,0),h+=4}b=0;for(c=(e-c)*d*f>>2;b<c;)b++,g.setInt32(h,0),h+=4;if(a)return new Za(d,e,g,this.innerFormat);this.bytes=g;this.width=d;this.height=e;return this},copyInner:function(){var a=this.bytes;this.bytes=new N(new ArrayBuffer(this.height*this.stride));this.bytes.blit(0,a,this.offset,this.height*this.stride);this.offset=0;this.flags&=-1-(1<<Ya.ReadOnly._hx_index)},willChange:function(){0!=(this.flags&1<<Ya.ReadOnly._hx_index)&&this.copyInner()},
setFlip:function(a){null==a&&(a=!1);if(0!=(this.flags&1<<Ya.FlipY._hx_index)!=a){0!=(this.flags&1<<Ya.ReadOnly._hx_index)&&this.copyInner();this.flags=a?this.flags|1<<Ya.FlipY._hx_index:this.flags&-1-(1<<Ya.FlipY._hx_index);0!=this.stride%4&&this.invalidFormat();a=0;for(var b=this.height>>1;a<b;)for(var c=a++,d=c*this.stride+this.offset,c=(this.height-1-c)*this.stride+this.offset,e=0,f=this.stride>>2;e<f;){e++;var g=this.bytes.getInt32(d),h=this.bytes.getInt32(c);this.bytes.setInt32(d,h);this.bytes.setInt32(c,
g);d+=4;c+=4}}},convert:function(a){if(this.innerFormat!=a){0!=(this.flags&1<<Ya.ReadOnly._hx_index)&&this.copyInner();var b=this.bytes.b,c=this.innerFormat;switch(c._hx_index){case 0:switch(a._hx_index){case 1:for(var c=0,d=this.width*this.height;c<d;){var e=(c++<<2)+this.offset,f=b[e],g=b[e+1],h=b[e+2],k=b[e+3];b[e++]=k;b[e++]=h;b[e++]=g;b[e]=f}break;case 2:c=0;for(d=this.width*this.height;c<d;)e=(c++<<2)+this.offset,f=b[e],b[e]=b[e+1],b[e+1]=b[e+2],b[e+2]=b[e+3],b[e+3]=f;break;default:throw new n("Cannot convert from "+
r.string(this.innerFormat)+" to "+r.string(a));}break;case 1:switch(a._hx_index){case 0:c=0;for(d=this.width*this.height;c<d;)e=(c++<<2)+this.offset,f=b[e],g=b[e+1],h=b[e+2],k=b[e+3],b[e++]=k,b[e++]=h,b[e++]=g,b[e]=f;break;case 2:c=0;for(d=this.width*this.height;c<d;)e=(c++<<2)+this.offset,f=b[e],b[e]=b[e+2],b[e+2]=f;break;default:throw new n("Cannot convert from "+r.string(this.innerFormat)+" to "+r.string(a));}break;case 2:switch(a._hx_index){case 0:c=0;for(d=this.width*this.height;c<d;)e=(c++<<
2)+this.offset,f=b[e+3],b[e+3]=b[e+2],b[e+2]=b[e+1],b[e+1]=b[e],b[e]=f;break;case 1:c=0;for(d=this.width*this.height;c<d;)e=(c++<<2)+this.offset,f=b[e],b[e]=b[e+2],b[e+2]=f;break;default:throw new n("Cannot convert from "+r.string(this.innerFormat)+" to "+r.string(a));}break;case 18:if(18==a._hx_index){if(c.v!=a.v)throw new n("Cannot convert from "+r.string(this.innerFormat)+" to "+r.string(a));}else throw new n("Cannot convert from "+r.string(this.innerFormat)+" to "+r.string(a));break;default:throw new n("Cannot convert from "+
r.string(this.innerFormat)+" to "+r.string(a));}this.set_innerFormat(a)}},getPixel:function(a,b){var c=(a+(0!=(this.flags&1<<Ya.FlipY._hx_index)?this.height-1-b:b)*this.width)*this.bytesPerPixel+this.offset;switch(this.innerFormat._hx_index){case 0:return c=this.bytes.getInt32(c),c>>>24|c>>8&65280|c<<8&16711680|c<<24;case 1:return this.bytes.getInt32(c);case 2:return c=this.bytes.getInt32(c),c&-16711936|c<<16&16711680|c>>16&255;default:return this.invalidFormat(),0}},setPixel:function(a,b,c){a=(a+
(0!=(this.flags&1<<Ya.FlipY._hx_index)?this.height-1-b:b)*this.width)*this.bytesPerPixel+this.offset;0!=(this.flags&1<<Ya.ReadOnly._hx_index)&&this.copyInner();switch(this.innerFormat._hx_index){case 0:this.bytes.setInt32(a,c>>>24|c>>8&65280|c<<8&16711680|c<<24);break;case 1:this.bytes.setInt32(a,c);break;case 2:this.bytes.setInt32(a,c&-16711936|c<<16&16711680|c>>16&255);break;default:this.invalidFormat()}},dispose:function(){this.bytes=null},toPNG:function(a){null==a&&(a=9);this.setFlip(!1);0==this.innerFormat._hx_index?
a=dc.build32ARGB(this.width,this.height,this.bytes,a):(this.convert(ya.BGRA),a=dc.build32BGRA(this.width,this.height,this.bytes,a));var b=new td;(new ij(b)).write(a);return b.getBytes()},clone:function(){var a=new Za(this.width,this.height,null,this.innerFormat);a.flags=this.flags;a.flags&=-1-(1<<Ya.ReadOnly._hx_index);if(null!=this.bytes){var b=this.height*this.stride;a.bytes=new N(new ArrayBuffer(b));a.bytes.blit(0,this.bytes,this.offset,b)}return a},__class__:Za};var Oi=function(a){this.enablePhysicalMouse=
this.mouseCheckMove=!0;this.isOut=!1;this.onOut=new nb(ca.EOut);this.checkPos=new nb(ca.ECheck);this.focusLost=new nb(ca.EFocusLost);this.lastTouch=0;this.mouseX=this.mouseY=-1;this.scenes=[];this.pendingEvents=[];this.pushList=[];this.overList=[];null==a&&(a=Pa.getInstance());this.window=a;a.addEventTarget(K(this,this.onEvent))};p["hxd.SceneEvents"]=Oi;Oi.__name__="hxd.SceneEvents";Oi.prototype={setMousePos:function(a,b){this.mouseX=a;this.mouseY=b},onRemove:function(a){a==this.currentFocus&&(this.currentFocus=
null);z.remove(this.overList,a)&&this.selectCursor();z.remove(this.pushList,a)},addScene:function(a,b){a.setEvents(this);null==b?this.scenes.push(a):this.scenes.splice(b,0,a)},removeScene:function(a){z.remove(this.scenes,a)&&a.setEvents(null)},dispose:function(){this.window.removeEventTarget(K(this,this.onEvent))},focus:function(a){if(this.currentFocus!=a)if(null==a)this.blur();else{if(null!=this.currentFocus&&(this.blur(),null!=this.currentFocus))return;var b=new nb(ca.EFocus);a.handleEvent(b);b.cancel||
(this.currentFocus=a)}},blur:function(){null!=this.currentFocus&&(this.focusLost.cancel=!1,this.currentFocus.handleEvent(this.focusLost),this.focusLost.cancel||(this.currentFocus=null))},checkFocus:function(){if(null!=this.currentFocus){var a=this.currentFocus.getInteractiveScene();null==a?this.currentFocus=null:a.isInteractiveVisible(this.currentFocus)||this.blur()}},emitEvent:function(a){var b=a.relX,c=a.relY,d=!1,e=!1,f=!1,g=!1,h=!1,k=!1,l=0;switch(a.kind._hx_index){case 0:g=h=!0;break;case 1:g=
!0;break;case 5:case 8:case 9:case 11:if(null!=this.currentFocus&&(a.relX=a.relY=0,this.currentFocus.handleEvent(a),a.relX=b,a.relY=c,!a.propagate))return;break;case 2:case 12:f=e=!0}for(var n=0,m=this.scenes;n<m.length;){var p=m[n];++n;for(var q=null;;){q=p.handleEvent(a,q);if(null==q){a.relX=b;a.relY=c;break}if(e){if(f){var r=this.overList.indexOf(q);if(-1==r){var r=a.propagate,s=a.kind;a.kind=ca.EOver;a.cancel=!1;q.handleEvent(a);a.cancel||(this.overList.splice(l,0,q),++l,f=a.propagate,k=!0);a.kind=
s;a.propagate=r;a.cancel=!1}else{f=this.overList[r];if(r<l){for(;!(this.overList[r]=this.overList[r+1],++r,!(r<l)););this.overList[l]=f;k=!0}else if(r>l){for(;!(this.overList[r]=this.overList[r-1],--r,!(r>l)););this.overList[l]=f;k=!0}f=q.propagateEvents;++l}}}else g&&(a.kind==ca.EPush?this.pushList.push(q):z.remove(this.pushList,q)),h&&q==this.currentFocus&&(h=!1);a.relX=b;a.relY=c;if(!a.propagate){d=!0;break}a.propagate=!1}if(d)break}h&&null!=this.currentFocus&&this.blur();if(e&&l<this.overList.length){for(e=
this.overList.length-1;;){this.onOut.cancel=!1;this.overList[e].handleEvent(this.onOut);if(!this.onOut.cancel)if(z.remove(this.overList,this.overList[e]),--e>=l)continue;else break;if(!(--e>=l))break}k=!0}k&&this.selectCursor();!d&&a!=this.checkPos&&(a.kind==ca.EPush?this.pushList.push(null):a.kind==ca.ERelease&&z.remove(this.pushList,null),this.dispatchListeners(a));if(a.kind==ca.ERelease&&0<this.pushList.length){d=0;for(l=this.pushList;d<l.length;)e=l[d],++d,null==e?this.dispatchListeners(a):(g=
e.getInteractiveScene(),null!=g&&(a.kind=ca.EReleaseOutside,g.dispatchEvent(a,e),a.kind=ca.ERelease,a.relX=b,a.relY=c));this.pushList=[]}},checkEvents:function(){var a=this.pendingEvents,b=!this.mouseCheckMove,c=null==this.currentFocus;if(0<a.length){this.pendingEvents=[];for(var d=0;d<a.length;){var e=a[d];++d;var f=e.relX,g=e.relY;switch(e.kind._hx_index){case 0:case 1:this.mouseX=e.relX;this.mouseY=e.relY;this.lastTouch=e.touchId;break;case 2:b=!0;this.mouseX=e.relX;this.mouseY=e.relY;this.lastTouch=
e.touchId;break;case 3:this.isOut=!1;this.selectCursor();continue;case 4:this.isOut=!0;if(0<this.overList.length){for(e=this.overList.length-1;0<=e;)this.onOut.cancel=!1,this.overList[e].handleEvent(this.onOut),this.onOut.cancel||z.remove(this.overList,this.overList[e]),--e;this.selectCursor()}continue;case 5:case 8:case 9:case 11:c||(c=!0,this.checkFocus())}if(null!=this.currentDrag&&(null==this.currentDrag.ref||this.currentDrag.ref==e.touchId))if(e.propagate=!1,e.cancel=!1,this.currentDrag.f(e),
e.relX=f,e.relY=g,e.cancel||e.propagate){e.cancel=!1;e.propagate=!1;continue}this.emitEvent(e)}}c||this.checkFocus();!b&&(!this.isOut&&null==this.currentDrag)&&(this.checkPos.relX=this.mouseX,this.checkPos.relY=this.mouseY,this.checkPos.touchId=this.lastTouch,this.checkPos.cancel=!1,this.checkPos.propagate=!1,this.emitEvent(this.checkPos))},startDrag:function(a,b,c){if(null!=this.currentDrag&&null!=this.currentDrag.onCancel)this.currentDrag.onCancel();this.currentDrag={f:a,ref:null==c?null:c.touchId,
onCancel:b}},stopDrag:function(){if(null!=this.currentDrag&&null!=this.currentDrag.onCancel)this.currentDrag.onCancel();this.currentDrag=null},getFocus:function(){return this.currentFocus},updateCursor:function(a){-1!=this.overList.indexOf(a)&&this.selectCursor()},selectCursor:function(){for(var a=yd.Default,b=0,c=this.overList;b<c.length;){var d=c[b];++b;if(null!=d.cursor){a=d.cursor;break}}X.setCursor(a)},onEvent:function(a){(this.enablePhysicalMouse||a.kind!=ca.EMove)&&this.pendingEvents.push(a)},
dispatchListeners:function(a){var b=a.relX,c=a.relY;a.propagate=!0;for(var d=0,e=this.scenes;d<e.length;){var f=e[d];++d;a.cancel=!1;f.dispatchListeners(a);a.relX=b;a.relY=c;if(!a.propagate)break}},__class__:Oi};var Xf=M["hxd.Platform"]={__ename__:!0,__constructs__:"IOS Android WebGL PC Console FlashPlayer".split(" "),IOS:{_hx_index:0,__enum__:"hxd.Platform",toString:m},Android:{_hx_index:1,__enum__:"hxd.Platform",toString:m},WebGL:{_hx_index:2,__enum__:"hxd.Platform",toString:m},PC:{_hx_index:3,
__enum__:"hxd.Platform",toString:m},Console:{_hx_index:4,__enum__:"hxd.Platform",toString:m},FlashPlayer:{_hx_index:5,__enum__:"hxd.Platform",toString:m}};Xf.__empty_constructs__=[Xf.IOS,Xf.Android,Xf.WebGL,Xf.PC,Xf.Console,Xf.FlashPlayer];var Fh=M["hxd.SystemValue"]={__ename__:!0,__constructs__:["IsTouch","IsWindowed","IsMobile"],IsTouch:{_hx_index:0,__enum__:"hxd.SystemValue",toString:m},IsWindowed:{_hx_index:1,__enum__:"hxd.SystemValue",toString:m},IsMobile:{_hx_index:2,__enum__:"hxd.SystemValue",
toString:m}};Fh.__empty_constructs__=[Fh.IsTouch,Fh.IsWindowed,Fh.IsMobile];var da=function(){};p["hxd.Timer"]=da;da.__name__="hxd.Timer";da.update=function(){da.frameCount++;var a=Date.now()/1E3;da.elapsedTime=a-da.lastTimeStamp;da.lastTimeStamp=a;da.elapsedTime<da.maxDeltaTime?(a=da.elapsedTime,da.currentDT=a+da.smoothFactor*(da.currentDT-a)):da.elapsedTime=1/da.wantedFPS;da.dt=da.currentDT};da.get_tmod=function(){return da.dt*da.wantedFPS};da.set_tmod=function(a){da.dt=a/da.wantedFPS;return a};
da.fps=function(){return 1/da.currentDT};da.skip=function(){da.lastTimeStamp=Date.now()/1E3};da.reset=function(){da.lastTimeStamp=Date.now()/1E3;da.dt=da.currentDT=1/da.wantedFPS};var Pa=function(a,b){this.curMouseX=this.curMouseY=0;var c=this,d=null!=a;this.eventTargets=new uc;this.resizeEvents=new uc;if(null==a){a=window.document.getElementById("webgl");if(null==a)throw new n("Missing canvas #webgl");"1"==a.getAttribute("globalEvents")&&(b=!0)}this.canvas=a;this.element=(this.focused=this.propagateKeyEvents=
b)?window:a;this.canvasPos=a.getBoundingClientRect();d?a.addEventListener("mousemove",K(this,this.onMouseMove)):window.addEventListener("mousemove",K(this,this.onMouseMove));this.element.addEventListener("mousedown",K(this,this.onMouseDown));this.element.addEventListener("mouseup",K(this,this.onMouseUp));this.element.addEventListener("wheel",K(this,this.onMouseWheel));this.element.addEventListener("touchstart",K(this,this.onTouchStart));this.element.addEventListener("touchmove",K(this,this.onTouchMove));
this.element.addEventListener("touchend",K(this,this.onTouchEnd));this.element.addEventListener("keydown",K(this,this.onKeyDown));this.element.addEventListener("keyup",K(this,this.onKeyUp));this.element.addEventListener("keypress",K(this,this.onKeyPress));var e=K(this,this.onFocus);this.element.addEventListener("blur",function(){e(!1)});var f=K(this,this.onFocus);this.element.addEventListener("focus",function(){f(!0)});a.oncontextmenu=function(a){a.stopPropagation();a.preventDefault();return!1};b?
(a.addEventListener("mousedown",function(a){c.onMouseDown(a);a.stopPropagation();a.preventDefault()}),this.element.addEventListener("contextmenu",function(a){a.stopPropagation();a.preventDefault();return!1})):(null==a.getAttribute("tabindex")&&a.setAttribute("tabindex","1"),a.style.outline="none");this.curW=this.get_width();this.curH=this.get_height();this.timer=new ee(100);this.timer.run=K(this,this.checkResize)};p["hxd.Window"]=Pa;Pa.__name__="hxd.Window";Pa.getInstance=function(){null==Pa.inst&&
(Pa.inst=new Pa);return Pa.inst};Pa.prototype={checkResize:function(){this.canvasPos=this.canvas.getBoundingClientRect();var a=this.get_width(),b=this.get_height();if(this.curW!=a||this.curH!=b)this.curW=a,this.curH=b,this.onResize(null)},dispose:function(){this.timer.stop()},onClose:function(){return!0},event:function(a){for(var b=this.eventTargets.h;null!=b;){var c=b.item,b=b.next;c(a)}},addEventTarget:function(a){this.eventTargets.add(a)},removeEventTarget:function(a){for(var b=this.eventTargets.h;null!=
b;){var c=b.item,b=b.next;if(xa.compareMethods(c,a)){this.eventTargets.remove(c);break}}},addResizeEvent:function(a){this.resizeEvents.push(a)},removeResizeEvent:function(a){for(var b=this.resizeEvents.h;null!=b;){var c=b.item,b=b.next;if(xa.compareMethods(c,a)){this.resizeEvents.remove(a);break}}},onResize:function(a){for(a=this.resizeEvents.h;null!=a;){var b=a.item;a=a.next;b()}},resize:function(a,b){},setFullScreen:function(a){},setCurrent:function(){Pa.inst=this},get_width:function(){return Math.round(this.canvasPos.width*
window.devicePixelRatio)},get_height:function(){return Math.round(this.canvasPos.height*window.devicePixelRatio)},get_mouseX:function(){return Math.round((this.curMouseX-this.canvasPos.left)*window.devicePixelRatio)},get_mouseY:function(){return Math.round((this.curMouseY-this.canvasPos.top)*window.devicePixelRatio)},get_mouseLock:function(){return!1},set_mouseLock:function(a){if(a)throw new n("Not implemented");return!1},get_vsync:function(){return!0},set_vsync:function(a){if(!a)throw new n("Can't disable vsync on this platform");
return!0},onMouseDown:function(a){if(a.clientX!=this.curMouseX||a.clientY!=this.curMouseY)this.onMouseMove(a);var b=new nb(ca.EPush,this.get_mouseX(),this.get_mouseY());a=a.button;switch(a){case 1:a=2;break;case 2:a=1;break}b.button=a;this.event(b)},onMouseUp:function(a){if(a.clientX!=this.curMouseX||a.clientY!=this.curMouseY)this.onMouseMove(a);var b=new nb(ca.ERelease,this.get_mouseX(),this.get_mouseY());a=a.button;switch(a){case 1:a=2;break;case 2:a=1;break}b.button=a;this.event(b)},onMouseMove:function(a){this.curMouseX=
a.clientX;this.curMouseY=a.clientY;this.event(new nb(ca.EMove,this.get_mouseX(),this.get_mouseY()))},onMouseWheel:function(a){a.preventDefault();var b=new nb(ca.EWheel,this.get_mouseX(),this.get_mouseY());b.wheelDelta=a.deltaY/120;this.event(b)},onTouchStart:function(a){a.preventDefault();var b,c,d=0;for(a=a.changedTouches;d<a.length;){var e=a[d];++d;b=Math.round((e.clientX-this.canvasPos.left)*window.devicePixelRatio);c=Math.round((e.clientY-this.canvasPos.top)*window.devicePixelRatio);b=new nb(ca.EPush,
b,c);b.touchId=e.identifier;this.event(b)}},onTouchMove:function(a){a.preventDefault();var b,c,d=0;for(a=a.changedTouches;d<a.length;){var e=a[d];++d;b=Math.round((e.clientX-this.canvasPos.left)*window.devicePixelRatio);c=Math.round((e.clientY-this.canvasPos.top)*window.devicePixelRatio);b=new nb(ca.EMove,b,c);b.touchId=e.identifier;this.event(b)}},onTouchEnd:function(a){a.preventDefault();var b,c,d=0;for(a=a.changedTouches;d<a.length;){var e=a[d];++d;b=Math.round((e.clientX-this.canvasPos.left)*
window.devicePixelRatio);c=Math.round((e.clientY-this.canvasPos.top)*window.devicePixelRatio);b=new nb(ca.ERelease,b,c);b.touchId=e.identifier;this.event(b)}},onKeyUp:function(a){var b=new nb(ca.EKeyUp,this.get_mouseX(),this.get_mouseY());b.keyCode=a.keyCode;this.event(b);this.propagateKeyEvents||(a.preventDefault(),a.stopPropagation())},onKeyDown:function(a){var b=new nb(ca.EKeyDown,this.get_mouseX(),this.get_mouseY());b.keyCode=a.keyCode;this.event(b);this.propagateKeyEvents||(a.preventDefault(),
a.stopPropagation())},onKeyPress:function(a){var b=new nb(ca.ETextInput,this.get_mouseX(),this.get_mouseY());b.charCode=a.charCode;this.event(b);this.propagateKeyEvents||(a.preventDefault(),a.stopPropagation())},onFocus:function(a){this.event(new nb(a?ca.EFocus:ca.EFocusLost));this.focused=a},get_isFocused:function(){return this.focused},__class__:Pa};var X=function(){};p["hxd.System"]=X;X.__name__="hxd.System";X.timeoutTick=function(){};X.getCurrentLoop=function(){return X.loopFunc};X.setLoop=function(a){X.loopInit||
(X.loopInit=!0,X.browserLoop());X.loopFunc=a};X.browserLoop=function(){var a=window;(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame)(X.browserLoop);null!=X.loopFunc&&X.loopFunc()};X.start=function(a){a()};X.setNativeCursor=function(a){if(!ha.enumEq(a,X.currentNativeCursor)){X.currentNativeCursor=a;X.currentCustomCursor=null;var b=Pa.getInstance().canvas;if(null!=b){var c;switch(a._hx_index){case 0:c="default";break;case 1:c="pointer";break;case 2:c="move";break;
case 3:c="text";break;case 4:c="none";break;case 5:a=a.custom;if(null==a.alloc){a.alloc=[];c=0;for(var d=a.frames;c<d.length;){var e=d[c];++c;a.alloc.push('url("'+e.ctx.canvas.toDataURL("image/png")+'") '+a.offsetX+" "+a.offsetY+", default")}}1<a.frames.length&&(X.currentCustomCursor=a,a.reset());c=a.alloc[a.frameIndex]}b.style.cursor=c}}};X.getDeviceName=function(){return"Unknown"};X.getDefaultFrameRate=function(){return 60};X.getValue=function(a){return!1};X.exit=function(){};X.updateCursor=function(){if(null!=
X.currentCustomCursor){var a=X.currentCustomCursor.update(da.elapsedTime);if(-1!=a){var b=Pa.getInstance().canvas;null!=b&&(b.style.cursor=X.currentCustomCursor.alloc[a])}}};X.get_width=function(){return Math.round(window.document.body.clientWidth*window.devicePixelRatio)};X.get_height=function(){return Math.round(window.document.body.clientHeight*window.devicePixelRatio)};X.get_lang=function(){return"en"};X.get_platform=function(){return Xf.PC};X.get_screenDPI=function(){return 72};X.get_allowTimeout=
function(){return!1};X.set_allowTimeout=function(a){return!1};var Mj=function(){};p["hxd.fmt.bfnt.FontParser"]=Mj;Mj.__name__="hxd.fmt.bfnt.FontParser";Mj.parse=function(a,b,c){var d=null,e=new sg(null,0),f=e.glyphs;e.baseLine=0;var g=a.getInt32(0);switch(g){case 54938946:var h=new Ob(a);h.set_position(h.pos+4);for(var k=0;h.pos<h.totlen;){var l=h.readByte(),m=h.readInt32(),p=h.pos;switch(l){case 1:e.size=e.initSize=h.readInt16();var q=h;q.set_position(q.pos+12);e.name=h.readUntil(0);break;case 2:e.lineHeight=
h.readUInt16();e.baseLine=h.readUInt16();var s=h;s.set_position(s.pos+4);k=h.readUInt16();1!=k&&Sb.trace("Warning: BMF format only supports one page at the moment.",{fileName:"hxd/fmt/bfnt/FontParser.hx",lineNumber:224,className:"hxd.fmt.bfnt.FontParser",methodName:"parse"});break;case 3:var u=h.readUntil(0);try{e.tilePath=u;var w=sa.join([sa.directory(b),u]),d=c(w)}catch(v){Sb.trace('Warning: Could not find referenced font texture at "'+u+'", trying to resolve same name as fnt!',{fileName:"hxd/fmt/bfnt/FontParser.hx",
lineNumber:30,className:"hxd.fmt.bfnt.FontParser",methodName:"parse"});e.tilePath=(new sa(b)).file+".png";var y=sa.withExtension(b,"png"),d=c(y)}break;case 4:for(var E=m/20|0;0<E;){var C=h.readInt32(),B=h.readUInt16(),D=h.readUInt16(),G=h.readUInt16(),J=h.readUInt16(),I=h.readInt16(),K=h.readInt16(),L=d.sub(B,D,G,J,I,K),N=new yc(L,h.readInt16());f.h[C]=N;var M=h;M.set_position(M.pos+2);--E}break;case 5:for(var U=m/10|0;0<U;){var V=h.readInt32(),R=h.readInt32(),Q=f.h[R];if(null!=Q)Q.addKerning(V,h.readInt16());
else{var T=h;T.set_position(T.pos+2)}--U}}h.set_position(p+m)}break;case 1414415938:return(new Pg(new Ob(a))).read(function(a){try{e.tilePath=a;var f=sa.join([sa.directory(b),a]);d=c(f)}catch(g){Sb.trace('Warning: Could not find referenced font texture at "'+a+'", trying to resolve same name as fnt!',{fileName:"hxd/fmt/bfnt/FontParser.hx",lineNumber:30,className:"hxd.fmt.bfnt.FontParser",methodName:"parse"}),e.tilePath=(new sa(b)).file+".png",a=sa.withExtension(b,"png"),d=c(a)}return d});case 1836597052:case 1852794428:var P=
H.parse(a.toString()).firstElement();if(P.nodeType!=H.Document&&P.nodeType!=H.Element)throw new n("Invalid nodeType "+P.nodeType);if(Ok.resolve(P,"info")){var S=pd.resolve(P,"info");e.name=Ja.resolve(S,"face");var W=Ja.resolve(pd.resolve(P,"info"),"size");e.size=e.initSize=r.parseInt(W);var X=Ja.resolve(pd.resolve(P,"common"),"lineHeight");e.lineHeight=r.parseInt(X);var $=Ja.resolve(pd.resolve(P,"common"),"base");e.baseLine=r.parseInt($);for(var Z=pd.resolve(P,"pages").elements();Z.hasNext();){var ea=
Z.next();if("0"==Ja.resolve(ea,"id")){var da=Ja.resolve(ea,"file");try{e.tilePath=da;var A=sa.join([sa.directory(b),da]),d=c(A)}catch(aa){Sb.trace('Warning: Could not find referenced font texture at "'+da+'", trying to resolve same name as fnt!',{fileName:"hxd/fmt/bfnt/FontParser.hx",lineNumber:30,className:"hxd.fmt.bfnt.FontParser",methodName:"parse"});e.tilePath=(new sa(b)).file+".png";var la=sa.withExtension(b,"png"),d=c(la)}}else Sb.trace("Warning: BMF format only supports one page at the moment.",
{fileName:"hxd/fmt/bfnt/FontParser.hx",lineNumber:66,className:"hxd.fmt.bfnt.FontParser",methodName:"parse"})}for(var na=pd.resolve(P,"chars").elements();na.hasNext();){for(var Y=na.next(),qa=r.parseInt(Ja.resolve(Y,"x")),ha=r.parseInt(Ja.resolve(Y,"y")),ja=r.parseInt(Ja.resolve(Y,"width")),fa=r.parseInt(Ja.resolve(Y,"height")),ma=r.parseInt(Ja.resolve(Y,"xoffset")),ia=r.parseInt(Ja.resolve(Y,"yoffset")),oa=d.sub(qa,ha,ja,fa,ma,ia),ca=new yc(oa,r.parseInt(Ja.resolve(Y,"xadvance"))),ya=pd.resolve(P,
"kernings").elements();ya.hasNext();){var ka=ya.next();Ja.resolve(ka,"second")==Ja.resolve(Y,"id")&&ca.addKerning(r.parseInt(Ja.resolve(ka,"first")),r.parseInt(Ja.resolve(ka,"amount")))}var Aa=r.parseInt(Ja.resolve(Y,"id"));f.h[Aa]=ca}}else{e.tilePath=(new sa(b)).file+".png";var Ba=sa.withExtension(b,"png"),d=c(Ba);e.name=Ja.resolve(P,"family");var Ga=Ja.resolve(P,"size");e.size=e.initSize=r.parseInt(Ga);var ua=Ja.resolve(P,"height");e.lineHeight=r.parseInt(ua);for(var Fa=[],xa=P.elements();xa.hasNext();){for(var Ca=
xa.next(),ra=Ja.resolve(Ca,"rect").split(" "),pa=Ja.resolve(Ca,"offset").split(" "),za=d.sub(r.parseInt(ra[0]),r.parseInt(ra[1]),r.parseInt(ra[2]),r.parseInt(ra[3]),r.parseInt(pa[0]),r.parseInt(pa[1])),Ea=new yc(za,r.parseInt(Ja.resolve(Ca,"width"))-1),Da=Ja.resolve(Ca,"code"),Ha=ga.startsWith(Da,"&#")?r.parseInt(z.substr(Da,2,Da.length-3)):z.cca(Da,0),Ra=Ca.elements();Ra.hasNext();){var Ia=Ra.next(),Wa=Ja.resolve(Ia,"id"),Za=ga.startsWith(Wa,"&#")?r.parseInt(z.substr(Wa,2,Wa.length-3)):z.cca(Wa,
0),eb=r.parseInt(Ja.resolve(Ia,"advance"));f.h.hasOwnProperty(Za)?f.h[Za].addKerning(Ha,eb):Fa.push({prev:Ha,next:Za,adv:eb})}f.h[Ha]=Ea}for(var Xa=0;Xa<Fa.length;){var Ka=Fa[Xa];++Xa;var Ya=f.h[Ka.next];null!=Ya&&Ya.addKerning(Ka.prev,Ka.adv)}}break;case 1868983913:for(var $a=a.toString().split("\n"),La=new Ze(' *?([0-9a-zA-Z]+)=("[^"]+"|.+?)(?:[ \r]|$)',""),Ma,Pa=0,xb=0;xb<$a.length;){var ta=$a[xb];++xb;Ma=ta.indexOf(" ");switch(z.substr(ta,0,Ma)){case "char":for(var gb=0,cb=0,Na=0,ib=0,bb=0,Sa=
0,Db=0,Gb=0;Ma<ta.length&&La.matchSub(ta,Ma);){switch(La.matched(1)){case "height":var va=La.matched(2),bb=r.parseInt(34==z.cca(va,0)?va.substring(1,va.length-1):va);break;case "id":var wa=La.matched(2),gb=r.parseInt(34==z.cca(wa,0)?wa.substring(1,wa.length-1):wa);break;case "width":var Oa=La.matched(2),ib=r.parseInt(34==z.cca(Oa,0)?Oa.substring(1,Oa.length-1):Oa);break;case "x":var Qa=La.matched(2),cb=r.parseInt(34==z.cca(Qa,0)?Qa.substring(1,Qa.length-1):Qa);break;case "xadvance":var db=La.matched(2),
Gb=r.parseInt(34==z.cca(db,0)?db.substring(1,db.length-1):db);break;case "xoffset":var Vb=La.matched(2),Sa=r.parseInt(34==z.cca(Vb,0)?Vb.substring(1,Vb.length-1):Vb);break;case "y":var Ta=La.matched(2),Na=r.parseInt(34==z.cca(Ta,0)?Ta.substring(1,Ta.length-1):Ta);break;case "yoffset":var ub=La.matched(2),Db=r.parseInt(34==z.cca(ub,0)?ub.substring(1,ub.length-1):ub)}var Eb=La.matchedPos();Ma=Eb.pos+Eb.len}var sb=d.sub(cb,Na,ib,bb,Sa,Db),wb=new yc(sb,Gb);f.h[gb]=wb;break;case "common":for(;Ma<ta.length&&
La.matchSub(ta,Ma);){switch(La.matched(1)){case "base":var yb=La.matched(2);e.baseLine=r.parseInt(34==z.cca(yb,0)?yb.substring(1,yb.length-1):yb);break;case "lineHeight":var ab=La.matched(2);e.lineHeight=r.parseInt(34==z.cca(ab,0)?ab.substring(1,ab.length-1):ab);break;case "pages":var Lb=La.matched(2),Pa=r.parseInt(34==z.cca(Lb,0)?Lb.substring(1,Lb.length-1):Lb);1!=Pa&&Sb.trace("Warning: BMF format only supports one page at the moment.",{fileName:"hxd/fmt/bfnt/FontParser.hx",lineNumber:157,className:"hxd.fmt.bfnt.FontParser",
methodName:"parse"})}var Ib=La.matchedPos();Ma=Ib.pos+Ib.len}break;case "info":for(;Ma<ta.length&&La.matchSub(ta,Ma);){switch(La.matched(1)){case "face":var Sd=La.matched(2);e.name=34==z.cca(Sd,0)?Sd.substring(1,Sd.length-1):Sd;break;case "size":var Cb=La.matched(2);e.size=e.initSize=r.parseInt(34==z.cca(Cb,0)?Cb.substring(1,Cb.length-1):Cb)}var jb=La.matchedPos();Ma=jb.pos+jb.len}break;case "kerning":for(var mb=0,tb=0,fb=0;Ma<ta.length&&La.matchSub(ta,Ma);){switch(La.matched(1)){case "amount":var Fb=
La.matched(2),fb=r.parseInt(34==z.cca(Fb,0)?Fb.substring(1,Fb.length-1):Fb);break;case "first":var Ed=La.matched(2),mb=r.parseInt(34==z.cca(Ed,0)?Ed.substring(1,Ed.length-1):Ed);break;case "second":var Td=La.matched(2),tb=r.parseInt(34==z.cca(Td,0)?Td.substring(1,Td.length-1):Td)}var vb=La.matchedPos();Ma=vb.pos+vb.len}var vd=f.h[tb];null!=vd&&vd.addKerning(mb,fb);break;case "page":for(;Ma<ta.length&&La.matchSub(ta,Ma);){if("file"==La.matched(1)){var zb=La.matched(2),lb=34==z.cca(zb,0)?zb.substring(1,
zb.length-1):zb;try{e.tilePath=lb;var Kb=sa.join([sa.directory(b),lb]),d=c(Kb)}catch(Qb){Sb.trace('Warning: Could not find referenced font texture at "'+lb+'", trying to resolve same name as fnt!',{fileName:"hxd/fmt/bfnt/FontParser.hx",lineNumber:30,className:"hxd.fmt.bfnt.FontParser",methodName:"parse"});e.tilePath=(new sa(b)).file+".png";var Rb=sa.withExtension(b,"png"),d=c(Rb)}}var Pb=La.matchedPos();Ma=Pb.pos+Pb.len}}}break;default:throw new n("Unknown font signature "+ga.hex(g,8));}if(null==
f.h[32]){var nb=new yc(d.sub(0,0,0,0),e.size>>1);f.h[32]=nb}e.tile=d;if(0==e.baseLine){var Bb=0,Ub=f.h[32];null!=Ub&&(Bb=0.5*Ub.t.height);var Hb=f.h[65];null==Hb&&(Hb=f.h[97]);null==Hb&&(Hb=f.h[48]);e.baseLine=null==Hb?e.lineHeight-2-Bb:Hb.t.dy+Hb.t.height-Bb}var Wb=f.h[65533];null==Wb&&(Wb=f.h[9633]);null!=Wb&&(e.defaultChar=Wb);return e};var Pg=function(a){this.i=a};p["hxd.fmt.bfnt.Reader"]=Pg;Pg.__name__="hxd.fmt.bfnt.Reader";Pg.parse=function(a,b){return(new Pg(new Ob(a))).read(b)};Pg.prototype=
{read:function(a){if("BFNT"!=this.i.readString(4)||0!=this.i.readByte())throw new n("Not a BFNT file!");var b=null,b=this.i.readByte();if(1==b){b=new sg(this.i.readString(this.i.readUInt16()),this.i.readInt16());b.tilePath=this.i.readString(this.i.readUInt16());a=b.tile=a(b.tilePath);b.lineHeight=this.i.readInt16();b.baseLine=this.i.readInt16();for(var c=this.i.readInt32(),d;;){d=this.i.readInt32();if(0==d)break;var e=a.sub(this.i.readUInt16(),this.i.readUInt16(),this.i.readUInt16(),this.i.readUInt16(),
this.i.readInt16(),this.i.readInt16()),e=new yc(e,this.i.readInt16());b.glyphs.h[d]=e;d==c&&(b.defaultChar=e);for(;;){d=this.i.readInt32();if(0==d)break;e.addKerning(d,this.i.readInt16())}}}else throw new n("Unknown BFNT version: "+b);return b},__class__:Pg};var Sc={};p["hxd.fmt.hmd._Data.GeometryDataFormat_Impl_"]=Sc;Sc.__name__="hxd.fmt.hmd._Data.GeometryDataFormat_Impl_";Sc._new=function(a){return a};Sc.getSize=function(a){return a&7};Sc.toInt=function(a){return a};Sc.toString=function(a){switch(a){case 1:return"DFloat";
case 2:return"DVec2";case 3:return"DVec3";case 4:return"DVec4";case 9:return"DBytes4"}};Sc.fromInt=function(a){return a};var ii=M["hxd.fmt.hmd.Property"]={__ename__:!0,__constructs__:["CameraFOVY","Unused_HasMaterialFlags","HasExtraTextures"],CameraFOVY:(s=function(a){return{_hx_index:0,v:a,__enum__:"hxd.fmt.hmd.Property",toString:m}},s.__params__=["v"],s),Unused_HasMaterialFlags:{_hx_index:1,__enum__:"hxd.fmt.hmd.Property",toString:m},HasExtraTextures:{_hx_index:2,__enum__:"hxd.fmt.hmd.Property",
toString:m}};ii.__empty_constructs__=[ii.Unused_HasMaterialFlags,ii.HasExtraTextures];var Qg=function(){};p["hxd.fmt.hmd.Position"]=Qg;Qg.__name__="hxd.fmt.hmd.Position";Qg.prototype={loadQuaternion:function(a){a.x=this.qx;a.y=this.qy;a.z=this.qz;a.w=this.get_qw()},get_qw:function(){var a=1-(this.qx*this.qx+this.qy*this.qy+this.qz*this.qz);return 0>a?-Math.sqrt(-a):Math.sqrt(a)},toMatrix:function(a){null==a&&(a=!1);var b=new R,c=Qg.QTMP;c.x=this.qx;c.y=this.qy;c.z=this.qz;c.w=this.get_qw();c.toMatrix(b);
a?(b.translate(this.x,this.y,this.z),b.scale(this.sx,this.sy,this.sz)):(b._11*=this.sx,b._12*=this.sx,b._13*=this.sx,b._21*=this.sy,b._22*=this.sy,b._23*=this.sy,b._31*=this.sz,b._32*=this.sz,b._33*=this.sz,b.translate(this.x,this.y,this.z));return b},__class__:Qg};var Qd=function(a,b){this.name=a;this.format=b};p["hxd.fmt.hmd.GeometryFormat"]=Qd;Qd.__name__="hxd.fmt.hmd.GeometryFormat";Qd.prototype={__class__:Qd};var Nj=function(){};p["hxd.fmt.hmd.Geometry"]=Nj;Nj.__name__="hxd.fmt.hmd.Geometry";
Nj.prototype={get_indexCount:function(){for(var a=0,b=0,c=this.indexCounts;b<c.length;){var d=c[b];++b;a+=d}return a},__class__:Nj};var Oj=function(){};p["hxd.fmt.hmd.Material"]=Oj;Oj.__name__="hxd.fmt.hmd.Material";Oj.prototype={__class__:Oj};var Pj=function(){};p["hxd.fmt.hmd.SkinJoint"]=Pj;Pj.__name__="hxd.fmt.hmd.SkinJoint";Pj.prototype={__class__:Pj};var Qj=function(){};p["hxd.fmt.hmd.SkinSplit"]=Qj;Qj.__name__="hxd.fmt.hmd.SkinSplit";Qj.prototype={__class__:Qj};var Rj=function(){};p["hxd.fmt.hmd.Skin"]=
Rj;Rj.__name__="hxd.fmt.hmd.Skin";Rj.prototype={__class__:Rj};var Sj=function(){};p["hxd.fmt.hmd.Model"]=Sj;Sj.__name__="hxd.fmt.hmd.Model";Sj.prototype={__class__:Sj};var Dc=M["hxd.fmt.hmd.AnimationFlag"]={__ename__:!0,__constructs__:"HasPosition HasRotation HasScale HasUV HasAlpha SinglePosition HasProps Reserved".split(" "),HasPosition:{_hx_index:0,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:m},HasRotation:{_hx_index:1,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:m},HasScale:{_hx_index:2,__enum__:"hxd.fmt.hmd.AnimationFlag",
toString:m},HasUV:{_hx_index:3,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:m},HasAlpha:{_hx_index:4,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:m},SinglePosition:{_hx_index:5,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:m},HasProps:{_hx_index:6,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:m},Reserved:{_hx_index:7,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:m}};Dc.__empty_constructs__=[Dc.HasPosition,Dc.HasRotation,Dc.HasScale,Dc.HasUV,Dc.HasAlpha,Dc.SinglePosition,Dc.HasProps,Dc.Reserved];
var Tj=function(){};p["hxd.fmt.hmd.AnimationObject"]=Tj;Tj.__name__="hxd.fmt.hmd.AnimationObject";Tj.prototype={__class__:Tj};var Uj=function(){};p["hxd.fmt.hmd.AnimationEvent"]=Uj;Uj.__name__="hxd.fmt.hmd.AnimationEvent";Uj.prototype={__class__:Uj};var Vj=function(){};p["hxd.fmt.hmd.Animation"]=Vj;Vj.__name__="hxd.fmt.hmd.Animation";Vj.prototype={__class__:Vj};var ji=function(){};p["hxd.fmt.hmd.Data"]=ji;ji.__name__="hxd.fmt.hmd.Data";ji.prototype={__class__:ji};var ki=function(a,b,c,d){this.size=
a;this.offset=b;this.def=c;this.next=d};p["hxd.fmt.hmd._Library.FormatMap"]=ki;ki.__name__="hxd.fmt.hmd._Library.FormatMap";ki.prototype={__class__:ki};var Wj=function(){};p["hxd.fmt.hmd.GeometryBuffer"]=Wj;Wj.__name__="hxd.fmt.hmd.GeometryBuffer";Wj.prototype={__class__:Wj};var Xj=function(a,b){this.tmp=new N(new ArrayBuffer(4));this.resource=a;this.header=b;this.cachedPrimitives=[];this.cachedAnimations=new ia;this.cachedSkin=new ia};p["hxd.fmt.hmd.Library"]=Xj;Xj.__name__="hxd.fmt.hmd.Library";
Xj.prototype={getData:function(){var a=this.resource.entry,b=new N(new ArrayBuffer(a.get_size()-this.header.dataPosition));a.open();a.skip(this.header.dataPosition);a.read(b,0,b.length);a.close();return b},getDefaultFormat:function(a){var b=[new Qd("position",3)],c=[null];3<a&&(b.push(new Qd("normal",3)),c.push(null));6<a&&(b.push(new Qd("uv",2)),c.push(null));8<a&&(b.push(new Qd("color",3)),c.push(new U(1,1,1)));if(11<a)throw new n("Unsupported stride");return{format:b,defs:c}},load:function(a,b,
c){null==c&&(c=-1);var d=0,e=0,f=0;c=0>c?this.header.models:[this.header.models[c]];for(var g=db._new(0),h=[],k=0,l=-1,m=0;m<a.length;){var p=a[m];++m;k+=p.format&7}for(m=0;m<c.length;){var q=c[m];++m;p=this.header.geometries[q.geometry];if(null!=p){for(var r=0,s=q.materials;r<s.length;){var u=s[r];++r;0>l&&(l=u);if(l!=u)throw new n("Models have several materials");}q=q.position.toMatrix();r=this.getBuffers(p,a,b);p=g.pos/k|0;s=0;for(u=r.vertexes.length/k|0;s<u;){var w=s++*k,d=r.vertexes[w++],e=r.vertexes[w++],
f=r.vertexes[w++],v=d*q._12+e*q._22+f*q._32+1*q._42,y=d*q._13+e*q._23+f*q._33+1*q._43,d=d*q._11+e*q._21+f*q._31+1*q._41,e=v,f=y;g.pos==g.array.length&&(v=g.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(g.array),g.array=v);g.array[g.pos++]=d;g.pos==g.array.length&&(d=g.array.length<<1,128>d&&(d=128),d=new Float32Array(d),d.set(g.array),g.array=d);g.array[g.pos++]=e;g.pos==g.array.length&&(e=g.array.length<<1,128>e&&(e=128),e=new Float32Array(e),e.set(g.array),g.array=e);g.array[g.pos++]=
f;f=0;for(e=k-3;f<e;)f++,d=r.vertexes[w++],g.pos==g.array.length&&(v=g.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(g.array),g.array=v),g.array[g.pos++]=d}q=0;for(r=r.indexes;q<r.length;)s=r[q],++q,h.push(s+p)}}return{vertex:g,index:h}},getBuffers:function(a,b,c,d){0==d&&1==a.indexCounts.length&&(d=null);for(var e=null,f=0,g=0,h=b.length;g<h;){for(var k=g++,l=b.length-1-k,k=b[l],m=k.format&7,p=0,q=!1,r=0,s=a.vertexFormat;r<s.length;){var u=s[r];++r;if(u.name==k.name){if((u.format&7)<
m)throw new n("Requested "+k.name+" data has only "+(u.format&7)+" regs instead of "+m);q=!0;break}p+=u.format&7}if(q)e=new ki(m,p,null,e);else{l=null==c?null:c[l];if(null==l)throw new n("Missing required "+k.name);e=new ki(m,0,l,e)}f+=m}c=4*a.vertexCount*a.vertexStride;g=new N(new ArrayBuffer(c));b=this.resource.entry;b.open();b.skip(this.header.dataPosition+a.vertexPosition);b.read(g,0,c);b.skip(a.indexPosition-(a.vertexPosition+c));if(null==d)c=2*a.get_indexCount();else{h=c=0;for(k=d;h<k;)m=h++,
c+=a.indexCounts[m];b.skip(2*c);c=2*a.indexCounts[d]}h=new N(new ArrayBuffer(c));b.read(h,0,c);c=new Wj;if(null==d){c.vertexes=Array(f*a.vertexCount);d=Array(a.get_indexCount());c.indexes=d;f=d=0;for(k=a.vertexCount;f<k;){m=f++;for(l=e;null!=l;){if(null==l.def){p=m*a.vertexStride;q=0;for(r=l.size;q<r;)s=q++,c.vertexes[d++]=g.getFloat(p+l.offset+s<<2)}else switch(l.size){case 1:c.vertexes[d++]=l.def.x;break;case 2:c.vertexes[d++]=l.def.x;c.vertexes[d++]=l.def.y;break;case 3:c.vertexes[d++]=l.def.x;
c.vertexes[d++]=l.def.y;c.vertexes[d++]=l.def.z;break;default:c.vertexes[d++]=l.def.x,c.vertexes[d++]=l.def.y,c.vertexes[d++]=l.def.z,c.vertexes[d++]=l.def.w}l=l.next}}e=a=0;for(g=c.indexes.length;e<g;)d=e++,c.indexes[d]=h.b[a++]|h.b[a++]<<8}else{k=a.indexCounts[d];f=Array(a.vertexCount);d=db._new(0);c.indexes=Array(k);l=m=k=0;for(p=c.indexes.length;l<p;){q=l++;r=h.b[k++]|h.b[k++]<<8;s=f[r];if(0==s){++m;s=m;f[r]=s;for(u=e;null!=u;){if(null==u.def)for(var w=r*a.vertexStride,v=0,y=u.size;v<y;){var C=
v++,C=g.getFloat(w+u.offset+C<<2);if(d.pos==d.array.length){var z=d.array.length<<1;128>z&&(z=128);z=new Float32Array(z);z.set(d.array);d.array=z}d.array[d.pos++]=C}else switch(u.size){case 1:w=u.def.x;d.pos==d.array.length&&(v=d.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=v);d.array[d.pos++]=w;break;case 2:w=u.def.x;d.pos==d.array.length&&(v=d.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=v);d.array[d.pos++]=w;w=u.def.y;d.pos==d.array.length&&
(v=d.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=v);d.array[d.pos++]=w;break;case 3:w=u.def.x;d.pos==d.array.length&&(v=d.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=v);d.array[d.pos++]=w;w=u.def.y;d.pos==d.array.length&&(v=d.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=v);d.array[d.pos++]=w;w=u.def.z;d.pos==d.array.length&&(v=d.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=
v);d.array[d.pos++]=w;break;default:w=u.def.x,d.pos==d.array.length&&(v=d.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=v),d.array[d.pos++]=w,w=u.def.y,d.pos==d.array.length&&(v=d.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=v),d.array[d.pos++]=w,w=u.def.z,d.pos==d.array.length&&(v=d.array.length<<1,128>v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=v),d.array[d.pos++]=w,w=u.def.w,d.pos==d.array.length&&(v=d.array.length<<1,128>
v&&(v=128),v=new Float32Array(v),v.set(d.array),d.array=v),d.array[d.pos++]=w}u=u.next}}c.indexes[q]=s-1}a=[];e=0;for(g=d.pos;e<g;)h=e++,a.push(d.array[h]);c.vertexes=a}b.close();return c},makePrimitive:function(a){var b=this.cachedPrimitives[a];if(null!=b)return b;b=new Jg(this.header.geometries[a],this.header.dataPosition,this);return this.cachedPrimitives[a]=b},makeMaterial:function(a,b,c){b=this.header.materials[b];a=ae.current.createMaterial();a.name=b.name;null!=b.diffuseTexture&&(a.set_texture(c(b.diffuseTexture)),
null==a.get_texture()&&a.set_texture(V.fromColor(16711935)));null!=b.specularTexture&&a.set_specularTexture(c(b.specularTexture));null!=b.normalMap&&a.set_normalMap(c(b.normalMap));a.set_blendMode(b.blendMode);a.model=this.resource;c=ae.current.loadMaterialProps(a);null==c&&(c=a.getDefaultModelProps());a.set_props(c);return a},makeSkin:function(a){var b=a.name,c=this.cachedSkin,b=null!=L[b]?c.getReserved(b):c.h[b];if(null!=b)return b;b=new uj(a.name,0,3);b.namedJoints=new ia;b.allJoints=[];b.boundJoints=
[];b.rootJoints=[];for(var c=0,d=a.joints;c<d.length;){var e=d[c];++c;var f=new rj;f.name=e.name;f.index=b.allJoints.length;f.defMat=e.position.toMatrix();0<=e.bind&&(f.bindIndex=e.bind,f.transPos=e.transpos.toMatrix(!0),b.boundJoints[f.bindIndex]=f);0<=e.parent?(e=b.allJoints[e.parent],e.subs.push(f),f.parent=e):b.rootJoints.push(f);b.allJoints.push(f);var e=f.name,g=b.namedJoints;null!=L[e]?g.setReserved(e,f):g.h[e]=f}if(null!=a.split){b.splitJoints=[];c=0;for(d=a.split;c<d.length;){var h=d[c];
++c;for(var f=b.splitJoints,e=h.materialIndex,g=[],k=0,h=h.joints;k<h.length;){var l=h[k];++k;g.push(b.allJoints[l])}f.push({material:e,joints:g})}}a=a.name;c=this.cachedSkin;null!=L[a]?c.setReserved(a,b):c.h[a]=b;return b},getModelProperty:function(a,b,c){for(var d=0,e=this.header.models;d<e.length;){var f=e[d];++d;if(f.name==a){if(null!=f.props){a=0;for(f=f.props;a<f.length;)if(d=f[a],++a,d._hx_index==b._hx_index)return ha.enumParameters(d)[0]}return c}}if(null==c)throw new n("Model "+a+" not found");
return c},makeObject:function(a){null==a&&(a=function(a){return V.fromColor(16711935)});if(0==this.header.models.length)throw new n("This file does not contain any model");for(var b=[],c=0,d=this.header.models;c<d.length;){var e=d[c];++c;var f;if(0>e.geometry)f=new Fa;else if(f=this.makePrimitive(e.geometry),null!=e.skin){var g=this.makeSkin(e.skin);g.primitive=f;f=[];for(var h=0,k=e.materials;h<k.length;){var l=k[h];++h;f.push(this.makeMaterial(e,l,a))}f=new Lg(g,f)}else if(1==e.materials.length)f=
new eb(f,this.makeMaterial(e,e.materials[0],a));else{g=[];h=0;for(k=e.materials;h<k.length;)l=k[h],++h,g.push(this.makeMaterial(e,l,a));f=new Rc(f,g)}f.name=e.name;g=e.position.toMatrix();f.defaultTransform=g;f.flags|=1;b.push(f);e=b[e.parent];null!=e&&e.addChild(f)}return b[0]},loadAnimation:function(a){var b=this.cachedAnimations,c=null==a?"":a,b=null!=L[c]?b.getReserved(c):b.h[c];if(null!=b)return b;b=null;if(null==a){if(0==this.header.animations.length)return null;b=this.header.animations[0]}else{for(var c=
0,d=this.header.animations;c<d.length;){var e=d[c];++c;if(e.name==a){b=e;break}}if(null==b)throw new n("Animation "+a+" not found !");}c=this.makeAnimation(b);c.resPath=this.resource.entry.get_path();b=b.name;d=this.cachedAnimations;null!=L[b]?d.setReserved(b,c):d.h[b]=c;null==a&&(a=this.cachedAnimations,null!=L[""]?a.setReserved("",c):a.h[""]=c);return c},makeAnimation:function(a){var b=new uf(a.name,a.frames,a.sampling);b.speed=a.speed;b.loop=a.loop;null!=a.events&&b.setEvents(a.events);if(null!=
this.hideData){var c=this.resource.entry.name.split(".")[0];ga.startsWith(c,"Anim_")&&(c=z.substr(c,5,null));Object.prototype.hasOwnProperty.call(this.hideData.animations,c)&&b.setEvents(this.hideData.animations[c].events)}c=this.resource.entry;c.open();c.skip(this.header.dataPosition+a.dataPosition);for(var d=0,e=a.objects;d<e.length;){var f=e[d];++d;var g=0!=(f.flags&1<<Dc.HasPosition._hx_index),h=0!=(f.flags&1<<Dc.HasRotation._hx_index),k=0!=(f.flags&1<<Dc.HasScale._hx_index);if(g||h||k){var l=
a.frames;0!=(f.flags&1<<Dc.SinglePosition._hx_index)&&(l=1);var n=Array(l),m=4*((g?3:0)+(h?3:0)+(k?3:0))*l,p=new N(new ArrayBuffer(m));c.read(p,0,m);for(var q=m=0;q<l;){var r=q++,s=new qj;g?(s.tx=p.getFloat(m),m+=4,s.ty=p.getFloat(m),m+=4,s.tz=p.getFloat(m),m+=4):(s.tx=0,s.ty=0,s.tz=0);if(h){s.qx=p.getFloat(m);m+=4;s.qy=p.getFloat(m);m+=4;s.qz=p.getFloat(m);var m=m+4,u=1-(s.qx*s.qx+s.qy*s.qy+s.qz*s.qz);s.qw=0>u?-Math.sqrt(-u):Math.sqrt(u)}else s.qx=0,s.qy=0,s.qz=0,s.qw=1;k?(s.sx=p.getFloat(m),m+=
4,s.sy=p.getFloat(m),m+=4,s.sz=p.getFloat(m),m+=4):(s.sx=1,s.sy=1,s.sz=1);n[r]=s}b.addCurve(f.name,n,h,k)}if(0!=(f.flags&1<<Dc.HasUV._hx_index)){g=Array(2*a.frames);k=8*a.frames;h=new N(new ArrayBuffer(k));c.read(h,0,k);k=0;for(n=g.length;k<n;)p=k++,g[p]=h.getFloat(4*p);b.addUVCurve(f.name,g)}if(0!=(f.flags&1<<Dc.HasAlpha._hx_index)){g=Array(a.frames);k=4*a.frames;h=new N(new ArrayBuffer(k));c.read(h,0,k);k=0;for(n=g.length;k<n;)p=k++,g[p]=h.getFloat(4*p);b.addAlphaCurve(f.name,g)}if(0!=(f.flags&
1<<Dc.HasProps._hx_index)){g=0;for(h=f.props;g<h.length;){k=h[g];++g;n=Array(a.frames);m=4*a.frames;p=new N(new ArrayBuffer(m));c.read(p,0,m);m=0;for(q=n.length;m<q;)l=m++,n[l]=p.getFloat(4*l);b.addPropCurve(f.name,k,n)}}}c.close();return b},loadSkin:function(a,b){if(null==b.vertexWeights){b.vertexCount=a.vertexCount;var c=this.getBuffers(a,[new Qd("weights",3)]).vertexes;b.vertexWeights=Array(b.vertexCount*b.bonesPerVertex);b.vertexJoints=Array(b.vertexCount*b.bonesPerVertex);for(var d=0,e=b.vertexWeights.length;d<
e;){var f=d++;b.vertexWeights[f]=c[f]}c=this.getBuffers(a,[new Qd("indexes",9)]).vertexes;e=d=0;for(f=b.vertexCount;e<f;){var g=e++,g=this.ftoint32(c[g]);b.vertexJoints[d++]=g&255;b.vertexJoints[d++]=g>>8&255;b.vertexJoints[d++]=g>>16&255}}},ftoint32:function(a){this.tmp.setFloat(0,a);return this.tmp.getInt32(0)},__class__:Xj};var Yf=function(a){this.i=a};p["hxd.fmt.hmd.Reader"]=Yf;Yf.__name__="hxd.fmt.hmd.Reader";Yf.prototype={readProperty:function(){var a=this.i.readByte();switch(a){case 0:return ii.CameraFOVY(this.i.readFloat());
case 1:throw new n("Obsolete HasMaterialFlags");case 2:return ii.HasExtraTextures;default:throw new n("Unknown property #"+a);}},readProps:function(){if(1==this.version)return null;var a=this.i.readByte();if(0==a)return null;for(var b=[],c=0;c<a;)c++,b.push(this.readProperty());return b},readName:function(){var a=this.i.readByte();return 255==a?null:this.i.readString(a)},readPosition:function(a){null==a&&(a=!0);var b=new Qg;b.x=this.i.readFloat();b.y=this.i.readFloat();b.z=this.i.readFloat();b.qx=
this.i.readFloat();b.qy=this.i.readFloat();b.qz=this.i.readFloat();a?(b.sx=this.i.readFloat(),b.sy=this.i.readFloat(),b.sz=this.i.readFloat()):(b.sx=1,b.sy=1,b.sz=1);return b},readBounds:function(){var a=new tb;a.xMin=this.i.readFloat();a.yMin=this.i.readFloat();a.zMin=this.i.readFloat();a.xMax=this.i.readFloat();a.yMax=this.i.readFloat();a.zMax=this.i.readFloat();return a},readSkin:function(){var a=this.readName();if(null==a)return null;var b=new Rj;b.props=this.readProps();b.name=a;b.joints=[];
for(var a=0,c=this.i.readUInt16();a<c;){a++;var d=new Pj;d.props=this.readProps();d.name=this.readName();var e=this.i.readUInt16(),f=0!=(e&32768);f&&(e&=32767);d.parent=e-1;d.position=this.readPosition(f);d.bind=this.i.readUInt16()-1;0<=d.bind&&(d.transpos=this.readPosition(f));b.joints.push(d)}a=this.i.readByte();if(0<a){b.split=[];for(c=0;c<a;){c++;d=new Qj;d.materialIndex=this.i.readByte();for(var e=[],f=0,g=this.i.readByte();f<g;)f++,e.push(this.i.readUInt16());d.joints=e;b.split.push(d)}}return b},
readHeader:function(){var a=new ji,b=this.i.readString(3);if("HMD"!=b){if(59==z.cca(b,0))throw new n("FBX was not converted to HMD");throw new n("Invalid HMD header "+encodeURIComponent(b));}this.version=this.i.readByte();if(2<this.version)throw new n("Can't read HMD v"+this.version);a.version=this.version;a.geometries=[];a.dataPosition=this.i.readInt32();a.props=this.readProps();for(var b=0,c=this.i.readInt32();b<c;){b++;var d=new Nj;d.props=this.readProps();d.vertexCount=this.i.readInt32();d.vertexStride=
this.i.readByte();for(var e=[],f=0,g=this.i.readByte();f<g;){f++;var h=this.readName(),k=this.i.readByte();e.push(new Qd(h,k))}d.vertexFormat=e;d.vertexPosition=this.i.readInt32();e=[];f=0;for(g=this.i.readByte();f<g;)f++,e.push(this.i.readInt32());d.indexCounts=e;d.indexPosition=this.i.readInt32();d.bounds=this.readBounds();a.geometries.push(d)}a.materials=[];b=0;for(c=this.i.readInt32();b<c;)b++,d=new Oj,d.props=this.readProps(),d.name=this.readName(),d.diffuseTexture=this.readName(),d.blendMode=
Yf.BLEND[this.i.readByte()],this.i.readByte(),this.i.readFloat(),null!=d.props&&0<=d.props.indexOf(ii.HasExtraTextures)&&(d.specularTexture=this.readName(),d.normalMap=this.readName()),a.materials.push(d);a.models=[];b=0;for(c=this.i.readInt32();b<c;)if(b++,d=new Sj,d.props=this.readProps(),d.name=this.readName(),d.parent=this.i.readInt32()-1,d.follow=this.readName(),d.position=this.readPosition(),d.geometry=this.i.readInt32()-1,a.models.push(d),!(0>d.geometry)){d.materials=[];e=0;for(f=this.i.readByte();e<
f;)e++,d.materials.push(this.i.readInt32());d.skin=this.readSkin()}a.animations=[];b=0;for(c=this.i.readInt32();b<c;){b++;d=new Vj;d.props=this.readProps();d.name=this.readName();d.frames=this.i.readInt32();d.sampling=this.i.readFloat();d.speed=this.i.readFloat();e=this.i.readByte();d.loop=0!=(e&1);d.dataPosition=this.i.readInt32();d.objects=[];f=0;for(g=this.i.readInt32();f<g;)if(f++,h=new Tj,h.name=this.readName(),k=this.i.readByte(),h.flags=k,d.objects.push(h),0!=(h.flags&1<<Dc.HasProps._hx_index)){for(var k=
[],l=0,m=this.i.readByte();l<m;)l++,k.push(this.readName());h.props=k}if(0!=(e&2)){d.events=[];e=0;for(f=this.i.readInt32();e<f;)e++,g=new Uj,g.frame=this.i.readInt32(),g.data=this.readName(),d.events.push(g)}a.animations.push(d)}return a},read:function(){var a=this.readHeader();a.data=this.i.read(this.i.readInt32());return a},__class__:Yf};var li=function(){};p["hxd.fs.FileEntry"]=li;li.__name__="hxd.fs.FileEntry";li.prototype={getSign:function(){return 0},getBytes:function(){return null},getText:function(){return this.getBytes().toString()},
open:function(){},skip:function(a){},readByte:function(){return 0},read:function(a,b,c){},close:function(){},load:function(a){if(this.get_isAvailable())null!=a&&a();else throw new n("load() not implemented");},loadBitmap:function(a){throw new n("loadBitmap() not implemented");},watch:function(a){},exists:function(a){return!1},get:function(a){return null},iterator:function(){return null},get_isAvailable:function(){return!0},get_isDirectory:function(){return!1},get_size:function(){return 0},get_path:function(){throw new n("path() not implemented");
},get_directory:function(){var a=this.get_path().split("/");a.pop();return a.join("/")},get_extension:function(){var a=this.name.split(".");return 1==a.length?"":a.pop().toLowerCase()},__class__:li};var mi=function(a,b){this.fullPath=a;this.name=a.split("/").pop();this.bytes=b};p["hxd.fs.BytesFileEntry"]=mi;mi.__name__="hxd.fs.BytesFileEntry";mi.__super__=li;mi.prototype=J(li.prototype,{get_path:function(){return this.fullPath},getSign:function(){return this.bytes.b[0]|this.bytes.b[1]<<8|this.bytes.b[2]<<
16|this.bytes.b[3]<<24},getBytes:function(){return this.bytes},open:function(){this.pos=0},skip:function(a){this.pos+=a},readByte:function(){return this.bytes.b[this.pos++]},read:function(a,b,c){a.blit(b,this.bytes,this.pos,c);this.pos+=c},close:function(){},load:function(a){ee.delay(a,1)},loadBitmap:function(a){var b;switch(sa.extension(this.fullPath).toLowerCase()){case "gif":b="image/gif";break;case "jpeg":case "jpg":b="image/jpeg";break;case "png":b="image/png";break;default:throw new n("Cannot determine image encoding, try adding an extension to the resource path");
}var c=new Image;c.onload=function(){a(c)};var d=cd.encode(this.bytes);c.src="data:"+b+";base64,"+d},exists:function(a){return!1},get:function(a){return null},iterator:function(){return new Yj([])},get_size:function(){return this.bytes.length},__class__:mi});var Zj=function(){};p["hxd.fs.FileSystem"]=Zj;Zj.__name__="hxd.fs.FileSystem";Zj.prototype={__class__:Zj};var Rg=function(){};p["hxd.fs.BytesFileSystem"]=Rg;Rg.__name__="hxd.fs.BytesFileSystem";Rg.__interfaces__=[Zj];Rg.prototype={getRoot:function(){throw new n("Not implemented");
},getBytes:function(a){throw new n("Not implemented");},exists:function(a){return null!=this.getBytes(a)},get:function(a){var b=this.getBytes(a);if(null==b)throw new n("Resource not found '"+a+"'");return new mi(a,b)},dispose:function(){},dir:function(a){throw new n("Not implemented");},__class__:Rg};var Sg=function(a){this.f=a;a.open()};p["hxd.fs.FileInput"]=Sg;Sg.__name__="hxd.fs.FileInput";Sg.__super__=Vf;Sg.prototype=J(Vf.prototype,{skip:function(a){this.f.skip(a)},readByte:function(){return this.f.readByte()},
readBytes:function(a,b,c){this.f.read(a,b,c);return c},close:function(){this.f.close()},__class__:Sg});var ni={};p["hxd.fs._LoadedBitmap.LoadedBitmap_Impl_"]=ni;ni.__name__="hxd.fs._LoadedBitmap.LoadedBitmap_Impl_";ni._new=function(a){return a};ni.toBitmap=function(a){var b=new Qc(a.width,a.height);b.ctx.drawImage(a,0,0);return b};ni.toNative=function(a){return a};var be=function(a){this.path=a};p["hxd.fs.NotFound"]=be;be.__name__="hxd.fs.NotFound";be.prototype={toString:function(){return"Resource file not found '"+
this.path+"'"},__class__:be};var Qk=function(a){this.i=0;this.a=a;this.l=this.a.length};p["hxd.impl.ArrayIterator"]=Qk;Qk.__name__="hxd.impl.ArrayIterator";Qk.prototype={hasNext:function(){return this.i<this.l},next:function(){return this.a[this.i++]},__class__:Qk};var Bh=function(a){this.i=0;this.a=a;this.l=this.a.length};p["hxd.impl.ArrayIterator_h2d_Object"]=Bh;Bh.__name__="hxd.impl.ArrayIterator_h2d_Object";Bh.prototype={hasNext:function(){return this.i<this.l},next:function(){return this.a[this.i++]},
__class__:Bh};var Aj=function(a){this.i=0;this.a=a;this.l=this.a.length};p["hxd.impl.ArrayIterator_h3d_scene_Object"]=Aj;Aj.__name__="hxd.impl.ArrayIterator_h3d_scene_Object";Aj.prototype={hasNext:function(){return this.i<this.l},next:function(){return this.a[this.i++]},__class__:Aj};var Yj=function(a){this.i=0;this.a=a;this.l=this.a.length};p["hxd.impl.ArrayIterator_hxd_fs_FileEntry"]=Yj;Yj.__name__="hxd.impl.ArrayIterator_hxd_fs_FileEntry";Yj.prototype={hasNext:function(){return this.i<this.l},
next:function(){return this.a[this.i++]},__class__:Yj};var ak=function(a){this.i=0;this.a=a;this.l=this.a.length};p["hxd.impl.ArrayIterator_hxd_res_Any"]=ak;ak.__name__="hxd.impl.ArrayIterator_hxd_res_Any";ak.prototype={hasNext:function(){return this.i<this.l},next:function(){return this.a[this.i++]},__class__:ak};var bk=function(a){this.i=0;this.a=a;this.l=this.a.length};p["hxd.impl.ArrayIterator_hxd_snd_Channel"]=bk;bk.__name__="hxd.impl.ArrayIterator_hxd_snd_Channel";bk.prototype={hasNext:function(){return this.i<
this.l},next:function(){return this.a[this.i++]},__class__:bk};var oi={};p["hxd.impl._UncheckedBytes.UncheckedBytes_Impl_"]=oi;oi.__name__="hxd.impl._UncheckedBytes.UncheckedBytes_Impl_";oi._new=function(a){return a};oi.get=function(a,b){return a[b]};oi.set=function(a,b,c){return a[b]=c};oi.fromBytes=function(a){return a.b};var Pi=function(a){this.url=a};p["hxd.net.BinaryLoader"]=Pi;Pi.__name__="hxd.net.BinaryLoader";Pi.prototype={onLoaded:function(a){},onProgress:function(a,b){},onError:function(a){throw new n(a);
},load:function(){var a=this,b=new XMLHttpRequest;b.open("GET",this.url,!0);b.responseType="arraybuffer";b.onerror=function(c){a.onError(b.statusText)};b.onload=function(c){if(200!=b.status)a.onError(b.statusText);else a.onLoaded(N.ofData(b.response))};b.onprogress=function(b){a.onProgress(b.loaded||b.position|0,b.total||b.totalSize|0)};b.send()},__class__:Pi};var pi=function(){this.isRef=!1};p["hxd.prefab.Context"]=pi;pi.__name__="hxd.prefab.Context";pi.prototype={init:function(){null==this.shared&&
(this.shared=new ck);this.local2d=this.shared.root2d;this.local3d=this.shared.root3d},clone:function(a){var b=new pi;b.shared=this.shared;b.local2d=this.local2d;b.local3d=this.local3d;b.custom=this.custom;b.isRef=this.isRef;null!=a&&(this.isRef?null==this.shared.references.h.__keys__[a.__id__]?this.shared.references.set(a,[b]):this.shared.references.h[a.__id__].push(b):this.shared.contexts.set(a,b));return b},loadModel:function(a){return this.shared.loadModel(a)},loadAnimation:function(a){return this.shared.loadAnimation(a)},
loadTexture:function(a){return this.shared.loadTexture(a)},loadShader:function(a){return this.shared.loadShader(a)},locateObject:function(a){if(null==a)return null;for(var b=a.split("."),c=this.shared.root3d;0<b.length;){for(var d=null,e=b.shift(),f=0,g=c.children,h=g.length;f<h;){var k=g[f++];if(k.name==e){d=k;break}}null==d&&(d=c.getObjectByName(e));if(null==d){a=a.split(".");c=0;for(b=b.length;c<b;)c++,a.pop();this.shared.onError("Object not found "+a.join("."));return null}c=d}return c},__class__:pi};
var ck=function(){this.root2d=new ua;this.root3d=new Fa;this.contexts=new Ha;this.references=new Ha;this.cache=new zj;this.shaderCache=new ia};p["hxd.prefab.ContextShared"]=ck;ck.__name__="hxd.prefab.ContextShared";ck.prototype={onError:function(a){throw n.wrap(a);},elements:function(){for(var a=[],b=this.contexts.keys();b.hasNext();){var c=b.next();a.push(c)}return a},getContexts:function(a){var b=[],c=this.contexts.h[a.__id__];null!=c&&b.push(c);a=this.references.h[a.__id__];return null!=a?b.concat(a):
b},loadDir:function(a,b){var c=new sa(this.currentPath);c.ext="dat";c=c.toString()+"/"+a;null!=b&&(c+="/"+b);try{return Cb.currentInstance.dir(c)}catch(d){if((d instanceof n?d.val:d)instanceof be)return null;throw d;}},loadPrefabDat:function(a,b,c){var d=new sa(this.currentPath);d.ext="dat";a=new sa(d.toString()+"/"+c+"/"+a);a.ext=b;try{return Cb.currentInstance.load(a.toString())}catch(e){if((e instanceof n?e.val:e)instanceof be)return null;throw e;}},savePrefabDat:function(a,b,c,d){throw new n("Not implemented");
},loadPrefab:function(a){throw new n("Not implemented");},loadShader:function(a){var b=this.shaderCache,b=null!=L[a]?b.getReserved(a):b.h[a];if(null!=b)return b;b=a.split("/").join(".");b=p[b];if(null==b)return null;var b={shader:new Xc(xa.field(b,"SRC")),inits:[]},c=this.shaderCache;null!=L[a]?c.setReserved(a,b):c.h[a]=b;return b},loadModel:function(a){return this.cache.loadModel(Cb.currentInstance.load(a).toModel())},loadAnimation:function(a){return this.cache.loadAnimation(Cb.currentInstance.load(a).toModel())},
loadTexture:function(a){return this.cache.loadTexture(null,a)},loadBytes:function(a){try{return Cb.currentInstance.load(a).entry.getBytes()}catch(b){if((b instanceof n?b.val:b)instanceof be)return null;throw b;}},loadBakedBytes:function(a){null==this.bakedData&&this.loadBakedData();var b=this.bakedData;return null!=L[a]?b.getReserved(a):b.h[a]},saveBakedBytes:function(a,b){null==this.bakedData&&this.loadBakedData();if(null==b){if(!this.bakedData.remove(a))return}else{var c=this.bakedData;null!=L[a]?
c.setReserved(a,b):c.h[a]=b}var d=this.bakedData,c=ch.array({iterator:function(){return d.keys()}});if(0==c.length)this.saveBakedFile(null);else{var e=new td;e.writeString("BAKE");e.writeInt32(c.length);for(var f=8,g=0;g<c.length;){var h=c[g];++g;f+=2+h.length+8}for(g=0;g<c.length;){h=c[g];++g;e.writeUInt16(h.length);e.writeString(h);e.writeInt32(f);var k=this.bakedData,h=(null!=L[h]?k.getReserved(h):k.h[h]).length;e.writeInt32(h);f+=h+1}for(f=0;f<c.length;)g=c[f],++f,h=this.bakedData,e.write(null!=
L[g]?h.getReserved(g):h.h[g]),e.writeByte(254);this.saveBakedFile(e.getBytes())}},saveTexture:function(a,b,c,d){throw new n("Don't know how to save texture");},saveBakedFile:function(a){throw new n("Don't know how to save baked file");},loadBakedFile:function(){var a=new sa(this.currentPath);a.ext="bake";try{return Cb.currentInstance.load(a.toString()).entry.getBytes()}catch(b){if((b instanceof n?b.val:b)instanceof be)return null;throw b;}},loadBakedData:function(){this.bakedData=new ia;var a=this.loadBakedFile();
if(null!=a){if("BAKE"!=a.getString(0,4))throw new n("Invalid bake file");for(var b=8,c=0,d=a.getInt32(4);c<d;){c++;var e=a.getUInt16(b),b=b+2,f=a.getString(b,e),b=b+e,e=a.getInt32(b),b=b+4,g=a.getInt32(b),b=b+4,h=this.bakedData,k=a.sub(e,g);null!=L[f]?h.setReserved(f,k):h.h[f]=k;if(254!=a.b[e+g])throw new n("Corrupted bake file");}}},getChildrenRoots:function(a,b,c){var d=0;for(b=b.children;d<b.length;){var e=b[d];++d;var f=this.contexts.h[e.__id__];null!=f&&(f.local3d==a?this.getChildrenRoots(a,
e,c):c.push(f.local3d))}return c},getObjects:function(a,b){var c=this.contexts.h[a.__id__];if(null==c)return[];var c=c.local3d,d=this.getChildrenRoots(c,a,[]),e=[],f=null,f=function(a){var c=a instanceof b?a:null;null!=c&&e.push(c);c=0;a=a.children;for(var k=a.length;c<k;){var l=a[c++];0>d.indexOf(l)&&f(l)}};f(c);return e},getMaterials:function(a){var b=this.contexts.h[a.__id__];if(null==b)return[];var b=b.local3d,c=this.getChildrenRoots(b,a,[]),d=[],e=null,e=function(a){if(null!=(a instanceof eb?
a:null)){var b=a.toMesh(),h=b instanceof Rc?b:null;if(null!=h){b=0;for(h=h.materials;b<h.length;){var k=h[b];++b;null!=k&&d.push(k)}}else null!=b.material&&d.push(b.material)}b=0;a=a.children;for(h=a.length;b<h;)k=a[b++],0>c.indexOf(k)&&e(k)};e(b);return d},__class__:ck};var Ec=function(a){this.enabled=!0;this.set_parent(a);this.children=[]};p["hxd.prefab.Prefab"]=Ec;Ec.__name__="hxd.prefab.Prefab";Ec.loadPrefab=function(a,b){var c=a.type,d=Eb.registeredElements,c=null!=L[c]?d.getReserved(c):d.h[c],
c=null==c?null:c.cl;null==c&&(c=qi);c=ha.createInstance(c,[b]);c.loadData(a);return c};Ec.prototype={set_name:function(a){return this.name=a},set_source:function(a){return this.source=a},set_parent:function(a){null!=this.parent&&z.remove(this.parent.children,this);this.parent=a;null!=this.parent&&this.parent.children.push(this);return a},iterator:function(){return z.iter(this.children)},load:function(a){throw new n("Not implemented");},save:function(){throw new n("Not implemented");},makeInstance:function(a){return a},
updateInstance:function(a,b){},removeInstance:function(a){return!1},saveData:function(){var a=this.save();a.type=this.type;this.enabled||(a.enabled=!1);null!=this.name&&(a.name=this.name);null!=this.source&&(a.source=this.source);if(0<this.children.length){for(var b=[],c=0,d=this.children;c<d.length;){var e=d[c];++c;b.push(e.saveData())}a.children=b}null!=this.props&&null==a.props&&(a.props=this.props);return a},loadData:function(a){this.type=a.type;this.set_name(a.name);this.enabled=null==a.enabled?
!0:a.enabled;this.props=a.props;this.set_source(a.source);this.load(a);0<this.children.length&&(this.children=[]);a=a.children;if(null!=a)for(var b=0;b<a.length;){var c=a[b];++b;Ec.loadPrefab(c,this)}},reload:function(a){this.set_name(a.name);this.enabled=null==a.enabled?!0:a.enabled;this.props=a.props;this.set_source(a.source);this.load(a);a=a.children;if(null==a)0<this.children.length&&(this.children=[]);else{for(var b=new ia,c=0,d=this.children;c<d.length;){var e=d[c];++c;var f=e.name;null!=L[f]?
b.setReserved(f,e):b.h[f]=e}c=[];for(d=0;d<a.length;){e=a[d];++d;var f=e.name,g=null!=L[f]?b.getReserved(f):b.h[f];null!=g&&g.type==e.type?(b.remove(f),g.reload(e),c.push(g)):c.push(Ec.loadPrefab(e,this))}this.children=c}},make:function(a){if(!this.enabled)return a;null==a&&(a=new pi,a.init());a=this.makeInstance(a);for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d.make(a)}return a},getPrefabByName:function(a){if(this.name==a)return this;for(var b=0,c=this.children;b<c.length;){var d=c[b];
++b;d=d.getPrefabByName(a);if(null!=d)return d}return null},getOpt:function(a,b){if(null==b||this.name==b){var c=this.to(a);if(null!=c)return c}for(var c=0,d=this.children;c<d.length;){var e=d[c];++c;e=e.getOpt(a,b);if(null!=e)return e}return null},get:function(a,b){var c=this.getOpt(a,b);if(null==c)throw new n("Missing prefab "+(null==b?a.__name__:null==a?b:b+"("+a.__name__+")"));return c},getAll:function(a,b){return this.findAll(function(b){return b.to(a)})},find:function(a){var b=a(this);if(null!=
b)return b;for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d=d.find(a);if(null!=d)return d}return null},findAll:function(a,b){null==b&&(b=[]);var c=a(this);null!=c&&b.push(c);for(var c=0,d=this.children;c<d.length;){var e=d[c];++c;e.findAll(a,b)}return b},flatten:function(a,b){null==b&&(b=[]);if(null==a)b.push(this);else{var c=this.to(a);null!=c&&b.push(c)}for(var c=0,d=this.children;c<d.length;){var e=d[c];++c;e.flatten(a,b)}return b},getParent:function(a){for(var b=this.parent;null!=b;){var c=
b.to(a);if(null!=c)return c;b=b.parent}return null},to:function(a){return this instanceof a?this:null},getAbsPath:function(){for(var a=this,b=[];null!=a.parent;){var c=a.name;null==c&&(c=this.getDefaultName());b.unshift(c);a=a.parent}return b.join(".")},getDefaultName:function(){if(null!=this.source){var a=(new sa(this.source)).file;return a=a.split(" ")[0].split("-")[0]}return this.type.split(".").pop()},clone:function(){var a=this.saveData();return Ec.loadPrefab(JSON.parse(JSON.stringify(a)))},
__class__:Ec};var Eb=function(){Ec.call(this,null);this.type="prefab"};p["hxd.prefab.Library"]=Eb;Eb.__name__="hxd.prefab.Library";Eb.getRegistered=function(){return Eb.registeredElements};Eb.isOfType=function(a,b){var c=Eb.registeredElements,c=null!=L[a]?c.getReserved(a):c.h[a];if(null==c)return!1;for(c=c.cl;null!=c;){if(c==b)return!0;c=c.__super__}return!1};Eb.register=function(a,b,c){var d=Eb.registeredElements;b={cl:b};null!=L[a]?d.setReserved(a,b):d.h[a]=b;null!=c&&(d=Eb.registeredExtensions,
null!=L[c]?d.setReserved(c,a):d.h[c]=a);return!0};Eb.create=function(a){a=Eb.getPrefabType(a);if(null==a)a=new Eb;else{var b=Eb.registeredElements;a=ha.createInstance((null!=L[a]?b.getReserved(a):b.h[a]).cl,[])}return a};Eb.getPrefabType=function(a){a=a.split(".").pop().toLowerCase();var b=Eb.registeredExtensions;return null!=L[a]?b.getReserved(a):b.h[a]};Eb.__super__=Ec;Eb.prototype=J(Ec.prototype,{load:function(a){},save:function(){return{}},getFromPath:function(a){a=a.split(".");for(var b=this,
c=0;c<a.length;){var d=a[c];++c;for(var e=!1,f=0,g=b.children;f<g.length;){var h=g[f];++f;if(h.name==d){e=!0;b=h;break}}if(!e)return null}return b},__class__:Eb});var qi=function(a){Ec.call(this,a)};p["hxd.prefab.Unknown"]=qi;qi.__name__="hxd.prefab.Unknown";qi.__super__=Ec;qi.prototype=J(Ec.prototype,{getPrefabType:function(){return this.data.type},load:function(a){this.data=a},save:function(){return this.data},__class__:qi});var dk=M["hxd.prefab.rfx.Step"]={__ename__:!0,__constructs__:["BeforeLighting",
"BeforeTonemapping","AfterTonemapping","AfterUI"],BeforeLighting:{_hx_index:0,__enum__:"hxd.prefab.rfx.Step",toString:m},BeforeTonemapping:{_hx_index:1,__enum__:"hxd.prefab.rfx.Step",toString:m},AfterTonemapping:{_hx_index:2,__enum__:"hxd.prefab.rfx.Step",toString:m},AfterUI:{_hx_index:3,__enum__:"hxd.prefab.rfx.Step",toString:m}};dk.__empty_constructs__=[dk.BeforeLighting,dk.BeforeTonemapping,dk.AfterTonemapping,dk.AfterUI];var ek=function(a){Ec.call(this,a)};p["hxd.prefab.rfx.RendererFX"]=ek;ek.__name__=
"hxd.prefab.rfx.RendererFX";ek.__super__=Ec;ek.prototype=J(Ec.prototype,{apply:function(a,b){},save:function(){return{}},load:function(a){},dispose:function(){},__class__:ek});var ri=function(a,b){this.path=a;this.bytes=b};p["hxd.res._Any.SingleFileSystem"]=ri;ri.__name__="hxd.res._Any.SingleFileSystem";ri.__super__=Rg;ri.prototype=J(Rg.prototype,{getBytes:function(a){return a==this.path?this.bytes:null},__class__:ri});var rc=function(a){this.entry=a};p["hxd.res.Resource"]=rc;rc.__name__="hxd.res.Resource";
rc.prototype={get_name:function(){return this.entry.name},toString:function(){return this.entry.get_path()},watch:function(a){rc.LIVE_UPDATE&&this.entry.watch(a)},__class__:rc};var oe=function(a,b){this.entry=b;this.loader=a};p["hxd.res.Any"]=oe;oe.__name__="hxd.res.Any";oe.fromBytes=function(a,b){var c=new ri(a,b);return(new Cb(c)).load(a)};oe.__super__=rc;oe.prototype=J(rc.prototype,{toModel:function(){return this.loader.loadCache(this.entry.get_path(),si)},toTexture:function(){return this.toImage().toTexture()},
toTile:function(){return this.toImage().toTile()},toText:function(){return this.entry.getBytes().toString()},toImage:function(){return this.loader.loadCache(this.entry.get_path(),gc)},toSound:function(){return this.loader.loadCache(this.entry.get_path(),rd)},toPrefab:function(){return this.loader.loadCache(this.entry.get_path(),ti)},to:function(a){return this.loader.loadCache(this.entry.get_path(),a)},iterator:function(){for(var a=[],b=this.entry.iterator();b.i<b.l;){var c=b.a[b.i++];a.push(new oe(this.loader,
c))}return new ak(a)},__class__:oe});var ui=function(a){this.entry=a;this.loader=Cb.currentInstance};p["hxd.res.BitmapFont"]=ui;ui.__name__="hxd.res.BitmapFont";ui.__super__=rc;ui.prototype=J(rc.prototype,{toFont:function(){null==this.font&&(this.font=Mj.parse(this.entry.getBytes(),this.entry.get_path(),K(this,this.resolveTile)));return this.font},toSdfFont:function(a,b,c,d){null==d&&(d=0.03125);null==c&&(c=0.5);null==b&&(b=0);null==this.sdfFonts&&(this.sdfFonts=[]);null==a&&(a=this.toFont().size);
for(var e=0,f=this.sdfFonts;e<f.length;){var g=f[e];++e;var h=g.type;if(1==h._hx_index){var k=h.smoothing,l=h.alphaCutoff,h=h.channel;if(g.size==a&&h==b&&l==c&&k==d)return g}}e=Mj.parse(this.entry.getBytes(),this.entry.get_path(),K(this,this.resolveSdfTile));e.type=Hk.SignedDistanceField(b,c,d);e.resizeTo(a);this.sdfFonts.push(e);return e},resolveSdfTile:function(a){a=this.loader.load(a).toTexture();a.set_filter(le.Linear);return Ga.fromTexture(a)},resolveTile:function(a){return this.loader.load(a).toTile()},
__class__:ui});var jh=function(){};p["hxd.res.DefaultFont"]=jh;jh.__name__="hxd.res.DefaultFont";jh.get=function(){var a=na.CURRENT,b=a.resCache.h[jh.__id__];if(null==b){var b=oe.fromBytes("hxd/res/defaultFont.png",Qb.run("s3176:iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAACPBJREFUeJztnelypDoMRp2p%:6v3PNjhrlCLX1aLIPBPlWppI03bCG0QOfn8:m0zbr8KupnS9FDqRKAzUOhAvBRfqO:tfrSZ86H:ET79o6Rhc%JzzNSD7Xn:XyEH9RPtP4X:6GDDj6ttR:Hb62d9pmX8b487StA4:DFlup5z5MSWS%tL:f6eG4BXDppGQdtApJEtPm0zkf427Oo1fAxtfO2hDIruGXCLgnAD:jNyzSsKxa18yBphyqQ1jqwBN1zHmgcU3V3jHui9xaArkS0%XzTohOX%jvGauzvjMrlUJXuqSeV07G0ekgTovWS1t61vr0CQAez7nkj7uFIELJqmdN7RWvzil7hnnXV5qLOzSMAmlcQub9ZRuEsaNoq0w5RZbN0rye1ASzplWyAiGEXQVK3kZOdRcgy9:FLoRogI02WNc7rRQw3jzsZAfWB7skR44%3jdo6Wv2qfr4rFuUCZlftrT1jjpezSih4b75ClQDMvrizz%82uA1wMCqsKvUv3YO045rxma2vjY3mpPUvuV1WKDzbLtqfNu9:AjA6tl69QM3Zn1Wfl1M8G:CUW4s6b%sWIEXWtM:omNeXrnaDRm:OyIsE1UOfQ1gCwMOLdFCqWnj8Grl5nsjVakRjHMj1DgnEcQvw%OV0AE0wGisfqTKrbBYrZ4BiB:T4ldE8dPsMxU2oEWgZZtoAyMCq2GxtLlWCFbEB%PGIYWv1kxECq0%TbDKITjpirVr9SW2zC:skqqKdUp%QwwbILKwlgZk2mkBlmUVgPPOI3IbL0GwASY2PiMdbPrfVF6:vVctIq5SoVqNdxtrvWXt1:EguYHVL:ZV4Q8F781%KVwD25r8UagTyYE4TjkllmfrU4udtI%XZdrRcm5c1T%3cPXjq9RqEYTewIrau1a%ODVSBomgeL4cLudedG%H2pah4KBQx8gSnWMC:8AvDKwS0fXU5n59Uf7gAXA1dfG1TtM1Bm2ZtKi%PCGaVlpXKrf67ngeI%uFXoW1WdvNH0ztuV3vNBvAOrC30wR0LG7kX0:p3MjoCqPYfiQNI3BK%BEhq31vfYtS5UkN5lCD%NGWMSBxAWyyeyKkAJYc2Z6JrfqpvGYF0IzxqNWoDoPrSeNJ8POMgtJg76rtSEyDNErGzUF5F3ZOq9wI2D%VtbuBsaFfkNGwBGMtUmy3BjUAtxs3x3LOk8mi7zWB6Xw7leCNlb%LRXkrk%wEOpESIlezxlvM%uSWuzQXNx1Ofjqd5Aah:qW5PGDfbjpZzRCGlbwZ5T0TqMHMVoLgCP56Nj0fqo7mhLOeMGoDPx4wE0sW64mRmXLSDaCZvxPjSeNnAGKx:hxcw8%a3Zkc7tTqjyWgbs:4d3w8wW:7AC42l3zF:dH9H9SGedwO9rmEEz4nMpCXuznFoSS5tf9x9e24ByFjqodKAQio6EjfP9C8duzLHoZ0r8oD%LzRyAZY1XN2umux8n0L3OkeygcdnDzMYTSvQvc47G7g4q3xL2EqE8jhbAN6H9YDJ6TaxBeCduJNy3AjkrghySay8QXOU84lZSQ8plj:ioYuIG%axvLUrcoRxHHGHXelgKzkTWSxtLK:7whM8UaGLzs3qJ7P5IxNI0axh%hbAgxhWMGJ01M%KVKIASXQcipVR7MEz524XboQNoKVwPZPNhkpRjD5yRdM53B0c0qKDvE4X9PVw78JYWPc7usEo9cm1TAa0%R:hh44n1UXz1sjaB0dbJATdGoB:R1Dv:c4DGktSez33TNqW96MZtVo:R53sPLQxvGseCWu7y2d7Kji70MgQRUIwM5nNb%1bc8HyK%MAHiMtq2q5ypaOS39rdTz9jMaac4kg87eDpSsp4%bx:iS3UZLOqMQPM44Y3jGuSoCVabERyaCsj:90qs7TG1soWePZbICViWharvnSgrfTwYsz0gjckvUApHcDOdwa9waDvIGjCFZ:2vwzfVeGj7W%qs4ns0ettbMASJvG:WfJ%JAGHOVvI6GSxtMEUfNENK%FH%NtNaz1qzif7B79mcC2AdbG8zVxyNqMtrGkTQqZWmHUqvJjDJg%BZ9Rf552I8qtY%a:jUMnEG3j9V1RvWgUryfqFyXql1etX2aP:vGER8JWCCLdxhME4OlMbWTdLQCRhA%qX1WegVrZEbtjCjQjsDnKM200Y8nLjDaAx%WdVgg8:zfQY%1620Q8grcxpRDcfQvwMN2ivYm7s4GSRkGZLuRvV5T3AP1tAe08q8qtY38KJo4Ejgglbxh3awCJQyL35l:AjAKwN:5CKozAqpRm7zibBBUCMDJFi:p5GlMKcJUbGAm4aIkdlPCpttK9xz1RxMhzAdVCkDmnE5H:GURPXLta7ypHcz248%GLWR6Q%cL7ZdHRVOddWHPt1VRWX6O1mERXuNt6HmBmooGXnlB178MX3vIr5nhCejkUbf7VhgyalyWwngcjqsorxxg5xy%oDeDZ:Du0Qub%2aP6M%XVfSFK90D6ihjranoC2pUgUVVe0VdUw2bmeEKyASx1OwvWfQ7dPqi1XlFe1Vd0nbu1C:%HEeEObuSH:LyRKzSW6QZKvjDXDNKxqvIsR19a:624vKKvW9Zy5nTw5swQO2zGbODmDNdmpWwBmJ%hNo7n7WAJ5L703FN4DD:Sr3RcK6uar0XVnHvHUbHeDqadawaLFA3jbTwW6tH2aC%5oqgfLXYRGcOab5SKOVvz8sY75AneZATyQd:qyt1ByFjkGoCrR6u8gXLtc2tn:51qD22s7Pwi5Z5jEryNtS6jy6U5qfS8HZwFTWp0ogWdj3Wu0nmPWJ8K3HO62gvoul:dhKbBPPWmp:fdwBXwXNGa8TY92ruBzVG%GpoqnUXtp9CeCdza4JvZLhDqyqb3hT8RRDtH5VmyavKKREn0XCW1f3WiDKWmpTpf7GTQc:F6OpCdC3guJdp5C8CzkTY9JAg8Ekh:bxaAPxVMf28WgP7XMMrWAovwhO8I2gxkC8DibAFYnC0Ai6OFgjeL4Pmm0M2L0dzAzSJY2cDNy:E8ELJ5MdsLWJwtAIuzBWBxtgAszhaAxdkCsDi:AYnqZwd25SoPAAAAAElFTkSuQmCC")),
c=oe.fromBytes("hxd/res/defaultFont.fnt",Qb.run("s14030:PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPEZvbnQgc2l6ZT0iMTIiIGZhbWlseT0iUGl4ZWwgT3BlcmF0b3IiIGhlaWdodD0iMTYiIHN0eWxlPSJSZWd1bGFyIj4KIDxDaGFyIHdpZHRoPSI0IiBvZmZzZXQ9IjAgMTMiIHJlY3Q9IjEgMTIgMCAwIiBjb2RlPSIgIi8%CiA8Q2hhciB3aWR0aD0iMyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjIgMyAxIDkiIGNvZGU9IiEiLz4KIDxDaGFyIHdpZHRoPSI1IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNCAzIDMgMyIgY29kZT0iJnF1b3Q7Ii8%CiA8Q2hhciB3aWR0aD0iOCIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjggMyA2IDkiIGNvZGU9IiMiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgMiIgcmVjdD0iMTUgMSA1IDEzIiBjb2RlPSIkIi8%CiA8Q2hhciB3aWR0aD0iOSIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjIxIDMgNyA5IiBjb2RlPSIlIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjI5IDMgNSA5IiBjb2RlPSImYW1wOyIvPgogPENoYXIgd2lkdGg9IjMiIG9mZnNldD0iMSA0IiByZWN0PSIzNSAzIDEgMyIgY29kZT0iJyIvPgogPENoYXIgd2lkdGg9IjUiIG9mZnNldD0iMSA0IiByZWN0PSIzNyAzIDMgOSIgY29kZT0iKCIvPgogPENoYXIgd2lkdGg9IjUiIG9mZnNldD0iMSA0IiByZWN0PSI0MSAzIDMgOSIgY29kZT0iKSIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSI0NSAzIDUgNSIgY29kZT0iKiIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA2IiByZWN0PSI1MSA1IDUgNSIgY29kZT0iKyIvPgogPENoYXIgd2lkdGg9IjMiIG9mZnNldD0iMCAxMiIgcmVjdD0iNTcgMTEgMiAzIiBjb2RlPSIsIi8%CiA8Q2hhciB3aWR0aD0iNiIgb2Zmc2V0PSIxIDgiIHJlY3Q9IjYwIDcgNCAxIiBjb2RlPSItIi8%CiA8Q2hhciB3aWR0aD0iMyIgb2Zmc2V0PSIxIDEyIiByZWN0PSI2NSAxMSAxIDEiIGNvZGU9Ii4iLz4KIDxDaGFyIHdpZHRoPSI1IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNjcgMyAzIDkiIGNvZGU9Ii8iLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNzEgMyA1IDkiIGNvZGU9IjAiLz4KIDxDaGFyIHdpZHRoPSI1IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNzcgMyAzIDkiIGNvZGU9IjEiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iODEgMyA1IDkiIGNvZGU9IjIiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iODcgMyA1IDkiIGNvZGU9IjMiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iOTMgMyA1IDkiIGNvZGU9IjQiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iOTkgMyA1IDkiIGNvZGU9IjUiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMTA1IDMgNSA5IiBjb2RlPSI2Ii8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjExMSAzIDUgOSIgY29kZT0iNyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIxMTcgMyA1IDkiIGNvZGU9IjgiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMSAxNSA1IDkiIGNvZGU9IjkiLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjEgNiIgcmVjdD0iNyAxNyAxIDciIGNvZGU9IjoiLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjAgNiIgcmVjdD0iOSAxNyAyIDkiIGNvZGU9IjsiLz4KIDxDaGFyIHdpZHRoPSI1IiBvZmZzZXQ9IjEgNiIgcmVjdD0iMTIgMTcgMyA1IiBjb2RlPSImbHQ7Ii8%CiA8Q2hhciB3aWR0aD0iNiIgb2Zmc2V0PSIxIDciIHJlY3Q9IjE2IDE4IDQgMyIgY29kZT0iPSIvPgogPENoYXIgd2lkdGg9IjUiIG9mZnNldD0iMSA2IiByZWN0PSIyMSAxNyAzIDUiIGNvZGU9Ij4iLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMjUgMTUgNSA5IiBjb2RlPSI:Ii8%CiA8Q2hhciB3aWR0aD0iOSIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjMxIDE1IDcgOSIgY29kZT0iQCIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIzOSAxNSA1IDkiIGNvZGU9IkEiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNDUgMTUgNSA5IiBjb2RlPSJCIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjUxIDE1IDUgOSIgY29kZT0iQyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSI1NyAxNSA1IDkiIGNvZGU9IkQiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNjMgMTUgNSA5IiBjb2RlPSJFIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjY5IDE1IDUgOSIgY29kZT0iRiIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSI3NSAxNSA1IDkiIGNvZGU9IkciLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iODEgMTUgNSA5IiBjb2RlPSJIIi8%CiA8Q2hhciB3aWR0aD0iMyIgb2Zmc2V0PSIxIDQiIHJlY3Q9Ijg3IDE1IDEgOSIgY29kZT0iSSIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSI4OSAxNSA1IDkiIGNvZGU9IkoiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iOTUgMTUgNSA5IiBjb2RlPSJLIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjEwMSAxNSA1IDkiIGNvZGU9IkwiLz4KIDxDaGFyIHdpZHRoPSI5IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMTA3IDE1IDcgOSIgY29kZT0iTSIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIxMTUgMTUgNSA5IiBjb2RlPSJOIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjEyMSAxNSA1IDkiIGNvZGU9Ik8iLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMSAyNyA1IDkiIGNvZGU9IlAiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNyAyNyA1IDkiIGNvZGU9IlEiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMTMgMjcgNSA5IiBjb2RlPSJSIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjE5IDI3IDUgOSIgY29kZT0iUyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIyNSAyNyA1IDkiIGNvZGU9IlQiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMzEgMjcgNSA5IiBjb2RlPSJVIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjM3IDI3IDUgOSIgY29kZT0iViIvPgogPENoYXIgd2lkdGg9IjkiIG9mZnNldD0iMSA0IiByZWN0PSI0MyAyNyA3IDkiIGNvZGU9IlciLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNTEgMjcgNSA5IiBjb2RlPSJYIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjU3IDI3IDUgOSIgY29kZT0iWSIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSI2MyAyNyA1IDkiIGNvZGU9IloiLz4KIDxDaGFyIHdpZHRoPSI1IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNjkgMjcgMyA5IiBjb2RlPSJbIi8%CiA8Q2hhciB3aWR0aD0iNSIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjczIDI3IDMgOSIgY29kZT0iXCIvPgogPENoYXIgd2lkdGg9IjUiIG9mZnNldD0iMSA0IiByZWN0PSI3NyAyNyAzIDkiIGNvZGU9Il0iLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iODEgMjcgNSAzIiBjb2RlPSJeIi8%CiA8Q2hhciB3aWR0aD0iNSIgb2Zmc2V0PSIwIDE0IiByZWN0PSI4NyAzNyA1IDEiIGNvZGU9Il8iLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjAgNCIgcmVjdD0iOTMgMjcgMiAyIiBjb2RlPSJgIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDYiIHJlY3Q9Ijk2IDI5IDUgNyIgY29kZT0iYSIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIxMDIgMjcgNSA5IiBjb2RlPSJiIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjEwOCAyOSA1IDciIGNvZGU9ImMiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMTE0IDI3IDUgOSIgY29kZT0iZCIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA2IiByZWN0PSIxMjAgMjkgNSA3IiBjb2RlPSJlIi8%CiA8Q2hhciB3aWR0aD0iNiIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjEgMzkgNSA5IiBjb2RlPSJmIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjcgNDEgNSA5IiBjb2RlPSJnIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjEzIDM5IDUgOSIgY29kZT0iaCIvPgogPENoYXIgd2lkdGg9IjMiIG9mZnNldD0iMSA0IiByZWN0PSIxOSAzOSAxIDkiIGNvZGU9ImkiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMjEgMzkgNSAxMSIgY29kZT0iaiIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIyNyAzOSA1IDkiIGNvZGU9ImsiLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjEgNCIgcmVjdD0iMzMgMzkgMSA5IiBjb2RlPSJsIi8%CiA8Q2hhciB3aWR0aD0iOSIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjM1IDQxIDcgNyIgY29kZT0ibSIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA2IiByZWN0PSI0MyA0MSA1IDciIGNvZGU9Im4iLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNiIgcmVjdD0iNDkgNDEgNSA3IiBjb2RlPSJvIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjU1IDQxIDUgOSIgY29kZT0icCIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA2IiByZWN0PSI2MSA0MSA1IDkiIGNvZGU9InEiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNiIgcmVjdD0iNjcgNDEgNSA3IiBjb2RlPSJyIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjczIDQxIDUgNyIgY29kZT0icyIvPgogPENoYXIgd2lkdGg9IjYiIG9mZnNldD0iMSA1IiByZWN0PSI3OSA0MCA1IDgiIGNvZGU9InQiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNiIgcmVjdD0iODUgNDEgNSA3IiBjb2RlPSJ1Ii8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjkxIDQxIDUgNyIgY29kZT0idiIvPgogPENoYXIgd2lkdGg9IjkiIG9mZnNldD0iMSA2IiByZWN0PSI5NyA0MSA3IDciIGNvZGU9InciLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNiIgcmVjdD0iMTA1IDQxIDUgNyIgY29kZT0ieCIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA2IiByZWN0PSIxMTEgNDEgNSA5IiBjb2RlPSJ5Ii8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjExNyA0MSA1IDciIGNvZGU9InoiLz4KIDxDaGFyIHdpZHRoPSI2IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMSA1NCA0IDkiIGNvZGU9InsiLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjEgNCIgcmVjdD0iNiA1NCAxIDkiIGNvZGU9InwiLz4KIDxDaGFyIHdpZHRoPSI2IiBvZmZzZXQ9IjEgNCIgcmVjdD0iOCA1NCA0IDkiIGNvZGU9In0iLz4KIDxDaGFyIHdpZHRoPSI4IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMTMgNTQgNiAyIiBjb2RlPSJ%Ii8%CiA8Q2hhciB3aWR0aD0iMyIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjIwIDU2IDEgOSIgY29kZT0iwqEiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMjIgNTQgNSAxMSIgY29kZT0iwqIiLz4KIDxDaGFyIHdpZHRoPSI4IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMjggNTQgNiA5IiBjb2RlPSLCoyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIzNSA1NCA1IDkiIGNvZGU9IsKlIi8%CiA8Q2hhciB3aWR0aD0iMyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjQxIDU0IDEgOSIgY29kZT0iwqYiLz4KIDxDaGFyIHdpZHRoPSI1IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNDMgNTQgMyAxIiBjb2RlPSLCqCIvPgogPENoYXIgd2lkdGg9IjkiIG9mZnNldD0iMSA0IiByZWN0PSI0NyA1NCA3IDkiIGNvZGU9IsKpIi8%CiA8Q2hhciB3aWR0aD0iOCIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjU1IDU2IDYgNSIgY29kZT0iwqsiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgOCIgcmVjdD0iNjIgNTggNSAzIiBjb2RlPSLCrCIvPgogPENoYXIgd2lkdGg9IjYiIG9mZnNldD0iMSA0IiByZWN0PSI2OCA1NCA0IDQiIGNvZGU9IsKwIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjczIDU2IDUgNyIgY29kZT0iwrEiLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjEgNCIgcmVjdD0iNzkgNTQgMiAyIiBjb2RlPSLCtCIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA2IiByZWN0PSI4MiA1NiA1IDkiIGNvZGU9IsK1Ii8%CiA8Q2hhciB3aWR0aD0iOCIgb2Zmc2V0PSIxIDQiIHJlY3Q9Ijg4IDU0IDcgOSIgY29kZT0iwrYiLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjEgOCIgcmVjdD0iOTYgNTggMSAxIiBjb2RlPSLCtyIvPgogPENoYXIgd2lkdGg9IjUiIG9mZnNldD0iMCAxMyIgcmVjdD0iOTggNjMgMyAyIiBjb2RlPSLCuCIvPgogPENoYXIgd2lkdGg9IjgiIG9mZnNldD0iMSA2IiByZWN0PSIxMDIgNTYgNiA1IiBjb2RlPSLCuyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA2IiByZWN0PSIxMDkgNTYgNSA5IiBjb2RlPSLCvyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAxIiByZWN0PSIxMTUgNTEgNSAxMiIgY29kZT0iw4AiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgMSIgcmVjdD0iMTIxIDUxIDUgMTIiIGNvZGU9IsOBIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDEiIHJlY3Q9IjEgNjcgNSAxMiIgY29kZT0iw4IiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgMSIgcmVjdD0iNyA2NyA2IDEyIiBjb2RlPSLDgyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAyIiByZWN0PSIxNCA2OCA1IDExIiBjb2RlPSLDhCIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAwIiByZWN0PSIyMCA2NiA1IDEzIiBjb2RlPSLDhSIvPgogPENoYXIgd2lkdGg9IjExIiBvZmZzZXQ9IjEgNCIgcmVjdD0iMjYgNzAgOSA5IiBjb2RlPSLDhiIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIzNiA3MCA1IDExIiBjb2RlPSLDhyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAxIiByZWN0PSI0MiA2NyA1IDEyIiBjb2RlPSLDiCIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAxIiByZWN0PSI0OCA2NyA1IDEyIiBjb2RlPSLDiSIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAxIiByZWN0PSI1NCA2NyA1IDEyIiBjb2RlPSLDiiIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAyIiByZWN0PSI2MCA2OCA1IDExIiBjb2RlPSLDiyIvPgogPENoYXIgd2lkdGg9IjMiIG9mZnNldD0iMCAxIiByZWN0PSI2NiA2NyAyIDEyIiBjb2RlPSLDjCIvPgogPENoYXIgd2lkdGg9IjMiIG9mZnNldD0iMSAxIiByZWN0PSI2OSA2NyAyIDEyIiBjb2RlPSLDjSIvPgogPENoYXIgd2lkdGg9IjMiIG9mZnNldD0iMCAxIiByZWN0PSI3MiA2NyAzIDEyIiBjb2RlPSLDjiIvPgogPENoYXIgd2lkdGg9IjMiIG9mZnNldD0iMCAyIiByZWN0PSI3NiA2OCAzIDExIiBjb2RlPSLDjyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMCA0IiByZWN0PSI4MCA3MCA2IDkiIGNvZGU9IsOQIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDEiIHJlY3Q9Ijg3IDY3IDYgMTIiIGNvZGU9IsORIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDEiIHJlY3Q9Ijk0IDY3IDUgMTIiIGNvZGU9IsOSIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDEiIHJlY3Q9IjEwMCA2NyA1IDEyIiBjb2RlPSLDkyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAxIiByZWN0PSIxMDYgNjcgNSAxMiIgY29kZT0iw5QiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgMSIgcmVjdD0iMTEyIDY3IDYgMTIiIGNvZGU9IsOVIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDIiIHJlY3Q9IjExOSA2OCA1IDExIiBjb2RlPSLDliIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA2IiByZWN0PSIxIDg3IDUgNSIgY29kZT0iw5ciLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjAgNCIgcmVjdD0iNyA4NSA3IDkiIGNvZGU9IsOYIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDEiIHJlY3Q9IjE1IDgyIDUgMTIiIGNvZGU9IsOZIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDEiIHJlY3Q9IjIxIDgyIDUgMTIiIGNvZGU9IsOaIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDEiIHJlY3Q9IjI3IDgyIDUgMTIiIGNvZGU9IsObIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDIiIHJlY3Q9IjMzIDgzIDUgMTEiIGNvZGU9IsOcIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDEiIHJlY3Q9IjM5IDgyIDUgMTIiIGNvZGU9IsOdIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjQ1IDg1IDUgOSIgY29kZT0iw54iLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iNTEgODUgNSA5IiBjb2RlPSLDnyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAzIiByZWN0PSI1NyA4NCA1IDEwIiBjb2RlPSLDoCIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAzIiByZWN0PSI2MyA4NCA1IDEwIiBjb2RlPSLDoSIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAzIiByZWN0PSI2OSA4NCA1IDEwIiBjb2RlPSLDoiIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAzIiByZWN0PSI3NSA4NCA2IDEwIiBjb2RlPSLDoyIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSI4MiA4NSA1IDkiIGNvZGU9IsOkIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDIiIHJlY3Q9Ijg4IDgzIDUgMTEiIGNvZGU9IsOlIi8%CiA8Q2hhciB3aWR0aD0iMTEiIG9mZnNldD0iMSA2IiByZWN0PSI5NCA4NyA5IDciIGNvZGU9IsOmIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDYiIHJlY3Q9IjEwNCA4NyA1IDkiIGNvZGU9IsOnIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDMiIHJlY3Q9IjExMCA4NCA1IDEwIiBjb2RlPSLDqCIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSAzIiByZWN0PSIxMTYgODQgNSAxMCIgY29kZT0iw6kiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgMyIgcmVjdD0iMSA5NyA1IDEwIiBjb2RlPSLDqiIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSI3IDk4IDUgOSIgY29kZT0iw6siLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjAgMyIgcmVjdD0iMTMgOTcgMiAxMCIgY29kZT0iw6wiLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjEgMyIgcmVjdD0iMTYgOTcgMiAxMCIgY29kZT0iw60iLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjAgMyIgcmVjdD0iMTkgOTcgMyAxMCIgY29kZT0iw64iLz4KIDxDaGFyIHdpZHRoPSIzIiBvZmZzZXQ9IjAgNCIgcmVjdD0iMjMgOTggMyA5IiBjb2RlPSLDryIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIyNyA5OCA2IDkiIGNvZGU9IsOwIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDMiIHJlY3Q9IjM0IDk3IDYgMTAiIGNvZGU9IsOxIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDMiIHJlY3Q9IjQxIDk3IDUgMTAiIGNvZGU9IsOyIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDMiIHJlY3Q9IjQ3IDk3IDUgMTAiIGNvZGU9IsOzIi8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDMiIHJlY3Q9IjUzIDk3IDUgMTAiIGNvZGU9IsO0Ii8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDMiIHJlY3Q9IjU5IDk3IDYgMTAiIGNvZGU9IsO1Ii8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjY2IDk4IDUgOSIgY29kZT0iw7YiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNiIgcmVjdD0iNzIgMTAwIDUgNSIgY29kZT0iw7ciLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjAgNiIgcmVjdD0iNzggMTAwIDcgNyIgY29kZT0iw7giLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgMyIgcmVjdD0iODYgOTcgNSAxMCIgY29kZT0iw7kiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgMyIgcmVjdD0iOTIgOTcgNSAxMCIgY29kZT0iw7oiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgMyIgcmVjdD0iOTggOTcgNSAxMCIgY29kZT0iw7siLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgNCIgcmVjdD0iMTA0IDk4IDUgOSIgY29kZT0iw7wiLz4KIDxDaGFyIHdpZHRoPSI3IiBvZmZzZXQ9IjEgMyIgcmVjdD0iMTEwIDk3IDUgMTIiIGNvZGU9IsO9Ii8%CiA8Q2hhciB3aWR0aD0iNyIgb2Zmc2V0PSIxIDQiIHJlY3Q9IjExNiA5OCA1IDExIiBjb2RlPSLDviIvPgogPENoYXIgd2lkdGg9IjciIG9mZnNldD0iMSA0IiByZWN0PSIxIDExMCA1IDExIiBjb2RlPSLDvyIvPgo8L0ZvbnQ%Cg")),
c=new ui(c.entry);c.loader=b.loader;b=c.toFont();a.resCache.set(jh,b)}return b};var ol=function(){};p["hxd.res.Embed"]=ol;ol.__name__="hxd.res.Embed";var We={};p["hxd.res._Image.ImageFormat_Impl_"]=We;We.__name__="hxd.res._Image.ImageFormat_Impl_";We.get_useAsyncDecode=function(a){return 0==a};We.toInt=function(a){return a};var gc=function(a){this.entry=a};p["hxd.res.Image"]=gc;gc.__name__="hxd.res.Image";gc.__super__=rc;gc.prototype=J(rc.prototype,{getFormat:function(){this.getSize();return this.inf.format},
getSize:function(){if(null!=this.inf)return this.inf;var a=new Sg(this.entry),b=0,c=0,d,e=0;try{d=a.readUInt16()}catch(f){if((f instanceof n?f.val:f)instanceof ie)d=0;else throw f;}switch(d){case 17476:d=4;a.skip(10);b=a.readInt32();c=a.readInt32();a.skip(64);var g=a.readInt32();switch(g&16777215){case 4805697:switch((g>>>24)-48){case 1:e=4;break;case 2:e=5;break;default:e=0}break;case 5527620:switch((g>>>24)-48){case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:e=3;break;default:e=0}break;default:if(808540228==
g)switch(a.skip(40),e=a.readInt32(),e){case 95:e=6;break;case 98:e=7;break;default:throw new n(this.entry.get_path()+" has unsupported DXGI format "+e);}}if(0==e)throw new n(this.entry.get_path()+" has unsupported 4CC "+String.fromCodePoint(g&255)+String.fromCodePoint(g>>8&255)+String.fromCodePoint(g>>16&255)+String.fromCodePoint(g>>>24));break;case 18759:d=2;a.readInt32();b=a.readUInt16();c=a.readUInt16();break;case 20617:d=1;a.set_bigEndian(!0);for(a.skip(6);;){g=a.readInt32();if(1229472850==a.readInt32()){b=
a.readInt32();c=a.readInt32();break}a.skip(g+4)}break;case 55551:d=0;a.set_bigEndian(!0);a:for(;;)switch(a.readUInt16()){case 65472:case 65474:a.readUInt16();a.readByte();c=a.readUInt16();b=a.readUInt16();break a;default:a.skip(a.readUInt16()-2)}break;default:if("tga"==this.entry.get_extension())d=3,a.skip(10),b=a.readUInt16(),c=a.readUInt16();else throw new n("Unsupported texture format "+this.entry.get_path());}a.close();return this.inf={width:b,height:c,format:d,bc:e}},getPixels:function(a,b){this.getSize();
var c;switch(this.inf.format){case 0:c=this.entry.getBytes();var d;try{d=ra.decode(c)}catch(e){throw c=e instanceof n?e.val:e,new n("Failed to decode JPG "+this.entry.get_path()+" ("+r.string(c)+")");}c=new Za(d.width,d.height,d.pixels,ya.BGRA);break;case 1:c=this.entry.getBytes();d=new dj(new Ob(c));d.checkCRC=!1;c=Za.alloc(this.inf.width,this.inf.height,ya.BGRA);d=d.read();dc.extract32(d,c.bytes,b);b&&(c.flags|=1<<Ya.FlipY._hx_index);break;case 2:c=this.entry.getBytes();c=(new aj(new Ob(c))).read();
c=new Za(this.inf.width,this.inf.height,cc.extractFullBGRA(c,0),ya.BGRA);break;case 3:c=this.entry.getBytes();d=(new jj(new Ob(c))).read();if(d.header.imageType!=qc.UncompressedTrueColor||32!=d.header.bitsPerPixel)throw new n("Not supported "+r.string(d.header.imageType)+"/"+d.header.bitsPerPixel);var f=d.header.width,g=d.header.height;c=Za.alloc(f,g,ya.ARGB);for(var h=hi.fromPixels(c),k=0;k<g;)for(var l=k++,m=0,p=f;m<p;){var q=m++,s=d.imageData[q+l*f];h.bytes.setInt32((q+l*h.width<<2)+h.offset,s>>>
24|s>>8&65280|s<<8&16711680|s<<24)}switch(d.header.imageOrigin._hx_index){case 0:c.flags|=1<<Ya.FlipY._hx_index;break;case 2:break;default:throw new n("Not supported "+r.string(d.header.imageOrigin));}break;case 4:c=this.entry.getBytes(),c=new Za(this.inf.width,this.inf.height,c,ya.S3TC(this.inf.bc),128+(6<=this.inf.bc?20:0))}null!=a&&c.convert(a);null!=b&&c.setFlip(b);return c},toBitmap:function(){this.getSize();var a=new Qc(this.inf.width,this.inf.height),b=this.getPixels();a.setPixels(b);b.dispose();
return a},watchCallb:function(){var a=this.inf.width,b=this.inf.height;this.inf=null;var c=this.getSize();(a!=c.width||b!=c.height)&&this.tex.resize(a,b);this.tex.realloc=null;this.loadTexture()},loadTexture:function(){var a=this;if(0!=this.getFormat()&&!gc.DEFAULT_ASYNC){var b=function(){a.tex.alloc();var b=a.getPixels(a.tex.format);(b.width!=a.tex.width||b.height!=a.tex.height)&&b.makeSquare();a.tex.uploadPixels(b);b.dispose();a.tex.realloc=K(a,a.loadTexture);gc.ENABLE_AUTO_WATCH&&a.watch(K(a,a.watchCallb))};
this.entry.get_isAvailable()?b():this.entry.load(b)}else this.tex.flags|=1<<T.Loading._hx_index,this.entry.loadBitmap(function(b){b=ni.toBitmap(b);a.tex.alloc();if(b.ctx.canvas.width!=a.tex.width||b.ctx.canvas.height!=a.tex.height){var d=b.getPixels();d.makeSquare();a.tex.uploadPixels(d);d.dispose()}else a.tex.uploadBitmap(b);b.ctx=null;b.pixel=null;a.tex.realloc=K(a,a.loadTexture);a.tex.flags&=-1-(1<<T.Loading._hx_index);if(null!=a.tex.waitLoads){b=a.tex.waitLoads;a.tex.waitLoads=null;for(d=0;d<
b.length;){var e=b[d];++d;e()}}gc.ENABLE_AUTO_WATCH&&a.watch(K(a,a.watchCallb))})},toTexture:function(){if(null!=this.tex)return this.tex;this.getSize();var a=this.inf.width,b=this.inf.height;if(!gc.ALLOW_NPOT){for(var c=1,d=1;c<a;)c<<=1;for(;d<b;)d<<=1;a=c;b=d}c=V.nativeFormat;4==this.inf.format&&(c=ya.S3TC(this.inf.bc));this.tex=new V(a,b,[T.NoAlloc],c);gc.DEFAULT_FILTER!=le.Linear&&this.tex.set_filter(gc.DEFAULT_FILTER);this.tex.setName(this.entry.get_path());this.loadTexture();return this.tex},
toTile:function(){var a=this.getSize();return Ga.fromTexture(this.toTexture()).sub(0,0,a.width,a.height)},__class__:gc});var Cb=function(a){this.fs=a;this.cache=new ia};p["hxd.res.Loader"]=Cb;Cb.__name__="hxd.res.Loader";Cb.prototype={cleanCache:function(){this.cache=new ia},dir:function(a){var b=[];a=this.fs.dir(a);for(var c=0;c<a.length;){var d=a[c];++c;b.push(new oe(this,d))}return b},exists:function(a){return this.fs.exists(a)},load:function(a){return new oe(this,this.fs.get(a))},loadCache:function(a,
b){var c=this.cache,c=null!=L[a]?c.getReserved(a):c.h[a];if(null==c){var c=this.fs.get(a),d=Cb.currentInstance;Cb.currentInstance=this;c=ha.createInstance(b,[c]);Cb.currentInstance=d;d=this.cache;null!=L[a]?d.setReserved(a,c):d.h[a]=c}else if(null==(c instanceof b?c:null))throw new n(a+" has been reintrepreted from "+r.string(null==c?null:Ba.getClass(c))+" to "+r.string(b));return c},dispose:function(){this.cleanCache();this.fs.dispose()},__class__:Cb};var si=function(a){this.entry=a};p["hxd.res.Model"]=
si;si.__name__="hxd.res.Model";si.__super__=rc;si.prototype=J(rc.prototype,{toHmd:function(){var a=(new Yf(new Sg(this.entry))).readHeader();return new Xj(this,a)},__class__:si});var Rk=M["hxd.res.Filter"]={__ename__:!0,__constructs__:["Fast","Chromatic"],Fast:{_hx_index:0,__enum__:"hxd.res.Filter",toString:m},Chromatic:{_hx_index:1,__enum__:"hxd.res.Filter",toString:m}};Rk.__empty_constructs__=[Rk.Fast,Rk.Chromatic];var fk={};p["hxd.res._NanoJpeg.FastBytes_Impl_"]=fk;fk.__name__="hxd.res._NanoJpeg.FastBytes_Impl_";
fk._new=function(a){return a};fk.get=function(a,b){return a.b[b]};fk.set=function(a,b,c){a.b[b]=c};var Tg=function(){};p["hxd.res._NanoJpeg.Component"]=Tg;Tg.__name__="hxd.res._NanoJpeg.Component";Tg.prototype={__class__:Tg};var ra=function(){this.comps=[new Tg,new Tg,new Tg].slice(0);this.qtab=[Array(64),Array(64),Array(64),Array(64)].slice(0);this.counts=Array(16);this.block=Array(64);this.njZZ=[0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,
50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63].slice(0);this.vlctab=[null,null,null,null,null,null,null,null].slice(0)};p["hxd.res.NanoJpeg"]=ra;ra.__name__="hxd.res.NanoJpeg";ra.CF=function(a){a=a+64>>7;return 0>a?0:255<a?255:a};ra.njClip=function(a){return 0>a?0:255<a?255:a};ra.decode=function(a,b,c,d){null==d&&(d=-1);null==c&&(c=0);null==ra.inst&&(ra.inst=new ra);ra.inst.njInit(a,c,d,b);return ra.inst.njDecode()};ra.prototype={alloc:function(a){return new N(new ArrayBuffer(a))},
free:function(a){},njInit:function(a,b,c,d){this.bytes=a;this.pos=b;this.filter=null==d?Rk.Chromatic:d;0>c&&(c=a.length-b);null==this.vlctab[0]&&(this.vlctab[0]=new N(new ArrayBuffer(131072)));null==this.vlctab[1]&&(this.vlctab[1]=new N(new ArrayBuffer(131072)));null==this.vlctab[2]&&(this.vlctab[2]=new N(new ArrayBuffer(131072)));null==this.vlctab[3]&&(this.vlctab[3]=new N(new ArrayBuffer(131072)));this.size=c;this.bufbits=this.buf=this.length=this.rstinterval=this.qtavail=this.qtused=0;this.progressive=
!1;this.comps[0].dcpred=0;this.comps[1].dcpred=0;this.comps[2].dcpred=0},cleanup:function(){this.bytes=null;for(var a=0,b=this.comps;a<b.length;){var c=b[a];++a;null!=c.pixels&&(c.pixels=null)}null!=this.vlctab[0]&&(this.vlctab[0]=null);null!=this.vlctab[1]&&(this.vlctab[1]=null);null!=this.vlctab[2]&&(this.vlctab[2]=null);null!=this.vlctab[3]&&(this.vlctab[3]=null);null!=this.vlctab[4]&&(this.vlctab[4]=null);null!=this.vlctab[5]&&(this.vlctab[5]=null);null!=this.vlctab[6]&&(this.vlctab[6]=null);
null!=this.vlctab[7]&&(this.vlctab[7]=null)},njSkip:function(a){this.pos+=a;this.size-=a;this.length-=a},syntax:function(a){},get:function(a){return this.bytes.b[this.pos+a]},njDecode16:function(a){return this.bytes.b[this.pos+a]<<8|this.bytes.b[this.pos+(a+1)]},njByteAlign:function(){this.bufbits&=248},njShowBits:function(a){if(0==a)return 0;for(;this.bufbits<a;)if(0>=this.size)this.buf=this.buf<<8|255,this.bufbits+=8;else{var b=this.bytes.b[this.pos];this.pos++;this.size--;this.bufbits+=8;this.buf=
this.buf<<8|b;if(255==b)switch(b=this.bytes.b[this.pos],this.pos++,this.size--,b){case 217:this.size=0;break;case 0:case 255:break;default:this.buf=this.buf<<8|b,this.bufbits+=8}}return this.buf>>this.bufbits-a&(1<<a)-1},njSkipBits:function(a){this.bufbits<a&&this.njShowBits(a);this.bufbits-=a},njGetBits:function(a){var b=this.njShowBits(a);this.bufbits-=a;return b},njDecodeLength:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];this.pos+=2;this.size-=2;this.length-=2},njSkipMarker:function(){this.length=
this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];this.pos+=2;this.size-=2;var a=this.length-=2;this.pos+=a;this.size-=a;this.length-=a},njDecodeSOF:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];this.pos+=2;this.size-=2;this.length-=2;8!=this.bytes.b[this.pos]&&this.notSupported();this.height=this.bytes.b[this.pos+1]<<8|this.bytes.b[this.pos+2];this.width=this.bytes.b[this.pos+3]<<8|this.bytes.b[this.pos+4];this.ncomp=this.bytes.b[this.pos+5];this.pos+=6;this.size-=6;
this.length-=6;switch(this.ncomp){case 1:case 3:break;default:this.notSupported()}for(var a=0,b=0,c=0,d=this.ncomp;c<d;){var e=c++,e=this.comps[e];e.cid=this.bytes.b[this.pos];e.ssx=this.bytes.b[this.pos+1]>>4;0!=(e.ssx&e.ssx-1)&&this.notSupported();e.ssy=this.bytes.b[this.pos+1]&15;0!=(e.ssy&e.ssy-1)&&this.notSupported();e.qtsel=this.bytes.b[this.pos+2];this.pos+=3;this.size-=3;this.length-=3;this.qtused|=1<<e.qtsel;e.ssx>a&&(a=e.ssx);e.ssy>b&&(b=e.ssy)}1==this.ncomp&&(c=this.comps[0],a=b=1,c.ssx=
c.ssy=a);this.mbsizex=a<<3;this.mbsizey=b<<3;this.mbwidth=(this.width+this.mbsizex-1)/this.mbsizex|0;this.mbheight=(this.height+this.mbsizey-1)/this.mbsizey|0;c=0;for(d=this.ncomp;c<d;)e=c++,e=this.comps[e],e.width=(this.width*e.ssx+a-1)/a|0,e.stride=e.width+7&2147483640,e.height=(this.height*e.ssy+b-1)/b|0,e.stride=this.mbwidth*this.mbsizex*e.ssx/a|0,(3>e.width&&e.ssx!=a||3>e.height&&e.ssy!=b)&&this.notSupported(),e.pixels=new N(new ArrayBuffer(e.stride*(this.mbheight*this.mbsizey*e.ssy/b|0)));a=
this.length;this.pos+=a;this.size-=a;this.length-=a},njDecodeDQT:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];this.pos+=2;this.size-=2;for(this.length-=2;65<=this.length;){var a=this.bytes.b[this.pos];this.qtavail|=1<<a;for(var a=this.qtab[a],b=0;64>b;){var c=b++;a[c]=this.bytes.b[this.pos+(c+1)]}this.pos+=65;this.size-=65;this.length-=65}},njDecodeDHT:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];this.pos+=2;this.size-=2;for(this.length-=2;17<=
this.length;){var a=this.bytes.b[this.pos],a=a>>4&1|(a&3)<<1;this.counts[0]=this.bytes.b[this.pos+1];this.counts[1]=this.bytes.b[this.pos+2];this.counts[2]=this.bytes.b[this.pos+3];this.counts[3]=this.bytes.b[this.pos+4];this.counts[4]=this.bytes.b[this.pos+5];this.counts[5]=this.bytes.b[this.pos+6];this.counts[6]=this.bytes.b[this.pos+7];this.counts[7]=this.bytes.b[this.pos+8];this.counts[8]=this.bytes.b[this.pos+9];this.counts[9]=this.bytes.b[this.pos+10];this.counts[10]=this.bytes.b[this.pos+11];
this.counts[11]=this.bytes.b[this.pos+12];this.counts[12]=this.bytes.b[this.pos+13];this.counts[13]=this.bytes.b[this.pos+14];this.counts[14]=this.bytes.b[this.pos+15];this.counts[15]=this.bytes.b[this.pos+16];this.pos+=17;this.size-=17;this.length-=17;for(var a=this.vlctab[a],b=0,c=65536,d=65536,e=1;17>e;){var f=e++,d=d>>1,g=this.counts[f-1];if(0!=g){for(var c=c-(g<<16-f),h=0,k=g;h<k;)for(var l=h++,l=this.bytes.b[this.pos+l],m=0,n=d;m<n;)m++,a.b[b++]=f,a.b[b++]=l;this.pos+=g;this.size-=g;this.length-=
g}}for(;0!=c--;)a.b[b]=0,b+=2}},njDecodeDRI:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];this.pos+=2;this.size-=2;this.length-=2;this.rstinterval=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];var a=this.length;this.pos+=a;this.size-=a;this.length-=a},njGetVLC:function(a){var b=this.njShowBits(16),c=a.b[b<<1];this.bufbits<c&&this.njShowBits(c);this.bufbits-=c;this.vlcCode=b=a.b[b<<1|1];c=b&15;if(0==c)return 0;a=this.njShowBits(c);this.bufbits-=c;b=a;b<1<<c-1&&(b+=
(-1<<c)+1);return b},njRowIDCT:function(a){var b=this.block[a+4]<<11,c=this.block[a+6],d=this.block[a+2],e=this.block[a+1],f=this.block[a+7],g=this.block[a+5],h=this.block[a+3];if(0==(b|c|d|e|f|g|h))b=this.block[a+7]=this.block[a]<<3,b=this.block[a+6]=b,b=this.block[a+5]=b,b=this.block[a+4]=b,b=this.block[a+3]=b,b=this.block[a+2]=b,b=this.block[a+1]=b,this.block[a]=b;else{var k=(this.block[a]<<11)+128,l=565*(e+f),e=l+2276*e,f=l-3406*f,l=2408*(g+h),g=l-799*g,h=l-4017*h,l=k+b,k=k-b,b=1108*(d+c),c=b-
3784*c,d=b+1568*d,b=e+g,e=e-g,g=f+h,f=f-h,h=l+d,l=l-d,d=k+c,k=k-c,c=181*(e+f)+128>>8,e=181*(e-f)+128>>8;this.block[a]=h+b>>8;this.block[a+1]=d+c>>8;this.block[a+2]=k+e>>8;this.block[a+3]=l+g>>8;this.block[a+4]=l-g>>8;this.block[a+5]=k-e>>8;this.block[a+6]=d-c>>8;this.block[a+7]=h-b>>8}},njColIDCT:function(a,b,c,d){var e=this.block[a+32]<<8,f=this.block[a+48],g=this.block[a+16],h=this.block[a+8],k=this.block[a+56],l=this.block[a+40],m=this.block[a+24];if(0==(e|f|g|h|k|l|m))e=(this.block[a]+32>>6)+
128,e=0>e?0:255<e?255:e,b.b[c]=e,c+=d,b.b[c]=e,c+=d,b.b[c]=e,c+=d,b.b[c]=e,c+=d,b.b[c]=e,c+=d,b.b[c]=e,c+=d,b.b[c]=e,b.b[c+d]=e;else{a=(this.block[a]<<8)+8192;var n=565*(h+k)+4,h=n+2276*h>>3,k=n-3406*k>>3,n=2408*(l+m)+4,l=n-799*l>>3,m=n-4017*m>>3,n=a+e;a-=e;e=1108*(g+f)+4;f=e-3784*f>>3;g=e+1568*g>>3;e=h+l;h-=l;l=k+m;k-=m;m=n+g;n-=g;g=a+f;a-=f;f=181*(h+k)+128>>8;h=181*(h-k)+128>>8;k=(m+e>>14)+128;b.b[c]=0>k?0:255<k?255:k;c+=d;k=(g+f>>14)+128;b.b[c]=0>k?0:255<k?255:k;c+=d;k=(a+h>>14)+128;b.b[c]=0>k?
0:255<k?255:k;c+=d;k=(n+l>>14)+128;b.b[c]=0>k?0:255<k?255:k;c+=d;l=(n-l>>14)+128;b.b[c]=0>l?0:255<l?255:l;c+=d;h=(a-h>>14)+128;b.b[c]=0>h?0:255<h?255:h;c+=d;f=(g-f>>14)+128;b.b[c]=0>f?0:255<f?255:f;c+=d;d=(m-e>>14)+128;b.b[c]=0>d?0:255<d?255:d}},njDecodeBlock:function(a,b){for(var c=a.pixels,d,e=0,f=0;64>f;){var g=f++;this.block[g]=0}var h=a.dcpred,k=this.vlctab[a.dctabsel],l=this.njShowBits(16),m=k.b[l<<1];this.bufbits<m&&this.njShowBits(m);this.bufbits-=m;this.vlcCode=l=k.b[l<<1|1];var m=l&15,n;
if(0==m)n=0;else{var p=this.njShowBits(m);this.bufbits-=m;l=p;l<1<<m-1&&(l+=(-1<<m)+1);n=l}a.dcpred=h+n;var q=this.qtab[a.qtsel],r=this.vlctab[a.actabsel];for(this.block[0]=a.dcpred*q[0];;){var s=this.njShowBits(16),u=r.b[s<<1];this.bufbits<u&&this.njShowBits(u);this.bufbits-=u;this.vlcCode=s=r.b[s<<1|1];u=s&15;if(0==u)d=0;else{var v=this.njShowBits(u);this.bufbits-=u;s=v;s<1<<u-1&&(s+=(-1<<u)+1);d=s}if(0==this.vlcCode)break;e+=(this.vlcCode>>4)+1;this.block[this.njZZ[e]]=d*q[e];if(!(63>e))break}var w,
y,z=this.block[4]<<11,B=this.block[6],D=this.block[2],G=this.block[1],H=this.block[7],J=this.block[5],I=this.block[3];if(0==(z|B|D|G|H|J|I)){var K=this.block[7]=this.block[0]<<3,L=this.block[6]=K,N=this.block[5]=L,M=this.block[4]=N,P=this.block[3]=M,U=this.block[2]=P,V=this.block[1]=U;this.block[0]=V}else w=(this.block[0]<<11)+128,y=565*(G+H),G=y+2276*G,H=y-3406*H,y=2408*(J+I),J=y-799*J,I=y-4017*I,y=w+z,w-=z,z=1108*(D+B),B=z-3784*B,D=z+1568*D,z=G+J,G-=J,J=H+I,H-=I,I=y+D,y-=D,D=w+B,w-=B,B=181*(G+H)+
128>>8,G=181*(G-H)+128>>8,this.block[0]=I+z>>8,this.block[1]=D+B>>8,this.block[2]=w+G>>8,this.block[3]=y+J>>8,this.block[4]=y-J>>8,this.block[5]=w-G>>8,this.block[6]=D-B>>8,this.block[7]=I-z>>8;var R,Q,T=this.block[12]<<11,S=this.block[14],W=this.block[10],X=this.block[9],Z=this.block[15],$=this.block[13],A=this.block[11];if(0==(T|S|W|X|Z|$|A)){var da=this.block[15]=this.block[8]<<3,ea=this.block[14]=da,Y=this.block[13]=ea,aa=this.block[12]=Y,la=this.block[11]=aa,na=this.block[10]=la,qa=this.block[9]=
na;this.block[8]=qa}else R=(this.block[8]<<11)+128,Q=565*(X+Z),X=Q+2276*X,Z=Q-3406*Z,Q=2408*($+A),$=Q-799*$,A=Q-4017*A,Q=R+T,R-=T,T=1108*(W+S),S=T-3784*S,W=T+1568*W,T=X+$,X-=$,$=Z+A,Z-=A,A=Q+W,Q-=W,W=R+S,R-=S,S=181*(X+Z)+128>>8,X=181*(X-Z)+128>>8,this.block[8]=A+T>>8,this.block[9]=W+S>>8,this.block[10]=R+X>>8,this.block[11]=Q+$>>8,this.block[12]=Q-$>>8,this.block[13]=R-X>>8,this.block[14]=W-S>>8,this.block[15]=A-T>>8;var ha,ga,ja=this.block[20]<<11,fa=this.block[22],ma=this.block[18],ia=this.block[17],
oa=this.block[23],ca=this.block[21],ka=this.block[19];if(0==(ja|fa|ma|ia|oa|ca|ka)){var ya=this.block[23]=this.block[16]<<3,sa=this.block[22]=ya,Aa=this.block[21]=sa,Ba=this.block[20]=Aa,Ca=this.block[19]=Ba,Fa=this.block[18]=Ca,Ga=this.block[17]=Fa;this.block[16]=Ga}else ha=(this.block[16]<<11)+128,ga=565*(ia+oa),ia=ga+2276*ia,oa=ga-3406*oa,ga=2408*(ca+ka),ca=ga-799*ca,ka=ga-4017*ka,ga=ha+ja,ha-=ja,ja=1108*(ma+fa),fa=ja-3784*fa,ma=ja+1568*ma,ja=ia+ca,ia-=ca,ca=oa+ka,oa-=ka,ka=ga+ma,ga-=ma,ma=ha+
fa,ha-=fa,fa=181*(ia+oa)+128>>8,ia=181*(ia-oa)+128>>8,this.block[16]=ka+ja>>8,this.block[17]=ma+fa>>8,this.block[18]=ha+ia>>8,this.block[19]=ga+ca>>8,this.block[20]=ga-ca>>8,this.block[21]=ha-ia>>8,this.block[22]=ma-fa>>8,this.block[23]=ka-ja>>8;var ua,ra,xa=this.block[28]<<11,pa=this.block[30],za=this.block[26],Ia=this.block[25],Da=this.block[31],Ea=this.block[29],Ha=this.block[27];if(0==(xa|pa|za|Ia|Da|Ea|Ha)){var Wa=this.block[31]=this.block[24]<<3,Za=this.block[30]=Wa,Ra=this.block[29]=Za,Xa=
this.block[28]=Ra,La=this.block[27]=Xa,Ma=this.block[26]=La,eb=this.block[25]=Ma;this.block[24]=eb}else ua=(this.block[24]<<11)+128,ra=565*(Ia+Da),Ia=ra+2276*Ia,Da=ra-3406*Da,ra=2408*(Ea+Ha),Ea=ra-799*Ea,Ha=ra-4017*Ha,ra=ua+xa,ua-=xa,xa=1108*(za+pa),pa=xa-3784*pa,za=xa+1568*za,xa=Ia+Ea,Ia-=Ea,Ea=Da+Ha,Da-=Ha,Ha=ra+za,ra-=za,za=ua+pa,ua-=pa,pa=181*(Ia+Da)+128>>8,Ia=181*(Ia-Da)+128>>8,this.block[24]=Ha+xa>>8,this.block[25]=za+pa>>8,this.block[26]=ua+Ia>>8,this.block[27]=ra+Ea>>8,this.block[28]=ra-Ea>>
8,this.block[29]=ua-Ia>>8,this.block[30]=za-pa>>8,this.block[31]=Ha-xa>>8;var Ja,ta,gb=this.block[36]<<11,Ka=this.block[38],Na=this.block[34],ib=this.block[33],Ya=this.block[39],Sa=this.block[37],$a=this.block[35];if(0==(gb|Ka|Na|ib|Ya|Sa|$a)){var xb=this.block[39]=this.block[32]<<3,va=this.block[38]=xb,wa=this.block[37]=va,Oa=this.block[36]=wa,Qa=this.block[35]=Oa,Pa=this.block[34]=Qa,Vb=this.block[33]=Pa;this.block[32]=Vb}else Ja=(this.block[32]<<11)+128,ta=565*(ib+Ya),ib=ta+2276*ib,Ya=ta-3406*
Ya,ta=2408*(Sa+$a),Sa=ta-799*Sa,$a=ta-4017*$a,ta=Ja+gb,Ja-=gb,gb=1108*(Na+Ka),Ka=gb-3784*Ka,Na=gb+1568*Na,gb=ib+Sa,ib-=Sa,Sa=Ya+$a,Ya-=$a,$a=ta+Na,ta-=Na,Na=Ja+Ka,Ja-=Ka,Ka=181*(ib+Ya)+128>>8,ib=181*(ib-Ya)+128>>8,this.block[32]=$a+gb>>8,this.block[33]=Na+Ka>>8,this.block[34]=Ja+ib>>8,this.block[35]=ta+Sa>>8,this.block[36]=ta-Sa>>8,this.block[37]=Ja-ib>>8,this.block[38]=Na-Ka>>8,this.block[39]=$a-gb>>8;var Ta,ub,cb=this.block[44]<<11,sb=this.block[46],db=this.block[42],yb=this.block[41],bb=this.block[47],
Lb=this.block[45],ab=this.block[43];if(0==(cb|sb|db|yb|bb|Lb|ab)){var Cb=this.block[47]=this.block[40]<<3,Db=this.block[46]=Cb,Gb=this.block[45]=Db,Eb=this.block[44]=Gb,Ib=this.block[43]=Eb,Hb=this.block[42]=Ib,Fb=this.block[41]=Hb;this.block[40]=Fb}else Ta=(this.block[40]<<11)+128,ub=565*(yb+bb),yb=ub+2276*yb,bb=ub-3406*bb,ub=2408*(Lb+ab),Lb=ub-799*Lb,ab=ub-4017*ab,ub=Ta+cb,Ta-=cb,cb=1108*(db+sb),sb=cb-3784*sb,db=cb+1568*db,cb=yb+Lb,yb-=Lb,Lb=bb+ab,bb-=ab,ab=ub+db,ub-=db,db=Ta+sb,Ta-=sb,sb=181*(yb+
bb)+128>>8,yb=181*(yb-bb)+128>>8,this.block[40]=ab+cb>>8,this.block[41]=db+sb>>8,this.block[42]=Ta+yb>>8,this.block[43]=ub+Lb>>8,this.block[44]=ub-Lb>>8,this.block[45]=Ta-yb>>8,this.block[46]=db-sb>>8,this.block[47]=ab-cb>>8;var wb,jb,mb=this.block[52]<<11,tb=this.block[54],zb=this.block[50],fb=this.block[49],lb=this.block[55],vb=this.block[53],Bb=this.block[51];if(0==(mb|tb|zb|fb|lb|vb|Bb)){var Sb=this.block[55]=this.block[48]<<3,Wb=this.block[54]=Sb,Pb=this.block[53]=Wb,Kb=this.block[52]=Pb,Rb=
this.block[51]=Kb,Ub=this.block[50]=Rb,Qb=this.block[49]=Ub;this.block[48]=Qb}else wb=(this.block[48]<<11)+128,jb=565*(fb+lb),fb=jb+2276*fb,lb=jb-3406*lb,jb=2408*(vb+Bb),vb=jb-799*vb,Bb=jb-4017*Bb,jb=wb+mb,wb-=mb,mb=1108*(zb+tb),tb=mb-3784*tb,zb=mb+1568*zb,mb=fb+vb,fb-=vb,vb=lb+Bb,lb-=Bb,Bb=jb+zb,jb-=zb,zb=wb+tb,wb-=tb,tb=181*(fb+lb)+128>>8,fb=181*(fb-lb)+128>>8,this.block[48]=Bb+mb>>8,this.block[49]=zb+tb>>8,this.block[50]=wb+fb>>8,this.block[51]=jb+vb>>8,this.block[52]=jb-vb>>8,this.block[53]=wb-
fb>>8,this.block[54]=zb-tb>>8,this.block[55]=Bb-mb>>8;var nb,ec,Ob=this.block[60]<<11,Mb=this.block[62],Xb=this.block[58],Zb=this.block[57],Ab=this.block[63],Jb=this.block[61],Nb=this.block[59];if(0==(Ob|Mb|Xb|Zb|Ab|Jb|Nb)){var rc=this.block[63]=this.block[56]<<3,Dc=this.block[62]=rc,Ec=this.block[61]=Dc,Gc=this.block[60]=Ec,tc=this.block[59]=Gc,uc=this.block[58]=tc,Rc=this.block[57]=uc;this.block[56]=Rc}else nb=(this.block[56]<<11)+128,ec=565*(Zb+Ab),Zb=ec+2276*Zb,Ab=ec-3406*Ab,ec=2408*(Jb+Nb),Jb=
ec-799*Jb,Nb=ec-4017*Nb,ec=nb+Ob,nb-=Ob,Ob=1108*(Xb+Mb),Mb=Ob-3784*Mb,Xb=Ob+1568*Xb,Ob=Zb+Jb,Zb-=Jb,Jb=Ab+Nb,Ab-=Nb,Nb=ec+Xb,ec-=Xb,Xb=nb+Mb,nb-=Mb,Mb=181*(Zb+Ab)+128>>8,Zb=181*(Zb-Ab)+128>>8,this.block[56]=Nb+Ob>>8,this.block[57]=Xb+Mb>>8,this.block[58]=nb+Zb>>8,this.block[59]=ec+Jb>>8,this.block[60]=ec-Jb>>8,this.block[61]=nb-Zb>>8,this.block[62]=Xb-Mb>>8,this.block[63]=Nb-Ob>>8;var Ua=b,Ld=a.stride,bc,$b,wc=this.block[32]<<8,ac=this.block[48],Yb=this.block[16],Fd=this.block[8],Tb=this.block[56],
cc=this.block[40],dc=this.block[24];if(0==(wc|ac|Yb|Fd|Tb|cc|dc)){var qc=(this.block[0]+32>>6)+128,wc=0>qc?0:255<qc?255:qc;c.b[Ua]=wc;Ua+=Ld;c.b[Ua]=wc;Ua+=Ld;c.b[Ua]=wc;Ua+=Ld;c.b[Ua]=wc;Ua+=Ld;c.b[Ua]=wc;Ua+=Ld;c.b[Ua]=wc;Ua+=Ld;c.b[Ua]=wc;Ua+=Ld;c.b[Ua]=wc;Ua+=Ld}else{bc=(this.block[0]<<8)+8192;$b=565*(Fd+Tb)+4;Fd=$b+2276*Fd>>3;Tb=$b-3406*Tb>>3;$b=2408*(cc+dc)+4;cc=$b-799*cc>>3;dc=$b-4017*dc>>3;$b=bc+wc;bc-=wc;wc=1108*(Yb+ac)+4;ac=wc-3784*ac>>3;Yb=wc+1568*Yb>>3;wc=Fd+cc;Fd-=cc;cc=Tb+dc;Tb-=dc;
dc=$b+Yb;$b-=Yb;Yb=bc+ac;bc-=ac;var ac=181*(Fd+Tb)+128>>8,Fd=181*(Fd-Tb)+128>>8,Ac=(dc+wc>>14)+128;c.b[Ua]=0>Ac?0:255<Ac?255:Ac;var Ua=Ua+Ld,Bc=(Yb+ac>>14)+128;c.b[Ua]=0>Bc?0:255<Bc?255:Bc;var Ua=Ua+Ld,Mc=(bc+Fd>>14)+128;c.b[Ua]=0>Mc?0:255<Mc?255:Mc;var Ua=Ua+Ld,Fc=($b+cc>>14)+128;c.b[Ua]=0>Fc?0:255<Fc?255:Fc;var Ua=Ua+Ld,sc=($b-cc>>14)+128;c.b[Ua]=0>sc?0:255<sc?255:sc;var Ua=Ua+Ld,Hc=(bc-Fd>>14)+128;c.b[Ua]=0>Hc?0:255<Hc?255:Hc;var Ua=Ua+Ld,vc=(Yb-ac>>14)+128;c.b[Ua]=0>vc?0:255<vc?255:vc;var Ua=
Ua+Ld,Cc=(dc-wc>>14)+128;c.b[Ua]=0>Cc?0:255<Cc?255:Cc}var Va=1+b,pc=a.stride,xc,Md,Wc=this.block[33]<<8,gc=this.block[49],hc=this.block[17],Gd=this.block[9],kc=this.block[57],mc=this.block[41],fc=this.block[25];if(0==(Wc|gc|hc|Gd|kc|mc|fc)){var fd=(this.block[1]+32>>6)+128,Wc=0>fd?0:255<fd?255:fd;c.b[Va]=Wc;Va+=pc;c.b[Va]=Wc;Va+=pc;c.b[Va]=Wc;Va+=pc;c.b[Va]=Wc;Va+=pc;c.b[Va]=Wc;Va+=pc;c.b[Va]=Wc;Va+=pc;c.b[Va]=Wc;Va+=pc;c.b[Va]=Wc;Va+=pc}else{xc=(this.block[1]<<8)+8192;Md=565*(Gd+kc)+4;Gd=Md+2276*
Gd>>3;kc=Md-3406*kc>>3;Md=2408*(mc+fc)+4;mc=Md-799*mc>>3;fc=Md-4017*fc>>3;Md=xc+Wc;xc-=Wc;Wc=1108*(hc+gc)+4;gc=Wc-3784*gc>>3;hc=Wc+1568*hc>>3;Wc=Gd+mc;Gd-=mc;mc=kc+fc;kc-=fc;fc=Md+hc;Md-=hc;hc=xc+gc;xc-=gc;var gc=181*(Gd+kc)+128>>8,Gd=181*(Gd-kc)+128>>8,ld=(fc+Wc>>14)+128;c.b[Va]=0>ld?0:255<ld?255:ld;var Va=Va+pc,sd=(hc+gc>>14)+128;c.b[Va]=0>sd?0:255<sd?255:sd;var Va=Va+pc,td=(xc+Gd>>14)+128;c.b[Va]=0>td?0:255<td?255:td;var Va=Va+pc,Od=(Md+mc>>14)+128;c.b[Va]=0>Od?0:255<Od?255:Od;var Va=Va+pc,hj=
(Md-mc>>14)+128;c.b[Va]=0>hj?0:255<hj?255:hj;var Va=Va+pc,Pd=(xc-Gd>>14)+128;c.b[Va]=0>Pd?0:255<Pd?255:Pd;var Va=Va+pc,Qd=(hc-gc>>14)+128;c.b[Va]=0>Qd?0:255<Qd?255:Qd;var Va=Va+pc,Rd=(fc-Wc>>14)+128;c.b[Va]=0>Rd?0:255<Rd?255:Rd}var hb=2+b,Nd=a.stride,oc,jc,$c=this.block[34]<<8,Ic=this.block[50],Nc=this.block[18],lc=this.block[10],Jc=this.block[58],yc=this.block[42],zc=this.block[26];if(0==($c|Ic|Nc|lc|Jc|yc|zc)){var Ud=(this.block[2]+32>>6)+128,$c=0>Ud?0:255<Ud?255:Ud;c.b[hb]=$c;hb+=Nd;c.b[hb]=$c;
hb+=Nd;c.b[hb]=$c;hb+=Nd;c.b[hb]=$c;hb+=Nd;c.b[hb]=$c;hb+=Nd;c.b[hb]=$c;hb+=Nd;c.b[hb]=$c;hb+=Nd;c.b[hb]=$c;hb+=Nd}else{oc=(this.block[2]<<8)+8192;jc=565*(lc+Jc)+4;lc=jc+2276*lc>>3;Jc=jc-3406*Jc>>3;jc=2408*(yc+zc)+4;yc=jc-799*yc>>3;zc=jc-4017*zc>>3;jc=oc+$c;oc-=$c;$c=1108*(Nc+Ic)+4;Ic=$c-3784*Ic>>3;Nc=$c+1568*Nc>>3;$c=lc+yc;lc-=yc;yc=Jc+zc;Jc-=zc;zc=jc+Nc;jc-=Nc;Nc=oc+Ic;oc-=Ic;var Ic=181*(lc+Jc)+128>>8,lc=181*(lc-Jc)+128>>8,Vd=(zc+$c>>14)+128;c.b[hb]=0>Vd?0:255<Vd?255:Vd;var hb=hb+Nd,Wd=(Nc+Ic>>
14)+128;c.b[hb]=0>Wd?0:255<Wd?255:Wd;var hb=hb+Nd,Xd=(oc+lc>>14)+128;c.b[hb]=0>Xd?0:255<Xd?255:Xd;var hb=hb+Nd,Yd=(jc+yc>>14)+128;c.b[hb]=0>Yd?0:255<Yd?255:Yd;var hb=hb+Nd,Zd=(jc-yc>>14)+128;c.b[hb]=0>Zd?0:255<Zd?255:Zd;var hb=hb+Nd,$d=(oc-lc>>14)+128;c.b[hb]=0>$d?0:255<$d?255:$d;var hb=hb+Nd,ae=(Nc-Ic>>14)+128;c.b[hb]=0>ae?0:255<ae?255:ae;var hb=hb+Nd,be=(zc-$c>>14)+128;c.b[hb]=0>be?0:255<be?255:be}var kb=3+b,kd=a.stride,Qc,Be,ad=this.block[35]<<8,Kc=this.block[51],Sc=this.block[19],wd=this.block[11],
Tc=this.block[59],Uc=this.block[43],Ce=this.block[27];if(0==(ad|Kc|Sc|wd|Tc|Uc|Ce)){var ce=(this.block[3]+32>>6)+128,ad=0>ce?0:255<ce?255:ce;c.b[kb]=ad;kb+=kd;c.b[kb]=ad;kb+=kd;c.b[kb]=ad;kb+=kd;c.b[kb]=ad;kb+=kd;c.b[kb]=ad;kb+=kd;c.b[kb]=ad;kb+=kd;c.b[kb]=ad;kb+=kd;c.b[kb]=ad;kb+=kd}else{Qc=(this.block[3]<<8)+8192;Be=565*(wd+Tc)+4;wd=Be+2276*wd>>3;Tc=Be-3406*Tc>>3;Be=2408*(Uc+Ce)+4;Uc=Be-799*Uc>>3;Ce=Be-4017*Ce>>3;Be=Qc+ad;Qc-=ad;ad=1108*(Sc+Kc)+4;Kc=ad-3784*Kc>>3;Sc=ad+1568*Sc>>3;ad=wd+Uc;wd-=Uc;
Uc=Tc+Ce;Tc-=Ce;Ce=Be+Sc;Be-=Sc;Sc=Qc+Kc;Qc-=Kc;var Kc=181*(wd+Tc)+128>>8,wd=181*(wd-Tc)+128>>8,de=(Ce+ad>>14)+128;c.b[kb]=0>de?0:255<de?255:de;var kb=kb+kd,ee=(Sc+Kc>>14)+128;c.b[kb]=0>ee?0:255<ee?255:ee;var kb=kb+kd,fe=(Qc+wd>>14)+128;c.b[kb]=0>fe?0:255<fe?255:fe;var kb=kb+kd,ge=(Be+Uc>>14)+128;c.b[kb]=0>ge?0:255<ge?255:ge;var kb=kb+kd,he=(Be-Uc>>14)+128;c.b[kb]=0>he?0:255<he?255:he;var kb=kb+kd,ie=(Qc-wd>>14)+128;c.b[kb]=0>ie?0:255<ie?255:ie;var kb=kb+kd,je=(Sc-Kc>>14)+128;c.b[kb]=0>je?0:255<je?
255:je;var kb=kb+kd,le=(Ce-ad>>14)+128;c.b[kb]=0>le?0:255<le?255:le}var ob=4+b,pe=a.stride,Oc,cf,Hd=this.block[36]<<8,Xc=this.block[52],Pc=this.block[20],df=this.block[12],Lc=this.block[60],bd=this.block[44],cd=this.block[28];if(0==(Hd|Xc|Pc|df|Lc|bd|cd)){var me=(this.block[4]+32>>6)+128,Hd=0>me?0:255<me?255:me;c.b[ob]=Hd;ob+=pe;c.b[ob]=Hd;ob+=pe;c.b[ob]=Hd;ob+=pe;c.b[ob]=Hd;ob+=pe;c.b[ob]=Hd;ob+=pe;c.b[ob]=Hd;ob+=pe;c.b[ob]=Hd;ob+=pe;c.b[ob]=Hd;ob+=pe}else{Oc=(this.block[4]<<8)+8192;cf=565*(df+Lc)+
4;df=cf+2276*df>>3;Lc=cf-3406*Lc>>3;cf=2408*(bd+cd)+4;bd=cf-799*bd>>3;cd=cf-4017*cd>>3;cf=Oc+Hd;Oc-=Hd;Hd=1108*(Pc+Xc)+4;Xc=Hd-3784*Xc>>3;Pc=Hd+1568*Pc>>3;Hd=df+bd;df-=bd;bd=Lc+cd;Lc-=cd;cd=cf+Pc;cf-=Pc;Pc=Oc+Xc;Oc-=Xc;var Xc=181*(df+Lc)+128>>8,df=181*(df-Lc)+128>>8,ne=(cd+Hd>>14)+128;c.b[ob]=0>ne?0:255<ne?255:ne;var ob=ob+pe,oe=(Pc+Xc>>14)+128;c.b[ob]=0>oe?0:255<oe?255:oe;var ob=ob+pe,te=(Oc+df>>14)+128;c.b[ob]=0>te?0:255<te?255:te;var ob=ob+pe,ue=(cf+bd>>14)+128;c.b[ob]=0>ue?0:255<ue?255:ue;var ob=
ob+pe,ve=(cf-bd>>14)+128;c.b[ob]=0>ve?0:255<ve?255:ve;var ob=ob+pe,we=(Oc-df>>14)+128;c.b[ob]=0>we?0:255<we?255:we;var ob=ob+pe,xe=(Pc-Xc>>14)+128;c.b[ob]=0>xe?0:255<xe?255:xe;var ob=ob+pe,ye=(cd-Hd>>14)+128;c.b[ob]=0>ye?0:255<ye?255:ye}var pb=5+b,qe=a.stride,dd,ef,Id=this.block[37]<<8,ed=this.block[53],gd=this.block[21],ff=this.block[13],hd=this.block[61],id=this.block[45],jd=this.block[29];if(0==(Id|ed|gd|ff|hd|id|jd)){var ze=(this.block[5]+32>>6)+128,Id=0>ze?0:255<ze?255:ze;c.b[pb]=Id;pb+=qe;c.b[pb]=
Id;pb+=qe;c.b[pb]=Id;pb+=qe;c.b[pb]=Id;pb+=qe;c.b[pb]=Id;pb+=qe;c.b[pb]=Id;pb+=qe;c.b[pb]=Id;pb+=qe;c.b[pb]=Id;pb+=qe}else{dd=(this.block[5]<<8)+8192;ef=565*(ff+hd)+4;ff=ef+2276*ff>>3;hd=ef-3406*hd>>3;ef=2408*(id+jd)+4;id=ef-799*id>>3;jd=ef-4017*jd>>3;ef=dd+Id;dd-=Id;Id=1108*(gd+ed)+4;ed=Id-3784*ed>>3;gd=Id+1568*gd>>3;Id=ff+id;ff-=id;id=hd+jd;hd-=jd;jd=ef+gd;ef-=gd;gd=dd+ed;dd-=ed;var ed=181*(ff+hd)+128>>8,ff=181*(ff-hd)+128>>8,Ae=(jd+Id>>14)+128;c.b[pb]=0>Ae?0:255<Ae?255:Ae;var pb=pb+qe,De=(gd+ed>>
14)+128;c.b[pb]=0>De?0:255<De?255:De;var pb=pb+qe,Ee=(dd+ff>>14)+128;c.b[pb]=0>Ee?0:255<Ee?255:Ee;var pb=pb+qe,Fe=(ef+id>>14)+128;c.b[pb]=0>Fe?0:255<Fe?255:Fe;var pb=pb+qe,Ge=(ef-id>>14)+128;c.b[pb]=0>Ge?0:255<Ge?255:Ge;var pb=pb+qe,He=(dd-ff>>14)+128;c.b[pb]=0>He?0:255<He?255:He;var pb=pb+qe,Ie=(gd-ed>>14)+128;c.b[pb]=0>Ie?0:255<Ie?255:Ie;var pb=pb+qe,Je=(jd-Id>>14)+128;c.b[pb]=0>Je?0:255<Je?255:Je}var qb=6+b,re=a.stride,md,gf,Jd=this.block[38]<<8,nd=this.block[54],od=this.block[22],hf=this.block[14],
pd=this.block[62],qd=this.block[46],rd=this.block[30];if(0==(Jd|nd|od|hf|pd|qd|rd)){var Ke=(this.block[6]+32>>6)+128,Jd=0>Ke?0:255<Ke?255:Ke;c.b[qb]=Jd;qb+=re;c.b[qb]=Jd;qb+=re;c.b[qb]=Jd;qb+=re;c.b[qb]=Jd;qb+=re;c.b[qb]=Jd;qb+=re;c.b[qb]=Jd;qb+=re;c.b[qb]=Jd;qb+=re;c.b[qb]=Jd;qb+=re}else{md=(this.block[6]<<8)+8192;gf=565*(hf+pd)+4;hf=gf+2276*hf>>3;pd=gf-3406*pd>>3;gf=2408*(qd+rd)+4;qd=gf-799*qd>>3;rd=gf-4017*rd>>3;gf=md+Jd;md-=Jd;Jd=1108*(od+nd)+4;nd=Jd-3784*nd>>3;od=Jd+1568*od>>3;Jd=hf+qd;hf-=qd;
qd=pd+rd;pd-=rd;rd=gf+od;gf-=od;od=md+nd;md-=nd;var nd=181*(hf+pd)+128>>8,hf=181*(hf-pd)+128>>8,Le=(rd+Jd>>14)+128;c.b[qb]=0>Le?0:255<Le?255:Le;var qb=qb+re,Me=(od+nd>>14)+128;c.b[qb]=0>Me?0:255<Me?255:Me;var qb=qb+re,Ne=(md+hf>>14)+128;c.b[qb]=0>Ne?0:255<Ne?255:Ne;var qb=qb+re,Oe=(gf+qd>>14)+128;c.b[qb]=0>Oe?0:255<Oe?255:Oe;var qb=qb+re,Pe=(gf-qd>>14)+128;c.b[qb]=0>Pe?0:255<Pe?255:Pe;var qb=qb+re,Qe=(md-hf>>14)+128;c.b[qb]=0>Qe?0:255<Qe?255:Qe;var qb=qb+re,Re=(od-nd>>14)+128;c.b[qb]=0>Re?0:255<Re?
255:Re;var qb=qb+re,Te=(rd-Jd>>14)+128;c.b[qb]=0>Te?0:255<Te?255:Te}var rb=7+b,se=a.stride,xd,jf,Kd=this.block[39]<<8,yd=this.block[55],zd=this.block[23],kf=this.block[15],Ad=this.block[63],Bd=this.block[47],Cd=this.block[31];if(0==(Kd|yd|zd|kf|Ad|Bd|Cd)){var Ue=(this.block[7]+32>>6)+128,Kd=0>Ue?0:255<Ue?255:Ue;c.b[rb]=Kd;rb+=se;c.b[rb]=Kd;rb+=se;c.b[rb]=Kd;rb+=se;c.b[rb]=Kd;rb+=se;c.b[rb]=Kd;rb+=se;c.b[rb]=Kd;rb+=se;c.b[rb]=Kd;rb+=se;c.b[rb]=Kd;rb+=se}else{xd=(this.block[7]<<8)+8192;jf=565*(kf+Ad)+
4;kf=jf+2276*kf>>3;Ad=jf-3406*Ad>>3;jf=2408*(Bd+Cd)+4;Bd=jf-799*Bd>>3;Cd=jf-4017*Cd>>3;jf=xd+Kd;xd-=Kd;Kd=1108*(zd+yd)+4;yd=Kd-3784*yd>>3;zd=Kd+1568*zd>>3;Kd=kf+Bd;kf-=Bd;Bd=Ad+Cd;Ad-=Cd;Cd=jf+zd;jf-=zd;zd=xd+yd;xd-=yd;var yd=181*(kf+Ad)+128>>8,kf=181*(kf-Ad)+128>>8,Ve=(Cd+Kd>>14)+128;c.b[rb]=0>Ve?0:255<Ve?255:Ve;var rb=rb+se,We=(zd+yd>>14)+128;c.b[rb]=0>We?0:255<We?255:We;var rb=rb+se,Xe=(xd+kf>>14)+128;c.b[rb]=0>Xe?0:255<Xe?255:Xe;var rb=rb+se,Ye=(jf+Bd>>14)+128;c.b[rb]=0>Ye?0:255<Ye?255:Ye;var rb=
rb+se,Ze=(jf-Bd>>14)+128;c.b[rb]=0>Ze?0:255<Ze?255:Ze;var rb=rb+se,$e=(xd-kf>>14)+128;c.b[rb]=0>$e?0:255<$e?255:$e;var rb=rb+se,af=(zd-yd>>14)+128;c.b[rb]=0>af?0:255<af?255:af;var rb=rb+se,bf=(Cd-Kd>>14)+128;c.b[rb]=0>bf?0:255<bf?255:bf}},notSupported:function(){throw new n("This JPG file is not supported");},njDecodeScan:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];this.pos+=2;this.size-=2;this.length-=2;this.bytes.b[this.pos]!=this.ncomp&&this.notSupported();this.pos+=
1;this.size-=1;this.length-=1;for(var a=0,b=this.ncomp;a<b;){var c=a++,c=this.comps[c];c.dctabsel=this.bytes.b[this.pos+1]>>4<<1;c.actabsel=(this.bytes.b[this.pos+1]&3)<<1|1;this.pos+=2;this.size-=2;this.length-=2}a=this.bytes.b[this.pos];b=this.bytes.b[this.pos+1];c=this.bytes.b[this.pos+2];(!this.progressive&&0!=a||b!=63-a||0!=c)&&this.notSupported();a=this.length;this.pos+=a;this.size-=a;this.length-=a;b=a=0;for(c=this.rstinterval;;){for(var d=0,e=this.ncomp;d<e;)for(var f=d++,f=this.comps[f],
g=0,h=f.ssy;g<h;)for(var k=g++,l=0,m=f.ssx;l<m;){var n=l++;this.njDecodeBlock(f,(b*f.ssy+k)*f.stride+a*f.ssx+n<<3)}if(++a>=this.mbwidth&&(a=0,++b>=this.mbheight))break;0!=this.rstinterval&&0==--c&&(this.bufbits&=248,this.njShowBits(16),this.bufbits-=16,c=this.rstinterval,this.comps[0].dcpred=0,this.comps[1].dcpred=0,this.comps[2].dcpred=0)}},njUpsampleH:function(a){for(var b=a.width-3,c=new N(new ArrayBuffer(a.width*a.height<<1)),d=a.pixels,e=0,f=0,g=0,h=a.height;g<h;){g++;var k=139*d.b[e]+-11*d.b[e+
1]+64>>7;c.b[f]=0>k?0:255<k?255:k;k=104*d.b[e]+27*d.b[e+1]+-3*d.b[e+2]+64>>7;c.b[f+1]=0>k?0:255<k?255:k;k=28*d.b[e]+109*d.b[e+1]+-9*d.b[e+2]+64>>7;c.b[f+2]=0>k?0:255<k?255:k;for(var k=0,l=b;k<l;){var m=k++,n=-9*d.b[e+m]+111*d.b[e+m+1]+29*d.b[e+m+2]+-3*d.b[e+m+3]+64>>7;c.b[f+(m<<1)+3]=0>n?0:255<n?255:n;n=-3*d.b[e+m]+29*d.b[e+m+1]+111*d.b[e+m+2]+-9*d.b[e+m+3]+64>>7;c.b[f+(m<<1)+4]=0>n?0:255<n?255:n}e+=a.stride;f+=a.width<<1;k=28*d.b[e-1]+109*d.b[e-2]+-9*d.b[e-3]+64>>7;c.b[f-3]=0>k?0:255<k?255:k;k=104*
d.b[e-1]+27*d.b[e-2]+-3*d.b[e-3]+64>>7;c.b[f-2]=0>k?0:255<k?255:k;k=139*d.b[e-1]+-11*d.b[e-2]+64>>7;c.b[f-1]=0>k?0:255<k?255:k}a.width<<=1;a.stride=a.width;a.pixels=c},njUpsampleV:function(a){for(var b=a.width,c=a.stride,d=c+c,e=new N(new ArrayBuffer(a.width*a.height<<1)),f=0,g=0,h=a.pixels,k=0;k<b;){var f=g=k++,l=139*h.b[f]+-11*h.b[f+c]+64>>7;e.b[g]=0>l?0:255<l?255:l;g+=b;l=104*h.b[f]+27*h.b[f+c]+-3*h.b[f+d]+64>>7;e.b[g]=0>l?0:255<l?255:l;g+=b;l=28*h.b[f]+109*h.b[f+c]+-9*h.b[f+d]+64>>7;e.b[g]=0>
l?0:255<l?255:l;for(var g=g+b,f=f+c,l=0,m=a.height-2;l<m;){l++;var n=-9*h.b[f-c]+111*h.b[f]+29*h.b[f+c]+-3*h.b[f+d]+64>>7;e.b[g]=0>n?0:255<n?255:n;g+=b;n=-3*h.b[f-c]+29*h.b[f]+111*h.b[f+c]+-9*h.b[f+d]+64>>7;e.b[g]=0>n?0:255<n?255:n;g+=b;f+=c}f+=c;l=28*h.b[f]+109*h.b[f-c]+-9*h.b[f-d]+64>>7;e.b[g]=0>l?0:255<l?255:l;g+=b;l=104*h.b[f]+27*h.b[f-c]+-3*h.b[f-d]+64>>7;e.b[g]=0>l?0:255<l?255:l;g+=b;f=139*h.b[f]+-11*h.b[f-c]+64>>7;e.b[g]=0>f?0:255<f?255:f}a.height<<=1;a.stride=a.width;a.pixels=e},njUpsample:function(a){for(var b=
0,c=0;a.width<this.width;)a.width<<=1,++b;for(;a.height<this.height;)a.height<<=1,++c;for(var d=new N(new ArrayBuffer(a.width*a.height)),e=a.pixels,f=0,g=0,h=a.height;g<h;)for(var k=(g++>>c)*a.stride,l=0,m=a.width;l<m;){var n=l++;d.b[f++]=e.b[(n>>b)+k]}a.stride=a.width;a.pixels=d},njConvert:function(){for(var a=0,b=this.ncomp;a<b;){var c=a++,c=this.comps[c];switch(this.filter._hx_index){case 0:(c.width<this.width||c.height<this.height)&&this.njUpsample(c);break;case 1:for(;c.width<this.width||c.height<
this.height;)c.width<this.width&&this.njUpsampleH(c),c.height<this.height&&this.njUpsampleV(c)}if(c.width<this.width||c.height<this.height)throw new n("assert");}a=new N(new ArrayBuffer(4*this.width*this.height));if(3==this.ncomp)for(var b=this.comps[0].pixels,c=this.comps[1].pixels,d=this.comps[2].pixels,e=0,f=0,g=0,h=0,k=0,l=this.height;k<l;){k++;for(var m=0,p=this.width;m<p;){m++;var q=b.b[e++]<<8,r=c.b[f++]-128,s=d.b[g++]-128,u=q+359*s+128>>8,u=0>u?0:255<u?255:u,s=q-88*r-183*s+128>>8,s=0>s?0:
255<s?255:s,q=q+454*r+128>>8,q=0>q?0:255<q?255:q;a.b[h++]=q;a.b[h++]=s;a.b[h++]=u;a.b[h++]=255}e+=this.comps[0].stride-this.width;f+=this.comps[1].stride-this.width;g+=this.comps[2].stride-this.width}else throw new n("TODO");return a},njDecode:function(){if(2>this.size||255!=this.bytes.b[this.pos]||216!=this.bytes.b[this.pos+1])throw new n("This file is not a JPEG");this.pos+=2;this.size-=2;this.length-=2;a:for(;;)switch(this.pos+=2,this.size-=2,this.length-=2,this.bytes.b[this.pos+-1]){case 192:this.njDecodeSOF();
break;case 194:throw this.progressive=!0,new n("Unsupported progressive JPG");null==this.vlctab[4]&&(this.vlctab[4]=new N(new ArrayBuffer(131072)));null==this.vlctab[5]&&(this.vlctab[5]=new N(new ArrayBuffer(131072)));null==this.vlctab[6]&&(this.vlctab[6]=new N(new ArrayBuffer(131072)));null==this.vlctab[7]&&(this.vlctab[7]=new N(new ArrayBuffer(131072)));this.njDecodeSOF();break;case 195:throw new n("Unsupported lossless JPG");case 196:this.njDecodeDHT();break;case 218:this.njDecodeScan();break a;
case 219:this.njDecodeDQT();break;case 221:this.njDecodeDRI();break;case 254:this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];this.pos+=2;this.size-=2;var a=this.length-=2;this.pos+=a;this.size-=a;this.length-=a;break;default:switch(this.bytes.b[this.pos+-1]&240){case 192:throw new n("Unsupported jpeg type "+(this.bytes.b[this.pos+-1]&15));case 224:this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];this.pos+=2;this.size-=2;a=this.length-=2;this.pos+=a;this.size-=a;this.length-=
a;break;default:throw new n("Unsupported jpeg tag 0x"+ga.hex(this.bytes.b[this.pos+-1],2));}}a=this.njConvert();this.cleanup();return{pixels:a,width:this.width,height:this.height}},__class__:ra};var ti=function(a){this.entry=a};p["hxd.res.Prefab"]=ti;ti.__name__="hxd.res.Prefab";ti.__super__=rc;ti.prototype=J(rc.prototype,{load:function(){var a=this;if(null!=this.lib)return this.lib;var b=JSON.parse(this.entry.getText());this.lib=Eb.create(this.entry.get_extension());this.lib.loadData(b);this.watch(function(){a.lib.reload(JSON.parse(a.entry.getText()))});
return this.lib},__class__:ti});var Sk=M["hxd.res.SoundFormat"]={__ename__:!0,__constructs__:["Wav","Mp3","OggVorbis"],Wav:{_hx_index:0,__enum__:"hxd.res.SoundFormat",toString:m},Mp3:{_hx_index:1,__enum__:"hxd.res.SoundFormat",toString:m},OggVorbis:{_hx_index:2,__enum__:"hxd.res.SoundFormat",toString:m}};Sk.__empty_constructs__=[Sk.Wav,Sk.Mp3,Sk.OggVorbis];var rd=function(a){this.lastPlay=0;this.entry=a};p["hxd.res.Sound"]=rd;rd.__name__="hxd.res.Sound";rd.supportedFormat=function(a){switch(a._hx_index){case 0:case 1:return!0;
case 2:return!1}};rd.startWorker=function(){return!1};rd.__super__=rc;rd.prototype=J(rc.prototype,{getData:function(){if(null!=this.data)return this.data;var a=this.entry.getBytes();switch(a.b[0]){case 73:case 255:this.data=new vi(a);break;case 79:throw new n("OGG format requires -lib stb_ogg_sound (for "+this.entry.get_path()+")");case 82:this.data=new Ug(a)}if(null==this.data)throw new n("Unsupported sound format "+this.entry.get_path());rd.ENABLE_AUTO_WATCH&&this.watch(K(this,this.watchCallb));
return this.data},dispose:function(){this.stop();this.data=null},stop:function(){null!=this.channel&&(this.channel.stop(),this.channel=null)},play:function(a,b,c,d){null==b&&(b=1);null==a&&(a=!1);this.lastPlay=Date.now()/1E3;this.channel=za.get().play(this,c,d);this.channel.loop=a;this.channel.set_volume(b);return this.channel},watchCallb:function(){var a=this.data;this.data=null;var b=this.getData();if(null!=a&&(a.channels!=b.channels||a.samples!=b.samples||a.sampleFormat!=b.sampleFormat||a.samplingRate!=
b.samplingRate))for(a=za.get().getAll(this);a.hasNext();){var c=a.next();c.duration=b.get_duration();c.set_position(c.position)}},__class__:rd});var te=function(){this.volume=1;this.bindedEffects=[];this.effects=[];this.mute=!1;this.priority=0};p["hxd.snd.ChannelBase"]=te;te.__name__="hxd.snd.ChannelBase";te.prototype={getEffect:function(a){for(var b=0,c=this.effects;b<c.length;){var d=c[b];++b;d=d instanceof a?d:null;if(null!=d)return d}return null},set_volume:function(a){this.currentFade=null;return this.volume=
a},fadeTo:function(a,b,c){null==b&&(b=1);this.currentFade={start:Date.now()/1E3,duration:b,startVolume:this.volume,targetVolume:a,onEnd:c}},updateCurrentVolume:function(a){if(null!=this.currentFade){var b=this.currentFade;a-=b.start;if(a>=b.duration){if(this.set_volume(b.targetVolume),null!=b.onEnd)b.onEnd()}else this.set_volume(b.startVolume+a/b.duration*(b.targetVolume-b.startVolume)),this.currentFade=b}this.currentVolume=this.volume},addEffect:function(a){if(null==a)throw new n("Can't add null effect");
if(0<=this.effects.indexOf(a))throw new n("effect already added on this channel");this.effects.push(a);return a},removeEffect:function(a){z.remove(this.effects,a)},__class__:te};var Zf=function(){te.call(this);this.id=Zf.ID++;this.set_pause(!1);this.loop=this.isVirtual=!1;this.queue=[];this.set_position(0);this.audibleGain=1};p["hxd.snd.Channel"]=Zf;Zf.__name__="hxd.snd.Channel";Zf.__super__=te;Zf.prototype=J(te.prototype,{onEnd:function(){},set_position:function(a){this.lastStamp=Date.now()/1E3;
this.positionChanged=!0;a>this.duration?a=this.duration:0>a&&(a=0);return this.position=a},set_pause:function(a){a||(this.lastStamp=Date.now()/1E3);return this.pause=a},updateCurrentVolume:function(a){if(this.pause&&null!=this.currentFade){var b=this.currentFade;this.currentFade=null;this.updateCurrentVolume(a);this.currentFade=b}te.prototype.updateCurrentVolume.call(this,a);this.channelGroup.updateCurrentVolume(a);this.currentVolume*=this.channelGroup.currentVolume*this.soundGroup.volume;if(null!=
this.manager){a=0;for(b=this.channelGroup.effects;a<b.length;){var c=b[a];++a;this.currentVolume*=c.getVolumeModifier()}a=0;for(b=this.effects;a<b.length;)c=b[a],++a,this.currentVolume*=c.getVolumeModifier()}},calcAudibleGain:function(a){this.updateCurrentVolume(a);this.audibleGain=this.currentVolume;if(null!=this.manager){a=0;for(var b=this.channelGroup.effects;a<b.length;){var c=b[a];++a;this.audibleGain=c.applyAudibleGainModifier(this.audibleGain)}a=0;for(b=this.effects;a<b.length;)c=b[a],++a,
this.audibleGain=c.applyAudibleGainModifier(this.audibleGain)}},queueSound:function(a){this.queue.push(a)},stop:function(){null!=this.manager&&this.manager.releaseChannel(this)},__class__:Zf});var wi=function(a){te.call(this);this.name=a};p["hxd.snd.ChannelGroup"]=wi;wi.__name__="hxd.snd.ChannelGroup";wi.__super__=te;wi.prototype=J(te.prototype,{__class__:wi});var Tc=M["hxd.snd.SampleFormat"]={__ename__:!0,__constructs__:["UI8","I16","F32"],UI8:{_hx_index:0,__enum__:"hxd.snd.SampleFormat",toString:m},
I16:{_hx_index:1,__enum__:"hxd.snd.SampleFormat",toString:m},F32:{_hx_index:2,__enum__:"hxd.snd.SampleFormat",toString:m}};Tc.__empty_constructs__=[Tc.UI8,Tc.I16,Tc.F32];var Xe=function(){};p["hxd.snd.Data"]=Xe;Xe.__name__="hxd.snd.Data";Xe.formatBytes=function(a){switch(a._hx_index){case 0:return 1;case 1:return 2;case 2:return 4}};Xe.prototype={isLoading:function(){return!1},decode:function(a,b,c,d){var e=this.getBytesPerSample();if(0>c||0>d||0>b||b+d*e>a.length)throw c="sampleStart = "+c+(" sampleCount = "+
d),c+=" outPos = "+b,c+=" bpp = "+e,c+=" out.length = "+a.length,new n(c);if(c+d>=this.samples){var f=0;c<this.samples&&(f=this.samples-c,this.decodeBuffer(a,b,c,f));a.fill(b+f*e,(d-f)*e,0)}else this.decodeBuffer(a,b,c,d)},resample:function(a,b,c){if(this.sampleFormat==b&&this.samplingRate==a&&this.channels==c)return this;var d=Math.ceil(this.samples*(a/this.samplingRate)),e=this.getBytesPerSample(),e=new N(new ArrayBuffer(e*this.samples));this.decodeBuffer(e,0,0,this.samples);var f;switch(b._hx_index){case 0:f=
1;break;case 1:f=2;break;case 2:f=4}f=new N(new ArrayBuffer(c*d*f));this.resampleBuffer(f,0,e,0,a,b,c,this.samples);e=new Ug(null);e.channels=c;e.samples=d;e.sampleFormat=b;e.samplingRate=a;e.rawData=f;return e},resampleBuffer:function(a,b,c,d,e,f,g,h){var k=this.getBytesPerSample();e=Math.ceil(h*(e/this.samplingRate));var l=h!=e;if(!l&&this.sampleFormat==Tc.I16&&f==Tc.I16&&1==g&&2==this.channels)for(f=0;f<h;)f++,k=c.getUInt16(d),d+=2,e=c.getUInt16(d),d+=2,32768<=(k^e)?(0!=(k&32768)&&(k|=-65536),
0!=(e&32768)&&(e|=-65536),k=k+e>>1&65535):k=k+e>>1,a.setUInt16(b,k),b+=2;else{var m=this.channels,m=g<m?g:m;g-=m;for(var n=0,p=0,q=0;q<e;){var r=q++/(e-1)*(h-1),s=r|0,r=r-s,u=d+s*k;s==h-1&&(l=!1);for(var s=0,v=m;s<v;){s++;var w,n=0;switch(this.sampleFormat._hx_index){case 0:w=c.b[u]/255;l&&(n=c.b[u+k]/255);++u;break;case 1:w=c.getUInt16(u);w=(0==(w&32768)?w:w|-65536)/32768;l&&(n=c.getUInt16(u+k),n=(0==(n&32768)?n:n|-65536)/32768);u+=2;break;case 2:w=c.getFloat(u),l&&(n=c.getFloat(u+k)),u+=4}n=l?w+
r*(n-w):w;switch(f._hx_index){case 0:p=128*(n+1)|0;255<p&&(p=255);a.b[b++]=p;break;case 1:p=32768*n|0;32767<p&&(p=32767);p&=65535;a.setUInt16(b,p);b+=2;break;case 2:a.setFloat(b,n),b+=4}}r=0;for(u=g;r<u;)switch(r++,f._hx_index){case 0:a.b[b++]=p;break;case 1:a.setUInt16(b,p);b+=2;break;case 2:a.setFloat(b,n),b+=4}}}},decodeBuffer:function(a,b,c,d){throw new n("Not implemented");},getBytesPerSample:function(){var a;switch(this.sampleFormat._hx_index){case 0:a=1;break;case 1:a=2;break;case 2:a=4}return this.channels*
a},load:function(a){a()},get_duration:function(){return this.samples/this.samplingRate},__class__:Xe};var gk=function(){};p["hxd.snd.EffectDriver"]=gk;gk.__name__="hxd.snd.EffectDriver";gk.prototype={acquire:function(){},release:function(){},update:function(a){},bind:function(a,b){},apply:function(a,b){},unbind:function(a,b){},__class__:gk};var gl=M["hxd.snd.DriverFeature"]={__ename__:!0,__constructs__:["MasterVolume"],MasterVolume:{_hx_index:0,__enum__:"hxd.snd.DriverFeature",toString:m}};gl.__empty_constructs__=
[gl.MasterVolume];var hk=function(){};p["hxd.snd.Driver"]=hk;hk.__name__="hxd.snd.Driver";hk.prototype={__class__:hk};var Tk=function(a){this.lastStamp=this.retainTime=this.priority=this.refs=0;var b=za.get().driver;null!=b&&(this.driver=b.getEffectDriver(a))};p["hxd.snd.Effect"]=Tk;Tk.__name__="hxd.snd.Effect";Tk.prototype={applyAudibleGainModifier:function(a){return a},getVolumeModifier:function(){return 1},__class__:Tk};var ik=function(){this.position=new U;this.velocity=new U;this.direction=new U(1,
0,0);this.up=new U(0,0,1)};p["hxd.snd.Listener"]=ik;ik.__name__="hxd.snd.Listener";ik.prototype={syncCamera:function(a){var b=this.position,c=a.pos;b.x=c.x;b.y=c.y;b.z=c.z;b.w=c.w;b=this.direction;b.x=a.target.x-a.pos.x;b.y=a.target.y-a.pos.y;b.z=a.target.z-a.pos.z;b.w=1;this.direction.normalize();b=this.up;a=a.up;b.x=a.x;b.y=a.y;b.z=a.z;b.w=a.w},__class__:ik};var Vg=function(a){this.start=0;this.playing=!1;this.volume=-1;this.id=Vg.ID++;this.handle=a.createSource();this.buffers=[]};p["hxd.snd.Source"]=
Vg;Vg.__name__="hxd.snd.Source";Vg.prototype={dispose:function(){za.get().driver.destroySource(this.handle)},__class__:Vg};var xi=function(a){this.handle=a.createBuffer();this.refs=0;this.lastStop=Date.now()/1E3};p["hxd.snd.Buffer"]=xi;xi.__name__="hxd.snd.Buffer";xi.prototype={dispose:function(){za.get().driver.destroyBuffer(this.handle)},__class__:xi};var za=function(){try{this.driver=new yi}catch(a){if("string"==typeof(a instanceof n?a.val:a))this.driver=null;else throw a;}this.masterVolume=1;
this.hasMasterVolume=null==this.driver?!0:this.driver.hasFeature(gl.MasterVolume);this.masterSoundGroup=new jk("master");this.masterChannelGroup=new wi("master");this.listener=new ik;this.soundBufferMap=new ia;this.freeStreamBuffers=[];this.effectGC=[];this.soundBufferCount=0;if(null!=this.driver){this.sources=[];for(var b=0,c=za.MAX_SOURCES;b<c;)b++,this.sources.push(new Vg(this.driver))}this.cachedBytes=new N(new ArrayBuffer(24));this.resampleBytes=new N(new ArrayBuffer(2*za.STREAM_BUFFER_SAMPLE_COUNT))};
p["hxd.snd.Manager"]=za;za.__name__="hxd.snd.Manager";za.get=function(){null==za.instance&&(za.instance=new za,za.instance.updateEvent=Kb.add((s=za.instance,K(s,s.update))),za.instance.updateEvent.isBlocking=!1);return za.instance};za.regEffect=function(a,b){for(var c=a;null!=c;){if(c==b)return a;c=c.next}b.next=a;return b};za.prototype={getTmpBytes:function(a){this.cachedBytes.length<a&&(this.cachedBytes=new N(new ArrayBuffer(a)));return this.cachedBytes},getResampleBytes:function(a){this.resampleBytes.length<
a&&(this.resampleBytes=new N(new ArrayBuffer(a)));return this.resampleBytes},stopAll:function(){for(;null!=this.channels;)this.channels.stop()},getAll:function(a){for(var b=this.channels,c=[];null!=b;)b.sound==a&&c.push(b),b=b.next;return new bk(c)},cleanCache:function(){for(var a=this.soundBufferMap.keys();a.hasNext();){var b=a.next(),c=this.soundBufferMap,c=null!=L[b]?c.getReserved(b):c.h[b];0<c.refs||(this.soundBufferMap.remove(b),c.dispose(),--this.soundBufferCount)}},dispose:function(){this.stopAll();
if(null!=this.driver){for(var a=0,b=this.sources;a<b.length;){var c=b[a];++a;c.dispose()}a=this.soundBufferMap;for(a=new Kg(a,a.arrayKeys());a.hasNext();)a.next().dispose();a=0;for(b=this.freeStreamBuffers;a<b.length;)c=b[a],++a,c.dispose();a=0;for(b=this.effectGC;a<b.length;)c=b[a],++a,c.driver.release();this.driver.dispose()}this.effectGC=this.freeStreamBuffers=this.soundBufferMap=this.sources=null;this.updateEvent.stop();za.instance=null},play:function(a,b,c){null==c&&(c=this.masterSoundGroup);
null==b&&(b=this.masterChannelGroup);var d=a.getData();if(0==d.samples)throw new n(r.string(a)+" has no samples");var e=new Zf;e.sound=a;e.duration=d.get_duration();e.manager=this;e.soundGroup=c;e.channelGroup=b;e.next=this.channels;e.isLoading=d.isLoading();e.isVirtual=null==this.driver;return this.channels=e},updateVirtualChannels:function(a){for(var b=this.channels;null!=b;)if(b.pause||!b.isVirtual||b.isLoading)b=b.next;else{var c=b,d=a-b.lastStamp;c.set_position(c.position+(0>d?0:d));b.lastStamp=
a;for(c=b.next;b.position>=b.duration;)if(d=b,d.set_position(d.position-b.duration),b.onEnd(),null!=c&&null==c.manager&&(c=null),0<b.queue.length)b.sound=b.queue.shift(),b.duration=b.sound.getData().get_duration();else if(!b.loop){this.releaseChannel(b);break}b=c}},update:function(){this.now=Date.now()/1E3;if(null==this.driver)this.updateVirtualChannels(this.now);else{for(var a=0,b=this.sources;a<b.length;){var c=b[a];++a;var d=c.channel;if(null!=d)if(d.positionChanged)this.releaseSource(c);else{for(var e=
null,f=0,g=this.driver.getProcessedBuffers(c.handle);f<g;){f++;var h=this.unqueueBuffer(c),e=h;h.isEnd&&(d.sound=h.sound,d.duration=h.sound.getData().get_duration(),d.set_position(d.duration),d.positionChanged=!1,d.onEnd(),c.start=0)}0==c.buffers.length?e.isEnd?0<d.queue.length?(d.sound=d.queue[0],d.duration=d.sound.getData().get_duration(),d.set_position(0),this.releaseSource(c)):d.loop?(d.set_position(0),this.releaseSource(c)):this.releaseChannel(d):(d.set_position((e.start+e.samples)/e.sampleRate),
this.releaseSource(c)):(d.sound=c.buffers[0].sound,d.duration=d.sound.getData().get_duration(),e=this.driver.getPlayedSampleCount(c.handle),0>e&&(e=0),d.set_position((c.start+e)/c.buffers[0].sampleRate),d.positionChanged=!1,c.buffers.length<za.BUFFER_QUEUE_LENGTH&&(e=c.buffers[c.buffers.length-1],e.isEnd?0<d.queue.length?this.queueBuffer(c,d.queue[0],0)&&d.queue.shift():d.loop&&this.queueBuffer(c,e.sound,0):this.queueBuffer(c,e.sound,e.start+e.samples)))}}for(a=this.channels;null!=a;)a.calcAudibleGain(this.now),
a.isLoading&&!a.sound.getData().isLoading()&&(a.isLoading=!1),a.isVirtual=a.pause||a.mute||a.channelGroup.mute||1E-5>a.audibleGain||a.isLoading,a=a.next;a=this.channels;b=K(this,this.sortChannel);if(null==a)a=null;else for(var c=1,k=e=0,l;;){f=a;h=a=null;for(d=0;null!=f;){++d;g=f;k=e=0;for(l=c;k<l&&!(k++,++e,g=g.next,null==g););for(k=c;0<e||0<k&&null!=g;)0==e?(l=g,g=g.next,--k):0==k||null==g||0>=b(f,g)?(l=f,f=f.next,--e):(l=g,g=g.next,--k),null!=h?h.next=l:a=l,h=l;f=g}h.next=null;if(1>=d)break;c*=
2}this.channels=a;a=new Ha;b=0;for(c=this.channels;null!=c&&!c.isVirtual;)++b>this.sources.length?c.isVirtual=!0:0<=c.soundGroup.maxAudible&&(d=a.h[c.soundGroup.__id__],null==d&&(d=0),++d>c.soundGroup.maxAudible&&(c.isVirtual=!0,--b),a.set(c.soundGroup,d)),c=c.next;a=0;for(b=this.sources;a<b.length;)c=b[a],++a,null!=c.channel&&c.channel.isVirtual&&this.releaseSource(c);for(a=this.channels;null!=a;){if(!(null!=a.source||a.isVirtual)){b=null;c=0;for(d=this.sources;c<d.length;)if(e=d[c],++c,null==e.channel){b=
e;break}if(null==b)throw new n("could not get a source");b.channel=a;a.source=b;this.checkTargetFormat(a.sound.getData(),a.soundGroup.mono);b.start=Math.floor(a.position*this.targetRate);0>b.start&&(b.start=0);this.queueBuffer(b,a.sound,b.start);a.positionChanged=!1}a=a.next}a=null;b=this.hasMasterVolume?1:this.masterVolume;c=0;for(d=this.sources;c<d.length;)if(f=d[c],++c,e=f.channel,null!=e){g=e.currentVolume*b;f.volume!=g&&(f.volume=g,this.driver.setSourceVolume(f.handle,g));f.playing||(this.driver.playSource(f.handle),
f.playing=!0);for(g=e.bindedEffects.length;0<=--g;)h=e.bindedEffects[g],0>e.effects.indexOf(h)&&0>e.channelGroup.effects.indexOf(h)&&this.unbindEffect(e,f,h);g=0;for(h=e.channelGroup.effects;g<h.length;)k=h[g],++g,0>e.bindedEffects.indexOf(k)&&this.bindEffect(e,f,k);g=0;for(h=e.effects;g<h.length;)k=h[g],++g,0>e.bindedEffects.indexOf(k)&&this.bindEffect(e,f,k);f=0;for(e=e.bindedEffects;f<e.length;)g=e[f],++f,a=za.regEffect(a,g)}b=K(this,this.sortEffect);if(null==a)a=null;else{c=1;for(k=e=0;;){f=a;
h=a=null;for(d=0;null!=f;){++d;g=f;k=e=0;for(l=c;k<l&&!(k++,++e,g=g.next,null==g););for(k=c;0<e||0<k&&null!=g;)0==e?(l=g,g=g.next,--k):0==k||null==g||0>=b(f,g)?(l=f,f=f.next,--e):(l=g,g=g.next,--k),null!=h?h.next=l:a=l,h=l;f=g}h.next=null;if(1>=d)break;c*=2}}for(;null!=a;)a.driver.update(a),a=a.next;a=0;for(b=this.sources;a<b.length;)if(c=b[a],++a,e=c.channel,null!=e){d=0;for(e=e.bindedEffects;d<e.length;)f=e[d],++d,f.driver.apply(f,c.handle)}a=0;for(b=this.effectGC;a<b.length;)if(c=b[a],++a,this.now-
c.lastStamp>c.retainTime){c.driver.release();z.remove(this.effectGC,c);break}this.updateVirtualChannels(this.now);this.listener.direction.normalize();this.listener.up.normalize();this.hasMasterVolume&&this.driver.setMasterVolume(this.masterVolume);this.driver.setListenerParams(this.listener.position,this.listener.direction,this.listener.up,this.listener.velocity);this.driver.update();if(this.soundBufferCount>=za.SOUND_BUFFER_CACHE_SIZE){a=Date.now()/1E3;for(b=this.soundBufferMap.keys();b.hasNext();)c=
b.next(),d=this.soundBufferMap,d=null!=L[c]?d.getReserved(c):d.h[c],0<d.refs||d.lastStop+60>a||(this.soundBufferMap.remove(c),d.dispose(),--this.soundBufferCount)}}},progressiveDecodeBuffer:function(a,b,c){var d=b.getData(),e=Math.ceil(za.STREAM_BUFFER_SAMPLE_COUNT/za.BUFFER_STREAM_SPLIT);if(a.streamStart!=c||a.streamSound!=b)a.streamSound=b,a.streamStart=c,a.streamPos=c;b=c+za.STREAM_BUFFER_SAMPLE_COUNT;if(a.streamPos==b)return!0;var f=d.getBytesPerSample(),g=za.STREAM_BUFFER_SAMPLE_COUNT*f;if(null==
a.streamBuffer||a.streamBuffer.length<g)a.streamBuffer=new N(new ArrayBuffer(g)),a.streamPos=c;g=b-a.streamPos;g>e&&(g=e);d.decode(a.streamBuffer,(a.streamPos-c)*f,a.streamPos,g);a.streamPos+=g;return a.streamPos==b},queueBuffer:function(a,b,c){var d=b.getData(),e=a.channel.soundGroup,f=null;if(d.get_duration()<=za.STREAM_DURATION)f=this.getSoundBuffer(b,e),this.driver.queueBuffer(a.handle,f.handle,c,!0);else{if(0<a.buffers.length&&1<za.BUFFER_STREAM_SPLIT&&!this.progressiveDecodeBuffer(a,b,c))return!1;
f=this.getStreamBuffer(a,b,e,c);this.driver.queueBuffer(a.handle,f.handle,0,f.isEnd)}a.buffers.push(f);return!0},unqueueBuffer:function(a){var b=a.buffers.shift();this.driver.unqueueBuffer(a.handle,b.handle);b.isStream?this.freeStreamBuffers.unshift(b):0==--b.refs&&(b.lastStop=Date.now()/1E3);return b},bindEffect:function(a,b,c){0==c.refs&&!z.remove(this.effectGC,c)&&c.driver.acquire();++c.refs;c.driver.bind(c,b.handle);a.bindedEffects.push(c)},unbindEffect:function(a,b,c){c.driver.unbind(c,b.handle);
z.remove(a.bindedEffects,c);0==--c.refs&&(c.lastStamp=this.now,this.effectGC.push(c))},releaseSource:function(a){if(null!=a.channel){for(var b=0,c=a.channel.bindedEffects.slice();b<c.length;){var d=c[b];++b;this.unbindEffect(a.channel,a,d)}a.channel.bindedEffects=[];a.channel.source=null;a.channel=null}a.playing&&(a.playing=!1,this.driver.stopSource(a.handle),a.volume=-1);for(;0<a.buffers.length;)this.unqueueBuffer(a)},checkTargetFormat:function(a,b){null==b&&(b=!1);this.targetRate=a.samplingRate;
this.targetRate=y.NATIVE_FREQ;this.targetChannels=b||1==a.channels?1:2;var c;switch(a.sampleFormat._hx_index){case 0:c=Tc.UI8;break;case 1:c=Tc.I16;break;case 2:c=Tc.F32}this.targetFormat=c;return this.targetChannels==a.channels&&this.targetFormat==a.sampleFormat?this.targetRate==a.samplingRate:!1},getSoundBuffer:function(a,b){var c=this,d=a.getData(),e=b.mono,f=a.entry.get_path();e&&1!=d.channels&&(f+="mono");var g=this.soundBufferMap,h=null!=L[f]?g.getReserved(f):g.h[f];null==h&&(h=new xi(this.driver),
h.isStream=!1,h.isEnd=!0,h.sound=a,g=this.soundBufferMap,null!=L[f]?g.setReserved(f,h):g.h[f]=h,d.load(function(){c.fillSoundBuffer(h,d,e)}),++this.soundBufferCount);++h.refs;return h},fillSoundBuffer:function(a,b,c){null==c&&(c=!1);this.checkTargetFormat(b,c)||(b=b.resample(this.targetRate,this.targetFormat,this.targetChannels));c=b.samples*b.getBytesPerSample();var d=this.getTmpBytes(c);b.decode(d,0,0,b.samples);this.driver.setBufferData(a.handle,d,c,this.targetFormat,this.targetChannels,this.targetRate);
a.sampleRate=this.targetRate;a.samples=b.samples},getStreamBuffer:function(a,b,c,d){var e=b.getData(),f=this.freeStreamBuffers.shift();null==f&&(f=new xi(this.driver),f.isStream=!0);var g=za.STREAM_BUFFER_SAMPLE_COUNT;d+g>=e.samples?(g=e.samples-d,f.isEnd=!0):f.isEnd=!1;f.sound=b;f.samples=g;f.start=d;var h=g*e.getBytesPerSample();if(a.streamSound==b&&a.streamStart==d){for(;!this.progressiveDecodeBuffer(a,b,d););a=a.streamBuffer}else a=this.getTmpBytes(h),e.decode(a,0,d,g);if(!this.checkTargetFormat(e,
c.mono)){var h=g*this.targetChannels,k;switch(this.targetFormat._hx_index){case 0:k=1;break;case 1:k=2;break;case 2:k=4}h*=k;k=this.getResampleBytes(h);e.resampleBuffer(k,0,a,0,this.targetRate,this.targetFormat,this.targetChannels,g);a=k}this.driver.setBufferData(f.handle,a,h,this.targetFormat,this.targetChannels,this.targetRate);f.sampleRate=this.targetRate;return f},sortChannel:function(a,b){return a.isVirtual!=b.isVirtual?a.isVirtual?1:-1:a.channelGroup.priority!=b.channelGroup.priority?a.channelGroup.priority<
b.channelGroup.priority?1:-1:a.priority!=b.priority?a.priority<b.priority?1:-1:a.audibleGain!=b.audibleGain?a.audibleGain<b.audibleGain?1:-1:a.id<b.id?1:-1},sortEffect:function(a,b){return b.priority-a.priority},releaseChannel:function(a){if(null!=a.manager){if(this.channels==a)this.channels=a.next;else{for(var b=this.channels;b.next!=a;)b=b.next;b.next=a.next}for(var b=0,c=a.effects;b<c.length;){var d=c[b];++b;a.removeEffect(d)}null!=a.source&&this.releaseSource(a.source);a.next=null;a.manager=null;
a.effects=null;a.bindedEffects=null;a.currentFade=null;b=a.sound;null!=b&&b.channel==a&&(b.channel=null)}},__class__:za};var vi=function(a){var b=(new cj(new Ob(a))).read();this.samples=b.sampleCount;for(var c=b.frames[0].data,d=-1,e=0,f=c.length-24;e<f;){var g=e++;if(76==c.b[g]&&65==c.b[g+1]&&77==c.b[g+2]&&69==c.b[g+3]){d=g;break}}0<=d&&(c=c.b[d+21]<<16|c.b[d+22]<<8|c.b[d+23],this.samples-=(c>>12)+(c&4095)+1152);b=b.frames[0].header;this.sampleFormat=Tc.F32;this.samplingRate=pa.srEnum2Num(b.samplingRate);
this.channels=b.channelMode==Ae.Mono?1:2;b=Z.getContext();null!=b&&(b.decodeAudioData(a.b.bufferValue,K(this,this.processBuffer)),a=b.sampleRate|0,this.samples=Math.ceil(this.samples*a/this.samplingRate),this.samplingRate=a)};p["hxd.snd.Mp3Data"]=vi;vi.__name__="hxd.snd.Mp3Data";vi.__super__=Xe;vi.prototype=J(Xe.prototype,{isLoading:function(){return null==this.buffer},load:function(a){null!=this.buffer?a():this.onEnd=a},processBuffer:function(a){var b=a.getChannelData(0);this.samples=a.length;if(1==
this.channels)this.buffer=N.ofData(b.buffer);else{var c=2>a.numberOfChannels?b:a.getChannelData(1),d=new Float32Array(2*b.length),e=0,f=0;for(a=a.length;f<a;){var g=f++;d[e++]=b[g];d[e++]=c[g]}this.buffer=N.ofData(d.buffer);null!=this.onEnd&&(this.onEnd(),this.onEnd=null)}},decodeBuffer:function(a,b,c,d){null==this.buffer?a.fill(b,4*d*this.channels,0):a.blit(b,this.buffer,4*c*this.channels,4*d*this.channels)},__class__:vi});var Z=function(a){this.bufferSamples=a;var b=Z.getContext();if(null!=b){this.front=
0<Z.pool.length?Z.pool.pop():b.createBuffer(2,a,b.sampleRate);this.back=0<Z.pool.length?Z.pool.pop():b.createBuffer(2,a,b.sampleRate);this.tmpBuffer=0<Z.bufferPool.length?Z.bufferPool.pop():new Float32Array(2*a);var c=this.front;this.onSample(this.tmpBuffer);a=0;for(var d=c.getChannelData(0),c=c.getChannelData(1),e=0,f=this.bufferSamples;e<f;){var g=e++;d[g]=this.tmpBuffer[a++];c[g]=this.tmpBuffer[a++]}c=this.back;this.onSample(this.tmpBuffer);a=0;d=c.getChannelData(0);c=c.getChannelData(1);e=0;for(f=
this.bufferSamples;e<f;)g=e++,d[g]=this.tmpBuffer[a++],c[g]=this.tmpBuffer[a++];this.current=b.createBufferSource();this.current.buffer=this.front;this.current.addEventListener("ended",K(this,this.swap));this.current.connect(b.destination);this.queued=b.createBufferSource();this.queued.buffer=this.back;this.queued.addEventListener("ended",K(this,this.swap));this.queued.connect(b.destination);b=b.currentTime;this.current.start(b);this.time=b+this.front.duration;this.queued.start(this.time)}};p["hxd.snd.NativeChannel"]=
Z;Z.__name__="hxd.snd.NativeChannel";Z.getContext=function(){if(null==Z.ctx){try{Z.ctx=new AudioContext}catch(a){try{Z.ctx=new window.webkitAudioContext}catch(b){Z.ctx=null}}null!=Z.ctx&&("suspended"==Z.ctx.state&&Z.waitForPageInput(),Z.ctx.addEventListener("statechange",function(a){"suspended"==Z.ctx.state&&Z.waitForPageInput()}))}return Z.ctx};Z.waitForPageInput=function(){null!=Z.waitDiv&&Z.waitDiv.remove();var a=window.document.createElement("div");a.setAttribute("style","width:100%;height:100%;background:transparent;z-index:9999;position:fixed;left:0;top:0");
a.onclick=Z.stopInput;a.onkeydown=Z.stopInput;window.document.body.addEventListener("keydown",Z.stopInput);window.document.body.addEventListener("touchend",Z.stopInput);window.document.body.appendChild(a);Z.waitDiv=a};Z.stopInput=function(a){null!=Z.waitDiv&&(Z.waitDiv.remove(),Z.waitDiv=null,window.document.body.removeEventListener("keydown",Z.stopInput),window.document.body.removeEventListener("touchend",Z.stopInput),null!=Z.ctx&&Z.ctx.resume())};Z.prototype={swap:function(a){a=this.front;this.front=
this.back;this.back=a;this.onSample(this.tmpBuffer);for(var b=0,c=a.getChannelData(0),d=a.getChannelData(1),e=0,f=this.bufferSamples;e<f;){var g=e++;c[g]=this.tmpBuffer[b++];d[g]=this.tmpBuffer[b++]}this.current.removeEventListener("ended",K(this,this.swap));this.current=this.queued;b=Z.getContext();this.queued=b.createBufferSource();this.queued.buffer=a;this.queued.addEventListener("ended",K(this,this.swap));this.queued.connect(b.destination);this.time+=this.front.duration;this.queued.start(this.time)},
fill:function(a){this.onSample(this.tmpBuffer);var b=0,c=a.getChannelData(0);a=a.getChannelData(1);for(var d=0,e=this.bufferSamples;d<e;){var f=d++;c[f]=this.tmpBuffer[b++];a[f]=this.tmpBuffer[b++]}},onSample:function(a){},stop:function(){null!=this.front&&(this.current.disconnect(),this.current.removeEventListener("ended",K(this,this.swap)),this.current=null,this.queued.removeEventListener("ended",K(this,this.swap)),this.queued.disconnect(),this.queued.stop(),this.queued=null,Z.pool.push(this.front),
this.front=null,Z.pool.push(this.back),this.back=null,Z.bufferPool.push(this.tmpBuffer),this.tmpBuffer=null)},__class__:Z};var jk=function(a){this.name=a;this.maxAudible=-1;this.volume=1;this.mono=!1};p["hxd.snd.SoundGroup"]=jk;jk.__name__="hxd.snd.SoundGroup";jk.prototype={__class__:jk};var Ug=function(a){null!=a&&this.init((new mj(new Ob(a))).read())};p["hxd.snd.WavData"]=Ug;Ug.__name__="hxd.snd.WavData";Ug.__super__=Xe;Ug.prototype=J(Xe.prototype,{init:function(a){var b=a.header;this.samplingRate=
b.samplingRate;this.channels=b.channels;switch(b.bitsPerSample){case 8:b=Tc.UI8;break;case 16:b=Tc.I16;break;default:throw new n("Unsupported WAV "+b.bitsPerSample+" bits");}this.sampleFormat=b;this.rawData=a.data;this.samples=this.rawData.length/this.getBytesPerSample()|0},decodeBuffer:function(a,b,c,d){var e=this.getBytesPerSample();a.blit(b,this.rawData,c*e,d*e)},__class__:Ug});var kk=function(){};p["hxd.snd.openal.BufferHandle"]=kk;kk.__name__="hxd.snd.openal.BufferHandle";kk.prototype={__class__:kk};
var lk=function(){this.nextAuxiliarySend=0;this.freeAuxiliarySends=[];this.effectToAuxiliarySend=new Ha};p["hxd.snd.openal.SourceHandle"]=lk;lk.__name__="hxd.snd.openal.SourceHandle";lk.prototype={acquireAuxiliarySend:function(a){var b=0<this.freeAuxiliarySends.length?this.freeAuxiliarySends.shift():this.nextAuxiliarySend++;this.effectToAuxiliarySend.set(a,b);return b},getAuxiliarySend:function(a){return this.effectToAuxiliarySend.h[a.__id__]},releaseAuxiliarySend:function(a){var b=this.effectToAuxiliarySend.h[a.__id__];
this.effectToAuxiliarySend.remove(a);this.freeAuxiliarySends.push(b);return b},__class__:lk};var yi=function(){this.tmpBytes=new N(new ArrayBuffer(24));this.device=$.openDevice(null);this.context=$.createContext(this.device,null);$.makeContextCurrent(this.context);$.loadExtensions(this.device);y.loadExtensions();var a=this.getTmpBytes(4);$.getIntegerv(this.device,131075,1,a);this.maxAuxiliarySends=a.getInt32(0);if(0!=y.getError())throw new n("could not init openAL Driver");};p["hxd.snd.openal.Driver"]=
yi;yi.__name__="hxd.snd.openal.Driver";yi.__interfaces__=[hk];yi.prototype={hasFeature:function(a){return!0},getTmpBytes:function(a){this.tmpBytes.length<a&&(this.tmpBytes=new N(new ArrayBuffer(a)));return this.tmpBytes},setMasterVolume:function(a){y.listenerf(4106,a)},setListenerParams:function(a,b,c,d){y.listener3f(4100,-a.x,a.y,a.z);a=this.getTmpBytes(24);a.setFloat(0,-b.x);a.setFloat(4,b.y);a.setFloat(8,b.z);c.normalize();a.setFloat(12,-c.x);a.setFloat(16,c.y);a.setFloat(20,c.z);y.listenerfv(4111,
this.tmpBytes);null!=d&&y.listener3f(4102,-d.x,d.y,d.z)},createSource:function(){var a=new lk,b=this.getTmpBytes(4);y.genSources(1,b);if(0!=y.getError())throw new n("could not create source");b=b.getInt32(0);a.inst=bc.all.h[b];y.sourcei(a.inst,514,1);return a},destroySource:function(a){y.sourcei(a.inst,131077,0);var b=this.getTmpBytes(4);b.setInt32(0,a.inst.id);y.deleteSources(1,b)},playSource:function(a){y.sourcePlay(a.inst);a.playing=!0},stopSource:function(a){y.sourceStop(a.inst);a.playing=!1},
setSourceVolume:function(a,b){y.sourcef(a.inst,4106,b)},createBuffer:function(){var a=new kk,b=this.getTmpBytes(4);y.genBuffers(1,b);b=b.getInt32(0);a.inst=Fc.all.h[b];return a},destroyBuffer:function(a){var b=this.getTmpBytes(4);b.setInt32(0,a.inst.id);y.deleteBuffers(1,b)},setBufferData:function(a,b,c,d,e,f){var g;switch(d._hx_index){case 0:g=1==e?4352:4354;break;case 1:g=1==e?4353:4355;break;case 2:g=1==e?4368:4369}y.bufferData(a.inst,g,b,c,f)},getPlayedSampleCount:function(a){a=a.sampleOffset+
y.getSourcei(a.inst,4133);0>a&&(a=0);return a},getProcessedBuffers:function(a){return y.getSourcei(a.inst,4118)},queueBuffer:function(a,b,c,d){var e=this.getTmpBytes(4);e.setInt32(0,b.inst.id);y.sourceQueueBuffers(a.inst,1,e);if(0!=y.getError())throw new n("Failed to queue buffers: "+ga.hex(y.getError()));4116==y.getSourcei(a.inst,4112)&&(0<c?(y.sourcei(a.inst,4133,c),a.sampleOffset=-c):a.sampleOffset=0,a.playing&&y.sourcePlay(a.inst));b.isEnd=d},unqueueBuffer:function(a,b){var c=this.getTmpBytes(4);
c.setInt32(0,b.inst.id);y.sourceUnqueueBuffers(a.inst,1,c);var c=y.getBufferi(b.inst,8196),d=y.getBufferi(b.inst,8194)*y.getBufferi(b.inst,8195)/8;a.sampleOffset=b.isEnd?0:a.sampleOffset+(c/d|0)},update:function(){},dispose:function(){$.makeContextCurrent(null);$.destroyContext(this.context);$.closeDevice(this.device)},getEffectDriver:function(a){return new gk},__class__:yi};var Wg=function(a,b){this.startup=0;this.source=a;Z.call(this,b)};p["hxd.snd.openal._Emulator.Channel"]=Wg;Wg.__name__="hxd.snd.openal._Emulator.Channel";
Wg.__super__=Z;Wg.prototype=J(Z.prototype,{onSample:function(a){var b=0,c=a.length>>1;if(0<this.source.duration){for(var d=this.source.volume,e=0,f=0,g=this.source.currentSample,h=this.source.buffers[e++];0<c;){for(;null!=h&&g>=h.samples;)f+=h.samples,g-=h.samples,h=this.source.buffers[e++];if(null==h){if(this.source.loop){e=f=g=0;h=this.source.buffers[e++];continue}break}var k=h.samples-g;k>c&&(k=c);var l=g<<1,m=h.data;if(1>this.startup)for(var p=0,q=k;p<q;)p++,a[b++]=m[l++]*d*this.startup,a[b++]=
m[l++]*d*this.startup,1>this.startup&&(this.startup+=0.1,1<this.startup&&(this.startup=1));else{p=0;for(q=k;p<q;)p++,a[b++]=m[l++]*d,a[b++]=m[l++]*d}c-=k;g+=k}this.source.currentSample=f+g;if(0>this.source.currentSample)throw new n(f+"/"+g);}d=0;for(c<<=1;d<c;)d++,a[b++]=0},__class__:Wg});var bc=function(){this.volume=1;this.loop=!1;this.buffers=[];this.playedTime=this.currentSample=0;this.id=++bc.ID;bc.all.h[this.id]=this};p["hxd.snd.openal.Source"]=bc;bc.__name__="hxd.snd.openal.Source";bc.ofInt=
function(a){return bc.all.h[a]};bc.prototype={updateDuration:function(){this.frequency=0==this.buffers.length?1:this.buffers[0].frequency;for(var a=this.duration=0,b=this.buffers;a<b.length;){var c=b[a];++a;this.duration+=c.samples/c.frequency}},get_playing:function(){return null!=this.chan},play:function(){null==this.chan&&(this.playedTime=Date.now()/1E3-this.currentSample/this.frequency,this.chan=new Wg(this,bc.CHANNEL_BUFSIZE))},stop:function(a){null==a&&(a=!1);null!=this.chan&&(a?this.chan.stop():
ee.delay((s=this.chan,K(s,s.stop)),200),this.chan=null)},dispose:function(){this.stop();bc.all.remove(this.id);this.id=0},toInt:function(){return this.id},__class__:bc};var Fc=function(){this.samples=0;this.frequency=1;this.id=++Fc.ID;Fc.all.h[this.id]=this};p["hxd.snd.openal.Buffer"]=Fc;Fc.__name__="hxd.snd.openal.Buffer";Fc.ofInt=function(a){return Fc.all.h[a]};Fc.prototype={dispose:function(){this.data=null;Fc.all.remove(this.id);this.id=0},alloc:function(a){if(null==this.data||this.data.length!=
a)this.data=Array(a);return this.data},toInt:function(){return this.id},__class__:Fc};var y=function(){};p["hxd.snd.openal.Emulator"]=y;y.__name__="hxd.snd.openal.Emulator";y.dopplerFactor=function(a){};y.dopplerVelocity=function(a){};y.speedOfSound=function(a){};y.distanceModel=function(a){};y.enable=function(a){};y.disable=function(a){};y.isEnabled=function(a){return!1};y.getBooleanv=function(a,b){throw new n("TODO");};y.getIntegerv=function(a,b){throw new n("TODO");};y.getFloatv=function(a,b){throw new n("TODO");
};y.getDoublev=function(a,b){throw new n("TODO");};y.getString=function(a){throw new n("TODO");};y.getBoolean=function(a){throw new n("TODO");};y.getInteger=function(a){throw new n("TODO");};y.getFloat=function(a){throw new n("TODO");};y.getDouble=function(a){throw new n("TODO");};y.getError=function(){return 0};y.loadExtensions=function(){};y.isExtensionPresent=function(a){return!1};y.getEnumValue=function(a){throw new n("TODO");};y.listenerf=function(a,b){};y.listener3f=function(a,b,c,d){};y.listenerfv=
function(a,b){};y.listeneri=function(a,b){};y.listener3i=function(a,b,c,d){};y.listeneriv=function(a,b){};y.getListenerf=function(a){throw new n("TODO");};y.getListener3f=function(a,b){throw new n("TODO");};y.getListenerfv=function(a,b){throw new n("TODO");};y.getListeneri=function(a){throw new n("TODO");};y.getListener3i=function(a,b){throw new n("TODO");};y.getListeneriv=function(a,b){throw new n("TODO");};y.genSources=function(a,b){for(var c=0;c<a;){var d=c++;b.setInt32(d<<2,(new bc).id)}};y.deleteSources=
function(a,b){for(var c=0;c<a;){var d=c++,d=b.getInt32(d<<2);bc.all.h[d].dispose()}};y.isSource=function(a){return null!=a};y.sourcef=function(a,b,c){switch(b){case 4099:break;case 4106:a.volume=c;break;case 4128:case 4129:case 4131:break;case 4132:a.currentSample=0==a.buffers.length?0:c*a.frequency|0;null!=a.chan&&(a.stop(!0),a.play());break;default:throw new n("Unsupported param 0x"+ga.hex(b));}};y.source3f=function(a,b,c,d,e){switch(b){case 4100:case 4101:case 4102:break;default:throw new n("Unsupported param 0x"+
ga.hex(b));}};y.sourcefv=function(a,b,c){throw new n("Unsupported param 0x"+ga.hex(b));};y.sourcei=function(a,b,c){switch(b){case 514:break;case 4103:a.loop=0!=c;break;case 4105:b=Fc.all.h[c];a.buffers=null==b?[]:[b];a.updateDuration();a.currentSample=0;break;case 4133:a.currentSample=y.getSourcef(a,4132)/a.frequency|0;null!=a.chan&&(a.stop(!0),a.play());break;case 131077:break;default:throw new n("Unsupported param 0x"+ga.hex(b));}};y.source3i=function(a,b,c,d,e){throw new n("Unsupported param 0x"+
ga.hex(b));};y.sourceiv=function(a,b,c){throw new n("Unsupported param 0x"+ga.hex(b));};y.getSourcef=function(a,b){if(4132==b){if(0==a.buffers.length)return 0;var c=Date.now()/1E3-a.playedTime,d=a.duration;if(a.loop)for(;c>d;)c-=d,a.playedTime+=d;else c>d&&(c=d);return c}throw new n("Unsupported param 0x"+ga.hex(b));};y.getSourcei=function(a,b){switch(b){case 4112:return null==a.chan||0==a.buffers.length||!a.loop&&Date.now()/1E3-a.playedTime>=a.duration?4116:4114;case 4118:if(a.loop)return 0;for(var c=
0,d=a.currentSample,e=0,f=a.buffers;e<f.length;){var g=f[e];++e;if(d>=g.samples)d-=g.samples,++c;else break}return c;case 4133:return y.getSourcef(a,4132)*a.frequency|0;default:throw new n("Unsupported param 0x"+ga.hex(b));}};y.getSource3f=function(a,b,c){throw new n("TODO");};y.getSourcefv=function(a,b,c){throw new n("TODO");};y.getSource3i=function(a,b,c){throw new n("TODO");};y.getSourceiv=function(a,b,c){throw new n("TODO");};y.sourcePlayv=function(a,b){throw new n("TODO");};y.sourceStopv=function(a,
b){throw new n("TODO");};y.sourceRewindv=function(a,b){throw new n("TODO");};y.sourcePausev=function(a,b){throw new n("TODO");};y.sourcePlay=function(a){a.play()};y.sourceStop=function(a){a.stop();a.currentSample=0};y.sourceRewind=function(a){throw new n("TODO");};y.sourcePause=function(a){throw new n("TODO");};y.sourceQueueBuffers=function(a,b,c){for(var d=0;d<b;){var e=d++,e=c.getInt32(4*e),e=Fc.all.h[e];if(null==e)throw new n("assert");a.buffers.push(e)}a.updateDuration()};y.sourceUnqueueBuffers=
function(a,b,c){for(var d=0;d<b;){var e=d++,e=c.getInt32(4*e),e=Fc.all.h[e];if(e!=a.buffers[0])throw new n("assert");if(null!=a.chan){if(a.currentSample<e.samples)throw new n("assert");a.buffers.shift();a.currentSample-=e.samples;a.playedTime+=e.samples/e.frequency}else a.buffers.shift();a.updateDuration()}};y.genBuffers=function(a,b){for(var c=0;c<a;){var d=c++;b.setInt32(d<<2,(new Fc).id)}};y.deleteBuffers=function(a,b){for(var c=0;c<a;){var d=c++,d=b.getInt32(d<<2);Fc.all.h[d].dispose()}};y.isBuffer=
function(a){return null!=a};y.bufferData=function(a,b,c,d,e){if(e!=y.NATIVE_FREQ)throw new n("Unsupported frequency value: "+e+" should be "+y.NATIVE_FREQ);switch(b){case 4352:b=a.alloc(2*d);for(var f=0;f<d;){var g=f++,h=c.b[g]/255;b[g<<1]=h;b[g<<1|1]=h}break;case 4353:b=a.alloc(d);f=0;for(d>>=1;f<d;)g=f++,h=c.getUInt16(g<<1),h=(0==(h&32768)?h:h|-65536)/32768,b[g<<1]=h,b[g<<1|1]=h;break;case 4354:b=a.alloc(d);for(f=0;f<d;)g=f++,b[g]=c.b[g]/255;break;case 4355:b=a.alloc(d>>1);f=0;for(d>>=1;f<d;)g=
f++,h=c.getUInt16(g<<1),b[g]=(0==(h&32768)?h:h|-65536)/32768;break;case 4368:b=a.alloc(d>>1);f=0;for(d>>=2;f<d;)g=f++,h=c.getFloat(g<<2),b[g<<1]=h,b[g<<1|1]=h;break;case 4369:a.alloc(d>>2);b=0;for(d>>=2;b<d;)f=b++,a.data[f]=c.getFloat(f<<2);break;default:throw new n("Format not supported 0x"+ga.hex(b));}a.samples=a.data.length>>1;a.frequency=e};y.bufferf=function(a,b,c){throw new n("Unsupported param 0x"+ga.hex(b));};y.buffer3f=function(a,b,c,d,e){throw new n("Unsupported param 0x"+ga.hex(b));};y.bufferfv=
function(a,b,c){throw new n("Unsupported param 0x"+ga.hex(b));};y.bufferi=function(a,b,c){throw new n("Unsupported param 0x"+ga.hex(b));};y.buffer3i=function(a,b,c,d,e){throw new n("Unsupported param 0x"+ga.hex(b));};y.bufferiv=function(a,b,c){throw new n("Unsupported param 0x"+ga.hex(b));};y.getBufferf=function(a,b){throw new n("TODO");};y.getBuffer3f=function(a,b,c){throw new n("TODO");};y.getBufferfv=function(a,b,c){throw new n("TODO");};y.getBufferi=function(a,b){switch(b){case 8194:return 32;
case 8195:return 2;case 8196:return 4*a.data.length;default:throw new n("Unsupported param 0x"+ga.hex(b));}};y.getBuffer3i=function(a,b,c){throw new n("TODO");};y.getBufferiv=function(a,b,c){throw new n("TODO");};var mk=function(){};p["hxd.snd.openal.Device"]=mk;mk.__name__="hxd.snd.openal.Device";mk.prototype={__class__:mk};var nk=function(a){this.device=a};p["hxd.snd.openal.Context"]=nk;nk.__name__="hxd.snd.openal.Context";nk.prototype={__class__:nk};var $=function(){};p["hxd.snd.openal.ALC"]=$;
$.__name__="hxd.snd.openal.ALC";$.getError=function(a){return 0};$.createContext=function(a,b){return new nk(a)};$.makeContextCurrent=function(a){$.ctx=a;return!0};$.processContext=function(a){};$.suspendContext=function(a){};$.destroyContext=function(a){};$.getCurrentContext=function(){return $.ctx};$.getContextsDevice=function(a){return $.ctx.device};$.openDevice=function(a){return new mk};$.closeDevice=function(a){return!0};$.loadExtensions=function(a){};$.isExtensionPresent=function(a,b){return!1};
$.getEnumValue=function(a,b){throw new n("TODO");};$.getString=function(a,b){throw new n("TODO");};$.getIntegerv=function(a,b,c,d){if(131075!=b)throw new n("Unsupported param 0x"+ga.hex(b));};var $f=function(){};p["hxd.snd.openal.EFX"]=$f;$f.__name__="hxd.snd.openal.EFX";var u=M["hxsl.Type"]={__ename__:!0,__constructs__:"TVoid TInt TBool TFloat TString TVec TMat3 TMat4 TMat3x4 TBytes TSampler2D TSampler2DArray TSamplerCube TStruct TFun TArray TBuffer TChannel".split(" "),TVoid:{_hx_index:0,__enum__:"hxsl.Type",
toString:m},TInt:{_hx_index:1,__enum__:"hxsl.Type",toString:m},TBool:{_hx_index:2,__enum__:"hxsl.Type",toString:m},TFloat:{_hx_index:3,__enum__:"hxsl.Type",toString:m},TString:{_hx_index:4,__enum__:"hxsl.Type",toString:m},TVec:(s=function(a,b){return{_hx_index:5,size:a,t:b,__enum__:"hxsl.Type",toString:m}},s.__params__=["size","t"],s),TMat3:{_hx_index:6,__enum__:"hxsl.Type",toString:m},TMat4:{_hx_index:7,__enum__:"hxsl.Type",toString:m},TMat3x4:{_hx_index:8,__enum__:"hxsl.Type",toString:m},TBytes:(s=
function(a){return{_hx_index:9,size:a,__enum__:"hxsl.Type",toString:m}},s.__params__=["size"],s),TSampler2D:{_hx_index:10,__enum__:"hxsl.Type",toString:m},TSampler2DArray:{_hx_index:11,__enum__:"hxsl.Type",toString:m},TSamplerCube:{_hx_index:12,__enum__:"hxsl.Type",toString:m},TStruct:(s=function(a){return{_hx_index:13,vl:a,__enum__:"hxsl.Type",toString:m}},s.__params__=["vl"],s),TFun:(s=function(a){return{_hx_index:14,variants:a,__enum__:"hxsl.Type",toString:m}},s.__params__=["variants"],s),TArray:(s=
function(a,b){return{_hx_index:15,t:a,size:b,__enum__:"hxsl.Type",toString:m}},s.__params__=["t","size"],s),TBuffer:(s=function(a,b){return{_hx_index:16,t:a,size:b,__enum__:"hxsl.Type",toString:m}},s.__params__=["t","size"],s),TChannel:(s=function(a){return{_hx_index:17,size:a,__enum__:"hxsl.Type",toString:m}},s.__params__=["size"],s)};u.__empty_constructs__=[u.TVoid,u.TInt,u.TBool,u.TFloat,u.TString,u.TMat3,u.TMat4,u.TMat3x4,u.TSampler2D,u.TSampler2DArray,u.TSamplerCube];var Fb=M["hxsl.VecType"]=
{__ename__:!0,__constructs__:["VInt","VFloat","VBool"],VInt:{_hx_index:0,__enum__:"hxsl.VecType",toString:m},VFloat:{_hx_index:1,__enum__:"hxsl.VecType",toString:m},VBool:{_hx_index:2,__enum__:"hxsl.VecType",toString:m}};Fb.__empty_constructs__=[Fb.VInt,Fb.VFloat,Fb.VBool];var hc=M["hxsl.SizeDecl"]={__ename__:!0,__constructs__:["SConst","SVar"],SConst:(s=function(a){return{_hx_index:0,v:a,__enum__:"hxsl.SizeDecl",toString:m}},s.__params__=["v"],s),SVar:(s=function(a){return{_hx_index:1,v:a,__enum__:"hxsl.SizeDecl",
toString:m}},s.__params__=["v"],s)};hc.__empty_constructs__=[];var wb=function(a,b){this.msg=a;this.pos=b};p["hxsl.Error"]=wb;wb.__name__="hxsl.Error";wb.t=function(a,b){throw new n(new wb(a,b));};wb.prototype={toString:function(){return"Error("+this.msg+")@"+r.string(this.pos)},__class__:wb};var W=M["hxsl.VarKind"]={__ename__:!0,__constructs__:"Global Input Param Var Local Output Function".split(" "),Global:{_hx_index:0,__enum__:"hxsl.VarKind",toString:m},Input:{_hx_index:1,__enum__:"hxsl.VarKind",
toString:m},Param:{_hx_index:2,__enum__:"hxsl.VarKind",toString:m},Var:{_hx_index:3,__enum__:"hxsl.VarKind",toString:m},Local:{_hx_index:4,__enum__:"hxsl.VarKind",toString:m},Output:{_hx_index:5,__enum__:"hxsl.VarKind",toString:m},Function:{_hx_index:6,__enum__:"hxsl.VarKind",toString:m}};W.__empty_constructs__=[W.Global,W.Input,W.Param,W.Var,W.Local,W.Output,W.Function];var oc=M["hxsl.VarQualifier"]={__ename__:!0,__constructs__:"Const Private Nullable PerObject Name Shared Precision Range Ignore PerInstance".split(" "),
Const:(s=function(a){return{_hx_index:0,max:a,__enum__:"hxsl.VarQualifier",toString:m}},s.__params__=["max"],s),Private:{_hx_index:1,__enum__:"hxsl.VarQualifier",toString:m},Nullable:{_hx_index:2,__enum__:"hxsl.VarQualifier",toString:m},PerObject:{_hx_index:3,__enum__:"hxsl.VarQualifier",toString:m},Name:(s=function(a){return{_hx_index:4,n:a,__enum__:"hxsl.VarQualifier",toString:m}},s.__params__=["n"],s),Shared:{_hx_index:5,__enum__:"hxsl.VarQualifier",toString:m},Precision:(s=function(a){return{_hx_index:6,
p:a,__enum__:"hxsl.VarQualifier",toString:m}},s.__params__=["p"],s),Range:(s=function(a,b){return{_hx_index:7,min:a,max:b,__enum__:"hxsl.VarQualifier",toString:m}},s.__params__=["min","max"],s),Ignore:{_hx_index:8,__enum__:"hxsl.VarQualifier",toString:m},PerInstance:(s=function(a){return{_hx_index:9,v:a,__enum__:"hxsl.VarQualifier",toString:m}},s.__params__=["v"],s)};oc.__empty_constructs__=[oc.Private,oc.Nullable,oc.PerObject,oc.Shared,oc.Ignore];var Uk=M["hxsl.Prec"]={__ename__:!0,__constructs__:["Low",
"Medium","High"],Low:{_hx_index:0,__enum__:"hxsl.Prec",toString:m},Medium:{_hx_index:1,__enum__:"hxsl.Prec",toString:m},High:{_hx_index:2,__enum__:"hxsl.Prec",toString:m}};Uk.__empty_constructs__=[Uk.Low,Uk.Medium,Uk.High];var B=M["hxsl.Const"]={__ename__:!0,__constructs__:["CNull","CBool","CInt","CFloat","CString"],CNull:{_hx_index:0,__enum__:"hxsl.Const",toString:m},CBool:(s=function(a){return{_hx_index:1,b:a,__enum__:"hxsl.Const",toString:m}},s.__params__=["b"],s),CInt:(s=function(a){return{_hx_index:2,
v:a,__enum__:"hxsl.Const",toString:m}},s.__params__=["v"],s),CFloat:(s=function(a){return{_hx_index:3,v:a,__enum__:"hxsl.Const",toString:m}},s.__params__=["v"],s),CString:(s=function(a){return{_hx_index:4,v:a,__enum__:"hxsl.Const",toString:m}},s.__params__=["v"],s)};B.__empty_constructs__=[B.CNull];var Vk=M["hxsl.ExprDef"]={__ename__:!0,__constructs__:"EConst EIdent EParenthesis EField EBinop EUnop ECall EBlock EVars EFunction EIf EDiscard EFor EReturn EBreak EContinue EArray EArrayDecl ESwitch EWhile EMeta".split(" "),
EConst:(s=function(a){return{_hx_index:0,c:a,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["c"],s),EIdent:(s=function(a){return{_hx_index:1,i:a,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["i"],s),EParenthesis:(s=function(a){return{_hx_index:2,e:a,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["e"],s),EField:(s=function(a,b){return{_hx_index:3,e:a,f:b,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["e","f"],s),EBinop:(s=function(a,b,c){return{_hx_index:4,op:a,e1:b,e2:c,__enum__:"hxsl.ExprDef",
toString:m}},s.__params__=["op","e1","e2"],s),EUnop:(s=function(a,b){return{_hx_index:5,op:a,e1:b,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["op","e1"],s),ECall:(s=function(a,b){return{_hx_index:6,e:a,args:b,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["e","args"],s),EBlock:(s=function(a){return{_hx_index:7,el:a,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["el"],s),EVars:(s=function(a){return{_hx_index:8,v:a,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["v"],s),EFunction:(s=
function(a){return{_hx_index:9,f:a,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["f"],s),EIf:(s=function(a,b,c){return{_hx_index:10,econd:a,eif:b,eelse:c,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["econd","eif","eelse"],s),EDiscard:{_hx_index:11,__enum__:"hxsl.ExprDef",toString:m},EFor:(s=function(a,b,c){return{_hx_index:12,v:a,loop:b,block:c,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["v","loop","block"],s),EReturn:(s=function(a){return{_hx_index:13,e:a,__enum__:"hxsl.ExprDef",
toString:m}},s.__params__=["e"],s),EBreak:{_hx_index:14,__enum__:"hxsl.ExprDef",toString:m},EContinue:{_hx_index:15,__enum__:"hxsl.ExprDef",toString:m},EArray:(s=function(a,b){return{_hx_index:16,e:a,eindex:b,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["e","eindex"],s),EArrayDecl:(s=function(a){return{_hx_index:17,el:a,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["el"],s),ESwitch:(s=function(a,b,c){return{_hx_index:18,e:a,cases:b,def:c,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=
["e","cases","def"],s),EWhile:(s=function(a,b,c){return{_hx_index:19,cond:a,loop:b,normalWhile:c,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["cond","loop","normalWhile"],s),EMeta:(s=function(a,b,c){return{_hx_index:20,name:a,args:b,e:c,__enum__:"hxsl.ExprDef",toString:m}},s.__params__=["name","args","e"],s)};Vk.__empty_constructs__=[Vk.EDiscard,Vk.EBreak,Vk.EContinue];var $b=M["hxsl.FunctionKind"]={__ename__:!0,__constructs__:["Vertex","Fragment","Init","Helper"],Vertex:{_hx_index:0,__enum__:"hxsl.FunctionKind",
toString:m},Fragment:{_hx_index:1,__enum__:"hxsl.FunctionKind",toString:m},Init:{_hx_index:2,__enum__:"hxsl.FunctionKind",toString:m},Helper:{_hx_index:3,__enum__:"hxsl.FunctionKind",toString:m}};$b.__empty_constructs__=[$b.Vertex,$b.Fragment,$b.Init,$b.Helper];var G=M["hxsl.TGlobal"]={__ename__:!0,__constructs__:"Radians Degrees Sin Cos Tan Asin Acos Atan Pow Exp Log Exp2 Log2 Sqrt Inversesqrt Abs Sign Floor Ceil Fract Mod Min Max Clamp Mix Step Smoothstep Length Distance Dot Cross Normalize LReflect Texture TextureLod ToInt ToFloat ToBool Vec2 Vec3 Vec4 IVec2 IVec3 IVec4 BVec2 BVec3 BVec4 Mat2 Mat3 Mat4 Mat3x4 Saturate Pack Unpack PackNormal UnpackNormal ScreenToUv UvToScreen DFdx DFdy Fwidth ChannelRead ChannelReadLod Trace VertexID InstanceID".split(" "),
Radians:{_hx_index:0,__enum__:"hxsl.TGlobal",toString:m},Degrees:{_hx_index:1,__enum__:"hxsl.TGlobal",toString:m},Sin:{_hx_index:2,__enum__:"hxsl.TGlobal",toString:m},Cos:{_hx_index:3,__enum__:"hxsl.TGlobal",toString:m},Tan:{_hx_index:4,__enum__:"hxsl.TGlobal",toString:m},Asin:{_hx_index:5,__enum__:"hxsl.TGlobal",toString:m},Acos:{_hx_index:6,__enum__:"hxsl.TGlobal",toString:m},Atan:{_hx_index:7,__enum__:"hxsl.TGlobal",toString:m},Pow:{_hx_index:8,__enum__:"hxsl.TGlobal",toString:m},Exp:{_hx_index:9,
__enum__:"hxsl.TGlobal",toString:m},Log:{_hx_index:10,__enum__:"hxsl.TGlobal",toString:m},Exp2:{_hx_index:11,__enum__:"hxsl.TGlobal",toString:m},Log2:{_hx_index:12,__enum__:"hxsl.TGlobal",toString:m},Sqrt:{_hx_index:13,__enum__:"hxsl.TGlobal",toString:m},Inversesqrt:{_hx_index:14,__enum__:"hxsl.TGlobal",toString:m},Abs:{_hx_index:15,__enum__:"hxsl.TGlobal",toString:m},Sign:{_hx_index:16,__enum__:"hxsl.TGlobal",toString:m},Floor:{_hx_index:17,__enum__:"hxsl.TGlobal",toString:m},Ceil:{_hx_index:18,
__enum__:"hxsl.TGlobal",toString:m},Fract:{_hx_index:19,__enum__:"hxsl.TGlobal",toString:m},Mod:{_hx_index:20,__enum__:"hxsl.TGlobal",toString:m},Min:{_hx_index:21,__enum__:"hxsl.TGlobal",toString:m},Max:{_hx_index:22,__enum__:"hxsl.TGlobal",toString:m},Clamp:{_hx_index:23,__enum__:"hxsl.TGlobal",toString:m},Mix:{_hx_index:24,__enum__:"hxsl.TGlobal",toString:m},Step:{_hx_index:25,__enum__:"hxsl.TGlobal",toString:m},Smoothstep:{_hx_index:26,__enum__:"hxsl.TGlobal",toString:m},Length:{_hx_index:27,
__enum__:"hxsl.TGlobal",toString:m},Distance:{_hx_index:28,__enum__:"hxsl.TGlobal",toString:m},Dot:{_hx_index:29,__enum__:"hxsl.TGlobal",toString:m},Cross:{_hx_index:30,__enum__:"hxsl.TGlobal",toString:m},Normalize:{_hx_index:31,__enum__:"hxsl.TGlobal",toString:m},LReflect:{_hx_index:32,__enum__:"hxsl.TGlobal",toString:m},Texture:{_hx_index:33,__enum__:"hxsl.TGlobal",toString:m},TextureLod:{_hx_index:34,__enum__:"hxsl.TGlobal",toString:m},ToInt:{_hx_index:35,__enum__:"hxsl.TGlobal",toString:m},ToFloat:{_hx_index:36,
__enum__:"hxsl.TGlobal",toString:m},ToBool:{_hx_index:37,__enum__:"hxsl.TGlobal",toString:m},Vec2:{_hx_index:38,__enum__:"hxsl.TGlobal",toString:m},Vec3:{_hx_index:39,__enum__:"hxsl.TGlobal",toString:m},Vec4:{_hx_index:40,__enum__:"hxsl.TGlobal",toString:m},IVec2:{_hx_index:41,__enum__:"hxsl.TGlobal",toString:m},IVec3:{_hx_index:42,__enum__:"hxsl.TGlobal",toString:m},IVec4:{_hx_index:43,__enum__:"hxsl.TGlobal",toString:m},BVec2:{_hx_index:44,__enum__:"hxsl.TGlobal",toString:m},BVec3:{_hx_index:45,
__enum__:"hxsl.TGlobal",toString:m},BVec4:{_hx_index:46,__enum__:"hxsl.TGlobal",toString:m},Mat2:{_hx_index:47,__enum__:"hxsl.TGlobal",toString:m},Mat3:{_hx_index:48,__enum__:"hxsl.TGlobal",toString:m},Mat4:{_hx_index:49,__enum__:"hxsl.TGlobal",toString:m},Mat3x4:{_hx_index:50,__enum__:"hxsl.TGlobal",toString:m},Saturate:{_hx_index:51,__enum__:"hxsl.TGlobal",toString:m},Pack:{_hx_index:52,__enum__:"hxsl.TGlobal",toString:m},Unpack:{_hx_index:53,__enum__:"hxsl.TGlobal",toString:m},PackNormal:{_hx_index:54,
__enum__:"hxsl.TGlobal",toString:m},UnpackNormal:{_hx_index:55,__enum__:"hxsl.TGlobal",toString:m},ScreenToUv:{_hx_index:56,__enum__:"hxsl.TGlobal",toString:m},UvToScreen:{_hx_index:57,__enum__:"hxsl.TGlobal",toString:m},DFdx:{_hx_index:58,__enum__:"hxsl.TGlobal",toString:m},DFdy:{_hx_index:59,__enum__:"hxsl.TGlobal",toString:m},Fwidth:{_hx_index:60,__enum__:"hxsl.TGlobal",toString:m},ChannelRead:{_hx_index:61,__enum__:"hxsl.TGlobal",toString:m},ChannelReadLod:{_hx_index:62,__enum__:"hxsl.TGlobal",
toString:m},Trace:{_hx_index:63,__enum__:"hxsl.TGlobal",toString:m},VertexID:{_hx_index:64,__enum__:"hxsl.TGlobal",toString:m},InstanceID:{_hx_index:65,__enum__:"hxsl.TGlobal",toString:m}};G.__empty_constructs__=[G.Radians,G.Degrees,G.Sin,G.Cos,G.Tan,G.Asin,G.Acos,G.Atan,G.Pow,G.Exp,G.Log,G.Exp2,G.Log2,G.Sqrt,G.Inversesqrt,G.Abs,G.Sign,G.Floor,G.Ceil,G.Fract,G.Mod,G.Min,G.Max,G.Clamp,G.Mix,G.Step,G.Smoothstep,G.Length,G.Distance,G.Dot,G.Cross,G.Normalize,G.LReflect,G.Texture,G.TextureLod,G.ToInt,
G.ToFloat,G.ToBool,G.Vec2,G.Vec3,G.Vec4,G.IVec2,G.IVec3,G.IVec4,G.BVec2,G.BVec3,G.BVec4,G.Mat2,G.Mat3,G.Mat4,G.Mat3x4,G.Saturate,G.Pack,G.Unpack,G.PackNormal,G.UnpackNormal,G.ScreenToUv,G.UvToScreen,G.DFdx,G.DFdy,G.Fwidth,G.ChannelRead,G.ChannelReadLod,G.Trace,G.VertexID,G.InstanceID];var aa=M["hxsl.Component"]={__ename__:!0,__constructs__:["X","Y","Z","W"],X:{_hx_index:0,__enum__:"hxsl.Component",toString:m},Y:{_hx_index:1,__enum__:"hxsl.Component",toString:m},Z:{_hx_index:2,__enum__:"hxsl.Component",
toString:m},W:{_hx_index:3,__enum__:"hxsl.Component",toString:m}};aa.__empty_constructs__=[aa.X,aa.Y,aa.Z,aa.W];var q=M["hxsl.TExprDef"]={__ename__:!0,__constructs__:"TConst TVar TGlobal TParenthesis TBlock TBinop TUnop TVarDecl TCall TSwiz TIf TDiscard TReturn TFor TContinue TBreak TArray TArrayDecl TSwitch TWhile TMeta".split(" "),TConst:(s=function(a){return{_hx_index:0,c:a,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["c"],s),TVar:(s=function(a){return{_hx_index:1,v:a,__enum__:"hxsl.TExprDef",
toString:m}},s.__params__=["v"],s),TGlobal:(s=function(a){return{_hx_index:2,g:a,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["g"],s),TParenthesis:(s=function(a){return{_hx_index:3,e:a,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["e"],s),TBlock:(s=function(a){return{_hx_index:4,el:a,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["el"],s),TBinop:(s=function(a,b,c){return{_hx_index:5,op:a,e1:b,e2:c,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["op","e1","e2"],s),TUnop:(s=function(a,
b){return{_hx_index:6,op:a,e1:b,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["op","e1"],s),TVarDecl:(s=function(a,b){return{_hx_index:7,v:a,init:b,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["v","init"],s),TCall:(s=function(a,b){return{_hx_index:8,e:a,args:b,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["e","args"],s),TSwiz:(s=function(a,b){return{_hx_index:9,e:a,regs:b,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["e","regs"],s),TIf:(s=function(a,b,c){return{_hx_index:10,
econd:a,eif:b,eelse:c,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["econd","eif","eelse"],s),TDiscard:{_hx_index:11,__enum__:"hxsl.TExprDef",toString:m},TReturn:(s=function(a){return{_hx_index:12,e:a,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["e"],s),TFor:(s=function(a,b,c){return{_hx_index:13,v:a,it:b,loop:c,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["v","it","loop"],s),TContinue:{_hx_index:14,__enum__:"hxsl.TExprDef",toString:m},TBreak:{_hx_index:15,__enum__:"hxsl.TExprDef",
toString:m},TArray:(s=function(a,b){return{_hx_index:16,e:a,index:b,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["e","index"],s),TArrayDecl:(s=function(a){return{_hx_index:17,el:a,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["el"],s),TSwitch:(s=function(a,b,c){return{_hx_index:18,e:a,cases:b,def:c,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["e","cases","def"],s),TWhile:(s=function(a,b,c){return{_hx_index:19,e:a,loop:b,normalWhile:c,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=
["e","loop","normalWhile"],s),TMeta:(s=function(a,b,c){return{_hx_index:20,m:a,args:b,e:c,__enum__:"hxsl.TExprDef",toString:m}},s.__params__=["m","args","e"],s)};q.__empty_constructs__=[q.TDiscard,q.TContinue,q.TBreak];var D=function(){};p["hxsl.Tools"]=D;D.__name__="hxsl.Tools";D.allocVarId=function(){return++D.UID};D.getName=function(a){if(null==a.qualifiers)return a.name;for(var b=0,c=a.qualifiers;b<c.length;){var d=c[b];++b;if(4==d._hx_index)return d.n}return a.name};D.getConstBits=function(a){switch(a.type._hx_index){case 1:var b=
0;for(a=a.qualifiers;b<a.length;){var c=a[b];++b;if(0==c._hx_index){b=c.max;if(null!=b){for(a=0;b>=1<<a;)++a;return a}return 8}}break;case 2:return 1;case 17:return 3+D.MAX_CHANNELS_BITS}return 0};D.isConst=function(a){if(17==a.type._hx_index)return!0;if(null!=a.qualifiers){var b=0;for(a=a.qualifiers;b<a.length;){var c=a[b];++b;if(0==c._hx_index)return!0}}return!1};D.isStruct=function(a){return 13==a.type._hx_index?!0:!1};D.isArray=function(a){return 15==a.type._hx_index?!0:!1};D.hasQualifier=function(a,
b){if(null!=a.qualifiers)for(var c=0,d=a.qualifiers;c<d.length;){var e=d[c];++c;if(e==b)return!0}return!1};D.isSampler=function(a){switch(a._hx_index){case 10:case 11:case 12:case 17:return!0;default:return!1}};D.toString=function(a){switch(a._hx_index){case 5:var b=a.size,c;switch(a.t._hx_index){case 0:c="I";break;case 1:c="";break;case 2:c="B"}return c+"Vec"+b;case 9:return"Bytes"+a.size;case 13:a=a.vl;for(var b=[],d=0;d<a.length;)c=a[d],++d,b.push(c.name+" : "+D.toString(c.type));return"{"+b.join(",")+
"}";case 15:d=a.size;a=D.toString(a.t)+"[";switch(d._hx_index){case 0:b=""+d.v;break;case 1:b=d.v.name}return a+b+"]";case 16:b=a.size;a="buffer "+D.toString(a.t)+"[";switch(b._hx_index){case 0:d=""+b.v;break;case 1:d=b.v.name}return a+d+"]";default:return z.substr(M[a.__enum__].__constructs__[a._hx_index],1,null)}};D.toType=function(a){switch(a._hx_index){case 0:return u.TInt;case 1:return u.TFloat;case 2:return u.TBool}};D.hasSideEffect=function(a){a=a.e;switch(a._hx_index){case 0:case 1:case 2:return!1;
case 3:return D.hasSideEffect(a.e);case 4:a=a.el;for(var b=0;b<a.length;){var c=a[b];++b;if(D.hasSideEffect(c))return!0}return!1;case 5:switch(a.op._hx_index){case 4:case 20:return!0;default:return b=a.e2,D.hasSideEffect(a.e1)?!0:D.hasSideEffect(b)}case 6:return D.hasSideEffect(a.e1);case 9:return D.hasSideEffect(a.e);case 10:return b=a.eelse,c=a.eif,!D.hasSideEffect(a.econd)&&!D.hasSideEffect(c)?null!=b?D.hasSideEffect(b):!1:!0;case 13:return b=a.loop,D.hasSideEffect(a.it)?!0:D.hasSideEffect(b);
case 7:case 8:case 11:case 12:case 14:case 15:return!0;case 16:return b=a.index,D.hasSideEffect(a.e)?!0:D.hasSideEffect(b);case 17:a=a.el;for(b=0;b<a.length;)if(c=a[b],++b,D.hasSideEffect(c))return!0;return!1;case 18:b=a.def;c=a.cases;a=a.e;for(var d=0;d<c.length;){var e=c[d];++d;for(var f=0,g=e.values;f<g.length;){var h=g[f];++f;if(D.hasSideEffect(h))return!0}if(D.hasSideEffect(e.expr))return!0}return D.hasSideEffect(a)?!0:null!=b?D.hasSideEffect(b):!1;case 19:return b=a.loop,D.hasSideEffect(a.e)?
!0:D.hasSideEffect(b);case 20:return D.hasSideEffect(a.e)}};D.iter=function(a,b){var c=a.e;switch(c._hx_index){case 3:b(c.e);break;case 4:for(var c=c.el,d=0;d<c.length;){var e=c[d];++d;b(e)}break;case 5:d=c.e2;b(c.e1);b(d);break;case 6:b(c.e1);break;case 7:c=c.init;null!=c&&b(c);break;case 8:d=c.args;b(c.e);for(c=0;c<d.length;)e=d[c],++c,b(e);break;case 9:b(c.e);break;case 10:d=c.eelse;e=c.eif;b(c.econd);b(e);null!=d&&b(d);break;case 12:c=c.e;null!=c&&b(c);break;case 13:d=c.loop;b(c.it);b(d);break;
case 16:d=c.index;b(c.e);b(d);break;case 17:c=c.el;for(d=0;d<c.length;)e=c[d],++d,b(e);break;case 18:d=c.def;e=c.cases;b(c.e);for(c=0;c<e.length;){var f=e[c];++c;for(var g=0,h=f.values;g<h.length;){var k=h[g];++g;b(k)}b(f.expr)}null!=d&&b(d);break;case 19:d=c.loop;b(c.e);b(d);break;case 20:b(c.e)}};D.map=function(a,b){var c,d=a.e;switch(d._hx_index){case 3:c=q.TParenthesis(b(d.e));break;case 4:d=d.el;c=[];for(var e=0;e<d.length;){var f=d[e];++e;c.push(b(f))}c=q.TBlock(c);break;case 5:c=d.e2;c=q.TBinop(d.op,
b(d.e1),b(c));break;case 6:c=q.TUnop(d.op,b(d.e1));break;case 7:c=d.init;c=q.TVarDecl(d.v,null!=c?b(c):null);break;case 8:c=d.args;d=b(d.e);e=[];for(f=0;f<c.length;){var g=c[f];++f;e.push(b(g))}c=q.TCall(d,e);break;case 9:c=d.regs;c=q.TSwiz(b(d.e),c);break;case 10:c=d.eelse;e=d.eif;c=q.TIf(b(d.econd),b(e),null!=c?b(c):null);break;case 12:d=d.e;c=q.TReturn(null!=d?b(d):null);break;case 13:c=d.loop;c=q.TFor(d.v,b(d.it),b(c));break;case 0:case 1:case 2:case 11:case 14:case 15:c=a.e;break;case 16:c=d.index;
c=q.TArray(b(d.e),b(c));break;case 17:d=d.el;c=[];for(e=0;e<d.length;)f=d[e],++e,c.push(b(f));c=q.TArrayDecl(c);break;case 18:c=d.def;e=d.cases;d=b(d.e);f=[];for(g=0;g<e.length;){var h=e[g];++g;for(var k=[],l=0,m=h.values;l<m.length;){var n=m[l];++l;k.push(b(n))}f.push({values:k,expr:b(h.expr)})}c=q.TSwitch(d,f,null==c?null:b(c));break;case 19:c=d.normalWhile;e=d.loop;c=q.TWhile(b(d.e),b(e),c);break;case 20:c=q.TMeta(d.m,d.args,b(d.e))}return{e:c,t:a.t,p:a.p}};D.size=function(a){switch(a._hx_index){case 0:return 0;
case 1:case 3:return 1;case 2:case 4:case 10:case 11:case 12:case 14:return 0;case 5:return a.size;case 6:return 9;case 7:return 16;case 8:return 12;case 9:return a.size;case 13:a=a.vl;for(var b=0,c=0;c<a.length;){var d=a[c];++c;b+=D.size(d.type)}return b;case 15:switch(a.size._hx_index){case 0:return b=a.size.v,D.size(a.t)*b;case 1:return 0}break;case 16:return 0==a.size._hx_index?(b=a.size.v,D.size(a.t)*b):0;case 17:return a.size}};D.evalConst=function(a){var b=a.e;switch(b._hx_index){case 0:a=
b.c;switch(a._hx_index){case 0:return null;case 1:return a.b;case 2:return a.v;case 3:return a.v;case 4:return a.v}break;case 8:if(2==b.e.e._hx_index)switch(b.e.e.g._hx_index){case 38:case 39:case 40:a=b.args;for(var b=[],c=0;c<a.length;){var d=a[c];++c;b.push(D.evalConst(d))}return 1==b.length?new U(b[0],b[0],b[0],b[0]):new U(b[0],b[1],b[2],b[3]);default:throw new n("Unhandled constant init "+qa.toString(a));}else throw new n("Unhandled constant init "+qa.toString(a));default:throw new n("Unhandled constant init "+
qa.toString(a));}};var Wk=function(){};p["hxsl.Tools2"]=Wk;Wk.__name__="hxsl.Tools2";Wk.toString=function(a){a=M[a.__enum__].__constructs__[a._hx_index];return a.charAt(0).toLowerCase()+z.substr(a,1,null)};var hl=function(){};p["hxsl.Tools3"]=hl;hl.__name__="hxsl.Tools3";hl.toString=function(a){return qa.shaderToString(a)};var il=function(){};p["hxsl.Tools4"]=il;il.__name__="hxsl.Tools4";il.toString=function(a){return qa.toString(a)};var ag=function(){this.Batch_Count__=0;Q.call(this)};p["hxsl.BatchShader"]=
ag;ag.__name__="hxsl.BatchShader";ag.__super__=Q;ag.prototype=J(Q.prototype,{get_Batch_Count:function(){return this.Batch_Count__},set_Batch_Count:function(a){this.constModified=!0;return this.Batch_Count__=a},get_Batch_Buffer:function(){return this.Batch_Buffer__},set_Batch_Buffer:function(a){return this.Batch_Buffer__=a},updateConstants:function(a){this.constBits=0;var b=this.Batch_Count__;if(0!=b>>>17)throw new n("Batch_Count is out of range "+b+">131071");this.constBits|=b;this.updateConstantsFinal(a)},
getParamValue:function(a){switch(a){case 0:return this.Batch_Count__;case 1:return this.Batch_Buffer__}return null},getParamFloatValue:function(a){return 0},clone:function(){var a=Object.create(ag.prototype);a.shader=this.shader;a.Batch_Count__=this.Batch_Count__;a.Batch_Buffer__=this.Batch_Buffer__;return a},__class__:ag});var zi=function(){};p["hxsl.SearchMap"]=zi;zi.__name__="hxsl.SearchMap";zi.prototype={__class__:zi};var Pd=function(){this.constsToGlobal=!1;this.linkCache=new zi;this.linkShaders=
new ia;this.batchShaders=new oa;this.byID=new ia};p["hxsl.Cache"]=Pd;Pd.__name__="hxsl.Cache";Pd.get=function(){var a=Pd.INST;null==a&&(a=new Pd,Pd.INST=a);return a};Pd.set=function(a){Pd.INST=a};Pd.clear=function(){Pd.INST=null};Pd.prototype={getLinkShader:function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;b.push(r.string(d))}b=b.join(",");c=this.linkShaders;c=null!=L[b]?c.getReserved(b):c.h[b];if(null!=c)return c;var e=new Xc(""),c=z.substr(me.encode(b),0,8);e.data={name:"shaderLinker_"+c,
vars:[],funs:[]};var f=new ia,g=0,h=u.TVec(4,Fb.VFloat),k=function(a,b,c,d){for(var e=[],f=b,g=0,h=c.length;g<h;){var k=g++,k=d(c[c.length-1-k],f-(c.length-1-k)),f=f-D.size(k.t);e.unshift(k)}return{e:q.TCall({e:q.TGlobal(a),t:u.TVoid,p:null},e),t:u.TVec(b,Fb.VFloat),p:null}},l=function(a,b,c){var d=null==c?a:D.getName(c)+"."+a,g=null!=L[d]?f.getReserved(d):f.h[d];if(null!=g)return g;g={id:D.allocVarId(),name:a,type:b,kind:W.Var,parent:c};if(null==c)e.data.vars.push(g);else if(a=c.type,13==a._hx_index)a.vl.push(g);
else throw new n("assert");null!=L[d]?f.setReserved(d,g):f.h[d]=g;return g},m=null,m=function(a,b){switch(a._hx_index){case 0:return{e:q.TConst(B.CFloat(a.v)),t:u.TFloat,p:null};case 1:var c=a.size,d=a.v,e=null!=L[d]?f.getReserved(d):f.h[d];if(null!=e)return{e:q.TVar(e),t:e.type,p:null};e=d.split(".");for(d=null;1<e.length;)var g=e.shift(),d=l(g,u.TStruct([]),d);null!=c&&(b=c);c=e.shift();e=l(c,1==b?u.TFloat:u.TVec(b,Fb.VFloat),d);return{e:q.TVar(e),t:e.type,p:null};case 2:return c=a.v,{e:q.TCall({e:q.TGlobal(G.PackNormal),
t:u.TVoid,p:null},[m(c,3)]),t:h,p:null};case 3:return c=a.v,{e:q.TCall({e:q.TGlobal(G.Pack),t:u.TVoid,p:null},[m(c,1)]),t:h,p:null};case 4:return k(G.Vec2,2,a.a,m);case 5:return k(G.Vec3,3,a.a,m);case 6:return k(G.Vec4,4,a.a,m);case 7:return c=a.swiz,{e:q.TSwiz(m(a.a,4),c),t:u.TVec(c.length,Fb.VFloat),p:null}}},p=function(a){g+=1;var b={id:D.allocVarId(),type:h,name:"OUTPUT"+(g-1),kind:W.Output};e.data.vars.push(b);return{e:q.TBinop(fa.OpAssign,{e:q.TVar(b),t:h,p:null},m(a,4)),t:u.TVoid,p:null}},
c=function(a,b){for(var c={id:D.allocVarId(),type:u.TFun([]),name:(""+r.string(a)).toLowerCase(),kind:W.Function},d=[],f=0;f<b.length;){var g=b[f];++f;d.push(p(g))}c={kind:a,ref:c,args:[],ret:u.TVoid,expr:{e:q.TBlock(d),p:null,t:u.TVoid}};e.data.funs.push(c)};c($b.Vertex,[Bc.Value("output.position")]);c($b.Fragment,a);c=Object.create(Q.prototype);c.shader=e;a=this.linkShaders;null!=L[b]?a.setReserved(b,c):a.h[b]=c;c.updateConstantsFinal(null);return c},link:function(a,b){for(var c=this.linkCache,
d=a;null!=d;){var e=d.s,d=d.next,e=e.instance;null==c.next&&(c.next=new oa);var f=c.next.h[e.id];null==f&&(f=new zi,c.next.h[e.id]=f);c=f}null==c.linked&&(c.linked=this.compileRuntimeShader(a,b));return c.linked},compileRuntimeShader:function(a,b){for(var c=[],d=0,e=a;null!=e;){var f=e.s,e=e.next;c.push({inst:f.instance,p:f.priority,index:d++})}c.reverse();Da.sort(c,function(a,b){return b.p-a.p});var d=new ok(b),g;try{e=[];for(f=0;f<c.length;){var h=c[f];++f;e.push(h.inst.shader)}g=d.link(e)}catch(k){var l=
k instanceof n?k.val:k;if(l instanceof wb){g=[];for(h=0;h<c.length;)d=c[h],++h,g.push(qa.shaderToString(d.inst.shader));l.msg+="\n\nin\n\n"+g.join("\n-----\n");throw new n(l);}throw k;}h=new oa;e=0;for(d=d.allVars;e<d.length;)if(f=d[e],++e,f.v.kind==W.Param&&13!=f.v.type._hx_index){var m=c[f.instanceIndex];h.h[f.id]={instance:m.index,index:m.inst.params.h[f.merged[0].id]}}try{l=(new pk).split(g)}catch(p){c=p instanceof n?p.val:p;if(c instanceof wb)throw c.msg+="\n\nin\n\n"+qa.shaderToString(g),new n(c);
throw p;}if(b){g=0;for(d=l.vertex.vars;g<d.length;)e=d[g],++g,null!=e.qualifiers&&0<=e.qualifiers.indexOf(oc.PerObject)&&(e.kind=W.Local)}l=(new qk).dce(l.vertex,l.fragment);l=this.buildRuntimeShader(l.vertex,l.fragment,h);g=[];for(h=a;null!=h;)d=h.s,h=h.next,g.push(new rk(d.shader,d.constBits));l.spec={instances:g,signature:null};g=0;for(h=c.length;g<h;)d=g++,l.spec.instances[c[c.length-1-d].index].index=d;c=[];g=0;for(h=l.spec.instances;g<h.length;)d=h[g],++g,c.push(d.shader.data.name+"_"+d.bits+
"_"+d.index);c=c.join(":");l.spec.signature=me.encode(c);l.signature=me.encode(qa.shaderToString(l.vertex.data)+qa.shaderToString(l.fragment.data));c=l.signature;g=this.byID;c=null!=L[c]?g.getReserved(c):g.h[c];null!=c?l.id=c.id:(c=l.signature,g=this.byID,null!=L[c]?g.setReserved(c,l):g.h[c]=l);return l},buildRuntimeShader:function(a,b,c){var d=new Xg;d.vertex=this.flattenShader(a,$b.Vertex,c);d.vertex.vertex=!0;d.fragment=this.flattenShader(b,$b.Fragment,c);d.globals=new oa;this.initGlobals(d,d.vertex);
this.initGlobals(d,d.fragment);return d},initGlobals:function(a,b){for(var c=b.globals;null!=c;)a.globals.h[c.gid]=!0,c=c.next;for(c=b.params;null!=c;)null!=c.perObjectGlobal&&(a.globals.h[c.perObjectGlobal.gid]=!0),c=c.next},getPath:function(a){return null==a.parent?a.name:this.getPath(a.parent)+"."+a.name},flattenShader:function(a,b,c){var d=new sk,e=new tk;a=d.flatten(a,b,this.constsToGlobal);b=[];e.consts=d.consts;e.texturesCount=0;for(var f=d.allocData.keys();f.hasNext();){var g=f.next(),h=d.allocData.h[g.__id__];
switch(g.kind._hx_index){case 0:for(var k=[],l=0;l<h.length;){var m=h[l];++l;null!=m.v&&k.push(new Yg(m.pos,this.getPath(m.v),m.v.type))}h=0;for(l=k.length-1;h<l;)m=h++,k[m].next=k[m+1];g=g.type;if(15==g._hx_index&&5==g.t._hx_index&&4==g.t.size&&1==g.t.t._hx_index&&0==g.size._hx_index)g=g.size.v,e.globals=k[0],e.globalsSize=g;else throw new n("assert");break;case 2:k=[];for(l=0;l<h.length;)if(m=h[l],++l,null!=m.v){var p=c.h[m.v.id];null==p?(p=new Zg(m.v.name,m.pos,-1,-1,m.v.type),p.perObjectGlobal=
new Yg(-1,this.getPath(m.v),m.v.type),k.push(p)):k.push(new Zg(m.v.name,m.pos,p.instance,p.index,m.v.type))}h=0;for(l=k.length-1;h<l;)m=h++,k[m].next=k[m+1];g=g.type;if(15==g._hx_index)if(h=g.t,D.isSampler(h))b.push({t:h,all:k}),e.texturesCount+=k.length;else switch(g.t._hx_index){case 5:if(4==g.t.size&&1==g.t.t._hx_index&&0==g.size._hx_index)g=g.size.v,e.params=k[0],e.paramsSize=g;else throw new n("assert");break;case 16:e.buffers=k[0];e.bufferCount=k.length;break;default:throw new n("assert");}else throw new n("assert");
break;default:throw new n("assert");}}if(0<b.length){b.sort(function(a,b){return a.t._hx_index-b.t._hx_index});e.textures=b[0].all[0];c=1;for(d=b.length;c<d;)f=c++,g=b[f-1].all,g[g.length-1].next=b[f].all[0]}null==e.globals&&(e.globalsSize=0);null==e.params&&(e.paramsSize=0);null==e.buffers&&(e.bufferCount=0);e.data=a;return e},makeBatchShader:function(a){var b=this.batchShaders.h[a.id];null==b&&(b=this.createBatchShader(a),this.batchShaders.h[a.id]=b);a=Object.create(ag.prototype);a.shader=b;return a},
createBatchShader:function(a){var b=new Xc(""),c=z.substr(a.signature,0,8),d=function(a,b,c){return{id:D.allocVarId(),type:b,name:a,kind:c}},e=d("Batch_Count",u.TInt,W.Param),f=d("Batch_Buffer",u.TBuffer(u.TVec(4,Fb.VFloat),hc.SVar(e)),W.Param),g=d("Batch_Offset",u.TInt,W.Local),h={e:q.TVar(f),p:null,t:f.type},k={e:q.TVar(g),p:null,t:g.type},l=u.TVec(4,Fb.VFloat);e.qualifiers=[oc.Const(65536)];b.data={name:"batchShader_"+c,vars:[e,f,g],funs:[]};for(var f=a.vertex.paramsSize+a.fragment.paramsSize,
m=new Ha,p=[[aa.X],[aa.Y],[aa.Z],[aa.W]],s=function(a){return{e:q.TArray(h,{e:q.TBinop(fa.OpAdd,k,{e:q.TConst(B.CInt(a)),t:u.TInt,p:null}),t:u.TInt,p:null}),t:l,p:null}},g=function(a,c){var e=d(a.name,a.type,W.Local);if(null!=a.perObjectGlobal){var f=a.perObjectGlobal.path.split(".");f.pop();for(var g=e;0<f.length;){f.join(".");var h=f.pop(),k=m.h[f.__id__];null==k&&(k=d(h,u.TStruct([]),W.Local),m.set(f,k));h=k.type;13==h._hx_index&&h.vl.push(g);g=g.parent=k}}b.data.vars.push(e);f=(a.pos>>2)+c;g=
a.type;switch(g._hx_index){case 3:g=a.type;f=s(f);f={p:null,t:g,e:q.TSwiz(f,p[a.pos&3])};break;case 5:switch(g.size){case 2:if(1==g.t._hx_index){switch(a.pos&3){case 0:k=[aa.X,aa.Y];break;case 1:k=[aa.Y,aa.Z];break;default:k=[aa.Z,aa.W]}g=a.type;f=q.TSwiz(s(f),k);f={p:null,t:g,e:f}}else throw new n("Unsupported batch var type "+r.string(a.type));break;case 3:if(1==g.t._hx_index)g=a.type,f=s(f),f={p:null,t:g,e:q.TSwiz(f,0==(a.pos&3)?[aa.X,aa.Y,aa.Z]:[aa.Y,aa.Z,aa.W])};else throw new n("Unsupported batch var type "+
r.string(a.type));break;case 4:if(1==g.t._hx_index)f=s(f);else throw new n("Unsupported batch var type "+r.string(a.type));break;default:throw new n("Unsupported batch var type "+r.string(a.type));}break;case 7:g=a.type;f=q.TCall({e:q.TGlobal(G.Mat4),t:u.TVoid,p:null},[s(f),s(f+1),s(f+2),s(f+3)]);f={p:null,t:g,e:f};break;default:throw new n("Unsupported batch var type "+r.string(a.type));}return{p:null,e:q.TBinop(fa.OpAssign,{e:q.TVar(e),p:null,t:a.type},f),t:u.TVoid}},c=[],v=a.vertex.params;null!=
v;)c.push(g(v,0)),v=v.next;for(v=a.fragment.params;null!=v;)c.push(g(v,a.vertex.paramsSize)),v=v.next;c.unshift({p:null,e:q.TBinop(fa.OpAssign,k,{p:null,t:u.TInt,e:q.TBinop(fa.OpMult,{e:q.TGlobal(G.InstanceID),t:u.TInt,p:null},{e:q.TConst(B.CInt(f)),p:null,t:u.TInt})}),t:u.TVoid});a=d("init",u.TFun([]),W.Function);a={kind:$b.Init,ref:a,args:[],ret:u.TVoid,expr:{e:q.TBlock(c),p:null,t:u.TVoid}};b.data.funs.push(a);b.consts=new Ai(e,0,16);b.consts.globalId=0;return b},__class__:Pd};var jb=M["hxsl.Channel"]=
{__ename__:!0,__constructs__:"Unknown R G B A PackedFloat PackedNormal".split(" "),Unknown:{_hx_index:0,__enum__:"hxsl.Channel",toString:m},R:{_hx_index:1,__enum__:"hxsl.Channel",toString:m},G:{_hx_index:2,__enum__:"hxsl.Channel",toString:m},B:{_hx_index:3,__enum__:"hxsl.Channel",toString:m},A:{_hx_index:4,__enum__:"hxsl.Channel",toString:m},PackedFloat:{_hx_index:5,__enum__:"hxsl.Channel",toString:m},PackedNormal:{_hx_index:6,__enum__:"hxsl.Channel",toString:m}};jb.__empty_constructs__=[jb.Unknown,
jb.R,jb.G,jb.B,jb.A,jb.PackedFloat,jb.PackedNormal];var $g=function(){this.varMap=new oa};p["hxsl.Clone"]=$g;$g.__name__="hxsl.Clone";$g.shaderData=function(a){return(new $g).shader(a)};$g.prototype={tvar:function(a){var b=this.varMap.h[a.id];if(null!=b)return b;b={id:D.allocVarId(),type:a.type,name:a.name,kind:a.kind};this.varMap.h[a.id]=b;null!=a.parent&&(b.parent=this.tvar(a.parent));null!=a.qualifiers&&(b.qualifiers=a.qualifiers.slice());b.type=this.ttype(a.type);return b},tfun:function(a){for(var b=
this.ttype(a.ret),c=a.kind,d=this.tvar(a.ref),e=[],f=0,g=a.args;f<g.length;){var h=g[f];++f;e.push(this.tvar(h))}return{ret:b,kind:c,ref:d,args:e,expr:this.texpr(a.expr)}},ttype:function(a){switch(a._hx_index){case 13:var b=a.vl,c=[];for(a=0;a<b.length;){var d=b[a];++a;c.push(this.tvar(d))}return u.TStruct(c);case 14:b=a.variants;c=[];for(a=0;a<b.length;){d=b[a];++a;for(var e=[],f=0,g=d.args;f<g.length;){var h=g[f];++f;e.push({name:h.name,type:this.ttype(h.type)})}c.push({args:e,ret:this.ttype(d.ret)})}return u.TFun(c);
case 15:b=a.size;a=this.ttype(a.t);switch(b._hx_index){case 0:c=b;break;case 1:c=hc.SVar(this.tvar(b.v))}return u.TArray(a,c);default:return a}},texpr:function(a){var b=D.map(a,K(this,this.texpr));b.t=this.ttype(a.t);a=b.e;switch(a._hx_index){case 1:a=q.TVar(this.tvar(a.v));break;case 7:var c=a.init;a=q.TVarDecl(this.tvar(a.v),c);break;case 13:var c=a.loop,d=a.it;a=q.TFor(this.tvar(a.v),d,c);break;default:a=b.e}b.e=a;return b},shader:function(a){for(var b=a.name,c=[],d=0,e=a.vars;d<e.length;){var f=
e[d];++d;c.push(this.tvar(f))}d=[];e=0;for(a=a.funs;e<a.length;)f=a[e],++e,d.push(this.tfun(f));return{name:b,vars:c,funs:d}},__class__:$g};var Xk=function(){};p["hxsl._Dce.Exit"]=Xk;Xk.__name__="hxsl._Dce.Exit";Xk.prototype={__class__:Xk};var uk=function(a){this.v=a;this.used=!1;this.deps=new oa};p["hxsl._Dce.VarDeps"]=uk;uk.__name__="hxsl._Dce.VarDeps";uk.prototype={__class__:uk};var qk=function(){};p["hxsl.Dce"]=qk;qk.__name__="hxsl.Dce";qk.prototype={debug:function(a,b){},dce:function(a,b){this.used=
new oa;this.channelVars=[];for(var c=[],d=0,e=a.vars;d<e.length;){var f=e[d];++d;var g=this.get(f);f.kind==W.Input&&c.push(g);f.kind==W.Output&&(g.keep=!0)}d=0;for(e=b.vars;d<e.length;)f=e[d],++d,g=this.get(f),f.kind==W.Output&&(g.keep=!0);d=0;for(e=a.funs;d<e.length;)f=e[d],++d,this.check(f.expr,[],[]);d=0;for(e=b.funs;d<e.length;)f=e[d],++d,this.check(f.expr,[],[]);for(d=[];;){for(d=this.used.iterator();d.hasNext();)e=d.next(),e.keep&&this.markRec(e);for(;1<c.length&&!c[c.length-1].used;)c.pop();
for(d=0;d<c.length;)e=c[d],++d,this.markRec(e);d=[];e=0;for(f=a.funs;e<f.length;)g=f[e],++e,d.push(this.mapExpr(g.expr,!1));e=0;for(f=b.funs;e<f.length;)g=f[e],++e,d.push(this.mapExpr(g.expr,!1));this.markAsKeep=!1;for(e=0;e<d.length;)f=d[e],++e,this.checkBranches(f);if(!this.markAsKeep)break}c=0;for(e=a.funs;c<e.length;)f=e[c],++c,f.expr=d.shift();c=0;for(e=b.funs;c<e.length;)f=e[c],++c,f.expr=d.shift();for(c=this.used.iterator();c.hasNext();)d=c.next(),!d.used&&d.v.kind!=W.Input&&(z.remove(a.vars,
d.v),z.remove(b.vars,d.v));return{fragment:b,vertex:a}},get:function(a){var b=this.used.h[a.id];null==b&&(b=new uk(a),this.used.h[a.id]=b);return b},markRec:function(a){if(!a.used){a.used=!0;for(a=a.deps.iterator();a.hasNext();){var b=a.next();this.markRec(b)}}},link:function(a,b){for(var c=this.get(a),d=0;d<b.length;){var e=b[d];++d;null==e?c.keep||(this.markAsKeep=c.keep=!0):e.deps.h[a.id]=c}},check:function(a,b,c){var d=a.e;switch(d._hx_index){case 1:this.link(d.v,b);break;case 4:d=d.el;a=[];for(var e=
0,f=d.length;e<f;){var g=e++;this.check(d[g],g<d.length-1?a:b,c)}break;case 5:switch(d.op._hx_index){case 4:case 20:switch(d.e1.e._hx_index){case 1:a=d.e2;d=this.get(d.e1.e.v);b.push(d);this.check(a,b,c);b.pop();0>c.indexOf(d)&&c.push(d);break;case 9:if(1==d.e1.e.e.e._hx_index)a=d.e2,d=this.get(d.e1.e.e.e.v),b.push(d),this.check(a,b,c),b.pop(),0>c.indexOf(d)&&c.push(d);else{var h=K(this,this.check);D.iter(a,function(a){h(a,b,c)})}break;default:var k=K(this,this.check);D.iter(a,function(a){k(a,b,c)})}break;
default:var l=K(this,this.check);D.iter(a,function(a){l(a,b,c)})}break;case 7:e=d.init;d=d.v;if(null!=e)b.push(this.get(d)),this.check(e,b,c),b.pop();else{var m=K(this,this.check);D.iter(a,function(a){m(a,b,c)})}break;case 8:if(2==d.e.e._hx_index)switch(d.e.e.g._hx_index){case 61:if(3==d.args.length&&1==d.args[0].e._hx_index&&0==d.args[2].e._hx_index&&2==d.args[2].e.c._hx_index)a=d.args[0].e.v,e=d.args[2].e.c.v,this.check(d.args[1],b,c),null==this.channelVars[e]?(this.channelVars[e]=a,this.link(a,
b)):this.link(this.channelVars[e],b);else{var n=K(this,this.check);D.iter(a,function(a){n(a,b,c)})}break;case 62:if(4==d.args.length&&1==d.args[0].e._hx_index&&0==d.args[3].e._hx_index&&2==d.args[3].e.c._hx_index)a=d.args[0].e.v,e=d.args[2],f=d.args[3].e.c.v,this.check(d.args[1],b,c),this.check(e,b,c),null==this.channelVars[f]?(this.channelVars[f]=a,this.link(a,b)):this.link(this.channelVars[f],b);else{var p=K(this,this.check);D.iter(a,function(a){p(a,b,c)})}break;default:var q=K(this,this.check);
D.iter(a,function(a){q(a,b,c)})}else{var r=K(this,this.check);D.iter(a,function(a){r(a,b,c)})}break;case 10:f=d.eelse;e=d.econd;a=[];this.check(d.eif,b,a);null!=f&&this.check(f,b,a);d=a.length;for(f=0;f<b.length;)g=b[f],++f,0>a.indexOf(g)&&a.push(g);this.check(e,a,c);for(e=0;e<d;)f=e++,f=a[f],0>c.indexOf(f)&&c.push(f);break;case 13:e=d.it;a=[];this.check(d.loop,b,a);this.check(e,a,c);for(d=0;d<a.length;)e=a[d],++d,0>c.indexOf(e)&&c.push(e);break;default:var s=K(this,this.check);D.iter(a,function(a){s(a,
b,c)})}},checkBranches:function(a){var b=a.e;10==b._hx_index&&this.check(b.econd,[null],[]);D.iter(a,K(this,this.checkBranches))},mapExpr:function(a,b){var c=this,d=a.e;switch(d._hx_index){case 4:for(var d=d.el,e=[],f=0,g=0;g<d.length;){var h=d[g];++g;var k=b&&f==d.length-1,h=this.mapExpr(h,k);(D.hasSideEffect(h)||k)&&e.push(h);++f}return{e:q.TBlock(e),p:a.p,t:a.t};case 5:switch(d.op._hx_index){case 4:case 20:switch(d.e1.e._hx_index){case 1:return this.get(d.e1.e.v).used?D.map(a,function(a){return c.mapExpr(a,
!0)}):{e:q.TConst(B.CNull),t:a.t,p:a.p};case 9:return 1==d.e1.e.e.e._hx_index?this.get(d.e1.e.e.e.v).used?D.map(a,function(a){return c.mapExpr(a,!0)}):{e:q.TConst(B.CNull),t:a.t,p:a.p}:D.map(a,function(a){return c.mapExpr(a,!0)});default:return D.map(a,function(a){return c.mapExpr(a,!0)})}default:return D.map(a,function(a){return c.mapExpr(a,!0)})}case 7:return this.get(d.v).used?D.map(a,function(a){return c.mapExpr(a,!0)}):{e:q.TConst(B.CNull),t:a.t,p:a.p};case 8:if(2==d.e.e._hx_index)switch(d.e.e.g._hx_index){case 61:return 3==
d.args.length&&0==d.args[2].e._hx_index&&2==d.args[2].e.c._hx_index?(e=d.args[1],d=this.channelVars[d.args[2].e.c.v],{e:q.TCall({e:q.TGlobal(G.Texture),p:a.p,t:u.TVoid},[{e:q.TVar(d),t:d.type,p:a.p},this.mapExpr(e,!0)]),t:u.TVoid,p:a.p}):D.map(a,function(a){return c.mapExpr(a,!0)});case 62:return 4==d.args.length&&0==d.args[3].e._hx_index&&2==d.args[3].e.c._hx_index?(e=d.args[1],f=d.args[2],d=this.channelVars[d.args[3].e.c.v],{e:q.TCall({e:q.TGlobal(G.TextureLod),p:a.p,t:u.TVoid},[{e:q.TVar(d),t:d.type,
p:a.p},this.mapExpr(e,!0),this.mapExpr(f,!0)]),t:u.TVoid,p:a.p}):D.map(a,function(a){return c.mapExpr(a,!0)});default:return D.map(a,function(a){return c.mapExpr(a,!0)})}else return D.map(a,function(a){return c.mapExpr(a,!0)});case 10:return e=d.eelse,f=d.eif,d=this.mapExpr(d.econd,!0),f=this.mapExpr(f,b),e=null==e?null:this.mapExpr(e,b),!b&&!D.hasSideEffect(f)&&(null==e||!D.hasSideEffect(e))?{e:q.TConst(B.CNull),t:d.t,p:d.p}:{e:q.TIf(d,f,e),p:d.p,t:d.t};case 13:return f=d.loop,e=d.v,d=this.mapExpr(d.it,
!0),f=this.mapExpr(f,!1),!D.hasSideEffect(f)?{e:q.TConst(B.CNull),t:a.t,p:a.p}:{e:q.TFor(e,d,f),p:a.p,t:a.t};default:return D.map(a,function(a){return c.mapExpr(a,!0)})}},__class__:qk};var vk=function(){this.varMap=new Ha;this.funMap=new Ha;this.constants=new oa};p["hxsl.Eval"]=vk;vk.__name__="hxsl.Eval";vk.prototype={setConstant:function(a,b){this.constants.h[a.id]=q.TConst(b)},mapVar:function(a){var b=this.varMap.h[a.__id__];if(null!=b||null!=a.parent&&(this.mapVar(a.parent),b=this.varMap.h[a.__id__],
null!=b))return a==b?b:this.mapVar(b);b={id:17==a.type._hx_index?a.id:D.allocVarId(),name:a.name,type:a.type,kind:a.kind};null!=a.parent&&(b.parent=this.mapVar(a.parent));null!=a.qualifiers&&(b.qualifiers=a.qualifiers.slice());this.varMap.set(a,b);this.varMap.set(b,b);var c=b.type;switch(c._hx_index){case 13:a=c.vl;for(var c=[],d=0;d<a.length;){var e=a[d];++d;c.push(this.mapVar(e))}b.type=u.TStruct(c);break;case 15:1==c.size._hx_index&&(a=c.t,c=c.size.v,d=this.constants.h[c.id],null!=d?null==d?wb.t("Integer value expected for array size constant "+
c.name,null):0==d._hx_index&&2==d.c._hx_index?(c=d.c.v,b.type=15==b.type._hx_index?u.TArray(a,hc.SConst(c)):u.TBuffer(a,hc.SConst(c))):wb.t("Integer value expected for array size constant "+c.name,null):(c=this.mapVar(c),b.type=15==b.type._hx_index?u.TArray(a,hc.SVar(c)):u.TBuffer(a,hc.SVar(c))));break;case 16:1==c.size._hx_index&&(a=c.t,c=c.size.v,d=this.constants.h[c.id],null!=d?null==d?wb.t("Integer value expected for array size constant "+c.name,null):0==d._hx_index&&2==d.c._hx_index?(c=d.c.v,
b.type=15==b.type._hx_index?u.TArray(a,hc.SConst(c)):u.TBuffer(a,hc.SConst(c))):wb.t("Integer value expected for array size constant "+c.name,null):(c=this.mapVar(c),b.type=15==b.type._hx_index?u.TArray(a,hc.SVar(c)):u.TBuffer(a,hc.SVar(c))))}return b},eval:function(a){for(var b=[],c=0,d=a.funs;c<d.length;){var e=d[c];++c;for(var f=e.kind,g=this.mapVar(e.ref),h=[],k=0,l=e.args;k<l.length;){var m=l[k];++k;h.push(this.mapVar(m))}f={kind:f,ref:g,args:h,ret:e.ret,expr:e.expr};(!this.inlineCalls||e.kind!=
$b.Helper)&&b.push(f);this.funMap.set(f.ref,e)}c=0;for(d=b.length;c<d;)e=c++,this.curFun=b[e],this.curFun.expr=this.evalExpr(this.curFun.expr,!1);c=a.name;d=[];e=0;for(a=a.vars;e<a.length;)f=a[e],++e,d.push(this.mapVar(f));return{name:c,vars:d,funs:b}},hasReturn:function(a){this.markReturn=!1;this.hasReturnLoop(a);return this.markReturn},hasReturnLoop:function(a){12==a.e._hx_index?this.markReturn=!0:this.markReturn||D.iter(a,K(this,this.hasReturnLoop))},handleReturn:function(a,b){null==b&&(b=!1);
var c=a.e;switch(c._hx_index){case 3:var d=this.handleReturn(c.e,b);return{e:q.TParenthesis(d),t:d.t,p:a.p};case 4:var e=c.el,c=0,f=e.length,d=[];a:for(;c<f;){var g=e[c++];if(c==f)d.push(this.handleReturn(g,b));else{var h=g.e;switch(h._hx_index){case 10:if(null==h.eelse){var k=h.econd,h=h.eif;if(b&&this.hasReturn(h)){d.push(this.handleReturn({e:q.TIf(k,h,{e:q.TBlock(e.slice(c)),t:g.t,p:g.p}),t:g.t,p:g.p}));break a}else d.push(this.handleReturn(g))}else d.push(this.handleReturn(g));break;case 12:d.push(this.handleReturn(h.e,
b));break a;default:d.push(this.handleReturn(g))}}}e=b?d[d.length-1].t:a.t;return{e:q.TBlock(d),t:e,p:a.p};case 10:return d=c.eelse,e=c.eif,c=c.econd,null!=d&&b?(c=this.handleReturn(c),e=this.handleReturn(e,b),{e:q.TIf(c,e,this.handleReturn(d,b)),t:e.t,p:a.p}):D.map(a,K(this,this.handleReturnDef));case 12:return d=c.e,b||wb.t("Cannot inline not final return",a.p),null==d?{e:q.TBlock([]),t:u.TVoid,p:a.p}:this.handleReturn(d,!0);default:return D.map(a,K(this,this.handleReturnDef))}},handleReturnDef:function(a){return this.handleReturn(a)},
evalCall:function(a,b,c,d){switch(a._hx_index){case 36:return 1==b.length&&0==b[0].e._hx_index&&2==b[0].e.c._hx_index?q.TConst(B.CFloat(b[0].e.c.v)):null;case 61:case 62:var e;e=b[0].e;if(0==e._hx_index&&2==e.c._hx_index)e=e.c.v;else throw wb.t("Cannot eval complex channel "+qa.toString(b[0],!0)+" "+this.constantsToString(),d),new n("assert");var f=c[0];c=f.e;if(1==c._hx_index)c=q.TVar(this.mapVar(c.v));else throw new n("assert");f={e:c,t:f.t,p:f.p};c=f.t;if(17==c._hx_index)c=c.size;else throw new n("assert");
for(var g=ha.createEnumIndex(jb,e&7,null),f=[f],h=1,k=b.length;h<k;){var l=h++;f.push(b[l])}f.push({e:q.TConst(B.CInt(e>>3)),t:u.TInt,p:d});b={e:q.TCall({e:q.TGlobal(a),t:u.TVoid,p:d},f),t:u.TVoid,p:d};switch(g._hx_index){case 0:return b={e:q.TConst(B.CFloat(0)),t:u.TFloat,p:d},1==c?b.e:q.TCall({e:q.TGlobal([G.Vec2,G.Vec3,G.Vec4][c-2]),t:u.TVoid,p:d},[b]);case 1:case 2:case 3:case 4:switch(c){case 1:switch(g._hx_index){case 1:d=[aa.X];break;case 2:d=[aa.Y];break;case 3:d=[aa.Z];break;case 4:d=[aa.W];
break;default:throw new n("Invalid channel value "+r.string(g)+" for "+c+" channels");}break;case 2:switch(g._hx_index){case 1:d=[aa.X,aa.Y];break;case 2:d=[aa.Y,aa.Z];break;case 3:d=[aa.Z,aa.W];break;default:throw new n("Invalid channel value "+r.string(g)+" for "+c+" channels");}break;case 3:switch(g._hx_index){case 1:d=[aa.X,aa.Y,aa.Z];break;case 2:d=[aa.Y,aa.Z,aa.W];break;default:throw new n("Invalid channel value "+r.string(g)+" for "+c+" channels");}break;default:throw new n("Invalid channel value "+
r.string(g)+" for "+c+" channels");}return q.TSwiz(b,d);case 5:return q.TCall({e:q.TGlobal(G.Unpack),t:u.TVoid,p:d},[b]);case 6:return q.TCall({e:q.TGlobal(G.UnpackNormal),t:u.TVoid,p:d},[b])}break;case 63:for(d=0;d<b.length;)a=b[d],++d,Sb.trace(qa.toString(a),{fileName:a.p.file,lineNumber:0,className:null,methodName:null});return q.TBlock([]);default:return null}},constantsToString:function(){for(var a=[],b=this.constants.keys();b.hasNext();){var c=b.next();a.push(c+" => "+qa.toString({e:this.constants.h[c],
t:u.TVoid,p:null},!0))}return a.toString()},evalExpr:function(a,b){null==b&&(b=!0);var c=this,d,e=a.e;switch(e._hx_index){case 0:case 2:d=a.e;break;case 1:var f=e.v,g=this.constants.h[f.id];if(null!=g)d=g;else{var h=this.mapVar(f);d=q.TVar(h)}break;case 3:var k=this.evalExpr(e.e,b);d=0==k.e._hx_index?k.e:q.TParenthesis(k);break;case 4:for(var l=e.el,m=[],p=l.length-1,s=0,v=l.length;s<v;){var w=s++,y=b&&w==p,z=this.evalExpr(l[w],y);switch(z.e._hx_index){case 0:case 1:y&&m.push(z);break;default:m.push(z)}}d=
1==m.length&&this.curFun.kind!=$b.Init?m[0].e:q.TBlock(m);break;case 5:var D=e.e2,E=e.op,C=this.evalExpr(e.e1),F=this.evalExpr(D);switch(E._hx_index){case 0:var H=F.e,J=C.e;if(0==J._hx_index)switch(J.c._hx_index){case 2:d=0==H._hx_index&&2==H.c._hx_index?q.TConst(B.CInt(J.c.v+H.c.v|0)):q.TBinop(E,C,F);break;case 3:d=0==H._hx_index&&3==H.c._hx_index?q.TConst(B.CFloat(J.c.v+H.c.v)):q.TBinop(E,C,F);break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 1:var I=F.e,K=C.e;if(0==K._hx_index)switch(K.c._hx_index){case 2:d=
0==I._hx_index&&2==I.c._hx_index?q.TConst(B.CInt(K.c.v*I.c.v|0)):q.TBinop(E,C,F);break;case 3:d=0==I._hx_index&&3==I.c._hx_index?q.TConst(B.CFloat(K.c.v*I.c.v)):q.TBinop(E,C,F);break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 2:var L=F.e,N=C.e;if(0==N._hx_index)switch(N.c._hx_index){case 2:d=0==L._hx_index&&2==L.c._hx_index?q.TConst(B.CInt(N.c.v/L.c.v|0)):q.TBinop(E,C,F);break;case 3:d=0==L._hx_index&&3==L.c._hx_index?q.TConst(B.CFloat(N.c.v/L.c.v)):q.TBinop(E,C,F);break;default:d=
q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 3:var M=F.e,Q=C.e;if(0==Q._hx_index)switch(Q.c._hx_index){case 2:d=0==M._hx_index&&2==M.c._hx_index?q.TConst(B.CInt(Q.c.v-M.c.v|0)):q.TBinop(E,C,F);break;case 3:d=0==M._hx_index&&3==M.c._hx_index?q.TConst(B.CFloat(Q.c.v-M.c.v)):q.TBinop(E,C,F);break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 5:var P=F.e,R=C.e;if(0==R._hx_index)switch(R.c._hx_index){case 0:d=0==P._hx_index?0==P.c._hx_index?q.TConst(B.CBool(!0)):q.TConst(B.CBool(!1)):
q.TBinop(E,C,F);break;case 1:if(0==P._hx_index)switch(P.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 1:d=q.TConst(B.CBool(0==(R.c.b==P.c.b?0:1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 2:if(0==P._hx_index)switch(P.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 2:d=q.TConst(B.CBool(0==R.c.v-P.c.v));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 3:if(0==P._hx_index)switch(P.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 3:var T=
R.c.v,U=P.c.v;d=q.TConst(B.CBool(0==(T>U?1:T==U?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 4:if(0==P._hx_index)switch(P.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 4:var V=R.c.v,X=P.c.v;d=q.TConst(B.CBool(0==(V>X?1:V==X?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 6:var S=F.e,W=C.e;if(0==W._hx_index)switch(W.c._hx_index){case 0:d=0==S._hx_index?0==S.c._hx_index?q.TConst(B.CBool(!1)):q.TConst(B.CBool(!0)):
q.TBinop(E,C,F);break;case 1:if(0==S._hx_index)switch(S.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 1:d=q.TConst(B.CBool(0!=(W.c.b==S.c.b?0:1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 2:if(0==S._hx_index)switch(S.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 2:d=q.TConst(B.CBool(0!=W.c.v-S.c.v));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 3:if(0==S._hx_index)switch(S.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 3:var Z=
W.c.v,$=S.c.v;d=q.TConst(B.CBool(0!=(Z>$?1:Z==$?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 4:if(0==S._hx_index)switch(S.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 4:var da=W.c.v,ea=S.c.v;d=q.TConst(B.CBool(0!=(da>ea?1:da==ea?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 7:var Y=F.e,A=C.e;if(0==A._hx_index)switch(A.c._hx_index){case 0:d=0==Y._hx_index?q.TConst(B.CBool(!1)):q.TBinop(E,C,F);break;case 1:if(0==
Y._hx_index)switch(Y.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 1:d=q.TConst(B.CBool(0<(A.c.b==Y.c.b?0:1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 2:if(0==Y._hx_index)switch(Y.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 2:d=q.TConst(B.CBool(0<A.c.v-Y.c.v));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 3:if(0==Y._hx_index)switch(Y.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 3:var ga=A.c.v,ha=Y.c.v;d=q.TConst(B.CBool(0<
(ga>ha?1:ga==ha?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 4:if(0==Y._hx_index)switch(Y.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 4:var ia=A.c.v,ja=Y.c.v;d=q.TConst(B.CBool(0<(ia>ja?1:ia==ja?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 8:var aa=F.e,fa=C.e;if(0==fa._hx_index)switch(fa.c._hx_index){case 0:d=0==aa._hx_index?0==aa.c._hx_index?q.TConst(B.CBool(!0)):q.TConst(B.CBool(!1)):q.TBinop(E,C,F);break;
case 1:if(0==aa._hx_index)switch(aa.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 1:d=q.TConst(B.CBool(0<=(fa.c.b==aa.c.b?0:1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 2:if(0==aa._hx_index)switch(aa.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 2:d=q.TConst(B.CBool(0<=fa.c.v-aa.c.v));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 3:if(0==aa._hx_index)switch(aa.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 3:var la=fa.c.v,ma=
aa.c.v;d=q.TConst(B.CBool(0<=(la>ma?1:la==ma?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 4:if(0==aa._hx_index)switch(aa.c._hx_index){case 0:d=q.TConst(B.CBool(!0));break;case 4:var na=fa.c.v,oa=aa.c.v;d=q.TConst(B.CBool(0<=(na>oa?1:na==oa?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 9:var ca=F.e,ka=C.e;if(0==ka._hx_index)switch(ka.c._hx_index){case 0:d=0==ca._hx_index?0==ca.c._hx_index?q.TConst(B.CBool(!1)):q.TConst(B.CBool(!0)):
q.TBinop(E,C,F);break;case 1:if(0==ca._hx_index)switch(ca.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 1:d=q.TConst(B.CBool(0>(ka.c.b==ca.c.b?0:1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 2:if(0==ca._hx_index)switch(ca.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 2:d=q.TConst(B.CBool(0>ka.c.v-ca.c.v));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 3:if(0==ca._hx_index)switch(ca.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 3:var ra=
ka.c.v,ua=ca.c.v;d=q.TConst(B.CBool(0>(ra>ua?1:ra==ua?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 4:if(0==ca._hx_index)switch(ca.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 4:var xa=ka.c.v,ya=ca.c.v;d=q.TConst(B.CBool(0>(xa>ya?1:xa==ya?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 10:var pa=F.e,sa=C.e;if(0==sa._hx_index)switch(sa.c._hx_index){case 0:d=0==pa._hx_index?q.TConst(B.CBool(!0)):q.TBinop(E,C,F);break;
case 1:if(0==pa._hx_index)switch(pa.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 1:d=q.TConst(B.CBool(0>=(sa.c.b==pa.c.b?0:1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 2:if(0==pa._hx_index)switch(pa.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 2:d=q.TConst(B.CBool(0>=sa.c.v-pa.c.v));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 3:if(0==pa._hx_index)switch(pa.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 3:var za=sa.c.v,Aa=
pa.c.v;d=q.TConst(B.CBool(0>=(za>Aa?1:za==Aa?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 4:if(0==pa._hx_index)switch(pa.c._hx_index){case 0:d=q.TConst(B.CBool(!1));break;case 4:var Ba=sa.c.v,Da=pa.c.v;d=q.TConst(B.CBool(0>=(Ba>Da?1:Ba==Da?0:-1)));break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 11:var Ca=F.e,Ea=C.e;d=0==Ea._hx_index&&2==Ea.c._hx_index&&0==Ca._hx_index&&2==Ca.c._hx_index?q.TConst(B.CInt(Ea.c.v&Ca.c.v)):q.TBinop(E,
C,F);break;case 12:var Fa=F.e,Ga=C.e;d=0==Ga._hx_index&&2==Ga.c._hx_index&&0==Fa._hx_index&&2==Fa.c._hx_index?q.TConst(B.CInt(Ga.c.v|Fa.c.v)):q.TBinop(E,C,F);break;case 13:var Ha=F.e,Ja=C.e;d=0==Ja._hx_index&&2==Ja.c._hx_index&&0==Ha._hx_index&&2==Ha.c._hx_index?q.TConst(B.CInt(Ja.c.v^Ha.c.v)):q.TBinop(E,C,F);break;case 14:var Ia=F.e,Ka=C.e;if(0==Ka._hx_index&&1==Ka.c._hx_index)if(0==Ia._hx_index&&1==Ia.c._hx_index){var Ya=Ia.c.b;d=q.TConst(B.CBool(Ka.c.b&&Ya))}else{var Wa=Ka.c.b;d=!1==Wa?q.TConst(B.CBool(Wa)):
F.e}else if(0==Ia._hx_index&&1==Ia.c._hx_index){var Za=Ia.c.b;d=!1==Za?q.TConst(B.CBool(Za)):C.e}else d=q.TBinop(E,C,F);break;case 15:var Ra=F.e,Xa=C.e;if(0==Xa._hx_index&&1==Xa.c._hx_index)if(0==Ra._hx_index&&1==Ra.c._hx_index){var eb=Ra.c.b;d=q.TConst(B.CBool(Xa.c.b||eb))}else{var La=Xa.c.b;d=!0==La?q.TConst(B.CBool(La)):F.e}else if(0==Ra._hx_index&&1==Ra.c._hx_index){var Ma=Ra.c.b;d=!0==Ma?q.TConst(B.CBool(Ma)):C.e}else d=q.TBinop(E,C,F);break;case 16:var $a=F.e,cb=C.e;d=0==cb._hx_index&&2==cb.c._hx_index&&
0==$a._hx_index&&2==$a.c._hx_index?q.TConst(B.CInt(cb.c.v<<$a.c.v)):q.TBinop(E,C,F);break;case 17:var ta=F.e,gb=C.e;d=0==gb._hx_index&&2==gb.c._hx_index&&0==ta._hx_index&&2==ta.c._hx_index?q.TConst(B.CInt(gb.c.v>>ta.c.v)):q.TBinop(E,C,F);break;case 18:var db=F.e,Na=C.e;d=0==Na._hx_index&&2==Na.c._hx_index&&0==db._hx_index&&2==db.c._hx_index?q.TConst(B.CInt(Na.c.v>>>db.c.v)):q.TBinop(E,C,F);break;case 19:var ib=F.e,bb=C.e;if(0==bb._hx_index)switch(bb.c._hx_index){case 2:d=0==ib._hx_index&&2==ib.c._hx_index?
q.TConst(B.CInt(bb.c.v%ib.c.v|0)):q.TBinop(E,C,F);break;case 3:d=0==ib._hx_index&&3==ib.c._hx_index?q.TConst(B.CFloat(bb.c.v%ib.c.v)):q.TBinop(E,C,F);break;default:d=q.TBinop(E,C,F)}else d=q.TBinop(E,C,F);break;case 4:case 20:case 21:d=q.TBinop(E,C,F);break;case 22:throw new n("assert");case 23:throw new n("assert");}break;case 6:var Sa=e.op,ab=this.evalExpr(e.e1),jb=ab.e;if(0==jb._hx_index){var va=jb.c;switch(Sa._hx_index){case 2:d=1==va._hx_index?q.TConst(B.CBool(!va.b)):q.TUnop(Sa,ab);break;case 3:switch(va._hx_index){case 2:d=
q.TConst(B.CInt(-va.v));break;case 3:d=q.TConst(B.CFloat(-va.v));break;default:d=q.TUnop(Sa,ab)}break;default:d=q.TUnop(Sa,ab)}}else d=q.TUnop(Sa,ab);break;case 7:var wa=e.init;d=q.TVarDecl(this.mapVar(e.v),null==wa?null:this.evalExpr(wa));break;case 8:for(var Oa=e.args,Qa=this.evalExpr(e.e),fb=[],mb=0;mb<Oa.length;){var Ta=Oa[mb];++mb;fb.push(this.evalExpr(Ta))}var ub=Qa.e;switch(ub._hx_index){case 1:if(this.inlineCalls){var tb=ub.v;if(null!=this.funMap.h.__keys__[tb.__id__]){for(var sb=this.funMap.h[tb.__id__],
lb=[],yb=[],vb=0,Bb=sb.args.length;vb<Bb;){var xb=vb++,Pa=[sb.args[xb]],nb=fb[xb],Cb=nb.e;switch(Cb._hx_index){case 0:yb.push(function(a,b){return function(){null==a[0]?c.constants.remove(b[0].id):c.constants.h[b[0].id]=a[0]}}([this.constants.h[Pa[0].id]],Pa));this.constants.h[Pa[0].id]=nb.e;break;case 1:switch(Cb.v.kind._hx_index){case 0:case 1:case 2:yb.push(function(a,b){return function(){null==a[0]?c.constants.remove(b[0].id):c.constants.h[b[0].id]=a[0]}}([this.constants.h[Pa[0].id]],Pa));this.constants.h[Pa[0].id]=
nb.e;break;default:var Db=[this.varMap.h[Pa[0].__id__]];null==Db[0]?yb.push(function(a){return function(){c.varMap.remove(a[0])}}(Pa)):(this.varMap.remove(Pa[0]),yb.push(function(a,b){return function(){c.varMap.set(b[0],a[0])}}(Db,Pa)));var Gb=this.mapVar(Pa[0]);lb.push({e:q.TVarDecl(Gb,nb),t:u.TVoid,p:nb.p})}break;default:var Eb=[this.varMap.h[Pa[0].__id__]];null==Eb[0]?yb.push(function(a){return function(){c.varMap.remove(a[0])}}(Pa)):(this.varMap.remove(Pa[0]),yb.push(function(a,b){return function(){c.varMap.set(b[0],
a[0])}}(Eb,Pa)));var Ib=this.mapVar(Pa[0]);lb.push({e:q.TVarDecl(Ib,nb),t:u.TVoid,p:nb.p})}}for(var Hb=this.handleReturn(this.evalExpr(sb.expr,!1),!0),Fb=0;Fb<yb.length;){var Sb=yb[Fb];++Fb;Sb()}var Ob=Hb.e;if(4==Ob._hx_index)for(var zb=Ob.el,Mb=0;Mb<zb.length;){var Wb=zb[Mb];++Mb;lb.push(Wb)}else lb.push(Hb);d=q.TBlock(lb)}else d=wb.t("Cannot eval non-static call expresssion '"+(new qa).exprString(Qa)+"'",Qa.p)}else d=q.TCall(Qa,fb);break;case 2:var Pb=this.evalCall(ub.g,fb,Oa,a.p);d=null!=Pb?Pb:
q.TCall(Qa,fb);break;default:d=wb.t("Cannot eval non-static call expresssion '"+(new qa).exprString(Qa)+"'",Qa.p)}break;case 9:var Xb=e.regs;d=q.TSwiz(this.evalExpr(e.e),Xb.slice());break;case 10:var Ab=e.eelse,Jb=e.eif,Kb=this.evalExpr(e.econd),Nb=Kb.e;if(0==Nb._hx_index&&1==Nb.c._hx_index)d=Nb.c.b?this.evalExpr(Jb,b).e:null==Ab?q.TConst(B.CNull):this.evalExpr(Ab,b).e;else if(b&&null!=Ab&&this.eliminateConditionals)d=q.TCall({e:q.TGlobal(G.Mix),t:a.t,p:a.p},[this.evalExpr(Ab,!0),this.evalExpr(Jb,
!0),{e:q.TCall({e:q.TGlobal(G.ToFloat),t:u.TFun([]),p:Kb.p},[Kb]),t:u.TFloat,p:a.p}]);else{Jb=this.evalExpr(Jb,b);if(null!=Ab){var Ab=this.evalExpr(Ab,b),Rb=Ab.e;0==Rb._hx_index&&0==Rb.c._hx_index&&(Ab=null)}d=q.TIf(Kb,Jb,Ab)}break;case 11:d=q.TDiscard;break;case 12:var Ub=e.e;d=q.TReturn(null==Ub?null:this.evalExpr(Ub));break;case 13:var Qb=e.loop,bc=e.it,ec=e.v,ac=this.mapVar(ec),Yb=this.evalExpr(bc),Tb,Zb=Yb.e;if(5==Zb._hx_index&&21==Zb.op._hx_index&&0==Zb.e1.e._hx_index&&2==Zb.e1.e.c._hx_index&&
0==Zb.e2.e._hx_index&&2==Zb.e2.e.c._hx_index){var cc=Zb.e1.e.c.v,dc=Zb.e2.e.c.v;if(this.unrollLoops){for(var gc=[],hc=cc;hc<dc;){var kc=hc++;this.constants.h[ec.id]=q.TConst(B.CInt(kc));gc.push(this.evalExpr(Qb,!1))}this.constants.remove(ec.id);Tb=q.TBlock(gc)}else Tb=q.TFor(ac,Yb,this.evalExpr(Qb,!1))}else Tb=q.TFor(ac,Yb,this.evalExpr(Qb,!1));this.varMap.remove(ec);d=Tb;break;case 14:d=q.TContinue;break;case 15:d=q.TBreak;break;case 16:var mc=e.index,fc=this.evalExpr(e.e),jc=this.evalExpr(mc),lc=
jc.e,rc=fc.e;if(17==rc._hx_index&&0==lc._hx_index&&2==lc.c._hx_index){var Ua=rc.el,qc=lc.c.v;d=0<=qc&&qc<Ua.length?Ua[qc].e:q.TArray(fc,jc)}else d=q.TArray(fc,jc);break;case 17:for(var Ac=e.el,Bc=[],wc=0;wc<Ac.length;){var Mc=Ac[wc];++wc;Bc.push(this.evalExpr(Mc))}d=q.TArrayDecl(Bc);break;case 18:for(var Dc=e.def,Ec=e.cases,Fc=this.evalExpr(e.e),oc=[],sc=0;sc<Ec.length;){var Gc=Ec[sc];++sc;for(var Hc=[],tc=0,Ic=Gc.values;tc<Ic.length;){var Nc=Ic[tc];++tc;Hc.push(this.evalExpr(Nc))}oc.push({values:Hc,
expr:this.evalExpr(Gc.expr,b)})}var uc=null==Dc?null:this.evalExpr(Dc,b),vc=!1,Jc=Fc.e;if(0==Jc._hx_index){var yc=Jc.c;if(2==yc._hx_index)for(var Va=yc.v,pc=0;pc<oc.length;){var xc=oc[pc];++pc;for(var zc=0,Wc=xc.values;zc<Wc.length;){var Qc=Wc[zc];++zc;var Kc=Qc.e;if(0==Kc._hx_index){var Cc=Kc.c;switch(Cc._hx_index){case 2:if(Cc.v==Va)return xc.expr;break;case 3:if(Cc.v==Va)return xc.expr}}else vc=!0}}else throw new n("Unsupported switch constant "+r.string(yc));}else vc=!0;d=vc?q.TSwitch(Fc,oc,uc):
null==uc?q.TBlock([]):uc.e;break;case 19:var Rc=e.normalWhile,Sc=e.loop,Tc=this.evalExpr(e.e),Uc=this.evalExpr(Sc,!1);d=q.TWhile(Tc,Uc,Rc);break;case 20:var Oc=e.e,Xc=e.args,Pc=e.m,Lc;"unroll"==Pc?(this.unrollLoops=!0,Lc=this.evalExpr(Oc,b),this.unrollLoops=!1):Lc=this.evalExpr(Oc,b);d=q.TMeta(Pc,Xc,Lc)}return{e:d,t:a.t,p:a.p}},__class__:vk};var Ke=function(a,b,c,d){this.g=a;this.t=b;this.pos=c;this.size=d};p["hxsl._Flatten.Alloc"]=Ke;Ke.__name__="hxsl._Flatten.Alloc";Ke.prototype={__class__:Ke};
var Yk=M["hxsl.ARead"]={__ename__:!0,__constructs__:["AIndex","AOffset"],AIndex:(s=function(a){return{_hx_index:0,a:a,__enum__:"hxsl.ARead",toString:m}},s.__params__=["a"],s),AOffset:(s=function(a,b,c){return{_hx_index:1,a:a,stride:b,delta:c,__enum__:"hxsl.ARead",toString:m}},s.__params__=["a","stride","delta"],s)};Yk.__empty_constructs__=[];var sk=function(){};p["hxsl.Flatten"]=sk;sk.__name__="hxsl.Flatten";sk.prototype={flatten:function(a,b,c){this.globals=[];this.params=[];this.outVars=[];if(c){this.consts=
[];c=a.funs[0].expr.p;var d={id:D.allocVarId(),name:"__consts__",kind:W.Global,type:null};this.econsts={e:q.TVar(d),t:null,p:c};var e=a.name,f=a.vars.slice(),g=[],h=0;for(a=a.funs;h<a.length;){var k=a[h];++h;g.push(this.mapFun(k,K(this,this.mapConsts)))}a={name:e,vars:f,funs:g};e=0;for(f=a.vars;e<f.length;)g=f[e],++e,9==g.type._hx_index&&this.allocConst(255,c);0<this.consts.length&&(d.type=this.econsts.t=u.TArray(u.TFloat,hc.SConst(this.consts.length)),a.vars.push(d))}this.varMap=new Ha;this.allocData=
new Ha;c=0;for(d=a.vars;c<d.length;)e=d[c],++c,this.gatherVar(e);switch(b._hx_index){case 0:b="vertex";break;case 1:b="fragment";break;default:throw new n("assert");}this.pack(b+"Globals",W.Global,this.globals,Fb.VFloat);this.pack(b+"Params",W.Param,this.params,Fb.VFloat);c=this.globals.concat(this.params);b=this.packTextures(b+"Textures",c,u.TSampler2D).concat(this.packTextures(b+"TexturesCube",c,u.TSamplerCube)).concat(this.packTextures(b+"TexturesArray",c,u.TSampler2DArray));this.packBuffers(c);
c=[];d=0;for(e=a.funs;d<e.length;)f=e[d],++d,c.push(this.mapFun(f,K(this,this.mapExpr)));for(d=0;d<b.length;)e=b[d],++d,e.pos>>=2;return{name:a.name,vars:this.outVars,funs:c}},mapFun:function(a,b){return{kind:a.kind,ret:a.ret,args:a.args,ref:a.ref,expr:b(a.expr)}},mapExpr:function(a){var b=a.e;switch(b._hx_index){case 1:var c=b.v,d=this.varMap.h[c.__id__];a=null==d?a:this.access(d,c.type,a.p,Yk.AIndex(d));break;case 16:if(1==b.e.e._hx_index){var d=b.index,c=b.e.p,e=b.e.e.v,b=d.e;if(0==b._hx_index&&
2==b.c._hx_index)a=D.map(a,K(this,this.mapExpr));else if(b=this.varMap.h[e.__id__],null!=b)if(e=e.type,15==e._hx_index){var e=e.t,f=this.varSize(e,b.t);if(0==f||0!=(f&3))throw new n(new wb("Dynamic access to an Array which size is not 4 components-aligned is not allowed",a.p));f>>=2;d=this.mapExpr(d);a={e:q.TCall({e:q.TGlobal(G.ToInt),t:u.TFun([]),p:c},[d]),t:u.TInt,p:c};a=this.access(b,e,c,Yk.AOffset(b,f,1==f?a:{e:q.TBinop(fa.OpMult,a,{e:q.TConst(B.CInt(f)),t:u.TInt,p:c}),t:u.TInt,p:c}))}else throw new n("assert");
}else a=D.map(a,K(this,this.mapExpr));break;default:a=D.map(a,K(this,this.mapExpr))}return this.optimize(a)},mapConsts:function(a){var b=a.e;switch(b._hx_index){case 0:switch(b=b.c,b._hx_index){case 2:return this.allocConst(b.v,a.p);case 3:return this.allocConst(b.v,a.p);default:return a}case 2:switch(b.g._hx_index){case 0:this.allocConst(Math.PI/180,a.p);break;case 1:this.allocConst(180/Math.PI,a.p);break;case 9:this.allocConst(1.4426950408889634,a.p);break;case 10:this.allocConst(0.6931471805599453,
a.p);break;case 24:this.allocConst(1,a.p);break;case 26:this.allocConst(2,a.p);this.allocConst(3,a.p);break;case 52:this.allocConsts([1,255,65025,16581375],a.p);this.allocConsts([0.00392156862745098,0.00392156862745098,0.00392156862745098,0],a.p);break;case 53:this.allocConsts([1,0.00392156862745098,1.5378700499807768E-5,6.030862941101084E-8],a.p);break;case 54:this.allocConst(1,a.p);this.allocConst(0.5,a.p);break;case 55:this.allocConst(0.5,a.p);break;case 56:this.allocConsts([0.5,0.5],a.p);this.allocConsts([0.5,
-0.5],a.p);break;case 57:this.allocConsts([2,-2],a.p),this.allocConsts([-1,1],a.p)}break;case 5:1==b.op._hx_index&&8==b.e2.t._hx_index&&this.allocConst(1,a.p);break;case 8:if(2==b.e.e._hx_index&&40==b.e.e.g._hx_index&&2==b.args.length&&1==b.args[0].e._hx_index)switch(b.args[0].e.v.kind._hx_index){case 0:case 1:case 2:case 3:if(5==b.args[0].t._hx_index&&3==b.args[0].t.size&&1==b.args[0].t.t._hx_index&&0==b.args[1].e._hx_index&&2==b.args[1].e.c._hx_index&&1==b.args[1].e.c.v)return a}break;case 16:if(0==
b.index.e._hx_index&&2==b.index.e.c._hx_index){var c=b.index;return{e:q.TArray(this.mapConsts(b.e),c),t:a.t,p:a.p}}b=b.e.t;15==b._hx_index&&(b=this.varSize(b.t,Fb.VFloat)>>2,this.allocConst(b,a.p))}return D.map(a,K(this,this.mapConsts))},allocConst:function(a,b){var c=this.consts.indexOf(a);0>c&&(c=this.consts.length,this.consts.push(a));return{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(c)),t:u.TInt,p:b}),t:u.TFloat,p:b}},allocConsts:function(a,b){for(var c=a.length-1&3,d=-1,e=0,f=this.consts.length-
(a.length-1);e<f;){var g=e++;if(g>>2==g+c>>2){for(var h=!0,k=0,l=a.length;k<l;){var m=k++;if(this.consts[g+m]!=a[m]){h=!1;break}}if(h){d=g;break}}}if(0>d){for(;this.consts.length>>2!=this.consts.length+c>>2;)this.consts.push(0);d=this.consts.length;for(c=0;c<a.length;)e=a[c],++c,this.consts.push(e)}switch(a.length){case 1:return{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d)),t:u.TInt,p:b}),t:u.TFloat,p:b};case 2:return{e:q.TCall({e:q.TGlobal(G.Vec2),t:u.TVoid,p:b},[{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d)),
t:u.TInt,p:b}),t:u.TFloat,p:b},{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d+1)),t:u.TInt,p:b}),t:u.TFloat,p:b}]),t:u.TVec(2,Fb.VFloat),p:b};case 3:return{e:q.TCall({e:q.TGlobal(G.Vec3),t:u.TVoid,p:b},[{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d)),t:u.TInt,p:b}),t:u.TFloat,p:b},{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d+1)),t:u.TInt,p:b}),t:u.TFloat,p:b},{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d+2)),t:u.TInt,p:b}),t:u.TFloat,p:b}]),t:u.TVec(3,Fb.VFloat),p:b};case 4:return{e:q.TCall({e:q.TGlobal(G.Vec4),
t:u.TVoid,p:b},[{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d)),t:u.TInt,p:b}),t:u.TFloat,p:b},{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d+1)),t:u.TInt,p:b}),t:u.TFloat,p:b},{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d+3)),t:u.TInt,p:b}),t:u.TFloat,p:b},{e:q.TArray(this.econsts,{e:q.TConst(B.CInt(d+4)),t:u.TInt,p:b}),t:u.TFloat,p:b}]),t:u.TVec(4,Fb.VFloat),p:b};default:throw new n("assert");}},mkInt:function(a,b){return{e:q.TConst(B.CInt(a)),t:u.TInt,p:b}},readIndex:function(a,b,c){return{e:q.TArray({e:q.TVar(a.g),
t:a.g.type,p:c},{e:q.TConst(B.CInt((a.pos>>2)+b)),t:u.TInt,p:c}),t:u.TVec(4,a.t),p:c}},readOffset:function(a,b,c,d,e){b=(a.pos>>2)+d;c=0==b?c:{e:q.TBinop(fa.OpAdd,c,{e:q.TConst(B.CInt(b)),t:u.TInt,p:e}),t:u.TInt,p:e};return{e:q.TArray({e:q.TVar(a.g),t:a.g.type,p:e},c),t:u.TVec(4,a.t),p:e}},access:function(a,b,c,d){switch(b._hx_index){case 6:return d=this.access(a,u.TMat3x4,c,d),{e:q.TCall({e:q.TGlobal(G.Mat3),t:u.TFun([]),p:c},[d]),t:u.TMat3,p:c};case 7:b=q.TGlobal(G.Mat4);a=u.TFun([]);var e;switch(d._hx_index){case 0:e=
d.a;e={e:q.TArray({e:q.TVar(e.g),t:e.g.type,p:c},{e:q.TConst(B.CInt(e.pos>>2)),t:u.TInt,p:c}),t:u.TVec(4,e.t),p:c};break;case 1:var f=d.delta;e=d.a;var g=e.pos>>2,f=0==g?f:{e:q.TBinop(fa.OpAdd,f,{e:q.TConst(B.CInt(g)),t:u.TInt,p:c}),t:u.TInt,p:c};e={e:q.TArray({e:q.TVar(e.g),t:e.g.type,p:c},f),t:u.TVec(4,e.t),p:c}}var h;switch(d._hx_index){case 0:h=d.a;h={e:q.TArray({e:q.TVar(h.g),t:h.g.type,p:c},{e:q.TConst(B.CInt((h.pos>>2)+1)),t:u.TInt,p:c}),t:u.TVec(4,h.t),p:c};break;case 1:f=d.delta,h=d.a,g=
(h.pos>>2)+1,f=0==g?f:{e:q.TBinop(fa.OpAdd,f,{e:q.TConst(B.CInt(g)),t:u.TInt,p:c}),t:u.TInt,p:c},h={e:q.TArray({e:q.TVar(h.g),t:h.g.type,p:c},f),t:u.TVec(4,h.t),p:c}}var k;switch(d._hx_index){case 0:k=d.a;k={e:q.TArray({e:q.TVar(k.g),t:k.g.type,p:c},{e:q.TConst(B.CInt((k.pos>>2)+2)),t:u.TInt,p:c}),t:u.TVec(4,k.t),p:c};break;case 1:f=d.delta,k=d.a,g=(k.pos>>2)+2,f=0==g?f:{e:q.TBinop(fa.OpAdd,f,{e:q.TConst(B.CInt(g)),t:u.TInt,p:c}),t:u.TInt,p:c},k={e:q.TArray({e:q.TVar(k.g),t:k.g.type,p:c},f),t:u.TVec(4,
k.t),p:c}}var l;switch(d._hx_index){case 0:d=d.a;l={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},{e:q.TConst(B.CInt((d.pos>>2)+3)),t:u.TInt,p:c}),t:u.TVec(4,d.t),p:c};break;case 1:l=d.delta,d=d.a,f=(d.pos>>2)+3,l=0==f?l:{e:q.TBinop(fa.OpAdd,l,{e:q.TConst(B.CInt(f)),t:u.TInt,p:c}),t:u.TInt,p:c},l={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},l),t:u.TVec(4,d.t),p:c}}return{e:q.TCall({e:b,t:a,p:c},[e,h,k,l]),t:u.TMat4,p:c};case 8:b=q.TGlobal(G.Mat3x4);a=u.TFun([]);switch(d._hx_index){case 0:e=d.a;f={e:q.TArray({e:q.TVar(e.g),
t:e.g.type,p:c},{e:q.TConst(B.CInt(e.pos>>2)),t:u.TInt,p:c}),t:u.TVec(4,e.t),p:c};break;case 1:h=d.delta,e=d.a,k=e.pos>>2,h=0==k?h:{e:q.TBinop(fa.OpAdd,h,{e:q.TConst(B.CInt(k)),t:u.TInt,p:c}),t:u.TInt,p:c},f={e:q.TArray({e:q.TVar(e.g),t:e.g.type,p:c},h),t:u.TVec(4,e.t),p:c}}switch(d._hx_index){case 0:e=d.a;g={e:q.TArray({e:q.TVar(e.g),t:e.g.type,p:c},{e:q.TConst(B.CInt((e.pos>>2)+1)),t:u.TInt,p:c}),t:u.TVec(4,e.t),p:c};break;case 1:h=d.delta,e=d.a,k=(e.pos>>2)+1,h=0==k?h:{e:q.TBinop(fa.OpAdd,h,{e:q.TConst(B.CInt(k)),
t:u.TInt,p:c}),t:u.TInt,p:c},g={e:q.TArray({e:q.TVar(e.g),t:e.g.type,p:c},h),t:u.TVec(4,e.t),p:c}}var m;switch(d._hx_index){case 0:d=d.a;m={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},{e:q.TConst(B.CInt((d.pos>>2)+2)),t:u.TInt,p:c}),t:u.TVec(4,d.t),p:c};break;case 1:e=d.delta,d=d.a,h=(d.pos>>2)+2,e=0==h?e:{e:q.TBinop(fa.OpAdd,e,{e:q.TConst(B.CInt(h)),t:u.TInt,p:c}),t:u.TInt,p:c},m={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},e),t:u.TVec(4,d.t),p:c}}return{e:q.TCall({e:b,t:a,p:c},[f,g,m]),t:u.TMat3x4,
p:c};case 15:if(0==b.size._hx_index){d=b.t;b=b.size.v;e=a.size/b|0;h=[];for(k=0;k<b;)l=k++,l=new Ke(a.g,a.t,a.pos+e*l,e),h.push(this.access(l,d,c,Yk.AIndex(l)));return{e:q.TArrayDecl(h),t:d,p:c}}if(D.isSampler(b)){var p;switch(d._hx_index){case 0:d=d.a;p={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},{e:q.TConst(B.CInt(d.pos>>2)),t:u.TInt,p:c}),t:u.TVec(4,d.t),p:c};break;case 1:a=d.delta,d=d.a,e=d.pos>>2,a=0==e?a:{e:q.TBinop(fa.OpAdd,a,{e:q.TConst(B.CInt(e)),t:u.TInt,p:c}),t:u.TInt,p:c},p={e:q.TArray({e:q.TVar(d.g),
t:d.g.type,p:c},a),t:u.TVec(4,d.t),p:c}}p.t=b;return p}e=this.varSize(b,a.t);if(4<e)return wb.t("Access not supported for "+D.toString(b),null);var r;switch(d._hx_index){case 0:d=d.a;r={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},{e:q.TConst(B.CInt(d.pos>>2)),t:u.TInt,p:c}),t:u.TVec(4,d.t),p:c};break;case 1:h=d.delta,d=d.a,k=d.pos>>2,h=0==k?h:{e:q.TBinop(fa.OpAdd,h,{e:q.TConst(B.CInt(k)),t:u.TInt,p:c}),t:u.TInt,p:c},r={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},h),t:u.TVec(4,d.t),p:c}}if(4==e){if(0!=
(a.pos&3))throw new n("assert");}else{d=[];for(h=0;h<e;)k=h++,d.push(D.SWIZ[k+(a.pos&3)]);r={e:q.TSwiz(r,d),t:b,p:c}}switch(b._hx_index){case 1:r.t=u.TFloat;r={e:q.TCall({e:q.TGlobal(G.ToInt),t:u.TFun([]),p:c},[r]),t:b,p:c};break;case 5:0==b.t._hx_index&&(d=b.size,r.t=u.TVec(d,Fb.VFloat),r={e:q.TCall({e:q.TGlobal([G.IVec2,G.IVec3,G.IVec4][d-2]),t:u.TFun([]),p:c},[r]),t:b,p:c})}return r;default:if(D.isSampler(b)){var s;switch(d._hx_index){case 0:d=d.a;s={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},{e:q.TConst(B.CInt(d.pos>>
2)),t:u.TInt,p:c}),t:u.TVec(4,d.t),p:c};break;case 1:a=d.delta,d=d.a,e=d.pos>>2,a=0==e?a:{e:q.TBinop(fa.OpAdd,a,{e:q.TConst(B.CInt(e)),t:u.TInt,p:c}),t:u.TInt,p:c},s={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},a),t:u.TVec(4,d.t),p:c}}s.t=b;return s}e=this.varSize(b,a.t);if(4<e)return wb.t("Access not supported for "+D.toString(b),null);var v;switch(d._hx_index){case 0:d=d.a;v={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},{e:q.TConst(B.CInt(d.pos>>2)),t:u.TInt,p:c}),t:u.TVec(4,d.t),p:c};break;case 1:h=
d.delta,d=d.a,k=d.pos>>2,h=0==k?h:{e:q.TBinop(fa.OpAdd,h,{e:q.TConst(B.CInt(k)),t:u.TInt,p:c}),t:u.TInt,p:c},v={e:q.TArray({e:q.TVar(d.g),t:d.g.type,p:c},h),t:u.TVec(4,d.t),p:c}}if(4==e){if(0!=(a.pos&3))throw new n("assert");}else{d=[];for(h=0;h<e;)k=h++,d.push(D.SWIZ[k+(a.pos&3)]);v={e:q.TSwiz(v,d),t:b,p:c}}switch(b._hx_index){case 1:v.t=u.TFloat;v={e:q.TCall({e:q.TGlobal(G.ToInt),t:u.TFun([]),p:c},[v]),t:b,p:c};break;case 5:0==b.t._hx_index&&(d=b.size,v.t=u.TVec(d,Fb.VFloat),v={e:q.TCall({e:q.TGlobal([G.IVec2,
G.IVec3,G.IVec4][d-2]),t:u.TFun([]),p:c},[v]),t:b,p:c})}return v}},optimize:function(a){var b=a.e;switch(b._hx_index){case 8:if(2==b.e.e._hx_index&&50==b.e.e.g._hx_index&&1==b.args.length&&8==b.args[0].e._hx_index&&2==b.args[0].e.e.e._hx_index&&49==b.args[0].e.e.e.g._hx_index){for(var c=b.args[0].e.args,d=b=0;4>d;)d+=this.varSize(c[c.length-1-b].t,Fb.VFloat),++b;if(4==d){for(d=0;d<b;)d++,c.pop();b=a.e;if(8==b._hx_index)b=b.e;else throw new n("assert");return{e:q.TCall(b,c),t:a.t,p:a.p}}}break;case 16:if(17==
b.e.e._hx_index&&0==b.index.e._hx_index&&2==b.index.e.c._hx_index){c=b.e.e.el;b=b.index.e.c.v;if(0<=b&&b<c.length)return c[b];wb.t("Reading outside array bounds",a.p)}}return a},packTextures:function(a,b,c){var d=[];a={id:D.allocVarId(),name:a,type:c,kind:W.Param};for(var e=0;e<b.length;){var f=b[e];++e;if(f.type==c||c==u.TSampler2D&&17==f.type._hx_index){var g=new Ke(a,null,d.length<<2,1);g.v=f;this.varMap.set(f,g);d.push(g)}}a.type=u.TArray(c,hc.SConst(d.length));0<d.length&&(this.outVars.push(a),
this.allocData.set(a,d));return d},packBuffers:function(a){for(var b=[],c={id:D.allocVarId(),name:"buffers",type:u.TVoid,kind:W.Param},d=0;d<a.length;){var e=a[d];++d;if(16==e.type._hx_index){var f=new Ke(c,null,b.length,1);f.v=e;b.push(f);this.outVars.push(e)}}c.type=u.TArray(u.TBuffer(u.TVoid,hc.SConst(0)),hc.SConst(b.length));this.allocData.set(c,b)},pack:function(a,b,c,d){var e=[],f=0;a={id:D.allocVarId(),name:a,type:u.TVec(0,d),kind:b};for(b=0;b<c.length;){var g=c[b];++b;if(!(D.isSampler(g.type)||
16==g.type._hx_index)){for(var h=this.varSize(g.type,d),k=null,l=0;l<e.length;){var m=e[l];++l;if(null==m.v&&m.size>=h&&(null==k||k.size>m.size))k=m}null!=k?(m=k.size-h,0<m&&(l=e.indexOf(k),m=new Ke(a,d,k.pos+h,m),e.splice(l+1,0,m),k.size=h),k.v=g,this.varMap.set(g,k)):(k=new Ke(a,d,f,h),f+=h,k.v=g,this.varMap.set(g,k),e.push(k),g=(4-h%4)%4,0<g&&(h=new Ke(a,d,f,g),f+=g,e.push(h)))}}a.type=u.TArray(u.TVec(4,d),hc.SConst(f>>2));0<f&&(this.outVars.push(a),this.allocData.set(a,e));return a},varSize:function(a,
b){switch(a._hx_index){case 1:case 3:if(b==Fb.VFloat)return 1;throw new n(D.toString(a)+" size unknown for type "+r.string(b));case 5:var c=a.size;if(b==a.t)return c;throw new n(D.toString(a)+" size unknown for type "+r.string(b));case 7:if(b==Fb.VFloat)return 16;throw new n(D.toString(a)+" size unknown for type "+r.string(b));case 6:case 8:if(b==Fb.VFloat)return 12;throw new n(D.toString(a)+" size unknown for type "+r.string(b));case 15:if(0==a.size._hx_index)return c=a.size.v,this.varSize(a.t,b)*
c;throw new n(D.toString(a)+" size unknown for type "+r.string(b));default:throw new n(D.toString(a)+" size unknown for type "+r.string(b));}},gatherVar:function(a){var b=a.type;if(13==b._hx_index){a=b.vl;for(b=0;b<a.length;){var c=a[b];++b;this.gatherVar(c)}}else switch(a.kind._hx_index){case 0:D.hasQualifier(a,oc.PerObject)?this.params.push(a):this.globals.push(a);break;case 2:this.params.push(a);break;default:this.outVars.push(a)}},__class__:sk};var Bi={};p["hxsl._Globals.GlobalSlot_Impl_"]=Bi;
Bi.__name__="hxsl._Globals.GlobalSlot_Impl_";Bi._new=function(a){return Y.allocID(a)};Bi.toInt=function(a){return a};Bi.set=function(a,b,c){b.map.h[a]=c};Bi.get=function(a,b){return b.map.h[a]};var Y=function(){this.channels=[];this.map=new oa};p["hxsl.Globals"]=Y;Y.__name__="hxsl.Globals";Y.allocID=function(a){null==Y.MAP&&(Y.MAP=new ia,Y.ALL=[]);var b=Y.MAP,b=null!=L[a]?b.getReserved(a):b.h[a];if(null==b){b=Y.ALL.length;Y.ALL.push(a);var c=Y.MAP;null!=L[a]?c.setReserved(a,b):c.h[a]=b}return b};
Y.getIDName=function(a){return Y.ALL[a]};Y.prototype={set:function(a,b){var c=this.map,d=Y.allocID(a);c.h[d]=b},get:function(a){var b=this.map;a=Y.allocID(a);return b.h[a]},fastSet:function(a,b){this.map.h[a]=b},fastGet:function(a){return this.map.h[a]},resetChannels:function(){this.maxChannels=0},allocChannelID:function(a){for(var b=0,c=this.maxChannels;b<c;){var d=b++;if(this.channels[d]==a)return d}if(this.maxChannels==1<<D.MAX_CHANNELS_BITS)throw new n("Too many unique channels");b=this.maxChannels++;
this.channels[b]=a;return b},__class__:Y};var Ba=function(){};p["js.Boot"]=Ba;Ba.__name__="js.Boot";Ba.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=Ba.__nativeClassName(a);return null!=a?Ba.__resolveNativeClass(a):null};Ba.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "function":return"<function>";case "object":if(a.__enum__){var d=
M[a.__enum__],c=d.__constructs__[a._hx_index],e=d[c];if(e.__params__){b+="\t";for(var c=c+"(",d=[],f=0,e=e.__params__;f<e.length;){var g=e[f];++f;d.push(Ba.__string_rec(a[g],b))}return c+d.join(",")+")"}return c}if(a instanceof Array){c=a.length;d="[";b+="\t";for(f=0;f<c;)e=f++,d+=(0<e?",":"")+Ba.__string_rec(a[e],b);return d+"]"}try{d=a.toString}catch(h){return"???"}if(null!=d&&(d!=Object.toString&&"function"==typeof d)&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";f=null!=
a.hasOwnProperty;for(c in a)if(!f||a.hasOwnProperty(c))"prototype"==c||("__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c)||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+Ba.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "string":return a;default:return String(a)}};Ba.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;if(Object.prototype.hasOwnProperty.call(a,"__interfaces__"))for(var c=a.__interfaces__,d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||
Ba.__interfLoop(f,b))return!0}return Ba.__interfLoop(a.__super__,b)};Ba.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array;case sl:return"boolean"==typeof a;case tl:return null!=a;case ul:return"number"==typeof a;case vl:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||Ba.__interfLoop(Ba.getClass(a),b))return!0}else{if("object"==typeof b&&Ba.__isNativeObj(b)&&a instanceof
b)return!0}else return!1;return b==wl&&null!=a.__name__||b==xl&&null!=a.__ename__?!0:null!=a.__enum__?M[a.__enum__]==b:!1}};Ba.__cast=function(a,b){if(null==a||Ba.__instanceof(a,b))return a;throw new n("Cannot cast "+r.string(a)+" to "+r.string(b));};Ba.__nativeClassName=function(a){a=Ba.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};Ba.__isNativeObj=function(a){return null!=Ba.__nativeClassName(a)};Ba.__resolveNativeClass=function(a){return pl[a]};var fb=
function(){this.exprIds=this.uniformBuffer=this.outIndex=0;this.varNames=new oa;this.allNames=new ia};p["hxsl.GlslOut"]=fb;fb.__name__="hxsl.GlslOut";fb.compile=function(a){var b=new fb;b.glES=1;b.version=100;return b.run(a)};fb.prototype={get_isES:function(){return null!=this.glES},get_isES2:function(){return null!=this.glES?2>=this.glES:!1},add:function(a){this.buf.b+=r.string(a)},ident:function(a){a=this.varName(a);this.buf.b+=r.string(a)},decl:function(a){for(var b=0,c=this.decls;b<c.length;){var d=
c[b];++b;if(d==a)return}35==z.cca(a,0)?this.decls.unshift(a):this.decls.push(a)},addType:function(a){switch(a._hx_index){case 0:this.buf.b+=r.string("void");break;case 1:this.buf.b+=r.string("int");break;case 2:this.buf.b+=r.string("bool");break;case 3:this.buf.b+=r.string("float");break;case 4:this.buf.b+=r.string("string");break;case 5:var b=a.size;switch(a.t._hx_index){case 0:this.buf.b+=r.string("i");break;case 2:this.buf.b+=r.string("b")}this.buf.b+=r.string("vec");this.buf.b+=r.string(b);break;
case 6:this.buf.b+=r.string("mat3");break;case 7:this.buf.b+=r.string("mat4");break;case 8:this.decl(fb.MAT34);this.buf.b+=r.string("_mat3x4");break;case 9:a=a.size;this.buf.b+=r.string("vec");this.buf.b+=r.string(a);break;case 10:this.buf.b+=r.string("sampler2D");break;case 11:this.buf.b+=r.string("sampler2DArray");null!=this.glES&&this.decl("precision lowp sampler2DArray;");break;case 12:this.buf.b+=r.string("samplerCube");break;case 13:a=a.vl;this.buf.b+=r.string("struct { ");for(b=0;b<a.length;){var c=
a[b];++b;this.addVar(c);this.buf.b+=r.string(";")}this.buf.b+=r.string(" }");break;case 14:this.buf.b+=r.string("function");break;case 15:b=a.size;this.addType(a.t);this.buf.b+=r.string("[");switch(b._hx_index){case 0:this.buf.b=1==b.v&&this.intelDriverFix?this.buf.b+r.string(2):this.buf.b+r.string(b.v);break;case 1:a=this.varName(b.v),this.buf.b+=r.string(a)}this.buf.b+=r.string("]");break;case 16:throw new n("assert");case 17:this.buf.b+=r.string("channel"+a.size)}},addVar:function(a){var b=a.type;
switch(b._hx_index){case 15:var c=b.size,d=a.type;a.type=b.t;this.addVar(a);a.type=d;this.buf.b+=r.string("[");switch(c._hx_index){case 0:this.buf.b=1==c.v&&this.intelDriverFix?this.buf.b+r.string(2):this.buf.b+r.string(c.v);break;case 1:a=this.varName(c.v),this.buf.b+=r.string(a)}this.buf.b+=r.string("]");break;case 16:c=b.size;b=b.t;this.buf.b+=r.string("uniform_buffer"+this.uniformBuffer++);this.buf.b+=r.string(" { ");a.type=u.TArray(b,c);this.addVar(a);a.type=u.TBuffer(b,c);this.buf.b+=r.string("; }");
break;default:this.addType(a.type),this.buf.b+=r.string(" "),a=this.varName(a),this.buf.b+=r.string(a)}},addValue:function(a,b){var c=a.e;switch(c._hx_index){case 4:var c=c.el,d="val"+this.exprIds++,e=this.buf;this.buf=new Bb;this.addType(a.t);this.buf.b+=r.string(" ");this.buf.b+=r.string(d);this.buf.b+=r.string("(void)");var c=c.slice(),f=c[c.length-1];c[c.length-1]={e:q.TReturn(f),t:a.t,p:f.p};c={t:u.TVoid,e:q.TBlock(c),p:a.p};this.addExpr(c,"");this.exprValues.push(this.buf.b);this.buf=e;this.buf.b+=
r.string(d);this.buf.b+=r.string("()");break;case 10:d=c.eelse;e=c.eif;c=c.econd;this.buf.b+=r.string("( ");this.addValue(c,b);this.buf.b+=r.string(" ) ? ");this.addValue(e,b);this.buf.b+=r.string(" : ");this.addValue(d,b);break;case 20:this.addValue(c.e,b);break;default:this.addExpr(a,b)}},addBlock:function(a,b){this.addExpr(a,b)},getFunName:function(a,b,c){switch(a._hx_index){case 20:if(c==u.TInt&&null!=this.glES)return this.decl("int _imod( int x, int y ) { return int(mod(float(x),float(y))); }"),
"_imod";break;case 33:switch(b[0].t._hx_index){case 10:case 11:case 17:if(null!=this.glES&&2>=this.glES)return"texture2D";break;case 12:if(null!=this.glES&&2>=this.glES)return"textureCube"}break;case 34:switch(b[0].t._hx_index){case 10:case 11:case 17:if(null!=this.glES&&2>=this.glES)return this.decl("#extension GL_EXT_shader_texture_lod : enable"),"texture2DLodEXT";break;case 12:if(null!=this.glES&&2>=this.glES)return this.decl("#extension GL_EXT_shader_texture_lod : enable"),"textureCubeLodEXT"}break;
case 48:if(b[0].t==u.TMat3x4)return this.decl(fb.MAT34),this.decl("mat3 _mat3( _mat3x4 v ) { return mat3(v.a.xyz,v.b.xyz,v.c.xyz); }"),"_mat3";break;case 50:this.decl(fb.MAT34);if(1==b.length)return this.decl("_mat3x4 mat_to_34( mat4 m ) { return _mat3x4(m[0],m[1],m[2]); }"),"mat_to_34";break;case 52:this.decl("vec4 pack( float v ) { vec4 color = fract(v * vec4(1, 255, 255.*255., 255.*255.*255.)); return color - color.yzww * vec4(1. / 255., 1. / 255., 1. / 255., 0.); }");break;case 53:this.decl("float unpack( vec4 color ) { return dot(color,vec4(1., 1. / 255., 1. / (255. * 255.), 1. / (255. * 255. * 255.))); }");
break;case 54:this.decl("vec4 packNormal( vec3 v ) { return vec4((v + vec3(1.)) * vec3(0.5),1.); }");break;case 55:this.decl("vec3 unpackNormal( vec4 v ) { return normalize((v.xyz - vec3(0.5)) * vec3(2.)); }");break;case 56:this.decl("vec2 screenToUv( vec2 v ) { return v * vec2(0.5,-0.5) + vec2(0.5,0.5); }");break;case 57:this.decl("vec2 uvToScreen( vec2 v ) { return v * vec2(2.,-2.) + vec2(-1., 1.); }");break;case 58:case 59:case 60:this.decl("#extension GL_OES_standard_derivatives:enable")}return fb.GLOBALS.get(a)},
addExpr:function(a,b){var c=a.e;switch(c._hx_index){case 0:c=c.c;switch(c._hx_index){case 0:this.buf.b+=r.string("null");break;case 1:this.buf.b+=r.string(c.b);break;case 2:this.buf.b+=r.string(c.v);break;case 3:c=""+c.v;this.buf.b+=r.string(c);-1==c.indexOf(".")&&-1==c.indexOf("e")&&(this.buf.b+=r.string("."));break;case 4:this.buf.b+=r.string('"'+c.v+'"')}break;case 1:c=this.varName(c.v);this.buf.b+=r.string(c);break;case 2:c=fb.GLOBALS.get(c.g);this.buf.b+=r.string(c);break;case 3:c=c.e;this.buf.b+=
r.string("(");this.addValue(c,b);this.buf.b+=r.string(")");break;case 4:c=c.el;this.buf.b+=r.string("{\n");for(var d=b+"\t",e=0;e<c.length;){var f=c[e];++e;this.buf.b+=r.string(d);this.addExpr(f,d);this.newLine(f)}this.buf.b+=r.string(b);this.buf.b+=r.string("}");break;case 5:var d=c.e2,e=c.e1,c=c.op,f=d.t,g=e.t;switch(c._hx_index){case 1:5==g._hx_index&&3==g.size&&1==g.t._hx_index&&8==f._hx_index?(this.decl(fb.MAT34),this.decl("vec3 m3x4mult( vec3 v, _mat3x4 m) { vec4 ve = vec4(v,1.0); return vec3(dot(m.a,ve),dot(m.b,ve),dot(m.c,ve)); }"),
20==c._hx_index&&(this.addValue(e,b),this.buf.b+=r.string(" = ")),this.buf.b+=r.string("m3x4mult("),this.addValue(e,b),this.buf.b+=r.string(","),this.addValue(d,b),this.buf.b+=r.string(")")):(this.addValue(e,b),this.buf.b+=r.string(" "),c=qa.opStr(c),this.buf.b+=r.string(c),this.buf.b+=r.string(" "),this.addValue(d,b));break;case 5:case 6:case 7:case 8:case 9:case 10:if(5==g._hx_index&&5==f._hx_index){this.buf.b+=r.string("vec"+g.size+"(");switch(c._hx_index){case 5:c="equal";break;case 6:c="notEqual";
break;case 7:c="greaterThan";break;case 8:c="greaterThanEqual";break;case 9:c="lessThan";break;case 10:c="lessThanEqual";break;default:throw new n("assert");}this.buf.b+=r.string(c);this.buf.b+=r.string("(");this.addValue(e,b);this.buf.b+=r.string(",");this.addValue(d,b);this.buf.b+=r.string("))")}else this.addValue(e,b),this.buf.b+=r.string(" "),c=qa.opStr(c),this.buf.b+=r.string(c),this.buf.b+=r.string(" "),this.addValue(d,b);break;case 18:this.decl("int _ushr( int i, int j ) { return int(uint(i) >> uint(j)); }");
this.buf.b+=r.string("_ushr(");this.addValue(e,b);this.buf.b+=r.string(",");this.addValue(d,b);this.buf.b+=r.string(")");break;case 19:a.t!=u.TInt?(20==c._hx_index&&(this.addValue(e,b),this.buf.b+=r.string(" = ")),this.addExpr({e:q.TCall({e:q.TGlobal(G.Mod),t:u.TFun([]),p:a.p},[e,d]),t:a.t,p:a.p},b)):(this.addValue(e,b),this.buf.b+=r.string(" "),c=qa.opStr(c),this.buf.b+=r.string(c),this.buf.b+=r.string(" "),this.addValue(d,b));break;case 20:switch(c.op._hx_index){case 1:5==g._hx_index&&3==g.size&&
1==g.t._hx_index&&8==f._hx_index?(this.decl(fb.MAT34),this.decl("vec3 m3x4mult( vec3 v, _mat3x4 m) { vec4 ve = vec4(v,1.0); return vec3(dot(m.a,ve),dot(m.b,ve),dot(m.c,ve)); }"),20==c._hx_index&&(this.addValue(e,b),this.buf.b+=r.string(" = ")),this.buf.b+=r.string("m3x4mult("),this.addValue(e,b),this.buf.b+=r.string(","),this.addValue(d,b),this.buf.b+=r.string(")")):(this.addValue(e,b),this.buf.b+=r.string(" "),c=qa.opStr(c),this.buf.b+=r.string(c),this.buf.b+=r.string(" "),this.addValue(d,b));break;
case 19:a.t!=u.TInt?(20==c._hx_index&&(this.addValue(e,b),this.buf.b+=r.string(" = ")),this.addExpr({e:q.TCall({e:q.TGlobal(G.Mod),t:u.TFun([]),p:a.p},[e,d]),t:a.t,p:a.p},b)):(this.addValue(e,b),this.buf.b+=r.string(" "),c=qa.opStr(c),this.buf.b+=r.string(c),this.buf.b+=r.string(" "),this.addValue(d,b));break;default:this.addValue(e,b),this.buf.b+=r.string(" "),c=qa.opStr(c),this.buf.b+=r.string(c),this.buf.b+=r.string(" "),this.addValue(d,b)}break;default:this.addValue(e,b),this.buf.b+=r.string(" "),
c=qa.opStr(c),this.buf.b+=r.string(c),this.buf.b+=r.string(" "),this.addValue(d,b)}break;case 6:e=c.e1;f=this.buf;g=f.b;switch(c.op._hx_index){case 0:d="++";break;case 1:d="--";break;case 2:d="!";break;case 3:d="-";break;case 4:d="~"}f.b=g+r.string(d);this.addValue(e,b);break;case 7:d=c.init;c=c.v;this.locals.h[c.id]=c;null!=d?(c=this.varName(c),this.buf.b+=r.string(c),this.buf.b+=r.string(" = "),this.addValue(d,b)):this.buf.b+=r.string("/*var*/");break;case 8:if(2==c.e.e._hx_index&&51==c.e.e.g._hx_index)if(1==
c.args.length)c=c.args[0],this.buf.b+=r.string("clamp("),this.addValue(c,b),this.buf.b+=r.string(", 0., 1.)");else{d=c.e;c=c.args;e=d.e;2==e._hx_index?(d=this.getFunName(e.g,c,a.t),this.buf.b+=r.string(d)):this.addValue(d,b);this.buf.b+=r.string("(");d=!0;for(e=0;e<c.length;)f=c[e],++e,d?d=!1:this.buf.b+=r.string(", "),this.addValue(f,b);this.buf.b+=r.string(")")}else{d=c.args;c=c.e;e=c.e;2==e._hx_index?(c=this.getFunName(e.g,d,a.t),this.buf.b+=r.string(c)):this.addValue(c,b);this.buf.b+=r.string("(");
c=!0;for(e=0;e<d.length;)f=d[e],++e,c?c=!1:this.buf.b+=r.string(", "),this.addValue(f,b);this.buf.b+=r.string(")")}break;case 9:d=c.regs;c=c.e;if(3==c.t._hx_index){for(e=0;e<d.length;)if(f=d[e],++e,f!=aa.X)throw new n("assert");switch(d.length){case 1:this.addValue(c,b);break;case 2:this.decl("vec2 _vec2( float v ) { return vec2(v,v); }");this.buf.b+=r.string("_vec2(");this.addValue(c,b);this.buf.b+=r.string(")");break;case 3:this.decl("vec3 _vec3( float v ) { return vec3(v,v,v); }");this.buf.b+=
r.string("_vec3(");this.addValue(c,b);this.buf.b+=r.string(")");break;case 4:this.decl("vec4 _vec4( float v ) { return vec4(v,v,v,v); }");this.buf.b+=r.string("_vec4(");this.addValue(c,b);this.buf.b+=r.string(")");break;default:throw new n("assert");}}else{this.addValue(c,b);this.buf.b+=r.string(".");for(c=0;c<d.length;){f=d[c];++c;var g=this.buf,h=g.b;switch(f._hx_index){case 0:e="x";break;case 1:e="y";break;case 2:e="z";break;case 3:e="w"}g.b=h+r.string(e)}}break;case 10:d=c.eelse;e=c.eif;c=c.econd;
this.buf.b+=r.string("if( ");this.addValue(c,b);this.buf.b+=r.string(") ");this.addExpr(e,b);null!=d&&(this.isBlock(e)||(this.buf.b+=r.string(";")),this.buf.b+=r.string(" else "),this.addExpr(d,b));break;case 11:this.buf.b+=r.string("discard");break;case 12:c=c.e;null==c?this.buf.b+=r.string("return"):(this.buf.b+=r.string("return "),this.addValue(c,b));break;case 13:d=c.loop;e=c.it;c=c.v;this.locals.h[c.id]=c;f=e.e;if(5==f._hx_index&&21==f.op._hx_index)e=f.e2,f=f.e1,this.buf.b+=r.string("for("),
this.buf.b+=r.string(c.name+"="),this.addValue(f,b),this.buf.b+=r.string(";"+c.name+"<"),this.addValue(e,b),this.buf.b+=r.string(";"+c.name+"++) "),this.addBlock(d,b);else throw new n("assert");break;case 14:this.buf.b+=r.string("continue");break;case 15:this.buf.b+=r.string("break");break;case 16:d=c.index;this.addValue(c.e,b);this.buf.b+=r.string("[");this.addValue(d,b);this.buf.b+=r.string("]");break;case 17:c=c.el;this.buf.b+=r.string("[");d=!0;for(e=0;e<c.length;)f=c[e],++e,d?d=!1:this.buf.b+=
r.string(", "),this.addValue(f,b);this.buf.b+=r.string("]");break;case 18:this.buf.b+=r.string("switch(...)");break;case 19:!1==c.normalWhile?(d=c.e,c=c.loop,b+="\t",this.buf.b+=r.string("do "),this.addBlock(c,b),this.buf.b+=r.string(" while( "),this.addValue(d,b),this.buf.b+=r.string(" )")):(d=c.e,c=c.loop,this.buf.b+=r.string("while( "),this.addValue(d,b),this.buf.b+=r.string(" ) "),this.addBlock(c,b));break;case 20:this.addExpr(c.e,b)}},varName:function(a){if(a.kind==W.Output){if(this.isVertex)return"gl_Position";
if(null!=this.glES&&2>=this.glES)return null==this.outIndexes?"gl_FragColor":"gl_FragData["+this.outIndexes.h[a.id]+"]"}var b=this.varNames.h[a.id];if(null!=b)return b;var b=a.name,c=fb.KWDS;if(null!=L[b]?c.existsReserved(b):c.h.hasOwnProperty(b))b="_"+b;c=this.allNames;if(null!=L[b]?c.existsReserved(b):c.h.hasOwnProperty(b)){c=2;for(b+="_";;){var d=this.allNames,e=b+c;if(!(null!=L[e]?d.existsReserved(e):d.h.hasOwnProperty(e)))break;++c}b+=c}this.varNames.h[a.id]=b;a=a.id;c=this.allNames;null!=L[b]?
c.setReserved(b,a):c.h[b]=a;return b},newLine:function(a){this.isBlock(a)?this.buf.b+=r.string("\n"):this.buf.b+=r.string(";\n")},isBlock:function(a){a=a.e;switch(a._hx_index){case 4:return!0;case 13:return this.isBlock(a.loop);case 19:return!0==a.normalWhile?this.isBlock(a.loop):!1;default:return!1}},initVar:function(a){switch(a.kind._hx_index){case 0:case 2:16==a.type._hx_index&&(this.buf.b+=r.string("layout(std140) "));this.buf.b+=r.string("uniform ");break;case 1:this.buf.b+=r.string(null!=this.glES&&
2>=this.glES?"attribute ":"in ");break;case 3:this.buf.b+=r.string(null!=this.glES&&2>=this.glES?"varying ":this.isVertex?"out ":"in ");break;case 5:if(null!=this.glES&&2>=this.glES){this.outIndexes.h[a.id]=this.outIndex++;return}if(this.isVertex)return;null!=this.glES&&(this.buf.b+=r.string("layout(location="+this.outIndex++ +") "));this.buf.b+=r.string("out ");break;case 6:return}if(null!=a.qualifiers)for(var b=0,c=a.qualifiers;b<c.length;){var d=c[b];++b;if(6==d._hx_index)switch(d.p._hx_index){case 0:this.buf.b+=
r.string("lowp ");break;case 1:this.buf.b+=r.string("mediump ");break;case 2:this.buf.b+=r.string("highp ")}}this.addVar(a);this.buf.b+=r.string(";\n")},initVars:function(a){this.uniformBuffer=this.outIndex=0;this.outIndexes=new oa;var b=0;for(a=a.vars;b<a.length;){var c=a[b];++b;this.initVar(c)}this.buf.b+=r.string("\n");2>this.outIndex?this.outIndexes=null:!this.isVertex&&(null!=this.glES&&2>=this.glES)&&this.decl("#extension GL_EXT_draw_buffers : enable")},run:function(a){this.locals=new oa;this.decls=
[];this.buf=new Bb;this.exprValues=[];this.decl("precision mediump float;");if(1!=a.funs.length)throw new n("assert");var b=a.funs[0];this.isVertex=b.kind==$b.Vertex;this.initVars(a);a=this.buf;this.buf=new Bb;this.buf.b+=r.string("void main(void) {\n");var c=b.expr.e;if(4==c._hx_index){b=c.el;for(c=0;c<b.length;){var d=b[c];++c;this.buf.b+=r.string("\t");this.addExpr(d,"\t");this.newLine(d)}}else this.addExpr(b.expr,"");this.buf.b+=r.string("}");this.exprValues.push(this.buf.b);this.buf=a;a=ch.array(this.locals);
a.sort(function(a,b){return xa.compare(a.name,b.name)});for(b=0;b<a.length;)c=a[b],++b,this.addVar(c),this.buf.b+=r.string(";\n");this.buf.b+=r.string("\n");a=0;for(b=this.exprValues;a<b.length;)c=b[a],++a,this.buf.b+=r.string(c),this.buf.b+=r.string("\n\n");null!=this.glES?this.decl("#version "+(100>this.version?100:this.version)+(150<this.version?" es":"")):null!=this.version?this.decl("#version "+(150<this.version?150:this.version)):this.decl("#version 130");this.decls.push(this.buf.b);this.buf=
null;return this.decls.join("\n")},__class__:fb};var wk=function(){};p["hxsl._Linker.AllocatedVar"]=wk;wk.__name__="hxsl._Linker.AllocatedVar";wk.prototype={__class__:wk};var bg=function(a,b){this.name=a;this.uid=bg.UID++;this.vertex=b;this.processed=new oa;this.usedFunctions=[];this.read=new oa;this.write=new oa};p["hxsl._Linker.ShaderInfos"]=bg;bg.__name__="hxsl._Linker.ShaderInfos";bg.prototype={__class__:bg};var ok=function(a){null==a&&(a=!1);this.debugDepth=0;this.batchMode=a};p["hxsl.Linker"]=
ok;ok.__name__="hxsl.Linker";ok.prototype={debug:function(a,b){},error:function(a,b){return wb.t(a,b)},mergeVar:function(a,b,c,d){switch(b.kind._hx_index){case 2:case 6:throw new n("assert");}b.kind!=c.kind&&(b.kind!=W.Local&&c.kind!=W.Local)&&this.error("'"+a+"' kind does not match : "+r.string(b.kind)+" should be "+r.string(c.kind),d);var e=c.type,f=b.type;if(13==f._hx_index&&13==e._hx_index){b=f.vl;e=e.vl;for(c=0;c<b.length;){f=b[c];++c;for(var g=null,h=0;h<e.length;){var k=e[h];++h;if(f.name==
k.name){g=k;break}}null==g?e.push(this.allocVar(f,d).v):this.mergeVar(a+"."+g.name,f,g,d)}}else ha.enumEq(b.type,c.type)||this.error("'"+a+"' type does not match : "+D.toString(b.type)+" should be "+D.toString(c.type),d)},allocVar:function(a,b,c,d){if(null!=a.parent&&null==d){d=this.allocVar(a.parent,b);var e=d.v;c=e.name;for(e=e.parent;null!=e;)c=e.name+"."+c,e=e.parent}c=null==c?a.name:c+"."+a.name;if(null!=a.qualifiers)for(var e=0,f=a.qualifiers;e<f.length;){var g=f[e];++e;4==g._hx_index&&(c=g.n)}e=
this.varMap;f=null!=L[c]?e.getReserved(c):e.h[c];e=a.name;if(null!=f){for(var g=0,h=f.merged;g<h.length;){var k=h[g];++g;if(k==a)return f}a.kind==W.Param&&!D.hasQualifier(a,oc.Shared)&&!this.isBatchShader||a.kind==W.Function||a.kind==W.Var&&D.hasQualifier(a,oc.Private)?g=!0:(g=f.v,g=g.kind==W.Param&&!D.hasQualifier(g,oc.Shared)&&!this.isBatchShader||g.kind==W.Function||g.kind==W.Var&&D.hasQualifier(g,oc.Private));if(g||a.kind==W.Param&&f.v.kind==W.Param){for(f=2;;){g=this.varMap;h=c+f;g=null!=L[h]?
g.getReserved(h):g.h[h];if(null==g)break;h=0;for(k=g.merged;h<k.length;){var l=k[h];++h;if(l==a)return g}++f}e+=f;c+=f}else return f.merged.push(a),this.mergeVar(c,a,f.v,b),this.varIdMap.h[a.id]=f.id,f}g=this.allVars.length+1;e={id:g,name:e,type:a.type,kind:a.kind,qualifiers:a.qualifiers,parent:null==d?null:d.v};f=new wk;f.v=e;f.merged=[a];f.path=c;f.id=g;f.parent=d;f.instanceIndex=this.curInstance;this.allVars.push(f);a=this.varMap;null!=L[c]?a.setReserved(c,f):a.h[c]=f;a=e.type;if(13==a._hx_index){a=
a.vl;d=[];for(g=0;g<a.length;)h=a[g],++g,d.push(this.allocVar(h,b,c,f).v);e.type=u.TStruct(d)}return f},mapExprVar:function(a){var b=a.e;switch(b._hx_index){case 1:b=b.v;if(!this.locals.h.hasOwnProperty(b.id))return b=this.allocVar(b,a.p),null!=this.curShader&&!this.curShader.write.h.hasOwnProperty(b.id)&&(this.curShader.read.h[b.id]=b,null==this.curShader.vertex&&b.v.kind==W.Var&&(this.curShader.vertex=!1)),{e:q.TVar(b.v),t:b.v.type,p:a.p};break;case 5:var c=b.e2,d=b.e1,b=b.op,e=d.e;switch(b._hx_index){case 4:switch(e._hx_index){case 1:var f=
e.v;if(this.locals.h.hasOwnProperty(f.id)){if(f=e.v,!this.locals.h.hasOwnProperty(f.id))return d=this.mapExprVar(d),c=this.mapExprVar(c),f=this.allocVar(f,d.p),null!=this.curShader&&(this.curShader.write.h[f.id]=f),{e:q.TBinop(b,d,c),t:a.t,p:a.p}}else return c=this.mapExprVar(c),d=this.allocVar(f,d.p),null!=this.curShader&&(this.curShader.write.h[d.id]=d),{e:q.TBinop(b,{e:q.TVar(d.v),t:d.v.type,p:a.p},c),t:a.t,p:a.p};break;case 9:if(1==e.e.e._hx_index&&(f=e.e.e.v,!this.locals.h.hasOwnProperty(f.id)))return d=
this.mapExprVar(d),c=this.mapExprVar(c),f=this.allocVar(f,d.p),null!=this.curShader&&(this.curShader.write.h[f.id]=f),{e:q.TBinop(b,d,c),t:a.t,p:a.p}}break;case 20:switch(e._hx_index){case 1:f=e.v;if(!this.locals.h.hasOwnProperty(f.id))return d=this.mapExprVar(d),c=this.mapExprVar(c),f=this.allocVar(f,d.p),null!=this.curShader&&(this.curShader.write.h[f.id]=f),{e:q.TBinop(b,d,c),t:a.t,p:a.p};break;case 9:if(1==e.e.e._hx_index&&(f=e.e.e.v,!this.locals.h.hasOwnProperty(f.id)))return d=this.mapExprVar(d),
c=this.mapExprVar(c),f=this.allocVar(f,d.p),null!=this.curShader&&(this.curShader.write.h[f.id]=f),{e:q.TBinop(b,d,c),t:a.t,p:a.p}}}break;case 7:this.locals.h[b.v.id]=!0;break;case 11:null!=this.curShader&&(this.curShader.vertex=!1,this.curShader.hasDiscard=!0);break;case 13:this.locals.h[b.v.id]=!0}return D.map(a,K(this,this.mapExprVar))},addShader:function(a,b,c,d){this.curShader=a=new bg(a,b);a.priority=d;a.body=this.mapExprVar(c);this.shaders.push(a);this.curShader=null;return a},sortByPriorityDesc:function(a,
b){return a.priority==b.priority?a.uid-b.uid:b.priority-a.priority},buildDependency:function(a,b,c){c=!c;for(var d=0,e=this.shaders;d<e.length;){var f=e[d];++d;if(f==a)c=!0;else if(c&&f.write.h.hasOwnProperty(b.id)){if(a.vertex){if(!1==f.vertex)continue;null==f.vertex&&(f.vertex=!0)}a.deps.set(f,!0);this.debugDepth++;this.initDependencies(f);this.debugDepth--;if(!f.read.h.hasOwnProperty(b.id))return}}b.v.kind==W.Var&&this.error("Variable "+b.path+" required by "+a.name+" is missing initializer",null)},
initDependencies:function(a){if(null==a.deps){a.deps=new Ha;for(var b=a.read.iterator();b.hasNext();){var c=b.next();this.buildDependency(a,c,a.write.h.hasOwnProperty(c.id))}if(null==a.vertex)for(b=a.deps.keys();b.hasNext();)if(!1==b.next().vertex){a.vertex=!1;break}if(a.vertex)for(a=a.deps.keys();a.hasNext();)b=a.next(),null==b.vertex&&(b.vertex=!0)}},collect:function(a,b,c){a.onStack&&this.error("Loop in shader dependencies ("+a.name+")",null);if(a.marked!=c){a.marked=c;a.onStack=!0;for(var d=[],
e=a.deps.keys();e.hasNext();){var f=e.next();d.push(f)}d.sort(K(this,this.sortByPriorityDesc));for(e=0;e<d.length;)f=d[e],++e,this.collect(f,b,c);null==a.vertex&&(a.vertex=c);a.vertex==c&&b.push(a);a.onStack=!1}},uniqueLocals:function(a,b){var c=a.e;switch(c._hx_index){case 4:for(var c=c.el,d=new ia,e=b.keys();e.hasNext();){var f=e.next();null!=L[f]?d.setReserved(f,!0):d.h[f]=!0}for(e=0;e<c.length;)f=c[e],++e,this.uniqueLocals(f,d);break;case 7:c=c.v;d=c.name;if(null!=L[d]?b.existsReserved(d):b.h.hasOwnProperty(d)){for(d=
2;;){e=c.name+d;if(!(null!=L[e]?b.existsReserved(e):b.h.hasOwnProperty(e)))break;++d}c.name+=d}c=c.name;null!=L[c]?b.setReserved(c,!0):b.h[c]=!0;break;default:var g=K(this,this.uniqueLocals);D.iter(a,function(a){g(a,b)})}},link:function(a){var b=this;this.varMap=new ia;this.varIdMap=new oa;this.allVars=[];this.shaders=[];this.locals=new oa;for(var c=new Ha,d=[],e=0;e<a.length;){var f=a[e];++e;var g=f;null!=c.h.__keys__[f.__id__]&&(f=$g.shaderData(f));c.set(f,g);d.push(f)}a=d;this.curInstance=0;d=
[];for(e=0;e<a.length;){f=a[e];++e;this.isBatchShader=this.batchMode&&ga.startsWith(f.name,"batchShader_");for(var g=0,h=f.vars;g<h.length;){var k=h[g];++g;var l=this.allocVar(k,null);this.isBatchShader&&(l.v.kind==W.Param&&!ga.startsWith(l.path,"Batch_"))&&(l.v.kind=W.Local);k.kind==W.Output&&d.push(k)}g=0;for(f=f.funs;g<f.length;)h=f[g],++g,this.allocVar(h.ref,h.expr.p).kind=h.kind;this.curInstance++}e=0;f=[-3E3];g=[-2E3];h=[-1E3];for(k=0;k<a.length;){l=a[k];++k;for(var m=0,p=l.funs;m<p.length;){var r=
p[m];++m;var s=this.allocVar(r.ref,r.expr.p);if(null==s.kind)throw new n("assert");switch(s.kind._hx_index){case 0:case 1:this.addShader(l.name+"."+(s.kind==$b.Vertex?"vertex":"fragment"),s.kind==$b.Vertex,r.expr,e);break;case 2:var v;switch(r.ref.name){case "__init__fragment":s=h;v=!1;break;case "__init__vertex":s=g;v=!0;break;default:s=f,v=null}var w=r.expr.e;if(4==w._hx_index)for(var w=w.el,y=0,z=0;z<w.length;){var B=w[z];++z;this.addShader(l.name+"."+r.ref.name+y++,v,B,s[0]++)}else this.addShader(l.name+
"."+r.ref.name,v,r.expr,s[0]++);break;case 3:throw new n("Unexpected helper function in linker "+s.v.name);}}++e}this.shaders.sort(K(this,this.sortByPriorityDesc));e=new bg("<entry>",!1);e.deps=new Ha;for(a=0;a<d.length;)f=d[a],++a,this.buildDependency(e,this.allocVar(f,null),!1);a=0;for(d=this.shaders;a<d.length;)f=d[a],++a,f.hasDiscard&&(this.initDependencies(f),e.deps.set(f,!0));a=0;for(d=this.shaders;a<d.length;)if(f=d[a],++a,null==f.vertex){g=!0;for(h=f.read.iterator();h.hasNext();)if(h.next().v.kind!=
W.Param){g=!1;break}g&&(f.vertex=!1)}a=[];d=[];this.collect(e,a,!0);this.collect(e,d,!1);if(d.pop()!=e)throw new n("assert");e=0;for(f=this.shaders;e<f.length;)g=f[e],++e,g.marked=null;e=0;for(f=a.concat(d);e<f.length;){g=f[e];++e;for(h=g.deps.keys();h.hasNext();)k=h.next(),null==k.marked&&this.error(k.name+" needed by "+g.name+" is unreachable",null);g.marked=!0}for(var C=[],F={},G=null,G=function(a){F.hasOwnProperty(a.id)||(F[a.id]=!0,null!=a.v.parent?G(a.parent):C.push(a.v))},e=0,f=a.concat(d);e<
f.length;){g=f[e];++e;for(h=g.read.iterator();h.hasNext();)k=h.next(),G(k);for(g=g.write.iterator();g.hasNext();)h=g.next(),G(h)}for(var H=null,H=function(a){var b=a.type;if(13==b._hx_index&&(b=b.vl,a.kind!=W.Input)){for(var c=[],d=0;d<b.length;){var e=b[d];++d;F.hasOwnProperty(e.id)&&(H(e),c.push(e))}a.type=u.TStruct(c)}},e=0;e<C.length;)f=C[e],++e,H(f);e=function(a,c,d){c={id:D.allocVarId(),name:c,type:u.TFun([{ret:u.TVoid,args:[]}]),kind:W.Function};C.push(c);for(var e=[],f=0;f<d.length;){var g=
d[f];++f;var h=g.body.e;if(4==h._hx_index){g=h.el;for(h=0;h<g.length;){var k=g[h];++h;e.push(k)}}else e.push(g.body)}d={e:q.TBlock(e),t:u.TVoid,p:0==e.length?null:e[0].p};b.uniqueLocals(d,new ia);return{kind:a,ref:c,ret:u.TVoid,args:[],expr:d}};a=[e($b.Vertex,"vertex",a),e($b.Fragment,"fragment",d)];for(d=c.keys();d.hasNext();)if(e=d.next(),f=c.h[e.__id__],e!=f){g=0;for(h=e.vars.length;g<h;)k=g++,this.allocVar(e.vars[k],null).merged.unshift(f.vars[k])}return{name:"out",vars:C,funs:a}},__class__:ok};
var Bc=M["hxsl.Output"]={__ename__:!0,__constructs__:"Const Value PackNormal PackFloat Vec2 Vec3 Vec4 Swiz".split(" "),Const:(s=function(a){return{_hx_index:0,v:a,__enum__:"hxsl.Output",toString:m}},s.__params__=["v"],s),Value:(s=function(a,b){return{_hx_index:1,v:a,size:b,__enum__:"hxsl.Output",toString:m}},s.__params__=["v","size"],s),PackNormal:(s=function(a){return{_hx_index:2,v:a,__enum__:"hxsl.Output",toString:m}},s.__params__=["v"],s),PackFloat:(s=function(a){return{_hx_index:3,v:a,__enum__:"hxsl.Output",
toString:m}},s.__params__=["v"],s),Vec2:(s=function(a){return{_hx_index:4,a:a,__enum__:"hxsl.Output",toString:m}},s.__params__=["a"],s),Vec3:(s=function(a){return{_hx_index:5,a:a,__enum__:"hxsl.Output",toString:m}},s.__params__=["a"],s),Vec4:(s=function(a){return{_hx_index:6,a:a,__enum__:"hxsl.Output",toString:m}},s.__params__=["a"],s),Swiz:(s=function(a,b){return{_hx_index:7,a:a,swiz:b,__enum__:"hxsl.Output",toString:m}},s.__params__=["a","swiz"],s)};Bc.__empty_constructs__=[];var qa=function(a){null==
a&&(a=!1);this.varId=a};p["hxsl.Printer"]=qa;qa.__name__="hxsl.Printer";qa.opStr=function(a){switch(a._hx_index){case 0:return"+";case 1:return"*";case 2:return"/";case 3:return"-";case 4:return"=";case 5:return"==";case 6:return"!=";case 7:return">";case 8:return">=";case 9:return"<";case 10:return"<=";case 11:return"&";case 12:return"|";case 13:return"^";case 14:return"&&";case 15:return"||";case 16:return"<<";case 17:return">>";case 18:return">>>";case 19:return"%";case 20:return qa.opStr(a.op)+
"=";case 21:return"...";case 22:return"=>";case 23:return" in "}};qa.toString=function(a,b){null==b&&(b=!1);return(new qa(b)).exprString(a)};qa.shaderToString=function(a,b){null==b&&(b=!1);return(new qa(b)).shaderString(a)};qa.check=function(a,b){try{for(var c=new oa,d=[],e=null,e=function(a,b){if(b){if(c.h.hasOwnProperty(a.id))throw new n("Duplicate var "+a.id);c.h[a.id]=a;d.push(a)}else c.remove(a.id);var f=a.type;if(13==f._hx_index)for(var f=f.vl,g=0;g<f.length;){var h=f[g];++g;e(h,b)}},f=null,
f=function(a){var b=a.e;switch(b._hx_index){case 1:b=b.v;if(!c.h.hasOwnProperty(b.id))throw new n("Unbound var "+b.name+"@"+b.id);break;case 4:a=b.el;b=d;d=[];for(var g=0;g<a.length;){var h=a[g];++g;f(h)}for(a=0;a<d.length;)g=d[a],++a,e(g,!1);d=b;break;case 7:a=b.init;b=b.v;null!=a&&f(a);e(b,!0);break;case 13:a=b.loop;g=b.v;f(b.it);e(g,!0);f(a);e(g,!1);break;default:D.iter(a,f)}},g=0,h=a.vars;g<h.length;){var k=h[g];++g;e(k,!0)}for(var g=0,l=a.funs;g<l.length;){var m=l[g];++g;for(var h=0,p=m.args;h<
p.length;){var q=p[h];++h;e(q,!0)}f(m.expr);for(var h=0,r=m.args;h<r.length;){var s=r[h];++h;e(s,!1)}}}catch(u){l=u instanceof n?u.val:u;if("string"==typeof l){l=l+"\n    in\n"+qa.shaderToString(a,!0);if(null!=b){m=[];for(p=0;p<b.length;)q=b[p],++p,m.push(qa.shaderToString(q,!0));l+="\n    from\n\n"+m.join("\n\n")}throw new n(l);}throw u;}};qa.prototype={add:function(a){this.buffer.b+=r.string(a)},shaderString:function(a){this.buffer=new Bb;for(var b=0,c=a.vars;b<c.length;){var d=c[b];++b;this.addVar(d,
W.Var);this.buffer.b+=r.string(";\n")}0<a.vars.length&&(this.buffer.b+=r.string("\n"));b=0;for(a=a.funs;b<a.length;)c=a[b],++b,this.addFun(c),this.buffer.b+=r.string("\n\n");return this.buffer.b},varString:function(a){this.buffer=new Bb;this.addVar(a,null);return this.buffer.b},funString:function(a){this.buffer=new Bb;this.addFun(a);return this.buffer.b},exprString:function(a){this.buffer=new Bb;this.addExpr(a,"");return this.buffer.b},addVar:function(a,b,c,d){null==c&&(c="");if(null!=a.qualifiers)for(var e=
0,f=a.qualifiers;e<f.length;){var g=f[e];++e;var h;switch(g._hx_index){case 0:g=g.max;h="const"+(null==g?"":"("+g+")");break;case 1:h="private";break;case 2:h="nullable";break;case 3:h="perObject";break;case 4:h="name('"+g.n+"')";break;case 5:h="shared";break;case 6:g=g.p;h=M[g.__enum__].__constructs__[g._hx_index].toLowerCase()+"p";break;case 7:h="range("+g.min+","+g.max+")";break;case 8:h="ignore";break;case 9:h="perInstance("+g.v+")"}this.buffer.b+=r.string("@"+h+" ")}if(a.kind!=b)switch(a.kind._hx_index){case 0:this.buffer.b+=
r.string("@global ");break;case 1:this.buffer.b+=r.string("@input ");break;case 2:this.buffer.b+=r.string("@param ");break;case 3:this.buffer.b+=r.string("@var ");break;case 4:this.buffer.b+=r.string("@local ");break;case 5:this.buffer.b+=r.string("@output ");break;case 6:this.buffer.b+=r.string("@function ")}this.buffer.b+=r.string("var ");a.parent==d?this.buffer.b+=r.string(a.name+(this.varId?"@"+a.id:"")):this.addVarName(a);this.buffer.b+=r.string(" : ");b=a.type;if(13==b._hx_index){a=b.vl;this.buffer.b+=
r.string("{");b=!0;for(d=0;d<a.length;)e=a[d],++d,b?b=!1:this.buffer.b+=r.string(", "),this.addVar(e,e.kind,c,e);this.buffer.b+=r.string("}")}else c=D.toString(a.type),this.buffer.b+=r.string(c)},addFun:function(a){this.buffer.b+=r.string("function "+a.ref.name+"(");for(var b=!0,c=0,d=a.args;c<d.length;){var e=d[c];++c;b?(this.buffer.b+=r.string(" "),b=!1):this.buffer.b+=r.string(", ");this.addVar(e,W.Local)}0<a.args.length&&(this.buffer.b+=r.string(" "));b=") : "+D.toString(a.ret)+" ";this.buffer.b+=
r.string(b);this.addExpr(a.expr,"")},addVarName:function(a){null!=a.parent&&(this.addVarName(a.parent),this.buffer.b+=r.string("."));this.buffer.b+=r.string(a.name);this.varId&&(this.buffer.b+=r.string("@"+a.id))},addConst:function(a){var b=this.buffer,c=b.b,d;switch(a._hx_index){case 0:d="null";break;case 1:d=a.b;break;case 2:d=a.v;break;case 3:d=a.v;break;case 4:d='"'+a.v+'"'}b.b=c+r.string(d)},addExpr:function(a,b){var c=a.e;switch(c._hx_index){case 0:this.addConst(c.c);break;case 1:this.addVarName(c.v);
break;case 2:c=Wk.toString(c.g);this.buffer.b+=r.string(c);break;case 3:c=c.e;this.buffer.b+=r.string("(");this.addExpr(c,b);this.buffer.b+=r.string(")");break;case 4:c=c.el;this.buffer.b+=r.string("{");b+="\t";for(var d=0;d<c.length;){var e=c[d];++d;this.buffer.b+=r.string("\n"+b);this.addExpr(e,b);this.buffer.b+=r.string(";")}b=z.substr(b,1,null);0<c.length&&(this.buffer.b+=r.string("\n"+b));this.buffer.b+=r.string("}");break;case 5:d=c.e2;e=c.op;this.addExpr(c.e1,b);c=" "+qa.opStr(e)+" ";this.buffer.b+=
r.string(c);this.addExpr(d,b);break;case 6:var d=c.e1,e=this.buffer,f=e.b,g;switch(c.op._hx_index){case 0:g="++";break;case 1:g="--";break;case 2:g="!";break;case 3:g="-";break;case 4:g="~"}e.b=f+r.string(g);this.addExpr(d,b);break;case 7:d=c.init;this.addVar(c.v,W.Local,b);null!=d&&(this.buffer.b+=r.string(" = "),this.addExpr(d,b));break;case 8:d=c.args;this.addExpr(c.e,b);this.buffer.b+=r.string("(");c=!0;for(e=0;e<d.length;)f=d[e],++e,c?c=!1:this.buffer.b+=r.string(", "),this.addExpr(f,b);this.buffer.b+=
r.string(")");break;case 9:d=c.regs;this.addExpr(c.e,b);this.buffer.b+=r.string(".");for(c=0;c<d.length;)e=d[c],++c,this.buffer.b+=r.string(qa.SWIZ[e._hx_index]);break;case 10:d=c.eelse;e=c.eif;c=c.econd;this.buffer.b+=r.string("if( ");this.addExpr(c,b);this.buffer.b+=r.string(" ) ");this.addExpr(e,b);null!=d&&(this.buffer.b+=r.string(" else "),this.addExpr(d,b));break;case 11:this.buffer.b+=r.string("discard");break;case 12:c=c.e;this.buffer.b+=r.string("return");null!=c&&(this.buffer.b+=r.string(" "),
this.addExpr(c,b));break;case 13:d=c.loop;e=c.it;c=c.v;this.buffer.b+=r.string("for( ");this.addVarName(c);this.buffer.b+=r.string(" in ");this.addExpr(e,b);this.buffer.b+=r.string(" ) ");this.addExpr(d,b);break;case 14:this.buffer.b+=r.string("continue");break;case 15:this.buffer.b+=r.string("break");break;case 16:d=c.index;this.addExpr(c.e,b);this.buffer.b+=r.string("[");this.addExpr(d,b);this.buffer.b+=r.string("]");break;case 17:c=c.el;this.buffer.b+=r.string("[");d=!0;for(e=0;e<c.length;)f=c[e],
++e,d?d=!1:this.buffer.b+=r.string(", "),this.addExpr(f,b);this.buffer.b+=r.string("]");break;case 18:d=c.def;e=c.cases;c=c.e;this.buffer.b+=r.string("switch( ");this.addExpr(c,b);this.buffer.b+=r.string(") {");c=b;for(f=0;f<e.length;){g=e[f];++f;this.buffer.b+=r.string("\n"+b);this.buffer.b+=r.string("case ");for(var h=!0,k=0,l=g.values;k<l.length;){var m=l[k];++k;h?h=!1:this.buffer.b+=r.string(", ");this.addExpr(m,b)}b+="\t";this.buffer.b+=r.string(":\n"+b);this.addExpr(g.expr,b);b=c}null!=d&&(this.buffer.b+=
r.string("\n"+b),b+="\t",this.buffer.b+=r.string("default:\n"+b),this.addExpr(d,b),b=c);this.buffer.b+=r.string("\n"+b+"}");break;case 19:!1==c.normalWhile?(d=c.e,c=c.loop,e=b,b+="\t",this.buffer.b+=r.string("do {\n"+b),this.addExpr(c,b),b=e,this.buffer.b+=r.string("\n"+b+"} while( "),this.addExpr(d,b),this.buffer.b+=r.string(" )")):(d=c.e,c=c.loop,this.buffer.b+=r.string("while( "),this.addExpr(d,b),d=b,b+="\t",this.buffer.b+=r.string(" ) {\n"+b),this.addExpr(c,b),this.buffer.b+=r.string("\n"+d+
"}"));break;case 20:d=c.e;e=c.args;this.buffer.b+=r.string(c.m);if(0<e.length){this.buffer.b+=r.string("(");c=!0;for(f=0;f<e.length;)g=e[f],++f,c?c=!1:this.buffer.b+=r.string(", "),this.addConst(g);this.buffer.b+=r.string(")")}this.buffer.b+=r.string(" ");this.addExpr(d,b)}},__class__:qa};var Zg=function(a,b,c,d,e){this.name=a;this.pos=b;this.instance=c;this.index=d;this.type=e};p["hxsl.AllocParam"]=Zg;Zg.__name__="hxsl.AllocParam";Zg.prototype={clone:function(a){null==a&&(a=!1);var b=new Zg(this.name,
this.pos,this.instance,this.index,this.type);null!=this.perObjectGlobal&&(b.perObjectGlobal=this.perObjectGlobal.clone(a));null!=this.next&&(b.next=this.next.clone(a));return b},__class__:Zg};var Yg=function(a,b,c){this.pos=a;this.path=b;this.gid=Y.allocID(b);this.type=c};p["hxsl.AllocGlobal"]=Yg;Yg.__name__="hxsl.AllocGlobal";Yg.prototype={clone:function(a){null==a&&(a=!1);var b=new Yg(this.pos,this.path,this.type);null!=this.next&&(b.next=this.next.clone(a));a&&(b.gid=0);return b},__class__:Yg};
var tk=function(){};p["hxsl.RuntimeShaderData"]=tk;tk.__name__="hxsl.RuntimeShaderData";tk.prototype={__class__:tk};var rk=function(a,b){this.shader=a;this.bits=b};p["hxsl.ShaderInstanceDesc"]=rk;rk.__name__="hxsl.ShaderInstanceDesc";rk.prototype={__class__:rk};var Xg=function(){this.id=Xg.UID++};p["hxsl.RuntimeShader"]=Xg;Xg.__name__="hxsl.RuntimeShader";Xg.prototype={hasGlobal:function(a){return this.globals.h.hasOwnProperty(a)},__class__:Xg};var Wb=function(a,b){this.s=a;this.next=b};p["hxsl.ShaderList"]=
Wb;Wb.__name__="hxsl.ShaderList";Wb.addSort=function(a,b){for(var c=null,d=b;null!=d&&d.s.priority<a.priority;)c=d,d=d.next;if(null==c)return new Wb(a,b);c.next=new Wb(a,c.next);return b};Wb.prototype={clone:function(){return new Wb(this.s.clone(),null==this.next?null:this.next.clone())},iterator:function(){return new pf(this,null)},iterateTo:function(a){return new pf(this,a)},__class__:Wb};var pf=function(a,b){this.l=a;this.last=b};p["hxsl._ShaderList.ShaderIterator"]=pf;pf.__name__="hxsl._ShaderList.ShaderIterator";
pf.prototype={hasNext:function(){return this.l!=this.last},next:function(){var a=this.l.s;this.l=this.l.next;return a},__class__:pf};var xk=function(a){this.id=D.allocVarId();this.shader=a;this.params=new oa};p["hxsl.ShaderInstance"]=xk;xk.__name__="hxsl.ShaderInstance";xk.prototype={__class__:xk};var yk=function(a,b){this.v=a;this.globalId=b};p["hxsl.ShaderGlobal"]=yk;yk.__name__="hxsl.ShaderGlobal";yk.prototype={__class__:yk};var Ai=function(a,b,c){this.v=a;this.pos=b;this.bits=c};p["hxsl.ShaderConst"]=
Ai;Ai.__name__="hxsl.ShaderConst";Ai.prototype={__class__:Ai};var Xc=function(a){this.instanceCache=new oa;this.consts=null;this.globals=[];""!=a&&(this.data=Qb.run(a),this.initialize())};p["hxsl.SharedShader"]=Xc;Xc.__name__="hxsl.SharedShader";Xc.prototype={initialize:function(){for(var a=0,b=this.data.vars;a<b.length;){var c=b[a];++a;this.browseVar(c)}},getInstance:function(a){var b=this.instanceCache.h[a];return null==b?this.makeInstance(a):b},makeInstance:function(a){for(var b=new vk,c=this.consts;null!=
c;){var d=c.v,e;switch(c.v.type._hx_index){case 2:e=B.CBool(0!=(a>>>c.pos&1));break;case 1:case 17:e=B.CInt(a>>>c.pos&(1<<c.bits)-1);break;default:throw new n("assert");}b.setConstant(d,e);c=c.next}b.inlineCalls=!0;b.unrollLoops=Xc.UNROLL_LOOPS;c=new xk(b.eval(this.data));d=this.paramsCount=0;for(e=this.data.vars;d<e.length;){var f=e[d];++d;this.addParam(b,c,f)}return this.instanceCache.h[a]=c},addSelfParam:function(a,b){var c=b.type;if(13==c._hx_index)for(var c=c.vl,d=0;d<c.length;){var e=c[d];++d;
this.addSelfParam(a,e)}else b.kind==W.Param&&(a.params.h[b.id]=this.paramsCount,this.paramsCount++)},addParam:function(a,b,c){var d=c.type;if(13==d._hx_index){c=d.vl;for(d=0;d<c.length;){var e=c[d];++d;this.addParam(a,b,e)}}else c.kind==W.Param&&(b.params.h[a.varMap.h[c.__id__].id]=this.paramsCount,this.paramsCount++)},browseVar:function(a,b){a.id=D.allocVarId();b=null==b?D.getName(a):b+("."+a.name);var c=a.type;if(13==c._hx_index)for(var c=c.vl,d=0;d<c.length;){var e=c[d];++d;this.browseVar(e,b)}else c=
0,a.kind==W.Global&&(c=Y.allocID(b),this.globals.push(new yk(a,c))),D.isConst(a)&&(d=D.getConstBits(a),0<d&&(d=new Ai(a,null==this.consts?0:this.consts.pos+this.consts.bits,d),d.globalId=c,d.next=this.consts,this.consts=d))},__class__:Xc};var Ye=function(a){this.v=a;this.write=this.read=0};p["hxsl._Splitter.VarProps"]=Ye;Ye.__name__="hxsl._Splitter.VarProps";Ye.prototype={__class__:Ye};var pk=function(){};p["hxsl.Splitter"]=pk;pk.__name__="hxsl.Splitter";pk.prototype={split:function(a){var b=null,
c=new oa,d=null,e=new oa;this.varNames=new ia;var f=0;for(a=a.funs;f<a.length;){var g=a[f];++f;switch(g.kind._hx_index){case 0:this.vars=c;b=g;this.checkExpr(g.expr);break;case 1:this.vars=e;d=g;this.checkExpr(g.expr);break;default:throw new n("assert");}}this.varMap=new Ha;f=0;for(a=ch.array(c);f<a.length;){var h=a[f];++f;g=h.v;switch(g.kind._hx_index){case 3:case 4:g.kind=e.h.hasOwnProperty(g.id)?W.Var:W.Local}switch(g.kind._hx_index){case 3:case 5:if(0<h.read||1<h.write){h={id:D.allocVarId(),name:g.name,
kind:g.kind,type:g.type};this.vars=c;this.get(h);g.kind=W.Local;var k=b.expr.p,k={e:q.TBinop(fa.OpAssign,{e:q.TVar(h),t:h.type,p:k},{e:q.TVar(g),t:g.type,p:k}),t:h.type,p:k};this.addExpr(b,k);this.checkExpr(k);h.kind==W.Var&&(k=e.h[g.id],this.varMap.set(g,h),e.remove(g.id),g=new Ye(h),g.read=k.read,g.write=k.write,e.h[h.id]=g)}}}f=[];a=[];for(g=e.iterator();g.hasNext();)switch(k=g.next(),h=k.v,h.kind._hx_index){case 1:var l={id:D.allocVarId(),name:h.name,kind:W.Var,type:h.type};this.uniqueName(l);
var m=c.h[h.id];null==m&&(m=new Ye(h),c.h[h.id]=m);m.read++;m=new Ye(l);m.write=1;c.h[l.id]=m;m=new Ye(l);m.read=1;a.push(m);this.addExpr(b,{e:q.TBinop(fa.OpAssign,{e:q.TVar(l),t:h.type,p:b.expr.p},{e:q.TVar(h),t:h.type,p:b.expr.p}),t:h.type,p:b.expr.p});this.varMap.set(h,l);k.local=!0;break;case 3:0<k.write&&(k={id:D.allocVarId(),name:h.name,kind:W.Local,type:h.type},this.uniqueName(k),f.push({e:q.TVarDecl(k,{e:q.TVar(h),t:h.type,p:d.expr.p}),t:u.TVoid,p:d.expr.p}),this.varMap.set(h,k))}for(g=0;g<
a.length;)h=a[g],++g,e.h[h.v.id]=h;for(a=c.iterator();a.hasNext();)g=a.next(),this.checkVar(g,!0,c,b.expr.p);for(a=e.iterator();a.hasNext();)g=a.next(),this.checkVar(g,!1,c,d.expr.p);for(a=this.varMap.keys();a.hasNext();)g=a.next(),h=this.varMap.h[this.varMap.h[g.__id__].__id__],null!=h&&this.varMap.set(g,h);d={ret:d.ret,ref:d.ref,kind:d.kind,args:d.args,expr:this.mapVars(d.expr)};a=d.expr.e;if(4==a._hx_index){a=a.el;for(g=0;g<f.length;)h=f[g],++g,a.unshift(h)}else f.push(d.expr),d.expr={e:q.TBlock(f),
t:u.TVoid,p:d.expr.p};f=[];for(c=c.iterator();c.hasNext();)a=c.next(),a.local||f.push(a.v);c=[];for(e=e.iterator();e.hasNext();)a=e.next(),a.local||c.push(a.v);f.sort(function(a,b){return a.id-b.id});c.sort(function(a,b){return a.id-b.id});return{vertex:{name:"vertex",vars:f,funs:[b]},fragment:{name:"fragment",vars:c,funs:[d]}}},addExpr:function(a,b){var c=a.expr.e;4==c._hx_index?c.el.push(b):a.expr={e:q.TBlock([a.expr,b]),t:u.TVoid,p:a.expr.p}},checkVar:function(a,b,c,d){switch(a.v.kind._hx_index){case 3:if(!b&&
(b=c.h[a.v.id],null==b||0==b.write))throw new n(new wb("Varying "+a.v.name+" is not written by vertex shader",d));break;case 4:if(a.requireInit)throw new n(new wb("Variable "+a.v.name+" is used without being initialized",d));}},mapVars:function(a){var b=a.e;return 1==b._hx_index?(b=this.varMap.h[b.v.__id__],null==b?a:{e:q.TVar(b),t:a.t,p:a.p}):D.map(a,K(this,this.mapVars))},get:function(a){var b=this.vars.h[a.id];null==b&&(b=new Ye(a),this.vars.h[a.id]=b,this.uniqueName(a));return b},uniqueName:function(a){if(!(a.kind==
W.Global||a.kind==W.Output||a.kind==W.Input)){a.parent=null;var b=a.name,c=this.varNames,b=null!=L[b]?c.getReserved(b):c.h[b];if(null!=b&&b!=a){for(b=a.name;48<=z.cca(b,b.length-1)&&57>=z.cca(b,b.length-1);)b=z.substr(b,0,-1);for(c=b==a.name?2:r.parseInt(z.substr(a.name,b.length,null));;){var d=this.varNames,e=b+c;if(!(null!=L[e]?d.existsReserved(e):d.h.hasOwnProperty(e)))break;++c}a.name=b+c}b=a.name;c=this.varNames;null!=L[b]?c.setReserved(b,a):c.h[b]=a}},checkExpr:function(a){var b=a.e;switch(b._hx_index){case 1:b=
this.get(b.v);0==b.write&&(b.requireInit=!0);b.read++;break;case 5:switch(b.op._hx_index){case 4:switch(b.e1.e._hx_index){case 1:a=b.e2;this.get(b.e1.e.v).write++;this.checkExpr(a);break;case 9:1==b.e1.e.e.e._hx_index?(a=b.e2,this.get(b.e1.e.e.e.v).write++,this.checkExpr(a)):D.iter(a,K(this,this.checkExpr));break;default:D.iter(a,K(this,this.checkExpr))}break;case 20:switch(b.e1.e._hx_index){case 1:a=b.e2;b=this.get(b.e1.e.v);0==b.write&&(b.requireInit=!0);b.read++;b.write++;this.checkExpr(a);break;
case 9:1==b.e1.e.e.e._hx_index?(a=b.e2,b=this.get(b.e1.e.e.e.v),0==b.write&&(b.requireInit=!0),b.read++,b.write++,this.checkExpr(a)):D.iter(a,K(this,this.checkExpr));break;default:D.iter(a,K(this,this.checkExpr))}break;default:D.iter(a,K(this,this.checkExpr))}break;case 7:a=b.init;b=this.get(b.v);b.local=!0;null!=a&&(this.checkExpr(a),b.write++);break;case 13:a=b.loop;var c=b.v;this.checkExpr(b.it);b=this.get(c);b.local=!0;b.write++;this.checkExpr(a);break;default:D.iter(a,K(this,this.checkExpr))}},
__class__:pk};var jl=function(){};p["hxsl.ChannelTools"]=jl;jl.__name__="hxsl.ChannelTools";jl.isPackedFormat=function(a){return a.format==V.nativeFormat};var n=function(a){Error.call(this);this.val=a;Error.captureStackTrace&&Error.captureStackTrace(this,n)};p["js._Boot.HaxeError"]=n;n.__name__="js._Boot.HaxeError";n.wrap=function(a){return a instanceof Error?a:new n(a)};n.__super__=Error;n.prototype=J(Error.prototype,{__class__:n});var Lk=function(){};p["js.html._CanvasElement.CanvasUtil"]=Lk;Lk.__name__=
"js.html._CanvasElement.CanvasUtil";Lk.getContextWebGL=function(a,b){var c=a.getContext("webgl",b);if(null!=c)return c;c=a.getContext("experimental-webgl",b);return null!=c?c:null};var Zk=function(){};p["js.lib._ArrayBuffer.ArrayBufferCompat"]=Zk;Zk.__name__="js.lib._ArrayBuffer.ArrayBufferCompat";Zk.sliceImpl=function(a,b){var c=new Uint8Array(this,a,null==b?null:b-a),d=new Uint8Array(c.byteLength);d.set(c);return d.buffer};var ah=function(a,b){tc.call(this,a,b)};p["safety.SafetyException"]=ah;ah.__name__=
"safety.SafetyException";ah.__super__=tc;ah.prototype=J(tc.prototype,{__class__:ah});var Rb=function(a,b){tc.call(this,a,b)};p["safety.NullPointerException"]=Rb;Rb.__name__="safety.NullPointerException";Rb.__super__=ah;Rb.prototype=J(ah.prototype,{__class__:Rb});var ue={};p["unifill._CodePoint.CodePoint_Impl_"]=ue;ue.__name__="unifill._CodePoint.CodePoint_Impl_";ue.fromInt=function(a){if(!(0<=a&&1114111>=a&&!(55296<=a&&56319>=a)&&!(56320<=a&&57343>=a)))throw new n(new ye(a));return a};ue.cons=function(a,
b){return(65535>=a?String.fromCodePoint(a):String.fromCodePoint((a>>10)+55232)+String.fromCodePoint(a&1023|56320))+b};ue.snoc=function(a,b){var c;c=65535>=b?String.fromCodePoint(b):String.fromCodePoint((b>>10)+55232)+String.fromCodePoint(b&1023|56320);return a+c};ue.addInt=function(a,b){var c=a+b;if(!(0<=c&&1114111>=c&&!(55296<=c&&56319>=c)&&!(56320<=c&&57343>=c)))throw new n(new ye(c));return c};ue.sub=function(a,b){return a-b};ue.subInt=function(a,b){var c=a-b;if(!(0<=c&&1114111>=c&&!(55296<=c&&
56319>=c)&&!(56320<=c&&57343>=c)))throw new n(new ye(c));return c};ue._new=function(a){return a};ue.toString=function(a){return 65535>=a?String.fromCodePoint(a):String.fromCodePoint((a>>10)+55232)+String.fromCodePoint(a&1023|56320)};ue.toInt=function(a){return a};var zk=function(a){this.i=0;this.string=a;this.index=0;this.endIndex=a.length};p["unifill.CodePointIter"]=zk;zk.__name__="unifill.CodePointIter";zk.prototype={hasNext:function(){return this.index<this.endIndex},next:function(){var a=this.i=
this.index,b=this.string.charCodeAt(this.index);this.index=a+(!(55296<=b&&56319>=b)?1:2);return ja.codePointAt(this.string,this.i)},__class__:zk};var cg=function(){};p["unifill.Exception"]=cg;cg.__name__="unifill.Exception";cg.prototype={toString:function(){throw new n(null);},__class__:cg};var ye=function(a){this.code=a};p["unifill.InvalidCodePoint"]=ye;ye.__name__="unifill.InvalidCodePoint";ye.__super__=cg;ye.prototype=J(cg.prototype,{toString:function(){return"InvalidCodePoint(code: "+this.code+
")"},__class__:ye});var Le=function(a){this.index=a};p["unifill.InvalidCodeUnitSequence"]=Le;Le.__name__="unifill.InvalidCodeUnitSequence";Le.__super__=cg;Le.prototype=J(cg.prototype,{toString:function(){return"InvalidCodeUnitSequence(index: "+this.index+")"},__class__:Le});var ac=function(){};p["unifill.InternalEncoding"]=ac;ac.__name__="unifill.InternalEncoding";ac.get_internalEncoding=function(){return"UTF-16"};ac.codeUnitAt=function(a,b){return a.charCodeAt(b)};ac.codePointAt=function(a,b){return ja.codePointAt(a,
b)};ac.charAt=function(a,b){var c=a.charCodeAt(b);return z.substr(a,b,!(55296<=c&&56319>=c)?1:2)};ac.codePointCount=function(a,b,c){return ja.codePointCount(a,b,c)};ac.codePointWidthAt=function(a,b){var c=a.charCodeAt(b);return 55296<=c&&56319>=c?2:1};ac.codePointWidthBefore=function(a,b){var c=a.charCodeAt(b-1);return 56320<=c&&57343>=c?2:1};ac.offsetByCodePoints=function(a,b,c){if(0<=c){for(var d=a.length,e=0;e<c&&b<d;){var f=a.charCodeAt(b);b+=!(55296<=f&&56319>=f)?1:2;++e}return b}for(d=0;d<-c&&
0<b;)e=a.charCodeAt(b-1),b-=!(56320<=e&&57343>=e)?1:2,++d;return b};ac.backwardOffsetByCodePoints=function(a,b,c){c=-c;if(0<=c){for(var d=a.length,e=0;e<c&&b<d;){var f=a.charCodeAt(b);b+=!(55296<=f&&56319>=f)?1:2;++e}return b}for(d=0;d<-c&&0<b;)e=a.charCodeAt(b-1),b-=!(56320<=e&&57343>=e)?1:2,++d;return b};ac.fromCodePoint=function(a){return 65535>=a?String.fromCodePoint(a):String.fromCodePoint((a>>10)+55232)+String.fromCodePoint(a&1023|56320)};ac.fromCodePoints=function(a){var b="";for(a=bh(a);a.hasNext();){var c=
a.next();65535>=c?b+=String.fromCodePoint(c):(b+=String.fromCodePoint((c>>10)+55232),b+=String.fromCodePoint(c&1023|56320))}return b};ac.validate=function(a){ja.validate(a)};ac.isValidString=function(a){try{return ja.validate(a),!0}catch(b){if((b instanceof n?b.val:b)instanceof Le)return!1;throw b;}};ac.encodeWith=function(a,b){65535>=b?a(b):(a((b>>10)+55232),a(b&1023|56320))};var $k=function(a,b,c){this.i=0;this.string=a;this.index=b;this.endIndex=c};p["unifill.InternalEncodingIter"]=$k;$k.__name__=
"unifill.InternalEncodingIter";$k.prototype={hasNext:function(){return this.index<this.endIndex},next:function(){var a=this.i=this.index,b=this.string.charCodeAt(this.index);this.index=a+(!(55296<=b&&56319>=b)?1:2);return this.i},__class__:$k};var sc=function(){};p["unifill.Unicode"]=sc;sc.__name__="unifill.Unicode";sc.decodeSurrogate=function(a,b){return a-55232<<10|b&1023};sc.encodeHighSurrogate=function(a){return(a>>10)+55232};sc.encodeLowSurrogate=function(a){return a&1023|56320};sc.isScalar=
function(a){return 0<=a&&1114111>=a&&!(55296<=a&&56319>=a)?!(56320<=a&&57343>=a):!1};sc.isHighSurrogate=function(a){return 55296<=a?56319>=a:!1};sc.isLowSurrogate=function(a){return 56320<=a?57343>=a:!1};var Gc=function(){};p["unifill.Unifill"]=Gc;Gc.__name__="unifill.Unifill";Gc.uLength=function(a){return ja.codePointCount(a,0,a.length)};Gc.uCharAt=function(a,b){var c;if(0<=b){c=0;for(var d=a.length,e=0;e<b&&c<d;){var f=a.charCodeAt(c);c+=!(55296<=f&&56319>=f)?1:2;++e}}else for(d=c=0;d<-b&&0<c;)e=
a.charCodeAt(c-1),c-=!(56320<=e&&57343>=e)?1:2,++d;d=a.charCodeAt(c);return z.substr(a,c,!(55296<=d&&56319>=d)?1:2)};Gc.uCharCodeAt=function(a,b){var c;if(0<=b){c=0;for(var d=a.length,e=0;e<b&&c<d;){var f=a.charCodeAt(c);c+=!(55296<=f&&56319>=f)?1:2;++e}}else for(d=c=0;d<-b&&0<c;)e=a.charCodeAt(c-1),c-=!(56320<=e&&57343>=e)?1:2,++d;return ja.codePointAt(a,c)};Gc.uCodePointAt=function(a,b){var c;if(0<=b){c=0;for(var d=a.length,e=0;e<b&&c<d;){var f=a.charCodeAt(c);c+=!(55296<=f&&56319>=f)?1:2;++e}}else for(d=
c=0;d<-b&&0<c;)e=a.charCodeAt(c-1),c-=!(56320<=e&&57343>=e)?1:2,++d;return ja.codePointAt(a,c)};Gc.uIndexOf=function(a,b,c){null==c&&(c=0);if(0<=c)for(var d=0,e=a.length,f=0;f<c&&d<e;){var g=a.charCodeAt(d),d=d+(!(55296<=g&&56319>=g)?1:2);++f}else for(e=d=0;e<-c&&0<d;)f=a.charCodeAt(d-1),d-=!(56320<=f&&57343>=f)?1:2,++e;c=d;b=a.indexOf(b,c);return 0<=b?ja.codePointCount(a,0,b):-1};Gc.uLastIndexOf=function(a,b,c){null==c&&(c=a.length-1);if(0<=c)for(var d=0,e=a.length,f=0;f<c&&d<e;){var g=a.charCodeAt(d),
d=d+(!(55296<=g&&56319>=g)?1:2);++f}else for(e=d=0;e<-c&&0<d;)f=a.charCodeAt(d-1),d-=!(56320<=f&&57343>=f)?1:2,++e;c=d;b=a.lastIndexOf(b,c);return 0<=b?ja.codePointCount(a,0,b):-1};Gc.uSplit=function(a,b){if(0==b.length){for(var c=[],d=0,e=0,f=a.length;e<f;){var d=e,g=a.charCodeAt(e),e=e+(!(55296<=g&&56319>=g)?1:2),g=a,h=g.charCodeAt(d),d=z.substr(g,d,!(55296<=h&&56319>=h)?1:2);c.push(d)}return c}return a.split(b)};Gc.uSubstr=function(a,b,c){var d=0<=b?0:a.length;if(0<=b)for(var e=a.length,f=0;f<
b&&d<e;){var g=a.charCodeAt(d),d=d+(!(55296<=g&&56319>=g)?1:2);++f}else for(e=0;e<-b&&0<d;)f=a.charCodeAt(d-1),d-=!(56320<=f&&57343>=f)?1:2,++e;b=d;if(null==c)c=a.length;else if(0>c)c=b;else{if(0<=c){d=b;e=a.length;for(f=0;f<c&&d<e;)g=a.charCodeAt(d),d+=!(55296<=g&&56319>=g)?1:2,++f}else{d=b;for(e=0;e<-c&&0<d;)f=a.charCodeAt(d-1),d-=!(56320<=f&&57343>=f)?1:2,++e}c=d}return a.substring(b,c)};Gc.uSubstring=function(a,b,c){if(0>b)b=0;else{if(0<=b)for(var d=0,e=a.length,f=0;f<b&&d<e;){var g=a.charCodeAt(d),
d=d+(!(55296<=g&&56319>=g)?1:2);++f}else for(e=d=0;e<-b&&0<d;)f=a.charCodeAt(d-1),d-=!(56320<=f&&57343>=f)?1:2,++e;b=d}if(null==c)c=a.length;else if(0>c)c=0;else{if(0<=c){d=0;e=a.length;for(f=0;f<c&&d<e;)g=a.charCodeAt(d),d+=!(55296<=g&&56319>=g)?1:2,++f}else for(e=d=0;e<-c&&0<d;)f=a.charCodeAt(d-1),d-=!(56320<=f&&57343>=f)?1:2,++e;c=d}return a.substring(b,c)};Gc.uIterator=function(a){return new zk(a)};Gc.uCompare=function(a,b){for(var c=0,d=0,e=a.length,f=0,g=0,h=b.length;d<e&&g<h;){var c=d,f=a.charCodeAt(d),
d=d+(!(55296<=f&&56319>=f)?1:2),c=ja.codePointAt(a,c),f=g,k=b.charCodeAt(g),g=g+(!(55296<=k&&56319>=k)?1:2),f=ja.codePointAt(b,f);if(c<f)return-1;if(c>f)return 1}return g<h?-1:d<e?1:0};Gc.uToString=function(a){var b="";for(a=bh(a);a.hasNext();){var c=a.next();65535>=c?b+=String.fromCodePoint(c):(b+=String.fromCodePoint((c>>10)+55232),b+=String.fromCodePoint(c&1023|56320))}return b};Gc.uAddChar=function(a,b){65535>=b?a.b+=String.fromCodePoint(b):(a.b+=String.fromCodePoint((b>>10)+55232),a.b+=String.fromCodePoint(b&
1023|56320))};var ja={};p["unifill._Utf16.Utf16_Impl_"]=ja;ja.__name__="unifill._Utf16.Utf16_Impl_";ja.fromCodePoint=function(a){return 65535>=a?String.fromCodePoint(a):String.fromCodePoint((a>>10)+55232)+String.fromCodePoint(a&1023|56320)};ja.fromCodePoints=function(a){var b="";for(a=bh(a);a.hasNext();){var c=a.next();65535>=c?b+=String.fromCodePoint(c):(b+=String.fromCodePoint((c>>10)+55232),b+=String.fromCodePoint(c&1023|56320))}return b};ja.fromString=function(a){return a};ja.fromArray=function(a){for(var b=
"",c=0;c<a.length;){var d=a[c];++c;b+=String.fromCodePoint(d)}return b};ja.encodeWith=function(a,b){65535>=b?a(b):(a((b>>10)+55232),a(b&1023|56320))};ja.codeUnitAt=function(a,b){return a.charCodeAt(b)};ja.codePointAt=function(a,b){return dg.decode_code_point(a.length,function(b){return a.charCodeAt(b)},b)};ja.charAt=function(a,b){var c=a.charCodeAt(b);return z.substr(a,b,!(55296<=c&&56319>=c)?1:2)};ja.codePointCount=function(a,b,c){for(var d=0;b<c;){var e=a.charCodeAt(b);b+=!(55296<=e&&56319>=e)?
1:2;++d}return d};ja.codePointWidthAt=function(a,b){var c=a.charCodeAt(b);return 55296<=c&&56319>=c?2:1};ja.codePointWidthBefore=function(a,b){var c=a.charCodeAt(b-1);return 56320<=c&&57343>=c?2:1};ja.offsetByCodePoints=function(a,b,c){if(0<=c){for(var d=a.length,e=0;e<c&&b<d;){var f=a.charCodeAt(b);b+=!(55296<=f&&56319>=f)?1:2;++e}return b}for(d=0;d<-c&&0<b;)e=a.charCodeAt(b-1),b-=!(56320<=e&&57343>=e)?1:2,++d;return b};ja.substr=function(a,b,c){return z.substr(a,b,c)};ja.validate=function(a){for(var b=
a.length,c=function(b){return a.charCodeAt(b)},d=0;d<b;){dg.decode_code_point(b,c,d);var e=a.charCodeAt(d),d=d+(!(55296<=e&&56319>=e)?1:2)}};ja.toString=function(a){return a};ja.toArray=function(a){for(var b=0,c=a.length,d=[];b<c;)d.push(a.charCodeAt(b++));return d};ja._new=function(a){return a};ja.get_length=function(a){return a.length};ja.forward_offset_by_code_points=function(a,b,c){for(var d=a.length,e=0;e<c&&b<d;){var f=a.charCodeAt(b);b+=!(55296<=f&&56319>=f)?1:2;++e}return b};ja.backward_offset_by_code_points=
function(a,b,c){for(var d=0;d<c&&0<b;){var e=a.charCodeAt(b-1);b-=!(56320<=e&&57343>=e)?1:2;++d}return b};var dg=function(){};p["unifill._Utf16.Utf16Impl"]=dg;dg.__name__="unifill._Utf16.Utf16Impl";dg.code_point_width=function(a){return 55296<=a&&56319>=a?2:1};dg.find_prev_code_point=function(a,b){var c=a(b-1);return 56320<=c&&57343>=c?2:1};dg.encode_code_point=function(a,b){65535>=b?a(b):(a((b>>10)+55232),a(b&1023|56320))};dg.decode_code_point=function(a,b,c){if(0>c||a<=c)throw new n(new Le(c));
var d=b(c);if(55296<=d&&56319>=d){if(0>c+1||a<=c+1)throw new n(new Le(c));a=b(c+1);if(56320<=a&&57343>=a)return d-55232<<10|a&1023;throw new n(new Le(c));}if(56320<=d&&57343>=d)throw new n(new Le(c));return d};var Ak={};p["unifill._Utf16.StringU16Buffer_Impl_"]=Ak;Ak.__name__="unifill._Utf16.StringU16Buffer_Impl_";Ak._new=function(){return new Bb};Ak.addUnit=function(a,b){a.b+=String.fromCodePoint(b)};Ak.getStringU16=function(a){return a.b};var jc={};p["unifill._Utf16.StringU16_Impl_"]=jc;jc.__name__=
"unifill._Utf16.StringU16_Impl_";jc.fromString=function(a){return a};jc.fromCodeUnit=function(a){return String.fromCodePoint(a)};jc.fromTwoCodeUnits=function(a,b){return String.fromCodePoint(a)+String.fromCodePoint(b)};jc.ofArray=function(a){for(var b="",c=0;c<a.length;){var d=a[c];++c;b+=String.fromCodePoint(d)}return b};jc.fromArray=function(a){for(var b="",c=0;c<a.length;){var d=a[c];++c;b+=String.fromCodePoint(d)}return b};jc.codeUnitAt=function(a,b){return a.charCodeAt(b)};jc.substr=function(a,
b,c){return z.substr(a,b,c)};jc.toString=function(a){return a};jc.toArray=function(a){for(var b=0,c=a.length,d=[];b<c;)d.push(a.charCodeAt(b++));return d};jc._new=function(a){return a};jc.get_length=function(a){return a.length};var ql=0;p.Math=Math;null==String.fromCodePoint&&(String.fromCodePoint=function(a){return 65536>a?String.fromCharCode(a):String.fromCharCode((a>>10)+55232)+String.fromCharCode((a&1023)+56320)});String.prototype.__class__=p.String=String;String.__name__="String";p.Array=Array;
Array.__name__="Array";Date.prototype.__class__=p.Date=Date;Date.__name__="Date";var vl={},tl={},ul=Number,sl=Boolean,wl={},xl={};lh.content=[{name:"resource/fonts/adobe-notdef/AND-Regular.otf",data:"T1RUTwAKAIAAAwAgQ0ZGIMRk+0cAACCcAAAhZERTSUcAAAABAABSBAAAAAhPUy8yAF+xmwAAARAAAABgY21hcCRDbtEAAAaUAAAZ6GhlYWQJ0ABoAAAArAAAADZoaGVhB1oD1gAAAOQAAAAkaG10eJPpkGQAAEIAAAAQBG1heHAIAVAAAAABCAAAAAZuYW1lceuV0wAAAXAAAAUkcG9zdP+GADMAACB8AAAAIAABAAAAAQAAk2lHYF8PPPUAAwPoAAAAANNoXkgAAAAA02heSABk/4gDhANwAAAAAwACAAAAAAAAAAEAAANw/4gAAAPoAGQAZAOEAAEAAAAAAAAAAAAAAAAAAAABAABQAAgBAAAAAwPoAZAABQAAAooCWAAAAEsCigJYAAABXgAyANwAAAAAAAAAAAAAAAD3/67/+9///w/gAD8AAAAAQURCTwBAAAD//wNw/4gAAANwAHhgLwH/AAAAAAAAAAAAAAAgAAAAAAALAIoAAwABBAkAAACIAAAAAwABBAkAAQAYAIgAAwABBAkAAgAOAKAAAwABBAkAAwA4AK4AAwABBAkABAAYAIgAAwABBAkABQBsAOYAAwABBAkABgAWAVIAAwABBAkACAA0AWgAAwABBAkACwA0AZwAAwABBAkADQKWAdAAAwABBAkADgA0BGYAQwBvAHAAeQByAGkAZwBoAHQAIACpACAAMgAwADEANgAgAEEAZABvAGIAZQAgAFMAeQBzAHQAZQBtAHMAIABJAG4AYwBvAHIAcABvAHIAYQB0AGUAZAAgACgAaAB0AHQAcAA6AC8ALwB3AHcAdwAuAGEAZABvAGIAZQAuAGMAbwBtAC8AKQAuAEEAZABvAGIAZQAgAE4AbwB0AEQAZQBmAFIAZQBnAHUAbABhAHIAMQAuADAAMAAwADsAQQBEAEIATwA7AEEATgBEAC0AUgBlAGcAdQBsAGEAcgA7AEEARABPAEIARQBWAGUAcgBzAGkAbwBuACAAMQAuADAAMAAwADsAUABTACAAMQA7AGgAbwB0AGMAbwBuAHYAIAAxAC4AMAAuADkAOAA7AG0AYQBrAGUAbwB0AGYALgBsAGkAYgAyAC4ANQAuADYANQAyADIAMABBAE4ARAAtAFIAZQBnAHUAbABhAHIAQQBkAG8AYgBlACAAUwB5AHMAdABlAG0AcwAgAEkAbgBjAG8AcgBwAG8AcgBhAHQAZQBkAGgAdAB0AHAAOgAvAC8AdwB3AHcALgBhAGQAbwBiAGUALgBjAG8AbQAvAHQAeQBwAGUALwBUAGgAaQBzACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAgAGkAcwAgAGwAaQBjAGUAbgBzAGUAZAAgAHUAbgBkAGUAcgAgAHQAaABlACAAUwBJAEwAIABPAHAAZQBuACAARgBvAG4AdAAgAEwAaQBjAGUAbgBzAGUALAAgAFYAZQByAHMAaQBvAG4AIAAxAC4AMQAuACAAVABoAGkAcwAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIABpAHMAIABkAGkAcwB0AHIAaQBiAHUAdABlAGQAIABvAG4AIABhAG4AIAAiAEEAUwAgAEkAUwAiACAAQgBBAFMASQBTACwAIABXAEkAVABIAE8AVQBUACAAVwBBAFIAUgBBAE4AVABJAEUAUwAgAE8AUgAgAEMATwBOAEQASQBUAEkATwBOAFMAIABPAEYAIABBAE4AWQAgAEsASQBOAEQALAAgAGUAaQB0AGgAZQByACAAZQB4AHAAcgBlAHMAcwAgAG8AcgAgAGkAbQBwAGwAaQBlAGQALgAgAFMAZQBlACAAdABoAGUAIABTAEkATAAgAE8AcABlAG4AIABGAG8AbgB0ACAATABpAGMAZQBuAHMAZQAgAGYAbwByACAAdABoAGUAIABzAHAAZQBjAGkAZgBpAGMAIABsAGEAbgBnAHUAYQBnAGUALAAgAHAAZQByAG0AaQBzAHMAaQBvAG4AcwAgAGEAbgBkACAAbABpAG0AaQB0AGEAdABpAG8AbgBzACAAZwBvAHYAZQByAG4AaQBuAGcAIAB5AG8AdQByACAAdQBzAGUAIABvAGYAIAB0AGgAaQBzACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAuAGgAdAB0AHAAOgAvAC8AcwBjAHIAaQBwAHQAcwAuAHMAaQBsAC4AbwByAGcALwBPAEYATAAAAAUAAAADAAAAOAAAAAQAAABYAAEAAAAAACwAAwABAAAAOAADAAoAAABYAAYADAAAAAAAAQAAAAQAIAAAAAQABAABAAAH////AAAAAP//AAEAAQAAAAAADAAAAAAZkAAAAAAAAAIgAAAAAAAAB/8AAAABAAAIAAAAD/8AAAABAAAQAAAAF/8AAAABAAAYAAAAH/8AAAABAAAgAAAAJ/8AAAABAAAoAAAAL/8AAAABAAAwAAAAN/8AAAABAAA4AAAAP/8AAAABAABAAAAAR/8AAAABAABIAAAAT/8AAAABAABQAAAAV/8AAAABAABYAAAAX/8AAAABAABgAAAAZ/8AAAABAABoAAAAb/8AAAABAABwAAAAd/8AAAABAAB4AAAAf/8AAAABAACAAAAAh/8AAAABAACIAAAAj/8AAAABAACQAAAAl/8AAAABAACYAAAAn/8AAAABAACgAAAAp/8AAAABAACoAAAAr/8AAAABAACwAAAAt/8AAAABAAC4AAAAv/8AAAABAADAAAAAx/8AAAABAADIAAAAz/8AAAABAADQAAAA1/8AAAABAADgAAAA5/8AAAABAADoAAAA7/8AAAABAADwAAAA9/8AAAABAAD4AAAA/c8AAAABAAD98AAA//0AAAXxAAEAAAABB/8AAAABAAEIAAABD/8AAAABAAEQAAABF/8AAAABAAEYAAABH/8AAAABAAEgAAABJ/8AAAABAAEoAAABL/8AAAABAAEwAAABN/8AAAABAAE4AAABP/8AAAABAAFAAAABR/8AAAABAAFIAAABT/8AAAABAAFQAAABV/8AAAABAAFYAAABX/8AAAABAAFgAAABZ/8AAAABAAFoAAABb/8AAAABAAFwAAABd/8AAAABAAF4AAABf/8AAAABAAGAAAABh/8AAAABAAGIAAABj/8AAAABAAGQAAABl/8AAAABAAGYAAABn/8AAAABAAGgAAABp/8AAAABAAGoAAABr/8AAAABAAGwAAABt/8AAAABAAG4AAABv/8AAAABAAHAAAABx/8AAAABAAHIAAABz/8AAAABAAHQAAAB1/8AAAABAAHYAAAB3/8AAAABAAHgAAAB5/8AAAABAAHoAAAB7/8AAAABAAHwAAAB9/8AAAABAAH4AAAB//0AAAABAAIAAAACB/8AAAABAAIIAAACD/8AAAABAAIQAAACF/8AAAABAAIYAAACH/8AAAABAAIgAAACJ/8AAAABAAIoAAACL/8AAAABAAIwAAACN/8AAAABAAI4AAACP/8AAAABAAJAAAACR/8AAAABAAJIAAACT/8AAAABAAJQAAACV/8AAAABAAJYAAACX/8AAAABAAJgAAACZ/8AAAABAAJoAAACb/8AAAABAAJwAAACd/8AAAABAAJ4AAACf/8AAAABAAKAAAACh/8AAAABAAKIAAACj/8AAAABAAKQAAACl/8AAAABAAKYAAACn/8AAAABAAKgAAACp/8AAAABAAKoAAACr/8AAAABAAKwAAACt/8AAAABAAK4AAACv/8AAAABAALAAAACx/8AAAABAALIAAACz/8AAAABAALQAAAC1/8AAAABAALYAAAC3/8AAAABAALgAAAC5/8AAAABAALoAAAC7/8AAAABAALwAAAC9/8AAAABAAL4AAAC//0AAAABAAMAAAADB/8AAAABAAMIAAADD/8AAAABAAMQAAADF/8AAAABAAMYAAADH/8AAAABAAMgAAADJ/8AAAABAAMoAAADL/8AAAABAAMwAAADN/8AAAABAAM4AAADP/8AAAABAANAAAADR/8AAAABAANIAAADT/8AAAABAANQAAADV/8AAAABAANYAAADX/8AAAABAANgAAADZ/8AAAABAANoAAADb/8AAAABAANwAAADd/8AAAABAAN4AAADf/8AAAABAAOAAAADh/8AAAABAAOIAAADj/8AAAABAAOQAAADl/8AAAABAAOYAAADn/8AAAABAAOgAAADp/8AAAABAAOoAAADr/8AAAABAAOwAAADt/8AAAABAAO4AAADv/8AAAABAAPAAAADx/8AAAABAAPIAAADz/8AAAABAAPQAAAD1/8AAAABAAPYAAAD3/8AAAABAAPgAAAD5/8AAAABAAPoAAAD7/8AAAABAAPwAAAD9/8AAAABAAP4AAAD//0AAAABAAQAAAAEB/8AAAABAAQIAAAED/8AAAABAAQQAAAEF/8AAAABAAQYAAAEH/8AAAABAAQgAAAEJ/8AAAABAAQoAAAEL/8AAAABAAQwAAAEN/8AAAABAAQ4AAAEP/8AAAABAARAAAAER/8AAAABAARIAAAET/8AAAABAARQAAAEV/8AAAABAARYAAAEX/8AAAABAARgAAAEZ/8AAAABAARoAAAEb/8AAAABAARwAAAEd/8AAAABAAR4AAAEf/8AAAABAASAAAAEh/8AAAABAASIAAAEj/8AAAABAASQAAAEl/8AAAABAASYAAAEn/8AAAABAASgAAAEp/8AAAABAASoAAAEr/8AAAABAASwAAAEt/8AAAABAAS4AAAEv/8AAAABAATAAAAEx/8AAAABAATIAAAEz/8AAAABAATQAAAE1/8AAAABAATYAAAE3/8AAAABAATgAAAE5/8AAAABAAToAAAE7/8AAAABAATwAAAE9/8AAAABAAT4AAAE//0AAAABAAUAAAAFB/8AAAABAAUIAAAFD/8AAAABAAUQAAAFF/8AAAABAAUYAAAFH/8AAAABAAUgAAAFJ/8AAAABAAUoAAAFL/8AAAABAAUwAAAFN/8AAAABAAU4AAAFP/8AAAABAAVAAAAFR/8AAAABAAVIAAAFT/8AAAABAAVQAAAFV/8AAAABAAVYAAAFX/8AAAABAAVgAAAFZ/8AAAABAAVoAAAFb/8AAAABAAVwAAAFd/8AAAABAAV4AAAFf/8AAAABAAWAAAAFh/8AAAABAAWIAAAFj/8AAAABAAWQAAAFl/8AAAABAAWYAAAFn/8AAAABAAWgAAAFp/8AAAABAAWoAAAFr/8AAAABAAWwAAAFt/8AAAABAAW4AAAFv/8AAAABAAXAAAAFx/8AAAABAAXIAAAFz/8AAAABAAXQAAAF1/8AAAABAAXYAAAF3/8AAAABAAXgAAAF5/8AAAABAAXoAAAF7/8AAAABAAXwAAAF9/8AAAABAAX4AAAF//0AAAABAAYAAAAGB/8AAAABAAYIAAAGD/8AAAABAAYQAAAGF/8AAAABAAYYAAAGH/8AAAABAAYgAAAGJ/8AAAABAAYoAAAGL/8AAAABAAYwAAAGN/8AAAABAAY4AAAGP/8AAAABAAZAAAAGR/8AAAABAAZIAAAGT/8AAAABAAZQAAAGV/8AAAABAAZYAAAGX/8AAAABAAZgAAAGZ/8AAAABAAZoAAAGb/8AAAABAAZwAAAGd/8AAAABAAZ4AAAGf/8AAAABAAaAAAAGh/8AAAABAAaIAAAGj/8AAAABAAaQAAAGl/8AAAABAAaYAAAGn/8AAAABAAagAAAGp/8AAAABAAaoAAAGr/8AAAABAAawAAAGt/8AAAABAAa4AAAGv/8AAAABAAbAAAAGx/8AAAABAAbIAAAGz/8AAAABAAbQAAAG1/8AAAABAAbYAAAG3/8AAAABAAbgAAAG5/8AAAABAAboAAAG7/8AAAABAAbwAAAG9/8AAAABAAb4AAAG//0AAAABAAcAAAAHB/8AAAABAAcIAAAHD/8AAAABAAcQAAAHF/8AAAABAAcYAAAHH/8AAAABAAcgAAAHJ/8AAAABAAcoAAAHL/8AAAABAAcwAAAHN/8AAAABAAc4AAAHP/8AAAABAAdAAAAHR/8AAAABAAdIAAAHT/8AAAABAAdQAAAHV/8AAAABAAdYAAAHX/8AAAABAAdgAAAHZ/8AAAABAAdoAAAHb/8AAAABAAdwAAAHd/8AAAABAAd4AAAHf/8AAAABAAeAAAAHh/8AAAABAAeIAAAHj/8AAAABAAeQAAAHl/8AAAABAAeYAAAHn/8AAAABAAegAAAHp/8AAAABAAeoAAAHr/8AAAABAAewAAAHt/8AAAABAAe4AAAHv/8AAAABAAfAAAAHx/8AAAABAAfIAAAHz/8AAAABAAfQAAAH1/8AAAABAAfYAAAH3/8AAAABAAfgAAAH5/8AAAABAAfoAAAH7/8AAAABAAfwAAAH9/8AAAABAAf4AAAH//0AAAABAAgAAAAIB/8AAAABAAgIAAAID/8AAAABAAgQAAAIF/8AAAABAAgYAAAIH/8AAAABAAggAAAIJ/8AAAABAAgoAAAIL/8AAAABAAgwAAAIN/8AAAABAAg4AAAIP/8AAAABAAhAAAAIR/8AAAABAAhIAAAIT/8AAAABAAhQAAAIV/8AAAABAAhYAAAIX/8AAAABAAhgAAAIZ/8AAAABAAhoAAAIb/8AAAABAAhwAAAId/8AAAABAAh4AAAIf/8AAAABAAiAAAAIh/8AAAABAAiIAAAIj/8AAAABAAiQAAAIl/8AAAABAAiYAAAIn/8AAAABAAigAAAIp/8AAAABAAioAAAIr/8AAAABAAiwAAAIt/8AAAABAAi4AAAIv/8AAAABAAjAAAAIx/8AAAABAAjIAAAIz/8AAAABAAjQAAAI1/8AAAABAAjYAAAI3/8AAAABAAjgAAAI5/8AAAABAAjoAAAI7/8AAAABAAjwAAAI9/8AAAABAAj4AAAI//0AAAABAAkAAAAJB/8AAAABAAkIAAAJD/8AAAABAAkQAAAJF/8AAAABAAkYAAAJH/8AAAABAAkgAAAJJ/8AAAABAAkoAAAJL/8AAAABAAkwAAAJN/8AAAABAAk4AAAJP/8AAAABAAlAAAAJR/8AAAABAAlIAAAJT/8AAAABAAlQAAAJV/8AAAABAAlYAAAJX/8AAAABAAlgAAAJZ/8AAAABAAloAAAJb/8AAAABAAlwAAAJd/8AAAABAAl4AAAJf/8AAAABAAmAAAAJh/8AAAABAAmIAAAJj/8AAAABAAmQAAAJl/8AAAABAAmYAAAJn/8AAAABAAmgAAAJp/8AAAABAAmoAAAJr/8AAAABAAmwAAAJt/8AAAABAAm4AAAJv/8AAAABAAnAAAAJx/8AAAABAAnIAAAJz/8AAAABAAnQAAAJ1/8AAAABAAnYAAAJ3/8AAAABAAngAAAJ5/8AAAABAAnoAAAJ7/8AAAABAAnwAAAJ9/8AAAABAAn4AAAJ//0AAAABAAoAAAAKB/8AAAABAAoIAAAKD/8AAAABAAoQAAAKF/8AAAABAAoYAAAKH/8AAAABAAogAAAKJ/8AAAABAAooAAAKL/8AAAABAAowAAAKN/8AAAABAAo4AAAKP/8AAAABAApAAAAKR/8AAAABAApIAAAKT/8AAAABAApQAAAKV/8AAAABAApYAAAKX/8AAAABAApgAAAKZ/8AAAABAApoAAAKb/8AAAABAApwAAAKd/8AAAABAAp4AAAKf/8AAAABAAqAAAAKh/8AAAABAAqIAAAKj/8AAAABAAqQAAAKl/8AAAABAAqYAAAKn/8AAAABAAqgAAAKp/8AAAABAAqoAAAKr/8AAAABAAqwAAAKt/8AAAABAAq4AAAKv/8AAAABAArAAAAKx/8AAAABAArIAAAKz/8AAAABAArQAAAK1/8AAAABAArYAAAK3/8AAAABAArgAAAK5/8AAAABAAroAAAK7/8AAAABAArwAAAK9/8AAAABAAr4AAAK//0AAAABAAsAAAALB/8AAAABAAsIAAALD/8AAAABAAsQAAALF/8AAAABAAsYAAALH/8AAAABAAsgAAALJ/8AAAABAAsoAAALL/8AAAABAAswAAALN/8AAAABAAs4AAALP/8AAAABAAtAAAALR/8AAAABAAtIAAALT/8AAAABAAtQAAALV/8AAAABAAtYAAALX/8AAAABAAtgAAALZ/8AAAABAAtoAAALb/8AAAABAAtwAAALd/8AAAABAAt4AAALf/8AAAABAAuAAAALh/8AAAABAAuIAAALj/8AAAABAAuQAAALl/8AAAABAAuYAAALn/8AAAABAAugAAALp/8AAAABAAuoAAALr/8AAAABAAuwAAALt/8AAAABAAu4AAALv/8AAAABAAvAAAALx/8AAAABAAvIAAALz/8AAAABAAvQAAAL1/8AAAABAAvYAAAL3/8AAAABAAvgAAAL5/8AAAABAAvoAAAL7/8AAAABAAvwAAAL9/8AAAABAAv4AAAL//0AAAABAAwAAAAMB/8AAAABAAwIAAAMD/8AAAABAAwQAAAMF/8AAAABAAwYAAAMH/8AAAABAAwgAAAMJ/8AAAABAAwoAAAML/8AAAABAAwwAAAMN/8AAAABAAw4AAAMP/8AAAABAAxAAAAMR/8AAAABAAxIAAAMT/8AAAABAAxQAAAMV/8AAAABAAxYAAAMX/8AAAABAAxgAAAMZ/8AAAABAAxoAAAMb/8AAAABAAxwAAAMd/8AAAABAAx4AAAMf/8AAAABAAyAAAAMh/8AAAABAAyIAAAMj/8AAAABAAyQAAAMl/8AAAABAAyYAAAMn/8AAAABAAygAAAMp/8AAAABAAyoAAAMr/8AAAABAAywAAAMt/8AAAABAAy4AAAMv/8AAAABAAzAAAAMx/8AAAABAAzIAAAMz/8AAAABAAzQAAAM1/8AAAABAAzYAAAM3/8AAAABAAzgAAAM5/8AAAABAAzoAAAM7/8AAAABAAzwAAAM9/8AAAABAAz4AAAM//0AAAABAA0AAAANB/8AAAABAA0IAAAND/8AAAABAA0QAAANF/8AAAABAA0YAAANH/8AAAABAA0gAAANJ/8AAAABAA0oAAANL/8AAAABAA0wAAANN/8AAAABAA04AAANP/8AAAABAA1AAAANR/8AAAABAA1IAAANT/8AAAABAA1QAAANV/8AAAABAA1YAAANX/8AAAABAA1gAAANZ/8AAAABAA1oAAANb/8AAAABAA1wAAANd/8AAAABAA14AAANf/8AAAABAA2AAAANh/8AAAABAA2IAAANj/8AAAABAA2QAAANl/8AAAABAA2YAAANn/8AAAABAA2gAAANp/8AAAABAA2oAAANr/8AAAABAA2wAAANt/8AAAABAA24AAANv/8AAAABAA3AAAANx/8AAAABAA3IAAANz/8AAAABAA3QAAAN1/8AAAABAA3YAAAN3/8AAAABAA3gAAAN5/8AAAABAA3oAAAN7/8AAAABAA3wAAAN9/8AAAABAA34AAAN//0AAAABAA4AAAAOB/8AAAABAA4IAAAOD/8AAAABAA4QAAAOF/8AAAABAA4YAAAOH/8AAAABAA4gAAAOJ/8AAAABAA4oAAAOL/8AAAABAA4wAAAON/8AAAABAA44AAAOP/8AAAABAA5AAAAOR/8AAAABAA5IAAAOT/8AAAABAA5QAAAOV/8AAAABAA5YAAAOX/8AAAABAA5gAAAOZ/8AAAABAA5oAAAOb/8AAAABAA5wAAAOd/8AAAABAA54AAAOf/8AAAABAA6AAAAOh/8AAAABAA6IAAAOj/8AAAABAA6QAAAOl/8AAAABAA6YAAAOn/8AAAABAA6gAAAOp/8AAAABAA6oAAAOr/8AAAABAA6wAAAOt/8AAAABAA64AAAOv/8AAAABAA7AAAAOx/8AAAABAA7IAAAOz/8AAAABAA7QAAAO1/8AAAABAA7YAAAO3/8AAAABAA7gAAAO5/8AAAABAA7oAAAO7/8AAAABAA7wAAAO9/8AAAABAA74AAAO//0AAAABAA8AAAAPB/8AAAABAA8IAAAPD/8AAAABAA8QAAAPF/8AAAABAA8YAAAPH/8AAAABAA8gAAAPJ/8AAAABAA8oAAAPL/8AAAABAA8wAAAPN/8AAAABAA84AAAPP/8AAAABAA9AAAAPR/8AAAABAA9IAAAPT/8AAAABAA9QAAAPV/8AAAABAA9YAAAPX/8AAAABAA9gAAAPZ/8AAAABAA9oAAAPb/8AAAABAA9wAAAPd/8AAAABAA94AAAPf/8AAAABAA+AAAAPh/8AAAABAA+IAAAPj/8AAAABAA+QAAAPl/8AAAABAA+YAAAPn/8AAAABAA+gAAAPp/8AAAABAA+oAAAPr/8AAAABAA+wAAAPt/8AAAABAA+4AAAPv/8AAAABAA/AAAAPx/8AAAABAA/IAAAPz/8AAAABAA/QAAAP1/8AAAABAA/YAAAP3/8AAAABAA/gAAAP5/8AAAABAA/oAAAP7/8AAAABAA/wAAAP9/8AAAABAA/4AAAP//0AAAABABAAAAAQB/8AAAABABAIAAAQD/8AAAABABAQAAAQF/8AAAABABAYAAAQH/8AAAABABAgAAAQJ/8AAAABABAoAAAQL/8AAAABABAwAAAQN/8AAAABABA4AAAQP/8AAAABABBAAAAQR/8AAAABABBIAAAQT/8AAAABABBQAAAQV/8AAAABABBYAAAQX/8AAAABABBgAAAQZ/8AAAABABBoAAAQb/8AAAABABBwAAAQd/8AAAABABB4AAAQf/8AAAABABCAAAAQh/8AAAABABCIAAAQj/8AAAABABCQAAAQl/8AAAABABCYAAAQn/8AAAABABCgAAAQp/8AAAABABCoAAAQr/8AAAABABCwAAAQt/8AAAABABC4AAAQv/8AAAABABDAAAAQx/8AAAABABDIAAAQz/8AAAABABDQAAAQ1/8AAAABABDYAAAQ3/8AAAABABDgAAAQ5/8AAAABABDoAAAQ7/8AAAABABDwAAAQ9/8AAAABABD4AAAQ//0AAAABAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQCAAEBAQxBTkQtUmVndWxhcgABAQE6+Bv4HIsMHvgdAfgeAvgeA/gYBIwMAfsqDAPv+wz6GPoEBYwMHxwIAQwi918P92wR92QMJRwg4QwkAAUBAQYOUFxvQWRvYmVJZGVudGl0eUNvcHlyaWdodCAyMDE2IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkIChodHRwOi8vd3d3LmFkb2JlLmNvbS8pLkFkb2JlIE5vdERlZkFORC1SZWd1bGFyLUdlbmVyaWMAAAIAAQf/AwABAAAACAEIAQIAAQADAAUABwAJAAsADQAPABEAEwAVABcAGQAbAB0AHwAhACMAJQAnACkAKwAtAC8AMQAzADUANwA5ADsAPQA/AEEAQwBFAEcASQBLAE0ATwBRAFMAVQBXAFkAWwBdAF8AYQBjAGUAZwBpAGsAbQBvAHEAcwB1AHcAeQB7AH0AfwCBAIMAhQCHAIkAiwCNAI8AkQCTAJUAlwCZAJsAnQCfAKEAowClAKcAqQCrAK0ArwCxALMAtQC3ALkAuwC9AL8AwQDDAMUAxwDJAMsAzQDPANEA0wDVANcA2QDbAN0A3wDhAOMA5QDnAOkA6wDtAO8A8QDzAPUA9wD5APsA/QD/AQEBAwEFAQcBCQELAQ0BDwERARMBFQEXARkBGwEdAR8BIQEjASUBJwEpASsBLQEvATEBMwE1ATcBOQE7AT0BPwFBAUMBRQFHAUkBSwFNAU8BUQFTAVUBVwFZAVsBXQFfAWEBYwFlAWcBaQFrAW0BbwFxAXMBdQF3AXkBewF9AX8BgQGDAYUBhwGJAYsBjQGPAZEBkwGVAZcBmQGbAZ0BnwGhAaMBpQGnAakBqwGtAa8BsQGzAbUBtwG5AbsBvQG/AcEBwwHFAccByQHLAc0BzwHRAdMB1QHXAdkB2wHdAd8B4QHjAeUB5wHpAesB7QHvAfEB8wH1AfcB+QH7Af0B/wIBAgMCBQIHAgkCCwINAg8CEQITAhUCFwIZAhsCHQIfAiECIwIlAicCKQIrAi0CLwIxAjMCNQI3AjkCOwI9Aj8CQQJDAkUCRwJJAksCTQJPAlECUwJVAlcCWQJbAl0CXwJhAmMCZQJnAmkCawJtAm8CcQJzAnUCdwJ5AnsCfQJ/AoECgwKFAocCiQKLAo0CjwKRApMClQKXApkCmwKdAp8CoQKjAqUCpwKpAqsCrQKvArECswK1ArcCuQK7Ar0CvwLBAsMCxQLHAskCywLNAs8C0QLTAtUC1wLZAtsC3QLfAuEC4wLlAucC6QLrAu0C7wLxAvMC9QL3AvkC+wL9Av8DAQMDAwUDBwMJAwsDDQMPAxEDEwMVAxcDGQMbAx0DHwMhAyMDJQMnAykDKwMtAy8DMQMzAzUDNwM5AzsDPQM/A0EDQwNFA0cDSQNLA00DTwNRA1MDVQNXA1kDWwNdA18DYQNjA2UDZwNpA2sDbQNvA3EDcwN1A3cDeQN7A30DfwOBA4MDhQOHA4kDiwONA48DkQOTA5UDlwOZA5sDnQOfA6EDowOlA6cDqQOrA60DrwOxA7MDtQO3A7kDuwO9A78DwQPDA8UDxwPJA8sDzQPPA9ED0wPVA9cD2QPbA90D3wPhA+MD5QPnA+kD6wPtA+8D8QPzA/UD9wP5A/sD/QP/BAEEAwQFBAcECQQLBA0EDwQRBBMEFQQXBBkEGwQdBB8EIQQjBCUEJwQpBCsELQQvBDEEMwQ1BDcEOQQ7BD0EPwRBBEMERQRHBEkESwRNBE8EUQRTBFUEVwRZBFsEXQRfBGEEYwRlBGcEaQRrBG0EbwRxBHMEdQR3BHkEewR9BH8EgQSDBIUEhwSJBIsEjQSPBJEEkwSVBJcEmQSbBJ0EnwShBKMEpQSnBKkEqwStBK8EsQSzBLUEtwS5BLsEvQS/BMEEwwTFBMcEyQTLBM0EzwTRBNME1QTXBNkE2wTdBN8E4QTjBOUE5wTpBOsE7QTvBPEE8wT1BPcE+QT7BP0E/wUBBQMFBQUHBQkFCwUNBQ8FEQUTBRUFFwUZBRsFHQUfBSEFIwUlBScFKQUrBS0FLwUxBTMFNQU3BTkFOwU9BT8FQQVDBUUFRwVJBUsFTQVPBVEFUwVVBVcFWQVbBV0FXwVhBWMFZQVnBWkFawVtBW8FcQVzBXUFdwV5BXsFfQV/BYEFgwWFBYcFiQWLBY0FjwWRBZMFlQWXBZkFmwWdBZ8FoQWjBaUFpwWpBasFrQWvBbEFswW1BbcFuQW7Bb0FvwXBBcMFxQXHBckFywXNBc8F0QXTBdUF1wXZBdsF3QXfBeEF4wXlBecF6QXrBe0F7wXxBfMF9QX3BfkF+wX9Bf8GAQYDBgUGBwYJBgsGDQYPBhEGEwYVBhcGGQYbBh0GHwYhBiMGJQYnBikGKwYtBi8GMQYzBjUGNwY5BjsGPQY/BkEGQwZFBkcGSQZLBk0GTwZRBlMGVQZXBlkGWwZdBl8GYQZjBmUGZwZpBmsGbQZvBnEGcwZ1BncGeQZ7Bn0GfwaBBoMGhQaHBokGiwaNBo8GkQaTBpUGlwaZBpsGnQafBqEGowalBqcGqQarBq0GrwaxBrMGtQa3BrkGuwa9Br8GwQbDBsUGxwbJBssGzQbPBtEG0wbVBtcG2QbbBt0G3wbhBuMG5QbnBukG6wbtBu8G8QbzBvUG9wb5BvsG/Qb/BwEHAwcFBwcHCQcLBw0HDwcRBxMHFQcXBxkHGwcdBx8HIQcjByUHJwcpBysHLQcvBzEHMwc1BzcHOQc7Bz0HPwdBB0MHRQdHB0kHSwdNB08HUQdTB1UHVwdZB1sHXQdfB2EHYwdlB2cHaQdrB20HbwdxB3MHdQd3B3kHewd9B38HgQeDB4UHhweJB4sHjQePB5EHkweVB5cHmQebB50HnwehB6MHpQenB6kHqwetB68HsQezB7UHtwe5B7sHvQe/B8EHwwfFB8cHyQfLB80HzwfRB9MH1QfXB9kH2wfdB98H4QfjB+UH5wfpB+sH7QfvB/EH8wf1B/cH+Qf7B/0H/wgBCAMIBQgHCAkICwgNCA8IEQgTCBUIFwgZCBsIHQgfCCEIIwglCCcIKQgrCC0ILwgxCDMINQg3CDkIOwg9CD8IQQhDCEUIRwhJCEsITQhPCFEIUwhVCFcIWQhbCF0IXwhhCGMIZQhnCGkIawhtCG8IcQhzCHUIdwh5CHsIfQh/CIEIgwiFCIcIiQiLCI0IjwiRCJMIlQiXCJkImwidCJ8IoQijCKUIpwipCKsIrQivCLEIswi1CLcIuQi7CL0IvwjBCMMIxQjHCMkIywjNCM8I0QjTCNUI1wjZCNsI3QjfCOEI4wjlCOcI6QjrCO0I7wjxCPMI9Qj3CPkI+wj9CP8JAQkDCQUJBwkJCQsJDQkPCREJEwkVCRcJGQkbCR0JHwkhCSMJJQknCSkJKwktCS8JMQkzCTUJNwk5CTsJPQk/CUEJQwlFCUcJSQlLCU0JTwlRCVMJVQlXCVkJWwldCV8JYQljCWUJZwlpCWsJbQlvCXEJcwl1CXcJeQl7CX0JfwmBCYMJhQmHCYkJiwmNCY8JkQmTCZUJlwmZCZsJnQmfCaEJowmlCacJqQmrCa0JrwmxCbMJtQm3CbkJuwm9Cb8JwQnDCcUJxwnJCcsJzQnPCdEJ0wnVCdcJ2QnbCd0J3wnhCeMJ5QnnCekJ6wntCe8J8QnzCfUJ9wn5CfsJ/Qn/CgEKAwoFCgcKCQoLCg0KDwoRChMKFQoXChkKGwodCh8KIQojCiUKJwopCisKLQovCjEKMwo1CjcKOQo7Cj0KPwpBCkMKRQpHCkkKSwpNCk8KUQpTClUKVwpZClsKXQpfCmEKYwplCmcKaQprCm0KbwpxCnMKdQp3CnkKewp9Cn8KgQqDCoUKhwqJCosKjQqPCpEKkwqVCpcKmQqbCp0KnwqhCqMKpQqnCqkKqwqtCq8KsQqzCrUKtwq5CrsKvQq/CsEKwwrFCscKyQrLCs0KzwrRCtMK1QrXCtkK2wrdCt8K4QrjCuUK5wrpCusK7QrvCvEK8wr1CvcK+Qr7Cv0K/wsBCwMLBQsHCwkLCwsNCw8LEQsTCxULFwsZCxsLHQsfCyELIwslCycLKQsrCy0LLwsxCzMLNQs3CzkLOws9Cz8LQQtDC0ULRwtJC0sLTQtPC1ELUwtVC1cLWQtbC10LXwthC2MLZQtnC2kLawttC28LcQtzC3ULdwt5C3sLfQt/C4ELgwuFC4cLiQuLC40LjwuRC5MLlQuXC5kLmwudC58LoQujC6ULpwupC6sLrQuvC7ELswu1C7cLuQu7C70LvwvBC8MLxQvHC8kLywvNC88L0QvTC9UL1wvZC9sL3QvfC+EL4wvlC+cL6QvrC+0L7wvxC/ML9Qv3C/kL+wv9C/8MAQwDDAUMBwwJDAsMDQwPDBEMEwwVDBcMGQwbDB0MHwwhDCMMJQwnDCkMKwwtDC8MMQwzDDUMNww5DDsMPQw/DEEMQwxFDEcMSQxLDE0MTwxRDFMMVQxXDFkMWwxdDF8MYQxjDGUMZwxpDGsMbQxvDHEMcwx1DHcMeQx7DH0MfwyBDIMMhQyHDIkMiwyNDI8MkQyTDJUMlwyZDJsMnQyfDKEMowylDKcMqQyrDK0MrwyxDLMMtQy3DLkMuwy9DL8MwQzDDMUMxwzJDMsMzQzPDNEM0wzVDNcM2QzbDN0M3wzhDOMM5QznDOkM6wztDO8M8QzzDPUM9wz5DPsM/Qz/DQENAw0FDQcNCQ0LDQ0NDw0RDRMNFQ0XDRkNGw0dDR8NIQ0jDSUNJw0pDSsNLQ0vDTENMw01DTcNOQ07DT0NPw1BDUMNRQ1HDUkNSw1NDU8NUQ1TDVUNVw1ZDVsNXQ1fDWENYw1lDWcNaQ1rDW0Nbw1xDXMNdQ13DXkNew19DX8NgQ2DDYUNhw2JDYsNjQ2PDZENkw2VDZcNmQ2bDZ0Nnw2hDaMNpQ2nDakNqw2tDa8NsQ2zDbUNtw25DbsNvQ2/DcENww3FDccNyQ3LDc0Nzw3RDdMN1Q3XDdkN2w3dDd8N4Q3jDeUN5w3pDesN7Q3vDfEN8w31DfcN+Q37Df0N/w4BDgMOBQ4HDgkOCw4NDg8OEQ4TDhUOFw4ZDhsOHQ4fDiEOIw4lDicOKQ4rDi0OLw4xDjMONQ43DjkOOw49Dj8OQQ5DDkUORw5JDksOTQ5PDlEOUw5VDlcOWQ5bDl0OXw5hDmMOZQ5nDmkOaw5tDm8OcQ5zDnUOdw55DnsOfQ5/DoEOgw6FDocOiQ6LDo0Ojw6RDpMOlQ6XDpkOmw6dDp8OoQ6jDqUOpw6pDqsOrQ6vDrEOsw61DrcOuQ67Dr0Ovw7BDsMOxQ7HDskOyw7NDs8O0Q7TDtUO1w7ZDtsO3Q7fDuEO4w7lDucO6Q7rDu0O7w7xDvMO9Q73DvkO+w79Dv8PAQ8DDwUPBw8JDwsPDQ8PDxEPEw8VDxcPGQ8bDx0PHw8hDyMPJQ8nDykPKw8tDy8PMQ8zDzUPNw85DzsPPQ8/D0EPQw9FD0cPSQ9LD00PTw9RD1MPVQ9XD1kPWw9dD18PYQ9jD2UPZw9pD2sPbQ9vD3EPcw91D3cPeQ97D30Pfw+BD4MPhQ+HD4kPiw+ND48PkQ+TD5UPlw+ZD5sPnQ+fD6EPow+lD6cPqQ+rD60Prw+xD7MPtQ+3D7kPuw+9D78PwQ/DD8UPxw/JD8sPzQ/PD9EP0w/VD9cP2Q/bD90P3w/hD+MP5Q/nD+kP6w/tD+8P8Q/zD/UP9w/5D/sP/Q//EAEQAyAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCiAKIAogCgABAQEK+B8MJp8cIO8S+46LHAVGiwa9Cr0LjAwR+nwUnxMABAEBTlJWWvsMvfnv5lm9Eu+9+VC9E7jv+wwV+bT6fP20Bvgk/F8V+9IiCvkQBvuy/FYVE9j30iIK/cYH/TBiIQr4LffSIwr9MPnvIQr8LfvSIwoOFffSC/gtBQv8LQULA+gAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAAAABAAAAAA"}];
Ha.count=0;var L={};Kb.add(X.updateCursor,-1);Ba.__toStr={}.toString;Object.defineProperty(n.prototype,"message",{get:function(){return String(this.val)}});null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=Zk.sliceImpl);H.Element=0;H.PCData=1;H.CData=2;H.Comment=3;H.DocType=4;H.ProcessingInstruction=5;H.Document=6;ce.OFFSET_BASIS=-2128831035;ce.PRIME=16777619;xb.emscriptenModuleName="CobblesModule";mg.GLYPH_ID_BITS=24;mg.GLYPH_ID_MASK=16777215;mg.FONT_KEY_BITS=8;mg.FONT_KEY_MASK=-16777216;
cc.LN2=Math.log(2);pa.V1=3;pa.V2=2;pa.V25=0;pa.Reserved=1;pa.V1_Bitrates=[[v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad],[v.BR_Free,v.BR_32,v.BR_40,v.BR_48,v.BR_56,v.BR_64,v.BR_80,v.BR_96,v.BR_112,v.BR_128,v.BR_160,v.BR_192,v.BR_224,v.BR_256,v.BR_320,v.BR_Bad],[v.BR_Free,v.BR_32,v.BR_48,v.BR_56,v.BR_64,v.BR_80,v.BR_96,v.BR_112,v.BR_128,v.BR_160,v.BR_192,v.BR_224,v.BR_256,v.BR_320,v.BR_384,v.BR_Bad],
[v.BR_Free,v.BR_32,v.BR_64,v.BR_96,v.BR_128,v.BR_160,v.BR_192,v.BR_224,v.BR_256,v.BR_288,v.BR_320,v.BR_352,v.BR_384,v.BR_416,v.BR_448,v.BR_Bad]];pa.V2_Bitrates=[[v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad,v.BR_Bad],[v.BR_Free,v.BR_8,v.BR_16,v.BR_24,v.BR_32,v.BR_40,v.BR_48,v.BR_56,v.BR_64,v.BR_80,v.BR_96,v.BR_112,v.BR_128,v.BR_144,v.BR_160,v.BR_Bad],[v.BR_Free,v.BR_8,v.BR_16,v.BR_24,v.BR_32,v.BR_40,v.BR_48,
v.BR_56,v.BR_64,v.BR_80,v.BR_96,v.BR_112,v.BR_128,v.BR_144,v.BR_160,v.BR_Bad],[v.BR_Free,v.BR_32,v.BR_48,v.BR_56,v.BR_64,v.BR_80,v.BR_96,v.BR_112,v.BR_128,v.BR_144,v.BR_160,v.BR_176,v.BR_192,v.BR_224,v.BR_256,v.BR_Bad]];pa.SamplingRates=[[Ca.SR_11025,Ca.SR_12000,Ca.SR_8000,Ca.SR_Bad],[Ca.SR_Bad,Ca.SR_Bad,Ca.SR_Bad,Ca.SR_Bad],[Ca.SR_22050,Ca.SR_24000,Ca.SR_12000,Ca.SR_Bad],[Ca.SR_44100,Ca.SR_48000,Ca.SR_32000,Ca.SR_Bad]];vc.LReserved=0;vc.LLayer3=1;vc.LLayer2=2;vc.LLayer1=3;Pe.CStereo=0;Pe.CJointStereo=
1;Pe.CDualChannel=2;Pe.CMono=3;Qe.ENone=0;Qe.EMs50_15=1;Qe.EReserved=2;Qe.ECCIT_J17=3;vg.BUFFERING=!1;sf.tmp=new sf;cb.GUID=0;R.tmp=new R;R.lumR=0.212671;R.lumG=0.71516;R.lumB=0.072169;R.SQ13=0.5773502691896257;Zd.EPSILON=1E-6;$d.UID=0;$d.CACHE=new ia;la.UID=0;la.STREAM_POS=1;la.TFILTERS=[[[9728,9728],[9729,9729]],[[9728,9984],[9729,9985]],[[9728,9986],[9729,9987]]];la.TWRAP=[33071,10497];la.FACES=[0,1028,1029,1032];la.BLEND=[1,0,770,768,772,774,771,769,773,775,32769,32771,32770,32772,776];la.COMPARE=
[519,512,514,517,516,518,513,515];la.STENCIL_OP=[7680,0,7681,7682,34055,7683,34056,5386];la.OP=[32774,32778,32779,32775,32776];la.CUBE_FACES=[34069,34070,34071,34072,34073,34074];la.CBUFFERS=function(a){a=[];for(var b=0;32>b;){for(var c=[],d=0,e=b++;d<e;){var f=d++;c.push(36064+f)}a.push(c)}return a}(this);Oc.MAX_MEMORY=4294967296;Oc.MAX_BUFFERS=65536;Oc.SIZE=65533;Oc.ALL_FLAGS=Aa.__empty_constructs__.slice();ld.defaultKillAlphaThreshold=0.5;ld.loadingTextureColor=-65281;ae.current=new ae("Default");
P.enableLights_bits=1;P.enableLights_offset=0;P.enableLights_mask=1;P.dynamicParameters_bits=1;P.dynamicParameters_offset=1;P.dynamicParameters_mask=2;P.isStatic_bits=1;P.isStatic_offset=2;P.isStatic_mask=4;P.batchMode_bits=1;P.batchMode_offset=3;P.batchMode_mask=8;P.culling_bits=2;P.culling_offset=0;P.culling_mask=3;P.depthWrite_bits=1;P.depthWrite_offset=2;P.depthWrite_mask=4;P.depthTest_bits=3;P.depthTest_offset=3;P.depthTest_mask=56;P.blendSrc_bits=4;P.blendSrc_offset=6;P.blendSrc_mask=960;P.blendDst_bits=
4;P.blendDst_offset=10;P.blendDst_mask=15360;P.blendAlphaSrc_bits=4;P.blendAlphaSrc_offset=14;P.blendAlphaSrc_mask=245760;P.blendAlphaDst_bits=4;P.blendAlphaDst_offset=18;P.blendAlphaDst_mask=3932160;P.blendOp_bits=3;P.blendOp_offset=22;P.blendOp_mask=29360128;P.blendAlphaOp_bits=3;P.blendAlphaOp_offset=25;P.blendAlphaOp_mask=234881024;P.wireframe_bits=1;P.wireframe_offset=28;P.wireframe_mask=268435456;P.reserved_bits=1;P.reserved_offset=29;P.reserved_mask=536870912;ea.readMask_bits=8;ea.readMask_offset=
0;ea.readMask_mask=255;ea.writeMask_bits=8;ea.writeMask_offset=8;ea.writeMask_mask=65280;ea.reference_bits=8;ea.reference_offset=16;ea.reference_mask=16711680;ea.frontTest_bits=3;ea.frontTest_offset=0;ea.frontTest_mask=7;ea.frontPass_bits=3;ea.frontPass_offset=3;ea.frontPass_mask=56;ea.frontSTfail_bits=3;ea.frontSTfail_offset=6;ea.frontSTfail_mask=448;ea.frontDPfail_bits=3;ea.frontDPfail_offset=9;ea.frontDPfail_mask=3584;ea.backTest_bits=3;ea.backTest_offset=12;ea.backTest_mask=28672;ea.backPass_bits=
3;ea.backPass_offset=15;ea.backPass_mask=229376;ea.backSTfail_bits=3;ea.backSTfail_offset=18;ea.backSTfail_mask=1835008;ea.backDPfail_bits=3;ea.backDPfail_offset=21;ea.backDPfail_mask=14680064;V.UID=0;V.nativeFormat=ya.RGBA;V.checkerTextureKeys=new oa;V.noiseTextureKeys=new oa;Hg.__meta__={obj:{ignore:["shader"]}};bb.SRC="oy4:namey23:h3d.shader.ScreenShadery4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-271R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini330y3:maxi396y4:filey113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FScreenShader.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i336R16i361R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i336R16i348R17R18gR19r17R20jR21:1:1oR0y5:colorR9i-268y6:parentoR0y6:outputR9i-266R5jR10:4:0R11jR4:13:1aoR0y8:positionR9i-267R25r22R5r23R11jR4:5:2i4r16gr21hgR5r23R11r17ggoR14oR15i351R16i361R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y10:pixelColorR9i-269R5r23R11r31gggoR14oR15i367R16i390R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i367R16i379R17R18gR19r37R20jR21:1:1oR0y12:calculatedUVR9i-270R5r23R11r37ggoR14oR15i382R16i390R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y2:uvR9i-264R25oR0y5:inputR9i-262R5jR10:1:0R11jR4:13:1aoR0R27R9i-263R25r46R5r47R11jR4:5:2i2r16gr45hgR5r47R11r44ggghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-272R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i420R16i504R17R18gR19r3R20jR21:4:1aoR14oR15i426R16i498R17R18gR19r26R20jR21:5:3r18oR14oR15i426R16i441R17R18gR19r26R20jR21:1:1r25goR14oR15i444R16i498R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i444R16i448R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i449R16i465R17R18gR19jR4:3:0R20jR21:9:2oR14oR15i449R16i463R17R18gR19r50R20jR21:1:1r49gajy14:hxsl.Component:0:0hgoR14oR15i467R16i491R17R18gR19r83R20jR21:5:3jR23:1:0oR14oR15i467R16i483R17R18gR19r83R20jR21:9:2oR14oR15i467R16i481R17R18gR19r50R20jR21:1:1r49gajR34:1:0hgoR14oR15i486R16i491R17R18gR19r83R20jR21:1:1oR0y5:flipYR9i-265R5jR10:2:0R11r83gggoR14oR15i493R16i494R17R18gR19r83R20jR21:0:1jy10:hxsl.Const:3:1zgoR14oR15i496R16i497R17R18gR19r83R20jR21:0:1jR36:3:1i1ghgghgR12ahghy4:varsar46r103r22r32r40r5r58hg";
Ff.SRC="oy4:namey29:h3d.pass._Border.BorderShadery4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-283R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini330y3:maxi396y4:filey113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FScreenShader.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i336R16i361R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i336R16i348R17R18gR19r17R20jR21:1:1oR0y5:colorR9i-279y6:parentoR0y6:outputR9i-277R5jR10:4:0R11jR4:13:1aoR0y8:positionR9i-278R25r22R5r23R11jR4:5:2i4r16gr21hgR5r23R11r17ggoR14oR15i351R16i361R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y10:pixelColorR9i-280R5r23R11r31gggoR14oR15i367R16i390R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i367R16i379R17R18gR19r37R20jR21:1:1oR0y12:calculatedUVR9i-281R5r23R11r37ggoR14oR15i382R16i390R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y2:uvR9i-275R25oR0y5:inputR9i-273R5jR10:1:0R11jR4:13:1aoR0R27R9i-274R25r46R5r47R11jR4:5:2i2r16gr45hgR5r47R11r44ggghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-284R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i420R16i504R17R18gR19r3R20jR21:4:1aoR14oR15i426R16i498R17R18gR19r26R20jR21:5:3r18oR14oR15i426R16i441R17R18gR19r26R20jR21:1:1r25goR14oR15i444R16i498R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i444R16i448R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i449R16i465R17R18gR19jR4:3:0R20jR21:9:2oR14oR15i449R16i463R17R18gR19r50R20jR21:1:1r49gajy14:hxsl.Component:0:0hgoR14oR15i467R16i491R17R18gR19r83R20jR21:5:3jR23:1:0oR14oR15i467R16i483R17R18gR19r83R20jR21:9:2oR14oR15i467R16i481R17R18gR19r50R20jR21:1:1r49gajR34:1:0hgoR14oR15i486R16i491R17R18gR19r83R20jR21:1:1oR0y5:flipYR9i-276R5jR10:2:0R11r83gggoR14oR15i493R16i494R17R18gR19r83R20jR21:0:1jy10:hxsl.Const:3:1zgoR14oR15i496R16i497R17R18gR19r83R20jR21:0:1jR36:3:1i1ghgghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-285R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i158R16i188R17y105:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fpass%2FBorder.hxgR19r3R20jR21:4:1aoR14oR15i164R16i182R17R38gR19r31R20jR21:5:3r18oR14oR15i164R16i174R17R38gR19r31R20jR21:1:1r32goR14oR15i177R16i182R17R38gR19jR4:5:2i4r16R20jR21:1:1oR0R24R9i-282R5r104R11r136ggghgR12ahghy4:varsar46r103r22r32r40r137r5r58r121hg";
Gf.SRC="oy4:namey25:h3d.pass._Copy.CopyShadery4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-356R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini330y3:maxi396y4:filey113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FScreenShader.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i336R16i361R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i336R16i348R17R18gR19r17R20jR21:1:1oR0y5:colorR9i-352y6:parentoR0y6:outputR9i-350R5jR10:4:0R11jR4:13:1aoR0y8:positionR9i-351R25r22R5r23R11jR4:5:2i4r16gr21hgR5r23R11r17ggoR14oR15i351R16i361R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y10:pixelColorR9i-353R5r23R11r31gggoR14oR15i367R16i390R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i367R16i379R17R18gR19r37R20jR21:1:1oR0y12:calculatedUVR9i-354R5r23R11r37ggoR14oR15i382R16i390R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y2:uvR9i-348R25oR0y5:inputR9i-346R5jR10:1:0R11jR4:13:1aoR0R27R9i-347R25r46R5r47R11jR4:5:2i2r16gr45hgR5r47R11r44ggghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-357R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i420R16i504R17R18gR19r3R20jR21:4:1aoR14oR15i426R16i498R17R18gR19r26R20jR21:5:3r18oR14oR15i426R16i441R17R18gR19r26R20jR21:1:1r25goR14oR15i444R16i498R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i444R16i448R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i449R16i465R17R18gR19jR4:3:0R20jR21:9:2oR14oR15i449R16i463R17R18gR19r50R20jR21:1:1r49gajy14:hxsl.Component:0:0hgoR14oR15i467R16i491R17R18gR19r83R20jR21:5:3jR23:1:0oR14oR15i467R16i483R17R18gR19r83R20jR21:9:2oR14oR15i467R16i481R17R18gR19r50R20jR21:1:1r49gajR34:1:0hgoR14oR15i486R16i491R17R18gR19r83R20jR21:1:1oR0y5:flipYR9i-349R5jR10:2:0R11r83gggoR14oR15i493R16i494R17R18gR19r83R20jR21:0:1jy10:hxsl.Const:3:1zgoR14oR15i496R16i497R17R18gR19r83R20jR21:0:1jR36:3:1i1ghgghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-358R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i358R16i408R17y103:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fpass%2FCopy.hxgR19r3R20jR21:4:1aoR14oR15i364R16i402R17R38gR19r31R20jR21:5:3r18oR14oR15i364R16i374R17R38gR19r31R20jR21:1:1r32goR14oR15i377R16i402R17R38gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i377R16i384R17R38gR19jR4:14:1aoR3r136R12aoR0y1:_R11jR4:10:0goR0R30R11jR4:5:2i2r16ghghR20jR21:2:1jR33:33:0gaoR14oR15i377R16i384R17R38gR19r143R20jR21:1:1oR0y7:textureR9i-355R5r104R11r143ggoR14oR15i389R16i401R17R38gR19r37R20jR21:1:1r40ghgghgR12ahghy4:varsar46r103r22r32r40r152r5r58r121hg";
Hf.SRC="oy4:namey33:h3d.pass._CubeCopy.CubeCopyShadery4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-407R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini330y3:maxi396y4:filey113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FScreenShader.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i336R16i361R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i336R16i348R17R18gR19r17R20jR21:1:1oR0y5:colorR9i-402y6:parentoR0y6:outputR9i-400R5jR10:4:0R11jR4:13:1aoR0y8:positionR9i-401R25r22R5r23R11jR4:5:2i4r16gr21hgR5r23R11r17ggoR14oR15i351R16i361R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y10:pixelColorR9i-403R5r23R11r31gggoR14oR15i367R16i390R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i367R16i379R17R18gR19r37R20jR21:1:1oR0y12:calculatedUVR9i-404R5r23R11r37ggoR14oR15i382R16i390R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y2:uvR9i-398R25oR0y5:inputR9i-396R5jR10:1:0R11jR4:13:1aoR0R27R9i-397R25r46R5r47R11jR4:5:2i2r16gr45hgR5r47R11r44ggghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-408R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i420R16i504R17R18gR19r3R20jR21:4:1aoR14oR15i426R16i498R17R18gR19r26R20jR21:5:3r18oR14oR15i426R16i441R17R18gR19r26R20jR21:1:1r25goR14oR15i444R16i498R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i444R16i448R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i449R16i465R17R18gR19jR4:3:0R20jR21:9:2oR14oR15i449R16i463R17R18gR19r50R20jR21:1:1r49gajy14:hxsl.Component:0:0hgoR14oR15i467R16i491R17R18gR19r83R20jR21:5:3jR23:1:0oR14oR15i467R16i483R17R18gR19r83R20jR21:9:2oR14oR15i467R16i481R17R18gR19r50R20jR21:1:1r49gajR34:1:0hgoR14oR15i486R16i491R17R18gR19r83R20jR21:1:1oR0y5:flipYR9i-399R5jR10:2:0R11r83gggoR14oR15i493R16i494R17R18gR19r83R20jR21:0:1jy10:hxsl.Const:3:1zgoR14oR15i496R16i497R17R18gR19r83R20jR21:0:1jR36:3:1i1ghgghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-409R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i193R16i298R17y107:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fpass%2FCubeCopy.hxgR19r3R20jR21:4:1aoR14oR15i199R16i233R17R38gR19r3R20jR21:7:2oR0R30R9i-410R5r23R11r37goR14oR15i208R16i232R17R38gR19r37R20jR21:5:3jR23:3:0oR14oR15i208R16i226R17R38gR19r37R20jR21:5:3r92oR14oR15i208R16i220R17R38gR19r37R20jR21:1:1r40goR14oR15i223R16i226R17R38gR19r83R20jR21:0:1jR36:3:1d2ggoR14oR15i229R16i232R17R38gR19r83R20jR21:0:1jR36:3:1d1gggoR14oR15i238R16i292R17R38gR19r31R20jR21:5:3r18oR14oR15i238R16i248R17R38gR19r31R20jR21:1:1r32goR14oR15i251R16i292R17R38gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i251R16i258R17R38gR19jR4:14:1aoR3r158R12aoR0y1:_R11jR4:12:0goR0y6:normalR11jR4:5:2i3r16ghghR20jR21:2:1jR33:33:0gaoR14oR15i251R16i258R17R38gR19r165R20jR21:1:1oR0y7:textureR9i-405R5r104R11r165ggoR14oR15i263R16i291R17R38gR19r167R20jR21:8:2oR14oR15i263R16i272R17R38gR19jR4:14:1aoR3r167R12aoR0y5:valueR11r167ghghR20jR21:2:1jR33:31:0gaoR14oR15i273R16i290R17R38gR19r167R20jR21:5:3r92oR14oR15i273R16i284R17R38gR19jR4:5:2i3r16R20jR21:8:2oR14oR15i273R16i277R17R38gR19jR4:14:1ahR20jR21:2:1jR33:39:0gaoR14oR15i278R16i280R17R38gR19r37R20jR21:1:1r131goR14oR15i282R16i283R17R38gR19r83R20jR21:0:1jR36:3:1i1ghgoR14oR15i287R16i290R17R38gR19jR4:6:0R20jR21:1:1oR0y3:matR9i-406R5r104R11r210ggghghgghgR12ahghy4:varsar46r103r22r32r40r174r211r5r58r121hg";
Xa.__meta__={fields:{cameraView:{global:["camera.view"]},cameraNear:{global:["camera.zNear"]},cameraFar:{global:["camera.zFar"]},cameraProj:{global:["camera.proj"]},cameraPos:{global:["camera.position"]},cameraProjDiag:{global:["camera.projDiag"]},cameraProjFlip:{global:["camera.projFlip"]},cameraViewProj:{global:["camera.viewProj"]},cameraInverseViewProj:{global:["camera.inverseViewProj"]},globalTime:{global:["global.time"]},pixelSize:{global:["global.pixelSize"]},globalModelView:{global:["global.modelView"]},
globalModelViewInverse:{global:["global.modelViewInverse"]}}};Lf.SRC="oy4:namey33:h3d.pass._HardwarePick.FixedColory4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:0:0y3:refoR0y6:vertexy2:idi-78R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini226y3:maxi347y4:filey111:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fpass%2FHardwarePick.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i231R16i342R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i231R16i246R17R18gR19r17R20jR21:1:1oR0y8:positionR9i-76y6:parentoR0y6:outputR9i-75R5jR10:4:0R11jR4:13:1ar21oR0y7:colorIDR9i-77R25r22R5r23R11jR4:5:2i4r16ghgR5r23R11r17ggoR14oR15i249R16i342R17R18gR19jR4:5:2i4r16R20jR21:5:3jR23:1:0oR14oR15i249R16i314R17R18gR19jR4:5:2i4r16R20jR21:3:1oR14oR15i250R16i313R17R18gR19r35R20jR21:5:3jR23:0:0oR14oR15i250R16i265R17R18gR19r17R20jR21:1:1r21goR14oR15i268R16i313R17R18gR19jR4:5:2i4r16R20jR21:5:3r32oR14oR15i268R16i293R17R18gR19r44R20jR21:8:2oR14oR15i268R16i272R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i273R16i284R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i273R16i281R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y8:viewportR9i-74R5jR10:2:0R11r59ggajy14:hxsl.Component:0:0jR30:1:0hgoR14oR15i286R16i288R17R18gR19jR4:3:0R20jR21:0:1jy10:hxsl.Const:3:1d0goR14oR15i290R16i292R17R18gR19r69R20jR21:0:1jR31:3:1d0ghgoR14oR15i296R16i313R17R18gR19r69R20jR21:9:2oR14oR15i296R16i311R17R18gR19r17R20jR21:1:1r21gajR30:3:0hggggoR14oR15i317R16i342R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i317R16i321R17R18gR19r50R20jR21:2:1r51gaoR14oR15i322R16i333R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i322R16i330R17R18gR19r59R20jR21:1:1r60gajR30:2:0r83hgoR14oR15i335R16i337R17R18gR19r69R20jR21:0:1jR31:3:1d1goR14oR15i339R16i341R17R18gR19r69R20jR21:0:1jR31:3:1d1ghggghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-79R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i370R16i404R17R18gR19r3R20jR21:4:1aoR14oR15i375R16i399R17R18gR19r26R20jR21:5:3r18oR14oR15i375R16i389R17R18gR19r26R20jR21:1:1r25goR14oR15i392R16i399R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0R27R9i-73R5r61R11r134ggghgR12ahghy4:varsar135r60r22r5r119hg";
zc.STRICT=!0;Fa.ROT2RAD=-0.017453292519943295;Hb.FPosChanged=1;Hb.FVisible=2;Hb.FCulled=4;Hb.FFollowPositionOnly=8;Hb.FLightCameraCenter=16;Hb.FAllocated=32;Hb.FAlwaysSync=64;Hb.FInheritCulled=128;Hb.FNoSerialize=256;Hb.FIgnoreBounds=512;Hb.FIgnoreCollide=1024;Hb.FIgnoreParentTransform=2048;od.SRC="oy4:namey23:h3d.shader.AmbientLighty4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-418R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini333y3:maxi399y4:filey113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FAmbientLight.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i339R16i393R17R18gR19jR4:5:2i3jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i339R16i349R17R18gR19r17R20jR21:1:1oR0y10:lightColorR9i-416R5jR10:4:0R11r17ggoR14oR15i352R16i393R17R18gR19jR4:5:2i3r16R20jR21:10:3oR14oR15i352R16i360R17R18gR19jR4:2:0R20jR21:1:1oR0y8:additivey10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-417R5jR10:2:0R11r29ggoR14oR15i363R16i382R17R18gR19r26R20jR21:1:1oR0y12:ambientLightR9i-412y6:parentoR0y6:globalR9i-411R5jR10:0:0R11jR4:13:1ar37oR0y16:perPixelLightingR26ajR27:0:1nhR9i-413R29r38R5r39R11r29ghgR5r39R11r26ggoR14oR15i385R16i393R17R18gR19jR4:5:2i3r16R20jR21:8:2oR14oR15i385R16i389R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:39:0gaoR14oR15i390R16i392R17R18gR19jR4:3:0R20jR21:0:1jy10:hxsl.Const:3:1d0ghggghgR12ahgoR3r3R5r4R7oR0y16:__init__fragmentR9i-419R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i433R16i504R17R18gR19r3R20jR21:4:1aoR14oR15i439R16i498R17R18gR19jR4:5:2i3r16R20jR21:5:3r18oR14oR15i439R16i454R17R18gR19r77R20jR21:1:1oR0y15:lightPixelColorR9i-415R5r22R11r77ggoR14oR15i457R16i498R17R18gR19r26R20jR21:10:3oR14oR15i457R16i465R17R18gR19r29R20jR21:1:1r30goR14oR15i468R16i487R17R18gR19r26R20jR21:1:1r37goR14oR15i490R16i498R17R18gR19jR4:5:2i3r16R20jR21:8:2oR14oR15i490R16i494R17R18gR19r52R20jR21:2:1r53gaoR14oR15i495R16i497R17R18gR19r58R20jR21:0:1jR33:3:1d0ghggghgR12ahgoR3jR4:5:2i3r16R5jR6:3:0R7oR0y9:calcLightR9i-421R5r6R11jR4:14:1aoR3r107R12aoR0R24R11jR4:5:2i3r16ghghgR13oR14oR15i557R16i670R17R18gR19r3R20jR21:4:1aoR14oR15i563R16i664R17R18gR19r3R20jR21:12:1oR14oR15i570R16i664R17R18gR19r114R20jR21:10:3oR14oR15i570R16i578R17R18gR19r29R20jR21:1:1r30goR14oR15i581R16i591R17R18gR19r114R20jR21:1:1oR0R24R9i-420R5r22R11r114ggoR14oR15i594R16i664R17R18gR19jR4:5:2i3r16R20jR21:3:1oR14oR15i595R16i663R17R18gR19r132R20jR21:5:3jR23:0:0oR14oR15i595R16i614R17R18gR19r26R20jR21:1:1r37goR14oR15i617R16i663R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:1:0oR14oR15i617R16i650R17R18gR19jR4:5:2i3r16R20jR21:8:2oR14oR15i617R16i642R17R18gR19jR4:14:1aoR3r145R12aoR0y1:_R11r26goR0y1:bR11r58ghghR20jR21:2:1jR32:22:0gaoR14oR15i617R16i642R17R18gR19r26R20jR21:3:1oR14oR15i618R16i641R17R18gR19r26R20jR21:5:3jR23:3:0oR14oR15i618R16i619R17R18gR19r58R20jR21:0:1jR33:3:1i1goR14oR15i622R16i641R17R18gR19r26R20jR21:1:1r37gggoR14oR15i647R16i649R17R18gR19r58R20jR21:0:1jR33:3:1d0ghgoR14oR15i653R16i663R17R18gR19r114R20jR21:1:1r128gggggghgR12ar128hgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-422R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i694R16i776R17R18gR19r3R20jR21:4:1aoR14oR15i700R16i770R17R18gR19r3R20jR21:10:3oR14oR15i704R16i728R17R18gR19r29R20jR21:6:2jy15:haxe.macro.Unop:2:0oR14oR15i705R16i728R17R18gR19r29R20jR21:1:1r41ggoR14oR15i731R16i770R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:20:1r142oR14oR15i731R16i745R17R18gR19r207R20jR21:9:2oR14oR15i731R16i741R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y10:pixelColorR9i-414R5r22R11r213ggajy14:hxsl.Component:0:0jR42:1:0jR42:2:0hgoR14oR15i749R16i770R17R18gR19r107R20jR21:8:2oR14oR15i749R16i758R17R18gR19r115R20jR21:1:1r109gaoR14oR15i759R16i769R17R18gR19r17R20jR21:1:1r21ghggnghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-423R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i802R16i888R17R18gR19r3R20jR21:4:1aoR14oR15i808R16i882R17R18gR19r3R20jR21:10:3oR14oR15i812R16i835R17R18gR19r29R20jR21:1:1r41goR14oR15i838R16i882R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:20:1r142oR14oR15i838R16i852R17R18gR19r252R20jR21:9:2oR14oR15i838R16i848R17R18gR19r213R20jR21:1:1r214gar217r218r219hgoR14oR15i856R16i882R17R18gR19r107R20jR21:8:2oR14oR15i856R16i865R17R18gR19r115R20jR21:1:1r109gaoR14oR15i866R16i881R17R18gR19r77R20jR21:1:1r80ghggnghgR12ahghy4:varsar38r214r80r21r30r5r67r109r188r237hg";
qf.SRC="oy4:namey17:h3d.shader.Base2dy4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-29R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini963y3:maxi1507y4:filey107:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FBase2d.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i969R16i1017R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i969R16i983R17R18gR19r17R20jR21:1:1oR0y14:spritePositionR9i-11R5jR10:4:0R11r17ggoR14oR15i986R16i1017R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i986R16i990R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i991R16i1005R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y8:positionR9i-2y6:parentoR0y5:inputR9i-1R5jR10:1:0R11jR4:13:1ar37oR0y2:uvR9i-3R27r38R5r39R11jR4:5:2i2r16goR0y5:colorR9i-4R27r38R5r39R11jR4:5:2i4r16ghgR5r39R11r36ggoR14oR15i1007R16i1013R17R18gR19jR4:3:0R20jR21:1:1oR0y6:zValueR9i-9R5jR10:2:0R11r49ggoR14oR15i1015R16i1016R17R18gR19r49R20jR21:0:1jy10:hxsl.Const:3:1i1ghggoR14oR15i1023R16i1285R17R18gR19r3R20jR21:10:3oR14oR15i1027R16i1037R17R18gR19jR4:2:0R20jR21:1:1oR0y10:isRelativey10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-16R5r51R11r63ggoR14oR15i1040R16i1241R17R18gR19r3R20jR21:4:1aoR14oR15i1047R16i1114R17R18gR19r49R20jR21:5:3r18oR14oR15i1047R16i1065R17R18gR19r49R20jR21:9:2oR14oR15i1047R16i1063R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y16:absolutePositionR9i-12R5r22R11r77ggajy14:hxsl.Component:0:0hgoR14oR15i1068R16i1114R17R18gR19r49R20jR21:8:2oR14oR15i1068R16i1093R17R18gR19jR4:14:1aoR3r49R12aoR0y1:_R11jR4:5:2i3r16goR0y1:bR11jR4:5:2i3r16ghghR20jR21:2:1jR25:29:0gaoR14oR15i1068R16i1093R17R18gR19r91R20jR21:8:2oR14oR15i1068R16i1072R17R18gR19jR4:14:1ahR20jR21:2:1jR25:39:0gaoR14oR15i1073R16i1090R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1073R16i1087R17R18gR19r17R20jR21:1:1r21gar81jR37:1:0hgoR14oR15i1091R16i1092R17R18gR19r49R20jR21:0:1jR32:3:1i1ghgoR14oR15i1098R16i1113R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y15:absoluteMatrixAR9i-18R5r51R11r123gghggoR14oR15i1121R16i1188R17R18gR19r49R20jR21:5:3r18oR14oR15i1121R16i1139R17R18gR19r49R20jR21:9:2oR14oR15i1121R16i1137R17R18gR19r77R20jR21:1:1r78gar114hgoR14oR15i1142R16i1188R17R18gR19r49R20jR21:8:2oR14oR15i1142R16i1167R17R18gR19jR4:14:1aoR3r49R12aoR0R38R11jR4:5:2i3r16gr92hghR20jR21:2:1r95gaoR14oR15i1142R16i1167R17R18gR19r145R20jR21:8:2oR14oR15i1142R16i1146R17R18gR19r103R20jR21:2:1r104gaoR14oR15i1147R16i1164R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1147R16i1161R17R18gR19r17R20jR21:1:1r21gar81r114hgoR14oR15i1165R16i1166R17R18gR19r49R20jR21:0:1jR32:3:1i1ghgoR14oR15i1172R16i1187R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y15:absoluteMatrixBR9i-19R5r51R11r170gghggoR14oR15i1195R16i1234R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i1195R16i1214R17R18gR19r177R20jR21:9:2oR14oR15i1195R16i1211R17R18gR19r77R20jR21:1:1r78gajR37:2:0jR37:3:0hgoR14oR15i1217R16i1234R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1217R16i1231R17R18gR19r17R20jR21:1:1r21gar184r185hgghgoR14oR15i1252R16i1285R17R18gR19r77R20jR21:5:3r18oR14oR15i1252R16i1268R17R18gR19r77R20jR21:1:1r78goR14oR15i1271R16i1285R17R18gR19r17R20jR21:1:1r21gggoR14oR15i1291R16i1358R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i1291R16i1303R17R18gR19r209R20jR21:1:1oR0y12:calculatedUVR9i-15R5jR10:3:0R11r209ggoR14oR15i1306R16i1358R17R18gR19jR4:5:2i2r16R20jR21:10:3oR14oR15i1306R16i1314R17R18gR19r63R20jR21:1:1oR0y8:hasUVPosR34ajR35:0:1nhR9i-22R5r51R11r63ggoR14oR15i1317R16i1347R17R18gR19r217R20jR21:5:3jR23:0:0oR14oR15i1317R16i1336R17R18gR19jR4:5:2i2r16R20jR21:5:3jR23:1:0oR14oR15i1317R16i1325R17R18gR19r42R20jR21:1:1r41goR14oR15i1328R16i1336R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1328R16i1333R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y5:uvPosR9i-23R5r51R11r239ggar184r185hggoR14oR15i1339R16i1347R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1339R16i1344R17R18gR19r239R20jR21:1:1r240gar81r114hggoR14oR15i1350R16i1358R17R18gR19r42R20jR21:1:1r41gggoR14oR15i1364R16i1423R17R18gR19jR4:5:2i4r16R20jR21:5:3r18oR14oR15i1364R16i1374R17R18gR19r261R20jR21:1:1oR0y10:pixelColorR9i-13R5r22R11r261ggoR14oR15i1377R16i1423R17R18gR19jR4:5:2i4r16R20jR21:10:3oR14oR15i1377R16i1387R17R18gR19r63R20jR21:1:1r64goR14oR15i1390R16i1409R17R18gR19r268R20jR21:5:3r230oR14oR15i1390R16i1395R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0R30R9i-17R5r51R11r276ggoR14oR15i1398R16i1409R17R18gR19r44R20jR21:1:1r43ggoR14oR15i1412R16i1423R17R18gR19r44R20jR21:1:1r43gggoR14oR15i1429R16i1469R17R18gR19jR4:5:2i4r16R20jR21:5:3r18oR14oR15i1429R16i1441R17R18gR19r290R20jR21:1:1oR0y12:textureColorR9i-14R5r22R11r290ggoR14oR15i1444R16i1469R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i1444R16i1451R17R18gR19jR4:14:1aoR3r297R12aoR0R38R11jR4:10:0goR0R29R11jR4:5:2i2r16ghghR20jR21:2:1jR25:33:0gaoR14oR15i1444R16i1451R17R18gR19r304R20jR21:1:1oR0y7:textureR9i-10R5r51R11r304ggoR14oR15i1456R16i1468R17R18gR19r209R20jR21:1:1r212ghggoR14oR15i1475R16i1501R17R18gR19r261R20jR21:5:3jR23:20:1r230oR14oR15i1475R16i1485R17R18gR19r261R20jR21:1:1r264goR14oR15i1489R16i1501R17R18gR19r290R20jR21:1:1r293gghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-30R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i1531R16i2043R17R18gR19r3R20jR21:4:1aoR14oR15i1596R16i1635R17R18gR19r3R20jR21:7:2oR0y3:tmpR9i-32R5r22R11jR4:5:2i3r16goR14oR15i1606R16i1634R17R18gR19r345R20jR21:8:2oR14oR15i1606R16i1610R17R18gR19r103R20jR21:2:1r104gaoR14oR15i1611R16i1630R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1611R16i1627R17R18gR19r77R20jR21:1:1r78gar81r114hgoR14oR15i1632R16i1633R17R18gR19r49R20jR21:0:1jR32:3:1i1ghggoR14oR15i1640R16i1751R17R18gR19jR4:5:2i4r16R20jR21:5:3r18oR14oR15i1640R16i1654R17R18gR19r368R20jR21:1:1oR0y14:outputPositionR9i-28R5r22R11r368ggoR14oR15i1657R16i1751R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i1657R16i1661R17R18gR19r30R20jR21:2:1r31gaoR14oR15i1668R16i1690R17R18gR19r49R20jR21:8:2oR14oR15i1668R16i1671R17R18gR19jR4:14:1aoR3r49R12aoR0R38R11r345gr92hghR20jR21:2:1r95gaoR14oR15i1668R16i1671R17R18gR19r345R20jR21:1:1r344goR14oR15i1676R16i1689R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y13:filterMatrixAR9i-20R5r51R11r396gghgoR14oR15i1697R16i1719R17R18gR19r49R20jR21:8:2oR14oR15i1697R16i1700R17R18gR19jR4:14:1aoR3r49R12aoR0R38R11r345gr92hghR20jR21:2:1r95gaoR14oR15i1697R16i1700R17R18gR19r345R20jR21:1:1r344goR14oR15i1705R16i1718R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y13:filterMatrixBR9i-21R5r51R11r416gghgoR14oR15i1726R16i1745R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1726R16i1742R17R18gR19r77R20jR21:1:1r78gar184r185hghggoR14oR15i1786R16i1853R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i1786R16i1803R17R18gR19r432R20jR21:9:2oR14oR15i1786R16i1800R17R18gR19r368R20jR21:1:1r371gar81r114hgoR14oR15i1806R16i1853R17R18gR19jR4:5:2i2r16R20jR21:5:3r230oR14oR15i1806R16i1839R17R18gR19jR4:5:2i2r16R20jR21:3:1oR14oR15i1807R16i1838R17R18gR19r445R20jR21:5:3r226oR14oR15i1807R16i1824R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1807R16i1821R17R18gR19r368R20jR21:1:1r371gar81r114hgoR14oR15i1827R16i1838R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1827R16i1835R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y8:viewportR9i-27R5r51R11r461ggar81r114hgggoR14oR15i1842R16i1853R17R18gR19jR4:5:2i2r16R20jR21:9:2oR14oR15i1842R16i1850R17R18gR19r461R20jR21:1:1r462gar184r185hgggoR14oR15i1945R16i1999R17R18gR19r3R20jR21:10:3oR14oR15i1949R16i1959R17R18gR19r63R20jR21:1:1oR0y10:pixelAlignR34ajR35:0:1nhR9i-25R5r51R11r63ggoR14oR15i1962R16i1999R17R18gR19jR4:5:2i2r16R20jR21:5:3jR23:20:1jR23:3:0oR14oR15i1962R16i1979R17R18gR19r488R20jR21:9:2oR14oR15i1962R16i1976R17R18gR19r368R20jR21:1:1r371gar81r114hgoR14oR15i1983R16i1999R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y16:halfPixelInverseR9i-26R5r51R11r500gggngoR14oR15i2005R16i2037R17R18gR19jR4:5:2i4r16R20jR21:5:3r18oR14oR15i2005R16i2020R17R18gR19r507R20jR21:1:1oR0R26R9i-6R27oR0y6:outputR9i-5R5r22R11jR4:13:1ar510oR0R30R9i-7R27r511R5r22R11jR4:5:2i4r16ghgR5r22R11r507ggoR14oR15i2023R16i2037R17R18gR19r368R20jR21:1:1r371gghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-31R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i2069R16i2159R17R18gR19r3R20jR21:4:1aoR14oR15i2075R16i2122R17R18gR19r3R20jR21:10:3oR14oR15i2079R16i2112R17R18gR19r63R20jR21:5:3jR23:14:0oR14oR15i2079R16i2088R17R18gR19r63R20jR21:1:1oR0y9:killAlphaR34ajR35:0:1nhR9i-24R5r51R11r63ggoR14oR15i2092R16i2112R17R18gR19r63R20jR21:5:3jR23:9:0oR14oR15i2092R16i2104R17R18gR19r49R20jR21:9:2oR14oR15i2092R16i2102R17R18gR19r261R20jR21:1:1r264gar185hgoR14oR15i2107R16i2112R17R18gR19r49R20jR21:0:1jR32:3:1d0.001gggoR14oR15i2115R16i2122R17R18gR19r3R20jR21:11:0gngoR14oR15i2128R16i2153R17R18gR19r514R20jR21:5:3r18oR14oR15i2128R16i2140R17R18gR19r514R20jR21:1:1r513goR14oR15i2143R16i2153R17R18gR19r261R20jR21:1:1r264gghgR12ahghy4:varsar38r511oR0y4:timeR9i-8R5jR10:0:0R11r49gr50r313r21r78r264r293r212r64r277r124r171r397r417r220r240r540r482r501r462r371r5r334r525hg";
zf.SRC="oy4:namey19:h3d.shader.BaseMeshy4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-156R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini1326y3:maxi1969y4:filey109:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FBaseMesh.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i1332R16i1365R17R18gR19jR4:5:2i3jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i1332R16i1348R17R18gR19r17R20jR21:1:1oR0y16:relativePositionR9i-141R5jR10:4:0R11r17ggoR14oR15i1351R16i1365R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y8:positionR9i-133y6:parentoR0y5:inputR9i-132R5jR10:1:0R11jR4:13:1ar27oR0y6:normalR9i-134R26r28R5r29R11jR4:5:2i3r16ghgR5r29R11r26gggoR14oR15i1371R16i1437R17R18gR19jR4:5:2i3r16R20jR21:5:3r18oR14oR15i1371R16i1390R17R18gR19r38R20jR21:1:1oR0y19:transformedPositionR9i-142R5r22R11r38ggoR14oR15i1393R16i1437R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:1:0oR14oR15i1393R16i1409R17R18gR19r17R20jR21:1:1r21goR14oR15i1412R16i1437R17R18gR19jR4:8:0R20jR21:8:2oR14oR15i1412R16i1428R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:50:0gaoR14oR15i1412R16i1428R17R18gR19jR4:7:0R20jR21:1:1oR0y9:modelViewy10:qualifiersajy17:hxsl.VarQualifier:3:0hR9i-130R26oR0y6:globalR9i-127R5jR10:0:0R11jR4:13:1aoR0y4:timeR9i-128R26r66R5r67R11jR4:3:0goR0y9:pixelSizeR9i-129R26r66R5r67R11jR4:5:2i2r16gr63oR0y16:modelViewInverseR32ar65hR9i-131R26r66R5r67R11r62ghgR5r67R11r62gghgggoR14oR15i1443R16i1509R17R18gR19jR4:5:2i4r16R20jR21:5:3r18oR14oR15i1443R16i1460R17R18gR19r82R20jR21:1:1oR0y17:projectedPositionR9i-145R5r22R11r82ggoR14oR15i1463R16i1509R17R18gR19jR4:5:2i4r16R20jR21:5:3r46oR14oR15i1463R16i1491R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i1463R16i1467R17R18gR19jR4:14:1ahR20jR21:2:1jR30:40:0gaoR14oR15i1468R16i1487R17R18gR19r38R20jR21:1:1r41goR14oR15i1489R16i1490R17R18gR19r70R20jR21:0:1jy10:hxsl.Const:3:1i1ghgoR14oR15i1494R16i1509R17R18gR19r62R20jR21:1:1oR0y8:viewProjR9i-122R26oR0y6:cameraR9i-116R5r67R11jR4:13:1aoR0y4:viewR9i-117R26r111R5r67R11r62goR0y4:projR9i-118R26r111R5r67R11r62goR0R25R9i-119R26r111R5r67R11jR4:5:2i3r16goR0y8:projFlipR9i-120R26r111R5r67R11r70goR0y8:projDiagR9i-121R26r111R5r67R11jR4:5:2i3r16gr110oR0y15:inverseViewProjR9i-123R26r111R5r67R11r62goR0y5:zNearR9i-124R26r111R5r67R11r70goR0y4:zFarR9i-125R26r111R5r67R11r70goR0y3:dirR9i-126R26r111R5jR10:3:0R11jR4:5:2i3r16ghgR5r67R11r62ggggoR14oR15i1515R16i1587R17R18gR19jR4:5:2i3r16R20jR21:5:3r18oR14oR15i1515R16i1532R17R18gR19r132R20jR21:1:1oR0y17:transformedNormalR9i-144R5r22R11r132ggoR14oR15i1535R16i1587R17R18gR19r45R20jR21:8:2oR14oR15i1535R16i1575R17R18gR19jR4:14:1aoR3r45R12aoR0y1:_R11r45ghghR20jR21:2:1jR30:31:0gaoR14oR15i1535R16i1575R17R18gR19r45R20jR21:3:1oR14oR15i1536R16i1574R17R18gR19r45R20jR21:5:3r46oR14oR15i1536R16i1548R17R18gR19r32R20jR21:1:1r31goR14oR15i1551R16i1574R17R18gR19jR4:6:0R20jR21:8:2oR14oR15i1551R16i1567R17R18gR19jR4:14:1ahR20jR21:2:1jR30:48:0gaoR14oR15i1551R16i1567R17R18gR19r62R20jR21:1:1r63ghggghggoR14oR15i1593R16i1657R17R18gR19r125R20jR21:5:3r18oR14oR15i1593R16i1603R17R18gR19r125R20jR21:1:1r123goR14oR15i1606R16i1657R17R18gR19r45R20jR21:8:2oR14oR15i1606R16i1645R17R18gR19jR4:14:1aoR3r45R12aoR0R51R11jR4:5:2i3r16ghghR20jR21:2:1r146gaoR14oR15i1606R16i1645R17R18gR19r187R20jR21:3:1oR14oR15i1607R16i1644R17R18gR19r187R20jR21:5:3jR23:3:0oR14oR15i1607R16i1622R17R18gR19r116R20jR21:1:1r115goR14oR15i1625R16i1644R17R18gR19r38R20jR21:1:1r41ggghggoR14oR15i1663R16i1681R17R18gR19jR4:5:2i4r16R20jR21:5:3r18oR14oR15i1663R16i1673R17R18gR19r208R20jR21:1:1oR0y10:pixelColorR9i-146R5r22R11r208ggoR14oR15i1676R16i1681R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y5:colorR9i-152R5jR10:2:0R11r215gggoR14oR15i1687R16i1712R17R18gR19r70R20jR21:5:3r18oR14oR15i1687R16i1696R17R18gR19r70R20jR21:1:1oR0y9:specPowerR9i-149R5r22R11r70ggoR14oR15i1699R16i1712R17R18gR19r70R20jR21:1:1oR0y13:specularPowerR32ajR33:7:2d0d100hR9i-153R5r217R11r70gggoR14oR15i1718R16i1760R17R18gR19jR4:5:2i3r16R20jR21:5:3r18oR14oR15i1718R16i1727R17R18gR19r235R20jR21:1:1oR0y9:specColorR9i-150R5r22R11r235ggoR14oR15i1730R16i1760R17R18gR19jR4:5:2i3r16R20jR21:5:3r46oR14oR15i1730R16i1743R17R18gR19r242R20jR21:1:1oR0y13:specularColorR9i-155R5r217R11r242ggoR14oR15i1746R16i1760R17R18gR19r70R20jR21:1:1oR0y14:specularAmountR32ajR33:7:2d0d10hR9i-154R5r217R11r70ggggoR14oR15i1766R16i1831R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i1766R16i1774R17R18gR19r257R20jR21:1:1oR0y8:screenUVR9i-148R5r22R11r257ggoR14oR15i1777R16i1831R17R18gR19jR4:5:2i2r16R20jR21:8:2oR14oR15i1777R16i1787R17R18gR19jR4:14:1aoR3r264R12aoR0y9:screenPosR11r264ghghR20jR21:2:1jR30:56:0gaoR14oR15i1788R16i1830R17R18gR19jR4:5:2i2r16R20jR21:5:3jR23:2:0oR14oR15i1788R16i1808R17R18gR19r277R20jR21:9:2oR14oR15i1788R16i1805R17R18gR19r82R20jR21:1:1r85gajy14:hxsl.Component:0:0jR61:1:0hgoR14oR15i1811R16i1830R17R18gR19r70R20jR21:9:2oR14oR15i1811R16i1828R17R18gR19r82R20jR21:1:1r85gajR61:3:0hgghggoR14oR15i1837R16i1886R17R18gR19r70R20jR21:5:3r18oR14oR15i1837R16i1842R17R18gR19r70R20jR21:1:1oR0y5:depthR9i-147R5r22R11r70ggoR14oR15i1845R16i1886R17R18gR19r70R20jR21:5:3r278oR14oR15i1845R16i1864R17R18gR19r70R20jR21:9:2oR14oR15i1845R16i1862R17R18gR19r82R20jR21:1:1r85gajR61:2:0hgoR14oR15i1867R16i1886R17R18gR19r70R20jR21:9:2oR14oR15i1867R16i1884R17R18gR19r82R20jR21:1:1r85gar294hgggoR14oR15i1892R16i1963R17R18gR19r70R20jR21:5:3r18oR14oR15i1892R16i1901R17R18gR19r70R20jR21:1:1oR0y9:worldDistR9i-151R5r22R11r70ggoR14oR15i1904R16i1963R17R18gR19r70R20jR21:5:3r278oR14oR15i1904R16i1949R17R18gR19r70R20jR21:8:2oR14oR15i1904R16i1910R17R18gR19jR4:14:1aoR3r70R12aoR0y5:valueR11r45ghghR20jR21:2:1jR30:27:0gaoR14oR15i1911R16i1948R17R18gR19jR4:5:2i3r16R20jR21:5:3r195oR14oR15i1911R16i1930R17R18gR19r38R20jR21:1:1r41goR14oR15i1933R16i1948R17R18gR19r116R20jR21:1:1r115gghgoR14oR15i1952R16i1963R17R18gR19r70R20jR21:1:1r122ggghgR12ahgoR3r3R5r4R7oR0y16:__init__fragmentR9i-157R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i2003R16i2442R17R18gR19r3R20jR21:4:1aoR14oR15i2009R16i2058R17R18gR19r132R20jR21:5:3r18oR14oR15i2009R16i2026R17R18gR19r132R20jR21:1:1r135goR14oR15i2029R16i2058R17R18gR19r45R20jR21:8:2oR14oR15i2029R16i2046R17R18gR19jR4:14:1aoR3r45R12aoR0R51R11r132ghghR20jR21:2:1r146gaoR14oR15i2029R16i2046R17R18gR19r132R20jR21:1:1r135ghggoR14oR15i2159R16i2224R17R18gR19r257R20jR21:5:3r18oR14oR15i2159R16i2167R17R18gR19r257R20jR21:1:1r260goR14oR15i2170R16i2224R17R18gR19r264R20jR21:8:2oR14oR15i2170R16i2180R17R18gR19r271R20jR21:2:1r272gaoR14oR15i2181R16i2223R17R18gR19jR4:5:2i2r16R20jR21:5:3r278oR14oR15i2181R16i2201R17R18gR19r405R20jR21:9:2oR14oR15i2181R16i2198R17R18gR19r82R20jR21:1:1r85gar285r286hgoR14oR15i2204R16i2223R17R18gR19r70R20jR21:9:2oR14oR15i2204R16i2221R17R18gR19r82R20jR21:1:1r85gar294hgghggoR14oR15i2230R16i2279R17R18gR19r70R20jR21:5:3r18oR14oR15i2230R16i2235R17R18gR19r70R20jR21:1:1r303goR14oR15i2238R16i2279R17R18gR19r70R20jR21:5:3r278oR14oR15i2238R16i2257R17R18gR19r70R20jR21:9:2oR14oR15i2238R16i2255R17R18gR19r82R20jR21:1:1r85gar313hgoR14oR15i2260R16i2279R17R18gR19r70R20jR21:9:2oR14oR15i2260R16i2277R17R18gR19r82R20jR21:1:1r85gar294hgggoR14oR15i2363R16i2388R17R18gR19r70R20jR21:5:3r18oR14oR15i2363R16i2372R17R18gR19r70R20jR21:1:1r224goR14oR15i2375R16i2388R17R18gR19r70R20jR21:1:1r228ggoR14oR15i2394R16i2436R17R18gR19r235R20jR21:5:3r18oR14oR15i2394R16i2403R17R18gR19r235R20jR21:1:1r238goR14oR15i2406R16i2436R17R18gR19r242R20jR21:5:3r46oR14oR15i2406R16i2419R17R18gR19r242R20jR21:1:1r245goR14oR15i2422R16i2436R17R18gR19r70R20jR21:1:1r249ggghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-158R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i2466R16i2598R17R18gR19r3R20jR21:4:1aoR14oR15i2472R16i2540R17R18gR19jR4:5:2i4r16R20jR21:5:3r18oR14oR15i2472R16i2487R17R18gR19r484R20jR21:1:1oR0R25R9i-136R26oR0y6:outputR9i-135R5r22R11jR4:13:1ar487oR0R53R9i-137R26r488R5r22R11jR4:5:2i4r16goR0R62R9i-138R26r488R5r22R11r70goR0R28R9i-139R26r488R5r22R11jR4:5:2i3r16goR0R63R9i-140R26r488R5r22R11r70ghgR5r22R11r484ggoR14oR15i2490R16i2540R17R18gR19jR4:5:2i4r16R20jR21:5:3r46oR14oR15i2490R16i2507R17R18gR19r82R20jR21:1:1r85goR14oR15i2510R16i2540R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i2510R16i2514R17R18gR19r96R20jR21:2:1r97gaoR14oR15i2515R16i2516R17R18gR19r70R20jR21:0:1jR39:3:1i1goR14oR15i2518R16i2533R17R18gR19r70R20jR21:1:1r117goR14oR15i2535R16i2536R17R18gR19r70R20jR21:0:1jR39:3:1i1goR14oR15i2538R16i2539R17R18gR19r70R20jR21:0:1jR39:3:1i1ghgggoR14oR15i2546R16i2592R17R18gR19jR4:5:2i3r16R20jR21:5:3r18oR14oR15i2546R16i2570R17R18gR19r531R20jR21:1:1oR0y24:pixelTransformedPositionR9i-143R5r22R11r531ggoR14oR15i2573R16i2592R17R18gR19r38R20jR21:1:1r41gghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-159R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i2624R16i2760R17R18gR19r3R20jR21:4:1aoR14oR15i2630R16i2655R17R18gR19r491R20jR21:5:3r18oR14oR15i2630R16i2642R17R18gR19r491R20jR21:1:1r490goR14oR15i2645R16i2655R17R18gR19r208R20jR21:1:1r211ggoR14oR15i2661R16i2681R17R18gR19r70R20jR21:5:3r18oR14oR15i2661R16i2673R17R18gR19r70R20jR21:1:1r492goR14oR15i2676R16i2681R17R18gR19r70R20jR21:1:1r303ggoR14oR15i2687R16i2720R17R18gR19r494R20jR21:5:3r18oR14oR15i2687R16i2700R17R18gR19r494R20jR21:1:1r493goR14oR15i2703R16i2720R17R18gR19r132R20jR21:1:1r135ggoR14oR15i2726R16i2754R17R18gR19r70R20jR21:5:3r18oR14oR15i2726R16i2742R17R18gR19r70R20jR21:1:1r495goR14oR15i2745R16i2754R17R18gR19r70R20jR21:1:1r328gghgR12ahghy4:varsar111r66r28r488r21r41r534r135r85r211r303r260r224r238r328r216r228r249r245r5r363r474r544hg";
Ef.SRC="oy4:namey15:h3d.shader.Blury4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-324R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini330y3:maxi396y4:filey113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FScreenShader.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i336R16i361R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i336R16i348R17R18gR19r17R20jR21:1:1oR0y5:colorR9i-304y6:parentoR0y6:outputR9i-302R5jR10:4:0R11jR4:13:1aoR0y8:positionR9i-303R25r22R5r23R11jR4:5:2i4r16gr21hgR5r23R11r17ggoR14oR15i351R16i361R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y10:pixelColorR9i-305R5r23R11r31gggoR14oR15i367R16i390R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i367R16i379R17R18gR19r37R20jR21:1:1oR0y12:calculatedUVR9i-306R5r23R11r37ggoR14oR15i382R16i390R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y2:uvR9i-300R25oR0y5:inputR9i-298R5jR10:1:0R11jR4:13:1aoR0R27R9i-299R25r46R5r47R11jR4:5:2i2r16gr45hgR5r47R11r44ggghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-325R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i420R16i504R17R18gR19r3R20jR21:4:1aoR14oR15i426R16i498R17R18gR19r26R20jR21:5:3r18oR14oR15i426R16i441R17R18gR19r26R20jR21:1:1r25goR14oR15i444R16i498R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i444R16i448R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i449R16i465R17R18gR19jR4:3:0R20jR21:9:2oR14oR15i449R16i463R17R18gR19r50R20jR21:1:1r49gajy14:hxsl.Component:0:0hgoR14oR15i467R16i491R17R18gR19r83R20jR21:5:3jR23:1:0oR14oR15i467R16i483R17R18gR19r83R20jR21:9:2oR14oR15i467R16i481R17R18gR19r50R20jR21:1:1r49gajR34:1:0hgoR14oR15i486R16i491R17R18gR19r83R20jR21:1:1oR0y5:flipYR9i-301R5jR10:2:0R11r83gggoR14oR15i493R16i494R17R18gR19r83R20jR21:0:1jy10:hxsl.Const:3:1zgoR14oR15i496R16i497R17R18gR19r83R20jR21:0:1jR36:3:1i1ghgghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-326R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i767R16i2480R17y105:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FBlur.hxgR19r3R20jR21:4:1aoR14oR15i773R16i2220R17R38gR19r3R20jR21:10:3oR14oR15i777R16i793R17R38gR19jR4:2:0R20jR21:1:1oR0y16:isDepthDependanty10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-318R5r104R11r133ggoR14oR15i796R16i1415R17R38gR19r3R20jR21:4:1aoR14oR15i803R16i836R17R38gR19r3R20jR21:7:2oR0y4:pcurR9i-329R5r23R11jR4:5:2i3r16goR14oR15i814R16i835R17R38gR19r144R20jR21:8:2oR14oR15i814R16i825R17R38gR19jR4:14:1aoR3r144R12aoR0R30R11jR4:5:2i2r16ghghR20jR21:1:1oR0y11:getPositionR9i-328R5r6R11r154ggaoR14oR15i826R16i834R17R38gR19r44R20jR21:1:1r45ghggoR14oR15i842R16i875R17R38gR19r3R20jR21:7:2oR0y4:ccurR9i-330R5r23R11jR4:5:2i4r16goR14oR15i853R16i874R17R38gR19r166R20jR21:8:2oR14oR15i853R16i860R17R38gR19jR4:14:1aoR3r166R12aoR0y1:_R11jR4:10:0goR0R30R11jR4:5:2i2r16ghghR20jR21:2:1jR33:33:0gaoR14oR15i853R16i860R17R38gR19r175R20jR21:1:1oR0y7:textureR9i-308R5r104R11r175ggoR14oR15i865R16i873R17R38gR19r44R20jR21:1:1r45ghggoR14oR15i881R16i910R17R38gR19r3R20jR21:7:2oR0R24R9i-331R5r23R11jR4:5:2i4r16goR14oR15i893R16i909R17R38gR19r194R20jR21:8:2oR14oR15i893R16i897R17R38gR19r77R20jR21:2:1r78gaoR14oR15i898R16i899R17R38gR19r83R20jR21:0:1jR36:3:1zgoR14oR15i901R16i902R17R38gR19r83R20jR21:0:1jR36:3:1zgoR14oR15i904R16i905R17R38gR19r83R20jR21:0:1jR36:3:1zgoR14oR15i907R16i908R17R38gR19r83R20jR21:0:1jR36:3:1zghggoR14oR15i916R16i969R17R38gR19r3R20jR21:7:2oR0y4:ncurR9i-332R5r23R11jR4:5:2i3r16goR14oR15i927R16i968R17R38gR19r222R20jR21:8:2oR14oR15i927R16i939R17R38gR19jR4:14:1aoR3r222R12aoR0y5:valueR11r166ghghR20jR21:2:1jR33:55:0gaoR14oR15i940R16i967R17R38gR19r166R20jR21:8:2oR14oR15i940R16i953R17R38gR19jR4:14:1aoR3r166R12aoR0R45R11r175gr176hghR20jR21:2:1r179gaoR14oR15i940R16i953R17R38gR19r175R20jR21:1:1oR0y13:normalTextureR9i-320R5r104R11r175ggoR14oR15i958R16i966R17R38gR19r44R20jR21:1:1r45ghghggoR14oR15i975R16i1384R17R38gR19r3R20jR21:20:3y6:unrollahoR14oR15i983R16i1384R17R38gR19r3R20jR21:13:3oR0y1:iR9i-333R5r23R11jR4:1:0goR14oR15i993R16i1015R17R38gR19jR4:15:2r262jy13:hxsl.SizeDecl:0:1zR20jR21:5:3jR23:21:0oR14oR15i993R16i1008R17R38gR19r262R20jR21:5:3jR23:0:0oR14oR15i993R16i1001R17R38gR19r262R20jR21:6:2jy15:haxe.macro.Unop:3:0oR14oR15i994R16i1001R17R38gR19r262R20jR21:1:1oR0y7:QualityR40ajR41:0:1nhR9i-310R5r104R11r262gggoR14oR15i1004R16i1008R17R38gR19r262R20jR21:0:1jR36:2:1i1ggoR14oR15i1008R16i1015R17R38gR19r262R20jR21:1:1r276ggoR14oR15i1018R16i1384R17R38gR19r3R20jR21:4:1aoR14oR15i1026R16i1078R17R38gR19r3R20jR21:7:2oR0R30R9i-334R5r23R11jR4:5:2i2r16goR14oR15i1035R16i1077R17R38gR19r296R20jR21:5:3r270oR14oR15i1035R16i1043R17R38gR19r44R20jR21:1:1r45goR14oR15i1046R16i1077R17R38gR19jR4:5:2i2r16R20jR21:5:3r92oR14oR15i1046R16i1051R17R38gR19r304R20jR21:1:1oR0y5:pixelR9i-314R5r104R11r304ggoR14oR15i1054R16i1077R17R38gR19r83R20jR21:16:2oR14oR15i1054R16i1061R17R38gR19jR4:15:2r83jR52:1:1r276R20jR21:1:1oR0y7:offsetsR9i-313R5r104R11r314ggoR14oR15i1062R16i1076R17R38gR19r262R20jR21:10:3oR14oR15i1062R16i1067R17R38gR19r133R20jR21:5:3jR23:9:0oR14oR15i1062R16i1063R17R38gR19r262R20jR21:1:1r261goR14oR15i1066R16i1067R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i1070R16i1072R17R38gR19r262R20jR21:6:2r273oR14oR15i1071R16i1072R17R38gR19r262R20jR21:1:1r261ggoR14oR15i1075R16i1076R17R38gR19r262R20jR21:1:1r261ggggggoR14oR15i1085R16i1109R17R38gR19r3R20jR21:7:2oR0y1:cR9i-335R5r23R11r166goR14oR15i1093R16i1108R17R38gR19r166R20jR21:8:2oR14oR15i1093R16i1100R17R38gR19jR4:14:1aoR3r166R12aoR0R45R11r175gr176hghR20jR21:2:1r179gaoR14oR15i1093R16i1100R17R38gR19r175R20jR21:1:1r184goR14oR15i1105R16i1107R17R38gR19r296R20jR21:1:1r295ghggoR14oR15i1116R16i1140R17R38gR19r3R20jR21:7:2oR0R14R9i-336R5r23R11r144goR14oR15i1124R16i1139R17R38gR19r144R20jR21:8:2oR14oR15i1124R16i1135R17R38gR19r154R20jR21:1:1r155gaoR14oR15i1136R16i1138R17R38gR19r296R20jR21:1:1r295ghggoR14oR15i1147R16i1180R17R38gR19r3R20jR21:7:2oR0y1:dR9i-337R5r23R11r83goR14oR15i1155R16i1179R17R38gR19r83R20jR21:8:2oR14oR15i1155R16i1165R17R38gR19jR4:14:1aoR3r83R12aoR0R45R11jR4:5:2i3r16goR0y1:bR11r222ghghR20jR21:2:1jR33:29:0gaoR14oR15i1155R16i1165R17R38gR19r391R20jR21:3:1oR14oR15i1156R16i1164R17R38gR19r391R20jR21:5:3jR23:3:0oR14oR15i1156R16i1157R17R38gR19r144R20jR21:1:1r368goR14oR15i1160R16i1164R17R38gR19r144R20jR21:1:1r143gggoR14oR15i1170R16i1178R17R38gR19jR4:5:2i3r16R20jR21:5:3r401oR14oR15i1170R16i1171R17R38gR19r144R20jR21:1:1r368goR14oR15i1174R16i1178R17R38gR19r144R20jR21:1:1r143gghggoR14oR15i1187R16i1231R17R38gR19r3R20jR21:7:2oR0y1:nR9i-338R5r23R11r222goR14oR15i1195R16i1230R17R38gR19r222R20jR21:8:2oR14oR15i1195R16i1207R17R38gR19r231R20jR21:2:1r232gaoR14oR15i1208R16i1229R17R38gR19r166R20jR21:8:2oR14oR15i1208R16i1221R17R38gR19jR4:14:1aoR3r166R12aoR0R45R11r175gr176hghR20jR21:2:1r179gaoR14oR15i1208R16i1221R17R38gR19r175R20jR21:1:1r248goR14oR15i1226R16i1228R17R38gR19r296R20jR21:1:1r295ghghggoR14oR15i1240R16i1269R17R38gR19r166R20jR21:5:3r18oR14oR15i1240R16i1241R17R38gR19r166R20jR21:1:1r346goR14oR15i1244R16i1269R17R38gR19r166R20jR21:8:2oR14oR15i1244R16i1247R17R38gR19jR4:14:1aoR3r166R12aoR0y1:xR11r166goR0y1:yR11r166goR0y1:aR11r83ghghR20jR21:2:1jR33:24:0gaoR14oR15i1248R16i1252R17R38gR19r166R20jR21:1:1r165goR14oR15i1254R16i1255R17R38gR19r166R20jR21:1:1r346goR14oR15i1257R16i1268R17R38gR19r83R20jR21:8:2oR14oR15i1257R16i1261R17R38gR19jR4:14:1aoR3r83R12aoR0R45R11r222gr392hghR20jR21:2:1r394gaoR14oR15i1257R16i1261R17R38gR19r222R20jR21:1:1r221goR14oR15i1266R16i1267R17R38gR19r222R20jR21:1:1r424ghghggoR14oR15i1277R16i1333R17R38gR19r166R20jR21:5:3r18oR14oR15i1277R16i1278R17R38gR19r166R20jR21:1:1r346goR14oR15i1281R16i1333R17R38gR19r166R20jR21:8:2oR14oR15i1281R16i1284R17R38gR19jR4:14:1ar461hR20jR21:2:1r467gaoR14oR15i1285R16i1286R17R38gR19r166R20jR21:1:1r346goR14oR15i1288R16i1292R17R38gR19r166R20jR21:1:1r165goR14oR15i1294R16i1332R17R38gR19r83R20jR21:8:2oR14oR15i1294R16i1324R17R38gR19jR4:14:1aoR3r83R12aoR0R45R11r83goR0R59R11r83ghghR20jR21:2:1jR33:21:0gaoR14oR15i1294R16i1324R17R38gR19r83R20jR21:3:1oR14oR15i1295R16i1323R17R38gR19r83R20jR21:5:3r92oR14oR15i1295R16i1314R17R38gR19r83R20jR21:8:2oR14oR15i1295R16i1306R17R38gR19jR4:14:1aoR3r83R12aoR0R45R11r83gr523hghR20jR21:2:1jR33:22:0gaoR14oR15i1295R16i1306R17R38gR19r83R20jR21:3:1oR14oR15i1296R16i1305R17R38gR19r83R20jR21:5:3r401oR14oR15i1296R16i1297R17R38gR19r83R20jR21:1:1r382goR14oR15i1300R16i1305R17R38gR19r83R20jR21:0:1jR36:3:1d0.001gggoR14oR15i1311R16i1313R17R38gR19r83R20jR21:0:1jR36:3:1d0ghgoR14oR15i1317R16i1323R17R38gR19r83R20jR21:0:1jR36:3:1i100000gggoR14oR15i1329R16i1331R17R38gR19r83R20jR21:0:1jR36:3:1d1ghghggoR14oR15i1341R16i1376R17R38gR19r194R20jR21:5:3jR23:20:1r270oR14oR15i1341R16i1346R17R38gR19r194R20jR21:1:1r193goR14oR15i1350R16i1376R17R38gR19r166R20jR21:5:3r92oR14oR15i1350R16i1351R17R38gR19r166R20jR21:1:1r346goR14oR15i1354R16i1376R17R38gR19r83R20jR21:16:2oR14oR15i1354R16i1360R17R38gR19jR4:15:2r83jR52:1:1r276R20jR21:1:1oR0y6:valuesR9i-312R5r104R11r591ggoR14oR15i1361R16i1375R17R38gR19r262R20jR21:10:3oR14oR15i1361R16i1366R17R38gR19r133R20jR21:5:3r321oR14oR15i1361R16i1362R17R38gR19r262R20jR21:1:1r261goR14oR15i1365R16i1366R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i1369R16i1371R17R38gR19r262R20jR21:6:2r273oR14oR15i1370R16i1371R17R38gR19r262R20jR21:1:1r261ggoR14oR15i1374R16i1375R17R38gR19r262R20jR21:1:1r261ggggghgggoR14oR15i1390R16i1408R17R38gR19r31R20jR21:5:3r18oR14oR15i1390R16i1400R17R38gR19r31R20jR21:1:1r32goR14oR15i1403R16i1408R17R38gR19r194R20jR21:1:1r193gghgoR14oR15i1425R16i2220R17R38gR19r3R20jR21:10:3oR14oR15i1429R16i1436R17R38gR19r133R20jR21:1:1oR0y7:isDepthR40ajR41:0:1nhR9i-311R5r104R11r133ggoR14oR15i1439R16i1834R17R38gR19r3R20jR21:4:1aoR14oR15i1446R16i1459R17R38gR19r3R20jR21:7:2oR0y3:valR9i-339R5r23R11r83goR14oR15i1456R16i1458R17R38gR19r83R20jR21:0:1jR36:3:1d0ggoR14oR15i1465R16i1784R17R38gR19r3R20jR21:20:3R50ahoR14oR15i1473R16i1784R17R38gR19r3R20jR21:13:3oR0R51R9i-340R5r23R11r262goR14oR15i1483R16i1505R17R38gR19jR4:15:2r262jR52:0:1zR20jR21:5:3r267oR14oR15i1483R16i1498R17R38gR19r262R20jR21:5:3r270oR14oR15i1483R16i1491R17R38gR19r262R20jR21:6:2r273oR14oR15i1484R16i1491R17R38gR19r262R20jR21:1:1r276ggoR14oR15i1494R16i1498R17R38gR19r262R20jR21:0:1jR36:2:1i1ggoR14oR15i1498R16i1505R17R38gR19r262R20jR21:1:1r276ggoR14oR15i1507R16i1784R17R38gR19r3R20jR21:4:1aoR14oR15i1515R16i1776R17R38gR19r3R20jR21:10:3oR14oR15i1519R16i1525R17R38gR19r133R20jR21:1:1oR0y6:isCubeR40ajR41:0:1nhR9i-321R5r104R11r133ggoR14oR15i1528R16i1664R17R38gR19r83R20jR21:5:3jR23:20:1r270oR14oR15i1528R16i1531R17R38gR19r83R20jR21:1:1r645goR14oR15i1535R16i1664R17R38gR19r83R20jR21:5:3r92oR14oR15i1535R16i1639R17R38gR19r83R20jR21:8:2oR14oR15i1535R16i1541R17R38gR19jR4:14:1aoR3r83R12aoR0R48R11r166ghghR20jR21:2:1jR33:53:0gaoR14oR15i1542R16i1638R17R38gR19r166R20jR21:8:2oR14oR15i1542R16i1553R17R38gR19jR4:14:1aoR3r166R12aoR0R45R11jR4:12:0goR0y6:normalR11r222ghghR20jR21:2:1r179gaoR14oR15i1542R16i1553R17R38gR19r717R20jR21:1:1oR0y11:cubeTextureR9i-322R5r104R11r717ggoR14oR15i1558R16i1637R17R38gR19r222R20jR21:5:3r92oR14oR15i1558R16i1627R17R38gR19jR4:5:2i3r16R20jR21:8:2oR14oR15i1558R16i1562R17R38gR19jR4:14:1ahR20jR21:2:1jR33:39:0gaoR14oR15i1563R16i1623R17R38gR19jR4:5:2i2r16R20jR21:5:3r401oR14oR15i1563R16i1617R17R38gR19r740R20jR21:5:3r92oR14oR15i1563R16i1612R17R38gR19r740R20jR21:3:1oR14oR15i1564R16i1610R17R38gR19r740R20jR21:5:3r270oR14oR15i1564R16i1572R17R38gR19r44R20jR21:1:1r45goR14oR15i1575R16i1610R17R38gR19r304R20jR21:5:3r92oR14oR15i1575R16i1606R17R38gR19r304R20jR21:5:3r92oR14oR15i1575R16i1580R17R38gR19r304R20jR21:1:1r307goR14oR15i1583R16i1606R17R38gR19r83R20jR21:16:2oR14oR15i1583R16i1590R17R38gR19r314R20jR21:1:1r315goR14oR15i1591R16i1605R17R38gR19r262R20jR21:10:3oR14oR15i1591R16i1596R17R38gR19r133R20jR21:5:3r321oR14oR15i1591R16i1592R17R38gR19r262R20jR21:1:1r656goR14oR15i1595R16i1596R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i1599R16i1601R17R38gR19r262R20jR21:6:2r273oR14oR15i1600R16i1601R17R38gR19r262R20jR21:1:1r656ggoR14oR15i1604R16i1605R17R38gR19r262R20jR21:1:1r656ggggoR14oR15i1609R16i1610R17R38gR19r83R20jR21:8:2oR14oR15i1609R16i1610R17R38gR19jR4:14:1ahR20jR21:2:1jR33:36:0gaoR14oR15i1609R16i1610R17R38gR19r262R20jR21:1:1r656ghggggoR14oR15i1614R16i1617R17R38gR19r83R20jR21:0:1jR36:3:1d2ggoR14oR15i1620R16i1623R17R38gR19r83R20jR21:0:1jR36:3:1d1ggoR14oR15i1625R16i1626R17R38gR19r83R20jR21:0:1jR36:3:1i1ghgoR14oR15i1630R16i1637R17R38gR19jR4:6:0R20jR21:1:1oR0y7:cubeDirR9i-323R5r104R11r819ggghghgoR14oR15i1642R16i1664R17R38gR19r83R20jR21:16:2oR14oR15i1642R16i1648R17R38gR19r591R20jR21:1:1r592goR14oR15i1649R16i1663R17R38gR19r262R20jR21:10:3oR14oR15i1649R16i1654R17R38gR19r133R20jR21:5:3r321oR14oR15i1649R16i1650R17R38gR19r262R20jR21:1:1r656goR14oR15i1653R16i1654R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i1657R16i1659R17R38gR19r262R20jR21:6:2r273oR14oR15i1658R16i1659R17R38gR19r262R20jR21:1:1r656ggoR14oR15i1662R16i1663R17R38gR19r262R20jR21:1:1r656gggggoR14oR15i1677R16i1776R17R38gR19r83R20jR21:5:3jR23:20:1r270oR14oR15i1677R16i1680R17R38gR19r83R20jR21:1:1r645goR14oR15i1684R16i1776R17R38gR19r83R20jR21:5:3r92oR14oR15i1684R16i1751R17R38gR19r83R20jR21:8:2oR14oR15i1684R16i1690R17R38gR19r705R20jR21:2:1r706gaoR14oR15i1691R16i1750R17R38gR19r166R20jR21:8:2oR14oR15i1691R16i1698R17R38gR19jR4:14:1aoR3r166R12aoR0R45R11r175gr176hghR20jR21:2:1r179gaoR14oR15i1691R16i1698R17R38gR19r175R20jR21:1:1r184goR14oR15i1703R16i1749R17R38gR19jR4:5:2i2r16R20jR21:5:3r270oR14oR15i1703R16i1711R17R38gR19r44R20jR21:1:1r45goR14oR15i1714R16i1749R17R38gR19r304R20jR21:5:3r92oR14oR15i1714R16i1745R17R38gR19r304R20jR21:5:3r92oR14oR15i1714R16i1719R17R38gR19r304R20jR21:1:1r307goR14oR15i1722R16i1745R17R38gR19r83R20jR21:16:2oR14oR15i1722R16i1729R17R38gR19r314R20jR21:1:1r315goR14oR15i1730R16i1744R17R38gR19r262R20jR21:10:3oR14oR15i1730R16i1735R17R38gR19r133R20jR21:5:3r321oR14oR15i1730R16i1731R17R38gR19r262R20jR21:1:1r656goR14oR15i1734R16i1735R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i1738R16i1740R17R38gR19r262R20jR21:6:2r273oR14oR15i1739R16i1740R17R38gR19r262R20jR21:1:1r656ggoR14oR15i1743R16i1744R17R38gR19r262R20jR21:1:1r656ggggoR14oR15i1748R16i1749R17R38gR19r83R20jR21:8:2oR14oR15i1748R16i1749R17R38gR19jR4:14:1ahR20jR21:2:1r792gaoR14oR15i1748R16i1749R17R38gR19r262R20jR21:1:1r656ghggghghgoR14oR15i1754R16i1776R17R38gR19r83R20jR21:16:2oR14oR15i1754R16i1760R17R38gR19r591R20jR21:1:1r592goR14oR15i1761R16i1775R17R38gR19r262R20jR21:10:3oR14oR15i1761R16i1766R17R38gR19r133R20jR21:5:3r321oR14oR15i1761R16i1762R17R38gR19r262R20jR21:1:1r656goR14oR15i1765R16i1766R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i1769R16i1771R17R38gR19r262R20jR21:6:2r273oR14oR15i1770R16i1771R17R38gR19r262R20jR21:1:1r656ggoR14oR15i1774R16i1775R17R38gR19r262R20jR21:1:1r656gggggghgggoR14oR15i1790R16i1827R17R38gR19r31R20jR21:5:3r18oR14oR15i1790R16i1800R17R38gR19r31R20jR21:1:1r32goR14oR15i1803R16i1827R17R38gR19r166R20jR21:8:2oR14oR15i1803R16i1807R17R38gR19jR4:14:1aoR3r166R12aoR0R48R11r83ghghR20jR21:2:1jR33:52:0gaoR14oR15i1808R16i1826R17R38gR19r83R20jR21:8:2oR14oR15i1808R16i1811R17R38gR19jR4:14:1aoR3r83R12aoR0R45R11r83gr523hghR20jR21:2:1r525gaoR14oR15i1808R16i1811R17R38gR19r83R20jR21:1:1r645goR14oR15i1816R16i1825R17R38gR19r83R20jR21:0:1jR36:3:1d0.9999999ghghgghgoR14oR15i1840R16i2220R17R38gR19r3R20jR21:4:1aoR14oR15i1847R16i1876R17R38gR19r3R20jR21:7:2oR0R24R9i-341R5r23R11jR4:5:2i4r16goR14oR15i1859R16i1875R17R38gR19r1020R20jR21:8:2oR14oR15i1859R16i1863R17R38gR19r77R20jR21:2:1r78gaoR14oR15i1864R16i1865R17R38gR19r83R20jR21:0:1jR36:3:1zgoR14oR15i1867R16i1868R17R38gR19r83R20jR21:0:1jR36:3:1zgoR14oR15i1870R16i1871R17R38gR19r83R20jR21:0:1jR36:3:1zgoR14oR15i1873R16i1874R17R38gR19r83R20jR21:0:1jR36:3:1zghggoR14oR15i1882R16i2189R17R38gR19r3R20jR21:20:3R50ahoR14oR15i1890R16i2189R17R38gR19r3R20jR21:13:3oR0R51R9i-342R5r23R11r262goR14oR15i1900R16i1922R17R38gR19jR4:15:2r262jR52:0:1zR20jR21:5:3r267oR14oR15i1900R16i1915R17R38gR19r262R20jR21:5:3r270oR14oR15i1900R16i1908R17R38gR19r262R20jR21:6:2r273oR14oR15i1901R16i1908R17R38gR19r262R20jR21:1:1r276ggoR14oR15i1911R16i1915R17R38gR19r262R20jR21:0:1jR36:2:1i1ggoR14oR15i1915R16i1922R17R38gR19r262R20jR21:1:1r276ggoR14oR15i1924R16i2189R17R38gR19r3R20jR21:4:1aoR14oR15i1932R16i2181R17R38gR19r3R20jR21:10:3oR14oR15i1936R16i1942R17R38gR19r133R20jR21:1:1r685goR14oR15i1945R16i2075R17R38gR19r1020R20jR21:5:3jR23:20:1r270oR14oR15i1945R16i1950R17R38gR19r1020R20jR21:1:1r1019goR14oR15i1954R16i2075R17R38gR19r166R20jR21:5:3r92oR14oR15i1954R16i2050R17R38gR19r166R20jR21:8:2oR14oR15i1954R16i1965R17R38gR19jR4:14:1aoR3r166R12aoR0R45R11r717gr718hghR20jR21:2:1r179gaoR14oR15i1954R16i1965R17R38gR19r717R20jR21:1:1r724goR14oR15i1970R16i2049R17R38gR19r222R20jR21:5:3r92oR14oR15i1970R16i2039R17R38gR19jR4:5:2i3r16R20jR21:8:2oR14oR15i1970R16i1974R17R38gR19r734R20jR21:2:1r735gaoR14oR15i1975R16i2035R17R38gR19jR4:5:2i2r16R20jR21:5:3r401oR14oR15i1975R16i2029R17R38gR19r1113R20jR21:5:3r92oR14oR15i1975R16i2024R17R38gR19r1113R20jR21:3:1oR14oR15i1976R16i2022R17R38gR19r1113R20jR21:5:3r270oR14oR15i1976R16i1984R17R38gR19r44R20jR21:1:1r45goR14oR15i1987R16i2022R17R38gR19r304R20jR21:5:3r92oR14oR15i1987R16i2018R17R38gR19r304R20jR21:5:3r92oR14oR15i1987R16i1992R17R38gR19r304R20jR21:1:1r307goR14oR15i1995R16i2018R17R38gR19r83R20jR21:16:2oR14oR15i1995R16i2002R17R38gR19r314R20jR21:1:1r315goR14oR15i2003R16i2017R17R38gR19r262R20jR21:10:3oR14oR15i2003R16i2008R17R38gR19r133R20jR21:5:3r321oR14oR15i2003R16i2004R17R38gR19r262R20jR21:1:1r1050goR14oR15i2007R16i2008R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i2011R16i2013R17R38gR19r262R20jR21:6:2r273oR14oR15i2012R16i2013R17R38gR19r262R20jR21:1:1r1050ggoR14oR15i2016R16i2017R17R38gR19r262R20jR21:1:1r1050ggggoR14oR15i2021R16i2022R17R38gR19r83R20jR21:8:2oR14oR15i2021R16i2022R17R38gR19jR4:14:1ahR20jR21:2:1r792gaoR14oR15i2021R16i2022R17R38gR19r262R20jR21:1:1r1050ghggggoR14oR15i2026R16i2029R17R38gR19r83R20jR21:0:1jR36:3:1d2ggoR14oR15i2032R16i2035R17R38gR19r83R20jR21:0:1jR36:3:1d1ggoR14oR15i2037R16i2038R17R38gR19r83R20jR21:0:1jR36:3:1i1ghgoR14oR15i2042R16i2049R17R38gR19r819R20jR21:1:1r820gghgoR14oR15i2053R16i2075R17R38gR19r83R20jR21:16:2oR14oR15i2053R16i2059R17R38gR19r591R20jR21:1:1r592goR14oR15i2060R16i2074R17R38gR19r262R20jR21:10:3oR14oR15i2060R16i2065R17R38gR19r133R20jR21:5:3r321oR14oR15i2060R16i2061R17R38gR19r262R20jR21:1:1r1050goR14oR15i2064R16i2065R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i2068R16i2070R17R38gR19r262R20jR21:6:2r273oR14oR15i2069R16i2070R17R38gR19r262R20jR21:1:1r1050ggoR14oR15i2073R16i2074R17R38gR19r262R20jR21:1:1r1050gggggoR14oR15i2088R16i2181R17R38gR19r1020R20jR21:5:3jR23:20:1r270oR14oR15i2088R16i2093R17R38gR19r1020R20jR21:1:1r1019goR14oR15i2097R16i2181R17R38gR19r166R20jR21:5:3r92oR14oR15i2097R16i2156R17R38gR19r166R20jR21:8:2oR14oR15i2097R16i2104R17R38gR19jR4:14:1aoR3r166R12aoR0R45R11r175gr176hghR20jR21:2:1r179gaoR14oR15i2097R16i2104R17R38gR19r175R20jR21:1:1r184goR14oR15i2109R16i2155R17R38gR19jR4:5:2i2r16R20jR21:5:3r270oR14oR15i2109R16i2117R17R38gR19r44R20jR21:1:1r45goR14oR15i2120R16i2155R17R38gR19r304R20jR21:5:3r92oR14oR15i2120R16i2151R17R38gR19r304R20jR21:5:3r92oR14oR15i2120R16i2125R17R38gR19r304R20jR21:1:1r307goR14oR15i2128R16i2151R17R38gR19r83R20jR21:16:2oR14oR15i2128R16i2135R17R38gR19r314R20jR21:1:1r315goR14oR15i2136R16i2150R17R38gR19r262R20jR21:10:3oR14oR15i2136R16i2141R17R38gR19r133R20jR21:5:3r321oR14oR15i2136R16i2137R17R38gR19r262R20jR21:1:1r1050goR14oR15i2140R16i2141R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i2144R16i2146R17R38gR19r262R20jR21:6:2r273oR14oR15i2145R16i2146R17R38gR19r262R20jR21:1:1r1050ggoR14oR15i2149R16i2150R17R38gR19r262R20jR21:1:1r1050ggggoR14oR15i2154R16i2155R17R38gR19r83R20jR21:8:2oR14oR15i2154R16i2155R17R38gR19jR4:14:1ahR20jR21:2:1r792gaoR14oR15i2154R16i2155R17R38gR19r262R20jR21:1:1r1050ghggghgoR14oR15i2159R16i2181R17R38gR19r83R20jR21:16:2oR14oR15i2159R16i2165R17R38gR19r591R20jR21:1:1r592goR14oR15i2166R16i2180R17R38gR19r262R20jR21:10:3oR14oR15i2166R16i2171R17R38gR19r133R20jR21:5:3r321oR14oR15i2166R16i2167R17R38gR19r262R20jR21:1:1r1050goR14oR15i2170R16i2171R17R38gR19r262R20jR21:0:1jR36:2:1zggoR14oR15i2174R16i2176R17R38gR19r262R20jR21:6:2r273oR14oR15i2175R16i2176R17R38gR19r262R20jR21:1:1r1050ggoR14oR15i2179R16i2180R17R38gR19r262R20jR21:1:1r1050gggggghgggoR14oR15i2195R16i2213R17R38gR19r31R20jR21:5:3r18oR14oR15i2195R16i2205R17R38gR19r31R20jR21:1:1r32goR14oR15i2208R16i2213R17R38gR19r1020R20jR21:1:1r1019gghgggoR14oR15i2225R16i2475R17R38gR19r3R20jR21:10:3oR14oR15i2229R16i2242R17R38gR19r133R20jR21:1:1oR0y13:hasFixedColorR40ajR41:0:1nhR9i-315R5r104R11r133ggoR14oR15i2245R16i2475R17R38gR19r3R20jR21:4:1aoR14oR15i2252R16i2380R17R38gR19r3R20jR21:10:3oR14oR15i2256R16i2272R17R38gR19r133R20jR21:1:1oR0y16:smoothFixedColorR40ajR41:0:1nhR9i-316R5r104R11r133ggoR14oR15i2281R16i2309R17R38gR19r83R20jR21:5:3jR23:20:1r92oR14oR15i2281R16i2293R17R38gR19r83R20jR21:9:2oR14oR15i2281R16i2291R17R38gR19r31R20jR21:1:1r32gajR34:3:0hgoR14oR15i2297R16i2309R17R38gR19r83R20jR21:9:2oR14oR15i2297R16i2307R17R38gR19jR4:5:2i4r16R20jR21:1:1oR0y10:fixedColorR9i-317R5r104R11r1383ggar1377hggoR14oR15i2327R16i2380R17R38gR19r83R20jR21:5:3r18oR14oR15i2327R16i2339R17R38gR19r83R20jR21:9:2oR14oR15i2327R16i2337R17R38gR19r31R20jR21:1:1r32gar1377hgoR14oR15i2342R16i2380R17R38gR19r83R20jR21:5:3r92oR14oR15i2342R16i2354R17R38gR19r83R20jR21:9:2oR14oR15i2342R16i2352R17R38gR19r1383R20jR21:1:1r1384gar1377hgoR14oR15i2357R16i2380R17R38gR19r83R20jR21:8:2oR14oR15i2357R16i2362R17R38gR19jR4:14:1aoR3r83R12aoR0R48R11r133ghghR20jR21:2:1r792gaoR14oR15i2363R16i2379R17R38gR19r133R20jR21:5:3jR23:7:0oR14oR15i2363R16i2375R17R38gR19r83R20jR21:9:2oR14oR15i2363R16i2373R17R38gR19r31R20jR21:1:1r32gar1377hgoR14oR15i2378R16i2379R17R38gR19r83R20jR21:0:1jR36:3:1zgghggggoR14oR15i2387R16i2433R17R38gR19jR4:5:2i3r16R20jR21:5:3r18oR14oR15i2387R16i2401R17R38gR19r1439R20jR21:9:2oR14oR15i2387R16i2397R17R38gR19r31R20jR21:1:1r32gar88r99jR34:2:0hgoR14oR15i2404R16i2433R17R38gR19jR4:5:2i3r16R20jR21:5:3r92oR14oR15i2404R16i2418R17R38gR19r1450R20jR21:9:2oR14oR15i2404R16i2414R17R38gR19r1383R20jR21:1:1r1384gar88r99r1446hgoR14oR15i2421R16i2433R17R38gR19r83R20jR21:9:2oR14oR15i2421R16i2431R17R38gR19r31R20jR21:1:1r32gar1377hggghgnghgR12ahgoR3r144R5jR6:3:0R7r155R13oR14oR15i2527R16i2709R17R38gR19r3R20jR21:4:1aoR14oR15i2533R16i2574R17R38gR19r3R20jR21:7:2oR0y5:depthR9i-343R5r23R11r83goR14oR15i2545R16i2573R17R38gR19r83R20jR21:8:2oR14oR15i2545R16i2551R17R38gR19r705R20jR21:2:1r706gaoR14oR15i2552R16i2572R17R38gR19r166R20jR21:8:2oR14oR15i2552R16i2564R17R38gR19jR4:14:1aoR3r166R12aoR0R45R11r175gr176hghR20jR21:2:1r179gaoR14oR15i2552R16i2564R17R38gR19r175R20jR21:1:1oR0y12:depthTextureR9i-309R5r104R11r175ggoR14oR15i2569R16i2571R17R38gR19r153R20jR21:1:1oR0R30R9i-327R5r23R11r153gghghggoR14oR15i2579R16i2645R17R38gR19r3R20jR21:7:2oR0y4:tempR9i-344R5r23R11r166goR14oR15i2590R16i2644R17R38gR19r166R20jR21:5:3r92oR14oR15i2590R16i2620R17R38gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i2590R16i2594R17R38gR19r77R20jR21:2:1r78gaoR14oR15i2595R16i2609R17R38gR19r177R20jR21:8:2oR14oR15i2595R16i2605R17R38gR19jR4:14:1aoR3r177R12aoR0R30R11r177ghghR20jR21:2:1jR33:57:0gaoR14oR15i2606R16i2608R17R38gR19r153R20jR21:1:1r1502ghgoR14oR15i2611R16i2616R17R38gR19r83R20jR21:1:1r1478goR14oR15i2618R16i2619R17R38gR19r83R20jR21:0:1jR36:3:1i1ghgoR14oR15i2623R16i2644R17R38gR19jR4:7:0R20jR21:1:1oR0y21:cameraInverseViewProjR9i-307R5r104R11r1545ggggoR14oR15i2650R16i2683R17R38gR19r3R20jR21:7:2oR0y8:originWSR9i-345R5r23R11jR4:5:2i3r16goR14oR15i2665R16i2682R17R38gR19r1553R20jR21:5:3jR23:2:0oR14oR15i2665R16i2673R17R38gR19r1553R20jR21:9:2oR14oR15i2665R16i2669R17R38gR19r166R20jR21:1:1r1509gar88r99r1446hgoR14oR15i2676R16i2682R17R38gR19r83R20jR21:9:2oR14oR15i2676R16i2680R17R38gR19r166R20jR21:1:1r1509gar1377hgggoR14oR15i2688R16i2703R17R38gR19r3R20jR21:12:1oR14oR15i2695R16i2703R17R38gR19r1553R20jR21:1:1r1552gghgR12ar1502hghy4:varsar46r103r22r32r40r1546r184r1498r276r636r592r315r307r1353r1364r1384r134oR0y9:hasNormalR40ajR41:0:1nhR9i-319R5r104R11r133gr248r685r724r820r5r58r121r155hg";
De.SRC="oy4:namey19:h3d.shader.ColorAddy4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:1:0y3:refoR0y8:fragmenty2:idi-455R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini164y3:maxi199y4:filey109:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FColorAdd.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i170R16i193R17R18gR19jR4:5:2i3jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:20:1jR23:0:0oR14oR15i170R16i184R17R18gR19r17R20jR21:9:2oR14oR15i170R16i180R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y10:pixelColorR9i-453R5jR10:4:0R11r24ggajy14:hxsl.Component:0:0jR25:1:0jR25:2:0hgoR14oR15i188R16i193R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y5:colorR9i-454R5jR10:2:0R11r35ggghgR12ahghy4:varsar25r36r5hg";
xd.SRC="oy4:namey19:h3d.shader.ColorKeyy4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:1:0y3:refoR0y8:fragmenty2:idi-458R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini167y3:maxi260y4:filey109:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FColorKey.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i173R16i209R17R18gR19r3R20jR21:7:2oR0y5:cdiffR9i-459R5jR10:4:0R11jR4:5:2i4jy12:hxsl.VecType:1:0goR14oR15i185R16i208R17R18gR19r19R20jR21:5:3jy16:haxe.macro.Binop:3:0oR14oR15i185R16i197R17R18gR19jR4:5:2i4r18R20jR21:1:1oR0y12:textureColorR9i-457R5r17R11r25ggoR14oR15i200R16i208R17R18gR19jR4:5:2i4r18R20jR21:1:1oR0y8:colorKeyR9i-456R5jR10:2:0R11r30ggggoR14oR15i214R16i254R17R18gR19r3R20jR21:10:3oR14oR15i218R16i244R17R18gR19jR4:2:0R20jR21:5:3jR24:9:0oR14oR15i218R16i234R17R18gR19jR4:3:0R20jR21:8:2oR14oR15i218R16i223R17R18gR19jR4:14:1aoR3r44R12aoR0y1:_R11r19goR0y1:bR11jR4:5:2i4r18ghghR20jR21:2:1jy12:hxsl.TGlobal:29:0gaoR14oR15i218R16i223R17R18gR19r19R20jR21:1:1r16goR14oR15i228R16i233R17R18gR19r19R20jR21:1:1r16ghgoR14oR15i237R16i244R17R18gR19r44R20jR21:0:1jy10:hxsl.Const:3:1d1e-05ggoR14oR15i247R16i254R17R18gR19r3R20jR21:11:0gnghgR12ahghy4:varsar31r26r5hg";
Ee.SRC="oy4:namey22:h3d.shader.ColorMatrixy4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:1:0y3:refoR0y8:fragmenty2:idi-462R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini168y3:maxi263y4:filey112:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FColorMatrix.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i174R16i257R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i174R16i184R17R18gR19r17R20jR21:1:1oR0y10:pixelColorR9i-460R5jR10:4:0R11r17ggoR14oR15i187R16i257R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i187R16i191R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i193R16i231R17R18gR19jR4:5:2i3r16R20jR21:9:2oR14oR15i193R16i227R17R18gR19jR4:5:2i4r16R20jR21:3:1oR14oR15i194R16i226R17R18gR19r39R20jR21:5:3jR23:1:0oR14oR15i194R16i217R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i194R16i198R17R18gR19r30R20jR21:2:1r31gaoR14oR15i199R16i213R17R18gR19jR4:5:2i3r16R20jR21:9:2oR14oR15i199R16i209R17R18gR19r17R20jR21:1:1r21gajy14:hxsl.Component:0:0jR26:1:0jR26:2:0hgoR14oR15i214R16i216R17R18gR19jR4:3:0R20jR21:0:1jy10:hxsl.Const:3:1d1ghgoR14oR15i220R16i226R17R18gR19jR4:7:0R20jR21:1:1oR0y6:matrixR9i-461R5jR10:2:0R11r69ggggar57r58r59hgoR14oR15i233R16i256R17R18gR19r63R20jR21:9:2oR14oR15i233R16i254R17R18gR19r39R20jR21:3:1oR14oR15i234R16i253R17R18gR19r39R20jR21:5:3r42oR14oR15i234R16i244R17R18gR19r17R20jR21:1:1r21goR14oR15i247R16i253R17R18gR19r69R20jR21:1:1r70gggajR26:3:0hghgghgR12ahghy4:varsar21r70r5hg";
Kf.SRC="oy4:namey20:h3d.shader.DirShadowy4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:1:0y3:refoR0y8:fragmenty2:idi-293R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini341y3:maxi634y4:filey110:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FDirShadow.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i347R16i629R17R18gR19r3R20jR21:10:3oR14oR15i351R16i357R17R18gR19jR4:2:0R20jR21:1:1oR0y6:enabley10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-286R5jR10:2:0R11r18ggoR14oR15i360R16i629R17R18gR19r3R20jR21:4:1aoR14oR15i367R16i416R17R18gR19r3R20jR21:7:2oR0y9:shadowPosR9i-294R5jR10:4:0R11jR4:5:2i3jy12:hxsl.VecType:1:0goR14oR15i383R16i415R17R18gR19r32R20jR21:5:3jy16:haxe.macro.Binop:1:0oR14oR15i383R16i402R17R18gR19jR4:5:2i3r31R20jR21:1:1oR0y19:transformedPositionR9i-291R5r30R11r38ggoR14oR15i405R16i415R17R18gR19jR4:8:0R20jR21:1:1oR0y10:shadowProjR9i-288R5r22R11r43ggggoR14oR15i422R16i474R17R18gR19r3R20jR21:7:2oR0y5:depthR9i-295R5r30R11jR4:3:0goR14oR15i434R16i473R17R18gR19r51R20jR21:8:2oR14oR15i434R16i443R17R18gR19jR4:14:1aoR3r51R12aoR0y1:_R11jR4:17:1i1goR0y2:uvR11jR4:5:2i2r31ghghR20jR21:2:1jy12:hxsl.TGlobal:61:0gaoR14oR15i434R16i443R17R18gR19r60R20jR21:1:1oR0y9:shadowMapR9i-287R5r22R11r60ggoR14oR15i448R16i472R17R18gR19r62R20jR21:8:2oR14oR15i448R16i458R17R18gR19jR4:14:1aoR3r62R12aoR0y9:screenPosR11r62ghghR20jR21:2:1jR33:56:0gaoR14oR15i459R16i471R17R18gR19jR4:5:2i2r31R20jR21:9:2oR14oR15i459R16i468R17R18gR19r32R20jR21:1:1r29gajy14:hxsl.Component:0:0jR36:1:0hghghggoR14oR15i480R16i514R17R18gR19r3R20jR21:7:2oR0y4:zMaxR9i-296R5r30R11r51goR14oR15i491R16i513R17R18gR19r51R20jR21:8:2oR14oR15i491R16i502R17R18gR19jR4:14:1aoR3r51R12aoR0R31R11r51ghghR20jR21:2:1jR33:51:0gaoR14oR15i491R16i502R17R18gR19r51R20jR21:9:2oR14oR15i491R16i500R17R18gR19r32R20jR21:1:1r29gajR36:2:0hghggoR14oR15i520R16i570R17R18gR19r3R20jR21:7:2oR0y5:deltaR9i-297R5r30R11r51goR14oR15i532R16i569R17R18gR19r51R20jR21:5:3jR27:3:0oR14oR15i532R16i562R17R18gR19r51R20jR21:8:2oR14oR15i532R16i552R17R18gR19jR4:14:1aoR3r51R12aoR0R31R11r51goR0y1:bR11r51ghghR20jR21:2:1jR33:21:0gaoR14oR15i532R16i552R17R18gR19r51R20jR21:3:1oR14oR15i533R16i551R17R18gR19r51R20jR21:5:3jR27:0:0oR14oR15i533R16i538R17R18gR19r51R20jR21:1:1r50goR14oR15i541R16i551R17R18gR19r51R20jR21:1:1oR0y10:shadowBiasR9i-290R5r22R11r51ggggoR14oR15i557R16i561R17R18gR19r51R20jR21:1:1r98ghgoR14oR15i565R16i569R17R18gR19r51R20jR21:1:1r98gggoR14oR15i576R16i622R17R18gR19r51R20jR21:5:3jR27:4:0oR14oR15i576R16i582R17R18gR19r51R20jR21:1:1oR0y6:shadowR9i-292R5r30R11r51ggoR14oR15i585R16i622R17R18gR19r51R20jR21:8:2oR14oR15i585R16i611R17R18gR19jR4:14:1aoR3r51R12aoR0R31R11r51ghghR20jR21:2:1r108gaoR14oR15i585R16i611R17R18gR19r51R20jR21:8:2oR14oR15i585R16i588R17R18gR19jR4:14:1aoR3r51R12aoR0y5:valueR11r51ghghR20jR21:2:1jR33:9:0gaoR14oR15i590R16i609R17R18gR19r51R20jR21:5:3r35oR14oR15i590R16i601R17R18gR19r51R20jR21:1:1oR0y11:shadowPowerR9i-289R5r22R11r51ggoR14oR15i604R16i609R17R18gR19r51R20jR21:1:1r123gghghgghgnghgR12ahghy4:varsar19r69r44r197r150r39r168r5hg";
Nf.SRC="oy4:namey21:h3d.shader.LineShadery4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-179R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini648y3:maxi958y4:filey111:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FLineShader.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i654R16i953R17R18gR19r3R20jR21:4:1aoR14oR15i661R16i710R17R18gR19r3R20jR21:7:2oR0y3:dirR9i-181R5jR10:4:0R11jR4:5:2i3jy12:hxsl.VecType:1:0goR14oR15i671R16i709R17R18gR19r22R20jR21:5:3jy16:haxe.macro.Binop:1:0oR14oR15i671R16i683R17R18gR19jR4:5:2i3r21R20jR21:1:1oR0y6:normalR9i-169y6:parentoR0y5:inputR9i-167R5jR10:1:0R11jR4:13:1aoR0y8:positionR9i-168R26r30R5r31R11jR4:5:2i3r21gr29oR0y2:uvR9i-170R26r30R5r31R11jR4:5:2i2r21ghgR5r31R11r28ggoR14oR15i686R16i709R17R18gR19jR4:6:0R20jR21:8:2oR14oR15i686R16i702R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:48:0gaoR14oR15i686R16i702R17R18gR19jR4:7:0R20jR21:1:1oR0y9:modelViewy10:qualifiersajy17:hxsl.VarQualifier:3:0hR9i-166R26oR0y6:globalR9i-164R5jR10:0:0R11jR4:13:1aoR0y9:pixelSizeR9i-165R26r55R5r56R11jR4:5:2i2r21gr52hgR5r56R11r51gghgggoR14oR15i730R16i783R17R18gR19jR4:5:2i4r21R20jR21:5:3jR24:4:0oR14oR15i730R16i734R17R18gR19r67R20jR21:1:1oR0y4:pdirR9i-178R5r20R11r67ggoR14oR15i737R16i783R17R18gR19jR4:5:2i4r21R20jR21:5:3r25oR14oR15i737R16i769R17R18gR19jR4:5:2i4r21R20jR21:8:2oR14oR15i737R16i741R17R18gR19jR4:14:1ahR20jR21:2:1jR30:40:0gaoR14oR15i742R16i765R17R18gR19r22R20jR21:5:3r25oR14oR15i742R16i745R17R18gR19r22R20jR21:1:1r19goR14oR15i748R16i765R17R18gR19r41R20jR21:8:2oR14oR15i748R16i752R17R18gR19jR4:14:1ahR20jR21:2:1r46gaoR14oR15i753R16i764R17R18gR19r51R20jR21:1:1oR0y4:viewR9i-161R26oR0y6:cameraR9i-160R5r56R11jR4:13:1ar101oR0y4:projR9i-162R26r102R5r56R11r51goR0y8:viewProjR9i-163R26r102R5r56R11r51ghgR5r56R11r51gghggoR14oR15i767R16i768R17R18gR19jR4:3:0R20jR21:0:1jy10:hxsl.Const:3:1i1ghgoR14oR15i772R16i783R17R18gR19r51R20jR21:1:1r104gggoR14oR15i790R16i844R17R18gR19jR4:5:2i2r21R20jR21:5:3jR24:20:1r25oR14oR15i790R16i797R17R18gR19r123R20jR21:9:2oR14oR15i790R16i794R17R18gR19r67R20jR21:1:1r71gajy14:hxsl.Component:0:0jR42:1:0hgoR14oR15i801R16i844R17R18gR19r112R20jR21:5:3jR24:2:0oR14oR15i801R16i802R17R18gR19r112R20jR21:0:1jR41:3:1i1goR14oR15i805R16i844R17R18gR19r112R20jR21:8:2oR14oR15i805R16i809R17R18gR19jR4:14:1aoR3r112R12aoR0y5:valueR11r112ghghR20jR21:2:1jR30:13:0gaoR14oR15i810R16i843R17R18gR19r112R20jR21:5:3jR24:0:0oR14oR15i810R16i825R17R18gR19r112R20jR21:5:3r25oR14oR15i810R16i816R17R18gR19r112R20jR21:9:2oR14oR15i810R16i814R17R18gR19r67R20jR21:1:1r71gar131hgoR14oR15i819R16i825R17R18gR19r112R20jR21:9:2oR14oR15i819R16i823R17R18gR19r67R20jR21:1:1r71gar131hggoR14oR15i828R16i843R17R18gR19r112R20jR21:5:3r25oR14oR15i828R16i834R17R18gR19r112R20jR21:9:2oR14oR15i828R16i832R17R18gR19r67R20jR21:1:1r71gar132hgoR14oR15i837R16i843R17R18gR19r112R20jR21:9:2oR14oR15i837R16i841R17R18gR19r67R20jR21:1:1r71gar132hggghgggoR14oR15i851R16i904R17R18gR19jR4:5:2i3r21R20jR21:5:3jR24:20:1r155oR14oR15i851R16i870R17R18gR19r196R20jR21:1:1oR0y19:transformedPositionR9i-174R5r20R11r196ggoR14oR15i874R16i904R17R18gR19r22R20jR21:5:3r25oR14oR15i874R16i890R17R18gR19r22R20jR21:5:3r25oR14oR15i874R16i877R17R18gR19r22R20jR21:1:1r19goR14oR15i880R16i890R17R18gR19r112R20jR21:9:2oR14oR15i880R16i888R17R18gR19r36R20jR21:1:1r35gar131hggoR14oR15i893R16i904R17R18gR19r112R20jR21:1:1oR0y11:lengthScaleR9i-176R5jR10:2:0R11r112ggggoR14oR15i911R16i946R17R18gR19jR4:5:2i3r21R20jR21:5:3r68oR14oR15i911R16i928R17R18gR19r226R20jR21:1:1oR0y17:transformedNormalR9i-173R5r20R11r226ggoR14oR15i931R16i946R17R18gR19r22R20jR21:8:2oR14oR15i931R16i934R17R18gR19jR4:14:1aoR3r22R12aoR0y1:_R11r22ghghR20jR21:2:1jR30:31:0gaoR14oR15i931R16i934R17R18gR19r22R20jR21:1:1r19ghgghghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-180R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i982R16i1110R17R18gR19r3R20jR21:4:1aoR14oR15i988R16i1104R17R18gR19jR4:5:2i2r21R20jR21:5:3jR24:20:1r155oR14oR15i988R16i1008R17R18gR19r263R20jR21:9:2oR14oR15i988R16i1005R17R18gR19jR4:5:2i4r21R20jR21:1:1oR0y17:projectedPositionR9i-175R5r20R11r269ggar131r132hgoR14oR15i1012R16i1104R17R18gR19jR4:5:2i2r21R20jR21:5:3r25oR14oR15i1012R16i1096R17R18gR19r276R20jR21:5:3r25oR14oR15i1012R16i1077R17R18gR19jR4:5:2i2r21R20jR21:5:3r25oR14oR15i1012R16i1055R17R18gR19r281R20jR21:5:3r25oR14oR15i1012R16i1034R17R18gR19r281R20jR21:3:1oR14oR15i1013R16i1033R17R18gR19r281R20jR21:5:3r25oR14oR15i1013R16i1020R17R18gR19jR4:5:2i2r21R20jR21:9:2oR14oR15i1013R16i1017R17R18gR19r67R20jR21:1:1r71gar132r131hgoR14oR15i1023R16i1033R17R18gR19jR4:5:2i2r21R20jR21:8:2oR14oR15i1023R16i1027R17R18gR19jR4:14:1ahR20jR21:2:1jR30:38:0gaoR14oR15i1028R16i1029R17R18gR19r112R20jR21:0:1jR41:3:1i1goR14oR15i1030R16i1032R17R18gR19r112R20jR21:0:1jR41:3:1i-1ghgggoR14oR15i1037R16i1055R17R18gR19r112R20jR21:3:1oR14oR15i1038R16i1054R17R18gR19r112R20jR21:5:3jR24:3:0oR14oR15i1038R16i1048R17R18gR19r112R20jR21:9:2oR14oR15i1038R16i1046R17R18gR19r36R20jR21:1:1r35gar132hgoR14oR15i1051R16i1054R17R18gR19r112R20jR21:0:1jR41:3:1d0.5ggggoR14oR15i1058R16i1077R17R18gR19r112R20jR21:9:2oR14oR15i1058R16i1075R17R18gR19r269R20jR21:1:1r270gajR42:2:0hggoR14oR15i1080R16i1096R17R18gR19r59R20jR21:1:1r58ggoR14oR15i1099R16i1104R17R18gR19r112R20jR21:1:1oR0y5:widthR9i-177R5r220R11r112gggghgR12ahghy4:varsar102r55r30oR0y6:outputR9i-171R5r20R11jR4:13:1aoR0R28R9i-172R26r358R5r20R11jR4:5:2i4r21ghgr229r200r270r219r351r71r5r253hg";
Jf.SRC="oy4:namey23:h3d.shader.MinMaxShadery4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-391R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini330y3:maxi396y4:filey113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FScreenShader.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i336R16i361R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i336R16i348R17R18gR19r17R20jR21:1:1oR0y5:colorR9i-385y6:parentoR0y6:outputR9i-383R5jR10:4:0R11jR4:13:1aoR0y8:positionR9i-384R25r22R5r23R11jR4:5:2i4r16gr21hgR5r23R11r17ggoR14oR15i351R16i361R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y10:pixelColorR9i-386R5r23R11r31gggoR14oR15i367R16i390R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i367R16i379R17R18gR19r37R20jR21:1:1oR0y12:calculatedUVR9i-387R5r23R11r37ggoR14oR15i382R16i390R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y2:uvR9i-381R25oR0y5:inputR9i-379R5jR10:1:0R11jR4:13:1aoR0R27R9i-380R25r46R5r47R11jR4:5:2i2r16gr45hgR5r47R11r44ggghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-392R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i420R16i504R17R18gR19r3R20jR21:4:1aoR14oR15i426R16i498R17R18gR19r26R20jR21:5:3r18oR14oR15i426R16i441R17R18gR19r26R20jR21:1:1r25goR14oR15i444R16i498R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i444R16i448R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i449R16i465R17R18gR19jR4:3:0R20jR21:9:2oR14oR15i449R16i463R17R18gR19r50R20jR21:1:1r49gajy14:hxsl.Component:0:0hgoR14oR15i467R16i491R17R18gR19r83R20jR21:5:3jR23:1:0oR14oR15i467R16i483R17R18gR19r83R20jR21:9:2oR14oR15i467R16i481R17R18gR19r50R20jR21:1:1r49gajR34:1:0hgoR14oR15i486R16i491R17R18gR19r83R20jR21:1:1oR0y5:flipYR9i-382R5jR10:2:0R11r83gggoR14oR15i493R16i494R17R18gR19r83R20jR21:0:1jy10:hxsl.Const:3:1zgoR14oR15i496R16i497R17R18gR19r83R20jR21:0:1jR36:3:1i1ghgghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-393R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i197R16i317R17y113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FMinMaxShader.hxgR19r3R20jR21:4:1aoR14oR15i202R16i233R17R38gR19r3R20jR21:7:2oR0y1:aR9i-394R5r23R11jR4:5:2i4r16goR14oR15i210R16i232R17R38gR19r132R20jR21:8:2oR14oR15i210R16i214R17R38gR19jR4:14:1aoR3r132R12aoR0y1:_R11jR4:10:0goR0R30R11jR4:5:2i2r16ghghR20jR21:2:1jR33:33:0gaoR14oR15i210R16i214R17R38gR19r141R20jR21:1:1oR0y4:texAR9i-388R5r104R11r141ggoR14oR15i219R16i231R17R38gR19r37R20jR21:1:1r40ghggoR14oR15i237R16i268R17R38gR19r3R20jR21:7:2oR0y1:bR9i-395R5r23R11r132goR14oR15i245R16i267R17R38gR19r132R20jR21:8:2oR14oR15i245R16i249R17R38gR19jR4:14:1aoR3r132R12aoR0R40R11r141gr142hghR20jR21:2:1r145gaoR14oR15i245R16i249R17R38gR19r141R20jR21:1:1oR0y4:texBR9i-389R5r104R11r141ggoR14oR15i254R16i266R17R38gR19r37R20jR21:1:1r40ghggoR14oR15i272R16i312R17R38gR19r31R20jR21:5:3r18oR14oR15i272R16i282R17R38gR19r31R20jR21:1:1r32goR14oR15i285R16i312R17R38gR19r132R20jR21:10:3oR14oR15i285R16i290R17R38gR19jR4:2:0R20jR21:1:1oR0y5:isMaxy10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-390R5r104R11r189ggoR14oR15i293R16i301R17R38gR19r132R20jR21:8:2oR14oR15i293R16i296R17R38gR19jR4:14:1aoR3r132R12aoR0R39R11r132goR0R42R11r132ghghR20jR21:2:1jR33:22:0gaoR14oR15i297R16i298R17R38gR19r132R20jR21:1:1r131goR14oR15i299R16i300R17R38gR19r132R20jR21:1:1r159ghgoR14oR15i304R16i312R17R38gR19r132R20jR21:8:2oR14oR15i304R16i307R17R38gR19jR4:14:1ar199hR20jR21:2:1jR33:21:0gaoR14oR15i308R16i309R17R38gR19r132R20jR21:1:1r131goR14oR15i310R16i311R17R38gR19r132R20jR21:1:1r159ghggghgR12ahghy4:varsar46r103r22r32r40r150r173r190r5r58r121hg";
Mg.SRC="oy4:namey27:h3d.shader.CubeMinMaxShadery4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y8:__init__y2:idi-372R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini330y3:maxi396y4:filey113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FScreenShader.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i336R16i361R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i336R16i348R17R18gR19r17R20jR21:1:1oR0y5:colorR9i-365y6:parentoR0y6:outputR9i-363R5jR10:4:0R11jR4:13:1aoR0y8:positionR9i-364R25r22R5r23R11jR4:5:2i4r16gr21hgR5r23R11r17ggoR14oR15i351R16i361R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y10:pixelColorR9i-366R5r23R11r31gggoR14oR15i367R16i390R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i367R16i379R17R18gR19r37R20jR21:1:1oR0y12:calculatedUVR9i-367R5r23R11r37ggoR14oR15i382R16i390R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y2:uvR9i-361R25oR0y5:inputR9i-359R5jR10:1:0R11jR4:13:1aoR0R27R9i-360R25r46R5r47R11jR4:5:2i2r16gr45hgR5r47R11r44ggghgR12ahgoR3r3R5jR6:0:0R7oR0y6:vertexR9i-373R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i420R16i504R17R18gR19r3R20jR21:4:1aoR14oR15i426R16i498R17R18gR19r26R20jR21:5:3r18oR14oR15i426R16i441R17R18gR19r26R20jR21:1:1r25goR14oR15i444R16i498R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i444R16i448R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i449R16i465R17R18gR19jR4:3:0R20jR21:9:2oR14oR15i449R16i463R17R18gR19r50R20jR21:1:1r49gajy14:hxsl.Component:0:0hgoR14oR15i467R16i491R17R18gR19r83R20jR21:5:3jR23:1:0oR14oR15i467R16i483R17R18gR19r83R20jR21:9:2oR14oR15i467R16i481R17R18gR19r50R20jR21:1:1r49gajR34:1:0hgoR14oR15i486R16i491R17R18gR19r83R20jR21:1:1oR0y5:flipYR9i-362R5jR10:2:0R11r83gggoR14oR15i493R16i494R17R18gR19r83R20jR21:0:1jy10:hxsl.Const:3:1zgoR14oR15i496R16i497R17R18gR19r83R20jR21:0:1jR36:3:1i1ghgghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-374R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i534R16i707R17y113:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FMinMaxShader.hxgR19r3R20jR21:4:1aoR14oR15i539R16i573R17R38gR19r3R20jR21:7:2oR0R30R9i-375R5r23R11r37goR14oR15i548R16i572R17R38gR19r37R20jR21:5:3jR23:3:0oR14oR15i548R16i566R17R38gR19r37R20jR21:5:3r92oR14oR15i548R16i560R17R38gR19r37R20jR21:1:1r40goR14oR15i563R16i566R17R38gR19r83R20jR21:0:1jR36:3:1d2ggoR14oR15i569R16i572R17R38gR19r83R20jR21:0:1jR36:3:1d1gggoR14oR15i577R16i606R17R38gR19r3R20jR21:7:2oR0y3:dirR9i-376R5r23R11jR4:5:2i3r16goR14oR15i587R16i605R17R38gR19r154R20jR21:5:3r92oR14oR15i587R16i599R17R38gR19jR4:5:2i3r16R20jR21:8:2oR14oR15i587R16i591R17R38gR19jR4:14:1ahR20jR21:2:1jR33:39:0gaoR14oR15i592R16i594R17R38gR19r37R20jR21:1:1r131goR14oR15i597R16i598R17R38gR19r83R20jR21:0:1jR36:3:1i1ghgoR14oR15i602R16i605R17R38gR19jR4:6:0R20jR21:1:1oR0y3:matR9i-371R5r104R11r177ggggoR14oR15i610R16i632R17R38gR19r3R20jR21:7:2oR0y1:aR9i-377R5r23R11jR4:5:2i4r16goR14oR15i618R16i631R17R38gR19r185R20jR21:8:2oR14oR15i618R16i622R17R38gR19jR4:14:1aoR3r185R12aoR0y1:_R11jR4:12:0goR0y6:normalR11r154ghghR20jR21:2:1jR33:33:0gaoR14oR15i618R16i622R17R38gR19r194R20jR21:1:1oR0y4:texAR9i-368R5r104R11r194ggoR14oR15i627R16i630R17R38gR19r154R20jR21:1:1r153ghggoR14oR15i636R16i658R17R38gR19r3R20jR21:7:2oR0y1:bR9i-378R5r23R11r185goR14oR15i644R16i657R17R38gR19r185R20jR21:8:2oR14oR15i644R16i648R17R38gR19jR4:14:1aoR3r185R12aoR0R42R11r194gr195hghR20jR21:2:1r197gaoR14oR15i644R16i648R17R38gR19r194R20jR21:1:1oR0y4:texBR9i-369R5r104R11r194ggoR14oR15i653R16i656R17R38gR19r154R20jR21:1:1r153ghggoR14oR15i662R16i702R17R38gR19r31R20jR21:5:3r18oR14oR15i662R16i672R17R38gR19r31R20jR21:1:1r32goR14oR15i675R16i702R17R38gR19r185R20jR21:10:3oR14oR15i675R16i680R17R38gR19jR4:2:0R20jR21:1:1oR0y5:isMaxy10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-370R5r104R11r241ggoR14oR15i683R16i691R17R38gR19r185R20jR21:8:2oR14oR15i683R16i686R17R38gR19jR4:14:1aoR3r185R12aoR0R41R11r185goR0R45R11r185ghghR20jR21:2:1jR33:22:0gaoR14oR15i687R16i688R17R38gR19r185R20jR21:1:1r184goR14oR15i689R16i690R17R38gR19r185R20jR21:1:1r211ghgoR14oR15i694R16i702R17R38gR19r185R20jR21:8:2oR14oR15i694R16i697R17R38gR19jR4:14:1ar251hR20jR21:2:1jR33:21:0gaoR14oR15i698R16i699R17R38gR19r185R20jR21:1:1r184goR14oR15i700R16i701R17R38gR19r185R20jR21:1:1r211ghggghgR12ahghy4:varsar46r103r22r32r40r202r225r242r178r5r58r121hg";
Cf.SRC="oy4:namey20:h3d.shader.NormalMapy4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y14:__init__vertexy2:idi-110R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini588y3:maxi716y4:filey110:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FNormalMap.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i594R16i710R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i594R16i612R17R18gR19r17R20jR21:1:1oR0y18:transformedTangentR9i-109R5jR10:3:0R11r17ggoR14oR15i615R16i710R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i615R16i619R17R18gR19jR4:14:1ahR20jR21:2:1jy12:hxsl.TGlobal:40:0gaoR14oR15i620R16i659R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:1:0oR14oR15i620R16i633R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y7:tangentR9i-104y6:parentoR0y5:inputR9i-102R5jR10:1:0R11jR4:13:1aoR0y6:normalR9i-103R27r42R5r43R11jR4:5:2i3r16gr41hgR5r43R11r40ggoR14oR15i636R16i659R17R18gR19jR4:6:0R20jR21:8:2oR14oR15i636R16i652R17R18gR19jR4:14:1ahR20jR21:2:1jR25:48:0gaoR14oR15i636R16i652R17R18gR19jR4:7:0R20jR21:1:1oR0y9:modelViewy10:qualifiersajy17:hxsl.VarQualifier:3:0hR9i-101R27oR0y6:globalR9i-100R5jR10:0:0R11jR4:13:1ar62hgR5r66R11r61gghggoR14oR15i660R16i709R17R18gR19jR4:3:0R20jR21:10:3oR14oR15i660R16i698R17R18gR19jR4:2:0R20jR21:5:3jR23:7:0oR14oR15i660R16i692R17R18gR19r74R20jR21:8:2oR14oR15i660R16i673R17R18gR19jR4:14:1aoR3r74R12aoR0y1:_R11r40goR0y1:bR11r36ghghR20jR21:2:1jR25:29:0gaoR14oR15i660R16i673R17R18gR19r40R20jR21:1:1r41goR14oR15i678R16i691R17R18gR19r40R20jR21:1:1r41ghgoR14oR15i695R16i698R17R18gR19r74R20jR21:0:1jy10:hxsl.Const:3:1d0.5ggoR14oR15i701R16i703R17R18gR19r74R20jR21:0:1jR36:3:1d1goR14oR15i706R16i709R17R18gR19r74R20jR21:0:1jR36:3:1d-1gghgghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-111R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i742R16i1014R17R18gR19r3R20jR21:4:1aoR14oR15i748R16i774R17R18gR19r3R20jR21:7:2oR0y1:nR9i-112R5jR10:4:0R11jR4:5:2i3r16goR14oR15i756R16i773R17R18gR19r131R20jR21:1:1oR0y17:transformedNormalR9i-108R5r130R11r131gggoR14oR15i779R16i828R17R18gR19r3R20jR21:7:2oR0y2:nfR9i-113R5r130R11r36goR14oR15i788R16i827R17R18gR19r36R20jR21:8:2oR14oR15i788R16i800R17R18gR19jR4:14:1aoR3r36R12aoR0y5:valueR11jR4:5:2i4r16ghghR20jR21:2:1jR25:55:0gaoR14oR15i801R16i826R17R18gR19r148R20jR21:8:2oR14oR15i801R16i808R17R18gR19jR4:14:1aoR3r148R12aoR0R34R11jR4:10:0goR0y2:uvR11jR4:5:2i2r16ghghR20jR21:2:1jR25:33:0gaoR14oR15i801R16i808R17R18gR19r161R20jR21:1:1oR0y7:textureR9i-105R5jR10:2:0R11r161ggoR14oR15i813R16i825R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y12:calculatedUVR9i-106R5r130R11r175gghghggoR14oR15i833R16i879R17R18gR19r3R20jR21:7:2oR0y4:tanXR9i-114R5r130R11r36goR14oR15i844R16i878R17R18gR19r36R20jR21:8:2oR14oR15i844R16i866R17R18gR19jR4:14:1aoR3r36R12aoR0R34R11jR4:5:2i3r16ghghR20jR21:2:1jR25:31:0gaoR14oR15i844R16i866R17R18gR19r192R20jR21:9:2oR14oR15i844R16i862R17R18gR19r17R20jR21:1:1r21gajy14:hxsl.Component:0:0jR46:1:0jR46:2:0hghggoR14oR15i884R16i933R17R18gR19r3R20jR21:7:2oR0y4:tanYR9i-115R5r130R11r36goR14oR15i895R16i932R17R18gR19r36R20jR21:5:3r37oR14oR15i895R16i908R17R18gR19r36R20jR21:8:2oR14oR15i895R16i896R17R18gR19jR4:14:1aoR3r36R12aoR0R34R11r131goR0R35R11r36ghghR20jR21:2:1jR25:30:0gaoR14oR15i895R16i896R17R18gR19r131R20jR21:1:1r129goR14oR15i903R16i907R17R18gR19r36R20jR21:1:1r183ghgoR14oR15i911R16i932R17R18gR19r74R20jR21:6:2jy15:haxe.macro.Unop:3:0oR14oR15i912R16i932R17R18gR19r74R20jR21:9:2oR14oR15i912R16i930R17R18gR19r17R20jR21:1:1r21gajR46:3:0hggggoR14oR15i938R16i1008R17R18gR19r131R20jR21:5:3r18oR14oR15i938R16i955R17R18gR19r131R20jR21:1:1r134goR14oR15i958R16i1008R17R18gR19r36R20jR21:8:2oR14oR15i958R16i996R17R18gR19jR4:14:1aoR3r36R12aoR0R34R11jR4:5:2i3r16ghghR20jR21:2:1r194gaoR14oR15i958R16i996R17R18gR19r261R20jR21:3:1oR14oR15i959R16i995R17R18gR19r261R20jR21:5:3jR23:0:0oR14oR15i959R16i984R17R18gR19jR4:5:2i3r16R20jR21:5:3r269oR14oR15i959R16i970R17R18gR19r36R20jR21:5:3r37oR14oR15i959R16i963R17R18gR19r74R20jR21:9:2oR14oR15i959R16i961R17R18gR19r36R20jR21:1:1r139gar203hgoR14oR15i966R16i970R17R18gR19r36R20jR21:1:1r183ggoR14oR15i973R16i984R17R18gR19r36R20jR21:5:3r37oR14oR15i973R16i977R17R18gR19r74R20jR21:9:2oR14oR15i973R16i975R17R18gR19r36R20jR21:1:1r139gar204hgoR14oR15i980R16i984R17R18gR19r36R20jR21:1:1r211gggoR14oR15i987R16i995R17R18gR19r131R20jR21:5:3r37oR14oR15i987R16i991R17R18gR19r74R20jR21:9:2oR14oR15i987R16i989R17R18gR19r36R20jR21:1:1r139gar205hgoR14oR15i994R16i995R17R18gR19r131R20jR21:1:1r129gggghgghgR12ahghy4:varsaoR0y6:cameraR9i-97R5r66R11jR4:13:1aoR0y8:positionR9i-98R27r320R5r66R11jR4:5:2i3r16goR0y3:dirR9i-99R27r320R5r22R11jR4:5:2i3r16ghgr65r42r170r176oR0y19:transformedPositionR9i-107R5r130R11jR4:5:2i3r16gr134r21r5r119hg";
Gg.SRC="oy4:namey17:h3d.shader.Shadowy4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:1:0y3:refoR0y8:fragmenty2:idi-197R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini366y3:maxi704y4:filey107:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FShadow.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i372R16i427R17R18gR19r3R20jR21:7:2oR0y9:shadowPosR9i-198R5jR10:4:0R11jR4:5:2i3jy12:hxsl.VecType:1:0goR14oR15i388R16i426R17R18gR19r19R20jR21:5:3jy16:haxe.macro.Binop:1:0oR14oR15i388R16i412R17R18gR19jR4:5:2i3r18R20jR21:1:1oR0y24:pixelTransformedPositionR9i-195R5r17R11r25ggoR14oR15i415R16i426R17R18gR19jR4:8:0R20jR21:1:1oR0y4:projR9i-189y6:parentoR0y6:shadowR9i-187R5jR10:0:0R11jR4:13:1aoR0y3:mapR9i-188R27r32R5r33R11jR4:17:1i1gr31oR0y5:colorR9i-190R27r32R5r33R11jR4:5:2i3r18goR0y5:powerR9i-191R27r32R5r33R11jR4:3:0goR0y4:biasR9i-192R27r32R5r33R11r40ghgR5r33R11r30ggggoR14oR15i432R16i485R17R18gR19r3R20jR21:7:2oR0y5:depthR9i-199R5r17R11r40goR14oR15i444R16i484R17R18gR19r40R20jR21:8:2oR14oR15i444R16i454R17R18gR19jR4:14:1aoR3r40R12aoR0y1:_R11r36goR0y2:uvR11jR4:5:2i2r18ghghR20jR21:2:1jy12:hxsl.TGlobal:61:0gaoR14oR15i444R16i454R17R18gR19r36R20jR21:1:1r35goR14oR15i459R16i483R17R18gR19r58R20jR21:8:2oR14oR15i459R16i469R17R18gR19jR4:14:1aoR3r58R12aoR0y9:screenPosR11r58ghghR20jR21:2:1jR36:56:0gaoR14oR15i470R16i482R17R18gR19jR4:5:2i2r18R20jR21:9:2oR14oR15i470R16i479R17R18gR19r19R20jR21:1:1r16gajy14:hxsl.Component:0:0jR38:1:0hghghggoR14oR15i490R16i524R17R18gR19r3R20jR21:7:2oR0y4:zMaxR9i-200R5r17R11r40goR14oR15i501R16i523R17R18gR19r40R20jR21:8:2oR14oR15i501R16i512R17R18gR19jR4:14:1aoR3r40R12aoR0R34R11r40ghghR20jR21:2:1jR36:51:0gaoR14oR15i501R16i512R17R18gR19r40R20jR21:9:2oR14oR15i501R16i510R17R18gR19r19R20jR21:1:1r16gajR38:2:0hghggoR14oR15i529R16i580R17R18gR19r3R20jR21:7:2oR0y5:deltaR9i-201R5r17R11r40goR14oR15i541R16i579R17R18gR19r40R20jR21:5:3jR24:3:0oR14oR15i541R16i572R17R18gR19r40R20jR21:8:2oR14oR15i541R16i562R17R18gR19jR4:14:1aoR3r40R12aoR0R34R11r40goR0y1:bR11r40ghghR20jR21:2:1jR36:21:0gaoR14oR15i541R16i562R17R18gR19r40R20jR21:3:1oR14oR15i542R16i561R17R18gR19r40R20jR21:5:3jR24:0:0oR14oR15i542R16i547R17R18gR19r40R20jR21:1:1r48goR14oR15i550R16i561R17R18gR19r40R20jR21:1:1r41gggoR14oR15i567R16i571R17R18gR19r40R20jR21:1:1r93ghgoR14oR15i575R16i579R17R18gR19r40R20jR21:1:1r93gggoR14oR15i585R16i637R17R18gR19r3R20jR21:7:2oR0y5:shadeR9i-202R5r17R11r40goR14oR15i597R16i636R17R18gR19r40R20jR21:8:2oR14oR15i597R16i625R17R18gR19jR4:14:1aoR3r40R12aoR0R34R11r40ghghR20jR21:2:1r103gaoR14oR15i597R16i625R17R18gR19r40R20jR21:8:2oR14oR15i597R16i600R17R18gR19jR4:14:1aoR3r40R12aoR0y5:valueR11r40ghghR20jR21:2:1jR36:9:0gaoR14oR15i602R16i622R17R18gR19r40R20jR21:5:3r22oR14oR15i602R16i614R17R18gR19r40R20jR21:1:1r39goR14oR15i617R16i622R17R18gR19r40R20jR21:1:1r118gghghggoR14oR15i642R16i698R17R18gR19jR4:5:2i3r18R20jR21:5:3jR24:20:1r22oR14oR15i642R16i656R17R18gR19r197R20jR21:9:2oR14oR15i642R16i652R17R18gR19jR4:5:2i4r18R20jR21:1:1oR0y10:pixelColorR9i-193R5r17R11r203ggar85r86r112hgoR14oR15i660R16i698R17R18gR19jR4:5:2i3r18R20jR21:5:3r139oR14oR15i660R16i690R17R18gR19r210R20jR21:5:3r22oR14oR15i660R16i671R17R18gR19r40R20jR21:3:1oR14oR15i661R16i670R17R18gR19r40R20jR21:5:3r121oR14oR15i661R16i662R17R18gR19r40R20jR21:0:1jy10:hxsl.Const:3:1i1goR14oR15i665R16i670R17R18gR19r40R20jR21:1:1r159gggoR14oR15i674R16i690R17R18gR19r210R20jR21:9:2oR14oR15i674R16i686R17R18gR19r38R20jR21:1:1r37gar85r86r112hggoR14oR15i693R16i698R17R18gR19r40R20jR21:1:1r159ggghgR12ahghy4:varsar32r204oR0y19:transformedPositionR9i-194R5r17R11jR4:5:2i3r18gr26oR0R22y10:qualifiersajy17:hxsl.VarQualifier:1:0hR9i-196R5jR10:3:0R11jR4:5:2i3r18gr5hg";
rf.SRC="oy4:namey30:h3d.shader.SignedDistanceFieldy4:funsaoy3:retjy9:hxsl.Type:3:0y4:kindjy17:hxsl.FunctionKind:3:0y3:refoR0y6:mediany2:idi-67R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsaoR0y1:rR11r3goR0y1:gR11r3goR0y1:bR11r3ghghgy4:exproy1:poy3:mini625y3:maxi675y4:filey120:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FSignedDistanceField.hxgy1:tjR4:0:0y1:ejy13:hxsl.TExprDef:4:1aoR17oR18i630R19i670R20R21gR22r16R23jR24:12:1oR17oR18i637R19i670R20R21gR22r3R23jR24:8:2oR17oR18i637R19i640R20R21gR22jR4:14:1aoR3r3R12aoR0y1:aR11r3goR0R15R11r3ghghR23jR24:2:1jy12:hxsl.TGlobal:22:0gaoR17oR18i641R19i650R20R21gR22r3R23jR24:8:2oR17oR18i641R19i644R20R21gR22jR4:14:1ar25hR23jR24:2:1jR26:21:0gaoR17oR18i645R19i646R20R21gR22r3R23jR24:1:1oR0R13R9i-64R5jR10:4:0R11r3ggoR17oR18i648R19i649R20R21gR22r3R23jR24:1:1oR0R14R9i-65R5r45R11r3gghgoR17oR18i652R19i669R20R21gR22r3R23jR24:8:2oR17oR18i652R19i655R20R21gR22jR4:14:1ar25hR23jR24:2:1r39gaoR17oR18i656R19i665R20R21gR22r3R23jR24:8:2oR17oR18i656R19i659R20R21gR22jR4:14:1ar25hR23jR24:2:1r30gaoR17oR18i660R19i661R20R21gR22r3R23jR24:1:1r44goR17oR18i663R19i664R20R21gR22r3R23jR24:1:1r49ghgoR17oR18i667R19i668R20R21gR22r3R23jR24:1:1oR0R15R9i-66R5r45R11r3gghghgghgR12ar44r49r77hgoR3r16R5jR6:1:0R7oR0y8:fragmentR9i-68R5r6R11jR4:14:1aoR3r16R12ahghgR16oR17oR18i699R19i1138R20R21gR22r16R23jR24:4:1aoR17oR18i704R19i744R20R21gR22r16R23jR24:7:2oR0y13:textureSampleR9i-69R5r45R11jR4:5:2i4jy12:hxsl.VecType:1:0goR17oR18i731R19i743R20R21gR22jR4:5:2i4r97R23jR24:1:1oR0y12:textureColorR9i-46R5r45R11r101gggoR17oR18i748R19i769R20R21gR22r16R23jR24:7:2oR0y8:distanceR9i-70R5r45R11r3gngoR17oR18i774R19i1018R20R21gR22r3R23jR24:5:3jy16:haxe.macro.Binop:4:0oR17oR18i774R19i782R20R21gR22r3R23jR24:1:1r107goR17oR18i785R19i1018R20R21gR22r3R23jR24:10:3oR17oR18i789R19i801R20R21gR22jR4:2:0R23jR24:5:3jR32:5:0oR17oR18i789R19i796R20R21gR22jR4:1:0R23jR24:1:1oR0y7:channely10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-61R5jR10:2:0R11r123ggoR17oR18i800R19i801R20R21gR22r123R23jR24:0:1jy10:hxsl.Const:2:1zggoR17oR18i803R19i818R20R21gR22r3R23jR24:9:2oR17oR18i803R19i816R20R21gR22r98R23jR24:1:1r96gajy14:hxsl.Component:0:0hgoR17oR18i829R19i1018R20R21gR22r3R23jR24:10:3oR17oR18i833R19i845R20R21gR22r119R23jR24:5:3r120oR17oR18i833R19i840R20R21gR22r123R23jR24:1:1r124goR17oR18i844R19i845R20R21gR22r123R23jR24:0:1jR36:2:1i1ggoR17oR18i847R19i862R20R21gR22r3R23jR24:9:2oR17oR18i847R19i860R20R21gR22r98R23jR24:1:1r96gajR37:1:0hgoR17oR18i873R19i1018R20R21gR22r3R23jR24:10:3oR17oR18i877R19i889R20R21gR22r119R23jR24:5:3r120oR17oR18i877R19i884R20R21gR22r123R23jR24:1:1r124goR17oR18i888R19i889R20R21gR22r123R23jR24:0:1jR36:2:1i2ggoR17oR18i891R19i906R20R21gR22r3R23jR24:9:2oR17oR18i891R19i904R20R21gR22r98R23jR24:1:1r96gajR37:2:0hgoR17oR18i917R19i1018R20R21gR22r3R23jR24:10:3oR17oR18i921R19i933R20R21gR22r119R23jR24:5:3r120oR17oR18i921R19i928R20R21gR22r123R23jR24:1:1r124goR17oR18i932R19i933R20R21gR22r123R23jR24:0:1jR36:2:1i3ggoR17oR18i935R19i950R20R21gR22r3R23jR24:9:2oR17oR18i935R19i948R20R21gR22r98R23jR24:1:1r96gajR37:3:0hgoR17oR18i961R19i1018R20R21gR22r3R23jR24:8:2oR17oR18i961R19i967R20R21gR22r13R23jR24:1:1r5gaoR17oR18i968R19i983R20R21gR22r3R23jR24:9:2oR17oR18i968R19i981R20R21gR22r98R23jR24:1:1r96gar140hgoR17oR18i985R19i1000R20R21gR22r3R23jR24:9:2oR17oR18i985R19i998R20R21gR22r98R23jR24:1:1r96gar160hgoR17oR18i1002R19i1017R20R21gR22r3R23jR24:9:2oR17oR18i1002R19i1015R20R21gR22r98R23jR24:1:1r96gar180hghggggggoR17oR18i1027R19i1133R20R21gR22r101R23jR24:5:3r111oR17oR18i1027R19i1039R20R21gR22r101R23jR24:1:1r102goR17oR18i1042R19i1133R20R21gR22jR4:5:2i4r97R23jR24:8:2oR17oR18i1042R19i1046R20R21gR22jR4:14:1ahR23jR24:2:1jR26:40:0gaoR17oR18i1047R19i1050R20R21gR22r3R23jR24:0:1jR36:3:1d1goR17oR18i1052R19i1055R20R21gR22r3R23jR24:0:1jR36:3:1d1goR17oR18i1057R19i1060R20R21gR22r3R23jR24:0:1jR36:3:1d1goR17oR18i1062R19i1132R20R21gR22r3R23jR24:8:2oR17oR18i1062R19i1072R20R21gR22jR4:14:1aoR3r3R12aoR0y5:edge0R11r3goR0y5:edge1R11r3goR0y1:xR11r3ghghR23jR24:2:1jR26:26:0gaoR17oR18i1073R19i1096R20R21gR22r3R23jR24:5:3jR32:3:0oR17oR18i1073R19i1084R20R21gR22r3R23jR24:1:1oR0y11:alphaCutoffR9i-62R5r127R11r3ggoR17oR18i1087R19i1096R20R21gR22r3R23jR24:1:1oR0y9:smoothingR9i-63R5r127R11r3gggoR17oR18i1098R19i1121R20R21gR22r3R23jR24:5:3jR32:0:0oR17oR18i1098R19i1109R20R21gR22r3R23jR24:1:1r281goR17oR18i1112R19i1121R20R21gR22r3R23jR24:1:1r285ggoR17oR18i1123R19i1131R20R21gR22r3R23jR24:1:1r107ghghgghgR12ahghy4:varsaoR0y5:inputR9i-33R5jR10:1:0R11jR4:13:1aoR0y8:positionR9i-34y6:parentr307R5r308R11jR4:5:2i2r97goR0y2:uvR9i-35R46r307R5r308R11jR4:5:2i2r97goR0y5:colorR9i-36R46r307R5r308R11jR4:5:2i4r97ghgoR0y6:outputR9i-37R5r45R11jR4:13:1aoR0R45R9i-38R46r317R5r45R11jR4:5:2i4r97goR0R48R9i-39R46r317R5r45R11jR4:5:2i4r97ghgoR0y4:timeR9i-40R5jR10:0:0R11r3goR0y14:spritePositionR9i-43R5r45R11jR4:5:2i4r97goR0y16:absolutePositionR9i-44R5r45R11jR4:5:2i4r97goR0y10:pixelColorR9i-45R5r45R11jR4:5:2i4r97gr102oR0y12:calculatedUVR9i-47R5jR10:3:0R11jR4:5:2i2r97goR0y14:outputPositionR9i-60R5r45R11jR4:5:2i4r97gr124r281r285r5r86hg";
Rd.SRC="oy4:namey19:h3d.shader.SkinBasey4:funsahy4:varsaoR0y16:relativePositiony2:idi-182y4:kindjy12:hxsl.VarKind:4:0y4:typejy9:hxsl.Type:5:2i3jy12:hxsl.VecType:1:0goR0y19:transformedPositionR5i-183R6r4R8jR9:5:2i3r5goR0y17:transformedNormalR5i-184R6r4R8jR9:5:2i3r5goR0y8:MaxBonesy10:qualifiersajy17:hxsl.VarQualifier:0:1nhR5i-185R6jR7:2:0R8jR9:1:0goR0y13:bonesMatrixesR14ajR15:8:0hR5i-186R6r14R8jR9:15:2jR9:8:0jy13:hxsl.SizeDecl:1:1r11ghg";Rf.SRC="oy4:namey15:h3d.shader.Skiny4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:0:0y3:refoR0y6:vertexy2:idi-448R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini265y3:maxi799y4:filey105:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FSkin.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i271R16i521R17R18gR19jR4:5:2i3jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i271R16i290R17R18gR19r17R20jR21:1:1oR0y19:transformedPositionR9i-438R5jR10:4:0R11r17ggoR14oR15i298R16i521R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:0:0oR14oR15i298R16i444R17R18gR19jR4:5:2i3r16R20jR21:5:3r27oR14oR15i298R16i367R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:1:0oR14oR15i298R16i349R17R18gR19r33R20jR21:3:1oR14oR15i299R16i348R17R18gR19r33R20jR21:5:3r34oR14oR15i299R16i315R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y16:relativePositionR9i-437R5r22R11r41ggoR14oR15i318R16i348R17R18gR19jR4:8:0R20jR21:16:2oR14oR15i318R16i331R17R18gR19jR4:15:2r46jy13:hxsl.SizeDecl:1:1oR0y8:MaxBonesy10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-440R5jR10:2:0R11jR4:1:0gR20jR21:1:1oR0y13:bonesMatrixesR28ajR29:8:0hR9i-441R5r52R11r55ggoR14oR15i332R16i347R17R18gR19r53R20jR21:9:2oR14oR15i332R16i345R17R18gR19jR4:9:1i4R20jR21:1:1oR0y7:indexesR9i-446y6:parentoR0y5:inputR9i-442R5jR10:1:0R11jR4:13:1aoR0y8:positionR9i-443R32r66R5r67R11jR4:5:2i3r16goR0y6:normalR9i-444R32r66R5r67R11jR4:5:2i3r16goR0y7:weightsR9i-445R32r66R5r67R11jR4:5:2i3r16gr65hgR5r67R11r64ggajy14:hxsl.Component:0:0hggggoR14oR15i352R16i367R17R18gR19jR4:3:0R20jR21:9:2oR14oR15i352R16i365R17R18gR19r74R20jR21:1:1r73gar78hggoR14oR15i375R16i444R17R18gR19r33R20jR21:5:3r34oR14oR15i375R16i426R17R18gR19r33R20jR21:3:1oR14oR15i376R16i425R17R18gR19r33R20jR21:5:3r34oR14oR15i376R16i392R17R18gR19r41R20jR21:1:1r42goR14oR15i395R16i425R17R18gR19r46R20jR21:16:2oR14oR15i395R16i408R17R18gR19r55R20jR21:1:1r56goR14oR15i409R16i424R17R18gR19r53R20jR21:9:2oR14oR15i409R16i422R17R18gR19r64R20jR21:1:1r65gajR37:1:0hggggoR14oR15i429R16i444R17R18gR19r85R20jR21:9:2oR14oR15i429R16i442R17R18gR19r74R20jR21:1:1r73gar112hgggoR14oR15i452R16i521R17R18gR19r33R20jR21:5:3r34oR14oR15i452R16i503R17R18gR19r33R20jR21:3:1oR14oR15i453R16i502R17R18gR19r33R20jR21:5:3r34oR14oR15i453R16i469R17R18gR19r41R20jR21:1:1r42goR14oR15i472R16i502R17R18gR19r46R20jR21:16:2oR14oR15i472R16i485R17R18gR19r55R20jR21:1:1r56goR14oR15i486R16i501R17R18gR19r53R20jR21:9:2oR14oR15i486R16i499R17R18gR19r64R20jR21:1:1r65gajR37:2:0hggggoR14oR15i506R16i521R17R18gR19r85R20jR21:9:2oR14oR15i506R16i519R17R18gR19r74R20jR21:1:1r73gar146hggggoR14oR15i527R16i793R17R18gR19jR4:5:2i3r16R20jR21:5:3r18oR14oR15i527R16i544R17R18gR19r163R20jR21:1:1oR0y17:transformedNormalR9i-439R5r22R11r163ggoR14oR15i547R16i793R17R18gR19r33R20jR21:8:2oR14oR15i547R16i556R17R18gR19jR4:14:1aoR3r33R12aoR0y5:valueR11r33ghghR20jR21:2:1jy12:hxsl.TGlobal:31:0gaoR14oR15i563R16i792R17R18gR19jR4:5:2i3r16R20jR21:5:3r27oR14oR15i563R16i713R17R18gR19jR4:5:2i3r16R20jR21:5:3r27oR14oR15i563R16i634R17R18gR19r33R20jR21:5:3r34oR14oR15i563R16i616R17R18gR19r33R20jR21:3:1oR14oR15i564R16i615R17R18gR19r33R20jR21:5:3r34oR14oR15i564R16i576R17R18gR19r72R20jR21:1:1r71goR14oR15i579R16i615R17R18gR19jR4:6:0R20jR21:8:2oR14oR15i579R16i583R17R18gR19jR4:14:1ahR20jR21:2:1jR40:48:0gaoR14oR15i584R16i614R17R18gR19r46R20jR21:16:2oR14oR15i584R16i597R17R18gR19r55R20jR21:1:1r56goR14oR15i598R16i613R17R18gR19r53R20jR21:9:2oR14oR15i598R16i611R17R18gR19r64R20jR21:1:1r65gar78hgghgggoR14oR15i619R16i634R17R18gR19r85R20jR21:9:2oR14oR15i619R16i632R17R18gR19r74R20jR21:1:1r73gar78hggoR14oR15i642R16i713R17R18gR19r33R20jR21:5:3r34oR14oR15i642R16i695R17R18gR19r33R20jR21:3:1oR14oR15i643R16i694R17R18gR19r33R20jR21:5:3r34oR14oR15i643R16i655R17R18gR19r72R20jR21:1:1r71goR14oR15i658R16i694R17R18gR19r197R20jR21:8:2oR14oR15i658R16i662R17R18gR19r201R20jR21:2:1r202gaoR14oR15i663R16i693R17R18gR19r46R20jR21:16:2oR14oR15i663R16i676R17R18gR19r55R20jR21:1:1r56goR14oR15i677R16i692R17R18gR19r53R20jR21:9:2oR14oR15i677R16i690R17R18gR19r64R20jR21:1:1r65gar112hgghgggoR14oR15i698R16i713R17R18gR19r85R20jR21:9:2oR14oR15i698R16i711R17R18gR19r74R20jR21:1:1r73gar112hgggoR14oR15i721R16i792R17R18gR19r33R20jR21:5:3r34oR14oR15i721R16i774R17R18gR19r33R20jR21:3:1oR14oR15i722R16i773R17R18gR19r33R20jR21:5:3r34oR14oR15i722R16i734R17R18gR19r72R20jR21:1:1r71goR14oR15i737R16i773R17R18gR19r197R20jR21:8:2oR14oR15i737R16i741R17R18gR19r201R20jR21:2:1r202gaoR14oR15i742R16i772R17R18gR19r46R20jR21:16:2oR14oR15i742R16i755R17R18gR19r55R20jR21:1:1r56goR14oR15i756R16i771R17R18gR19r53R20jR21:9:2oR14oR15i756R16i769R17R18gR19r64R20jR21:1:1r65gar146hgghgggoR14oR15i777R16i792R17R18gR19r85R20jR21:9:2oR14oR15i777R16i790R17R18gR19r74R20jR21:1:1r73gar146hggghgghgR12ahghy4:varsar42r21r166r49r56r66oR0y18:transformedTangentR9i-447R5r22R11jR4:5:2i4r16gr5hg";
Qf.SRC="oy4:namey22:h3d.shader.SkinTangenty4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:0:0y3:refoR0y6:vertexy2:idi-436R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini296y3:maxi1151y4:filey112:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FSkinTangent.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i302R16i552R17R18gR19jR4:5:2i3jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i302R16i321R17R18gR19r17R20jR21:1:1oR0y19:transformedPositionR9i-425R5jR10:4:0R11r17ggoR14oR15i329R16i552R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:0:0oR14oR15i329R16i475R17R18gR19jR4:5:2i3r16R20jR21:5:3r27oR14oR15i329R16i398R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:1:0oR14oR15i329R16i380R17R18gR19r33R20jR21:3:1oR14oR15i330R16i379R17R18gR19r33R20jR21:5:3r34oR14oR15i330R16i346R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y16:relativePositionR9i-424R5r22R11r41ggoR14oR15i349R16i379R17R18gR19jR4:8:0R20jR21:16:2oR14oR15i349R16i362R17R18gR19jR4:15:2r46jy13:hxsl.SizeDecl:1:1oR0y8:MaxBonesy10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-427R5jR10:2:0R11jR4:1:0gR20jR21:1:1oR0y13:bonesMatrixesR28ajR29:8:0hR9i-428R5r52R11r55ggoR14oR15i363R16i378R17R18gR19r53R20jR21:9:2oR14oR15i363R16i376R17R18gR19jR4:9:1i4R20jR21:1:1oR0y7:indexesR9i-434y6:parentoR0y5:inputR9i-429R5jR10:1:0R11jR4:13:1aoR0y8:positionR9i-430R32r66R5r67R11jR4:5:2i3r16goR0y6:normalR9i-431R32r66R5r67R11jR4:5:2i3r16goR0y7:tangentR9i-432R32r66R5r67R11jR4:5:2i3r16goR0y7:weightsR9i-433R32r66R5r67R11jR4:5:2i3r16gr65hgR5r67R11r64ggajy14:hxsl.Component:0:0hggggoR14oR15i383R16i398R17R18gR19jR4:3:0R20jR21:9:2oR14oR15i383R16i396R17R18gR19r76R20jR21:1:1r75gar80hggoR14oR15i406R16i475R17R18gR19r33R20jR21:5:3r34oR14oR15i406R16i457R17R18gR19r33R20jR21:3:1oR14oR15i407R16i456R17R18gR19r33R20jR21:5:3r34oR14oR15i407R16i423R17R18gR19r41R20jR21:1:1r42goR14oR15i426R16i456R17R18gR19r46R20jR21:16:2oR14oR15i426R16i439R17R18gR19r55R20jR21:1:1r56goR14oR15i440R16i455R17R18gR19r53R20jR21:9:2oR14oR15i440R16i453R17R18gR19r64R20jR21:1:1r65gajR38:1:0hggggoR14oR15i460R16i475R17R18gR19r87R20jR21:9:2oR14oR15i460R16i473R17R18gR19r76R20jR21:1:1r75gar114hgggoR14oR15i483R16i552R17R18gR19r33R20jR21:5:3r34oR14oR15i483R16i534R17R18gR19r33R20jR21:3:1oR14oR15i484R16i533R17R18gR19r33R20jR21:5:3r34oR14oR15i484R16i500R17R18gR19r41R20jR21:1:1r42goR14oR15i503R16i533R17R18gR19r46R20jR21:16:2oR14oR15i503R16i516R17R18gR19r55R20jR21:1:1r56goR14oR15i517R16i532R17R18gR19r53R20jR21:9:2oR14oR15i517R16i530R17R18gR19r64R20jR21:1:1r65gajR38:2:0hggggoR14oR15i537R16i552R17R18gR19r87R20jR21:9:2oR14oR15i537R16i550R17R18gR19r76R20jR21:1:1r75gar148hggggoR14oR15i558R16i824R17R18gR19jR4:5:2i3r16R20jR21:5:3r18oR14oR15i558R16i575R17R18gR19r165R20jR21:1:1oR0y17:transformedNormalR9i-426R5r22R11r165ggoR14oR15i578R16i824R17R18gR19r33R20jR21:8:2oR14oR15i578R16i587R17R18gR19jR4:14:1aoR3r33R12aoR0y5:valueR11r33ghghR20jR21:2:1jy12:hxsl.TGlobal:31:0gaoR14oR15i594R16i823R17R18gR19jR4:5:2i3r16R20jR21:5:3r27oR14oR15i594R16i744R17R18gR19jR4:5:2i3r16R20jR21:5:3r27oR14oR15i594R16i665R17R18gR19r33R20jR21:5:3r34oR14oR15i594R16i647R17R18gR19r33R20jR21:3:1oR14oR15i595R16i646R17R18gR19r33R20jR21:5:3r34oR14oR15i595R16i607R17R18gR19r72R20jR21:1:1r71goR14oR15i610R16i646R17R18gR19jR4:6:0R20jR21:8:2oR14oR15i610R16i614R17R18gR19jR4:14:1ahR20jR21:2:1jR41:48:0gaoR14oR15i615R16i645R17R18gR19r46R20jR21:16:2oR14oR15i615R16i628R17R18gR19r55R20jR21:1:1r56goR14oR15i629R16i644R17R18gR19r53R20jR21:9:2oR14oR15i629R16i642R17R18gR19r64R20jR21:1:1r65gar80hgghgggoR14oR15i650R16i665R17R18gR19r87R20jR21:9:2oR14oR15i650R16i663R17R18gR19r76R20jR21:1:1r75gar80hggoR14oR15i673R16i744R17R18gR19r33R20jR21:5:3r34oR14oR15i673R16i726R17R18gR19r33R20jR21:3:1oR14oR15i674R16i725R17R18gR19r33R20jR21:5:3r34oR14oR15i674R16i686R17R18gR19r72R20jR21:1:1r71goR14oR15i689R16i725R17R18gR19r199R20jR21:8:2oR14oR15i689R16i693R17R18gR19r203R20jR21:2:1r204gaoR14oR15i694R16i724R17R18gR19r46R20jR21:16:2oR14oR15i694R16i707R17R18gR19r55R20jR21:1:1r56goR14oR15i708R16i723R17R18gR19r53R20jR21:9:2oR14oR15i708R16i721R17R18gR19r64R20jR21:1:1r65gar114hgghgggoR14oR15i729R16i744R17R18gR19r87R20jR21:9:2oR14oR15i729R16i742R17R18gR19r76R20jR21:1:1r75gar114hgggoR14oR15i752R16i823R17R18gR19r33R20jR21:5:3r34oR14oR15i752R16i805R17R18gR19r33R20jR21:3:1oR14oR15i753R16i804R17R18gR19r33R20jR21:5:3r34oR14oR15i753R16i765R17R18gR19r72R20jR21:1:1r71goR14oR15i768R16i804R17R18gR19r199R20jR21:8:2oR14oR15i768R16i772R17R18gR19r203R20jR21:2:1r204gaoR14oR15i773R16i803R17R18gR19r46R20jR21:16:2oR14oR15i773R16i786R17R18gR19r55R20jR21:1:1r56goR14oR15i787R16i802R17R18gR19r53R20jR21:9:2oR14oR15i787R16i800R17R18gR19r64R20jR21:1:1r65gar148hgghgggoR14oR15i808R16i823R17R18gR19r87R20jR21:9:2oR14oR15i808R16i821R17R18gR19r76R20jR21:1:1r75gar148hggghggoR14oR15i830R16i1145R17R18gR19jR4:5:2i4r16R20jR21:5:3r18oR14oR15i830R16i848R17R18gR19r315R20jR21:1:1oR0y18:transformedTangentR9i-435R5r22R11r315ggoR14oR15i851R16i1145R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i851R16i855R17R18gR19jR4:14:1ahR20jR21:2:1jR41:40:0gaoR14oR15i856R16i1122R17R18gR19r33R20jR21:8:2oR14oR15i856R16i865R17R18gR19jR4:14:1ar175hR20jR21:2:1r179gaoR14oR15i872R16i1116R17R18gR19jR4:5:2i3r16R20jR21:5:3r27oR14oR15i872R16i1032R17R18gR19jR4:5:2i3r16R20jR21:5:3r27oR14oR15i872R16i948R17R18gR19r33R20jR21:5:3r34oR14oR15i872R16i930R17R18gR19r33R20jR21:3:1oR14oR15i873R16i929R17R18gR19r33R20jR21:5:3r34oR14oR15i873R16i890R17R18gR19jR4:5:2i3r16R20jR21:9:2oR14oR15i873R16i886R17R18gR19r74R20jR21:1:1r73gar80r114r148hgoR14oR15i893R16i929R17R18gR19r199R20jR21:8:2oR14oR15i893R16i897R17R18gR19r203R20jR21:2:1r204gaoR14oR15i898R16i928R17R18gR19r46R20jR21:16:2oR14oR15i898R16i911R17R18gR19r55R20jR21:1:1r56goR14oR15i912R16i927R17R18gR19r53R20jR21:9:2oR14oR15i912R16i925R17R18gR19r64R20jR21:1:1r65gar80hgghgggoR14oR15i933R16i948R17R18gR19r87R20jR21:9:2oR14oR15i933R16i946R17R18gR19r76R20jR21:1:1r75gar80hggoR14oR15i956R16i1032R17R18gR19r33R20jR21:5:3r34oR14oR15i956R16i1014R17R18gR19r33R20jR21:3:1oR14oR15i957R16i1013R17R18gR19r33R20jR21:5:3r34oR14oR15i957R16i974R17R18gR19jR4:5:2i3r16R20jR21:9:2oR14oR15i957R16i970R17R18gR19r74R20jR21:1:1r73gar80r114r148hgoR14oR15i977R16i1013R17R18gR19r199R20jR21:8:2oR14oR15i977R16i981R17R18gR19r203R20jR21:2:1r204gaoR14oR15i982R16i1012R17R18gR19r46R20jR21:16:2oR14oR15i982R16i995R17R18gR19r55R20jR21:1:1r56goR14oR15i996R16i1011R17R18gR19r53R20jR21:9:2oR14oR15i996R16i1009R17R18gR19r64R20jR21:1:1r65gar114hgghgggoR14oR15i1017R16i1032R17R18gR19r87R20jR21:9:2oR14oR15i1017R16i1030R17R18gR19r76R20jR21:1:1r75gar114hgggoR14oR15i1040R16i1116R17R18gR19r33R20jR21:5:3r34oR14oR15i1040R16i1098R17R18gR19r33R20jR21:3:1oR14oR15i1041R16i1097R17R18gR19r33R20jR21:5:3r34oR14oR15i1041R16i1058R17R18gR19jR4:5:2i3r16R20jR21:9:2oR14oR15i1041R16i1054R17R18gR19r74R20jR21:1:1r73gar80r114r148hgoR14oR15i1061R16i1097R17R18gR19r199R20jR21:8:2oR14oR15i1061R16i1065R17R18gR19r203R20jR21:2:1r204gaoR14oR15i1066R16i1096R17R18gR19r46R20jR21:16:2oR14oR15i1066R16i1079R17R18gR19r55R20jR21:1:1r56goR14oR15i1080R16i1095R17R18gR19r53R20jR21:9:2oR14oR15i1080R16i1093R17R18gR19r64R20jR21:1:1r65gar148hgghgggoR14oR15i1101R16i1116R17R18gR19r87R20jR21:9:2oR14oR15i1101R16i1114R17R18gR19r76R20jR21:1:1r75gar148hggghgoR14oR15i1124R16i1144R17R18gR19r87R20jR21:9:2oR14oR15i1124R16i1142R17R18gR19r315R20jR21:1:1r318gajR38:3:0hghgghgR12ahghy4:varsar42r21r168r49r56r66r318r5hg";
Df.SRC="oy4:namey26:h3d.shader.SpecularTexturey4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:1:0y3:refoR0y8:fragmenty2:idi-83R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini203y3:maxi257y4:filey116:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FSpecularTexture.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i209R16i251R17R18gR19jR4:5:2i3jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:20:1jR23:1:0oR14oR15i209R16i218R17R18gR19r17R20jR21:1:1oR0y9:specColorR9i-82R5jR10:4:0R11r17ggoR14oR15i222R16i251R17R18gR19jR4:5:2i3r16R20jR21:9:2oR14oR15i222R16i247R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i222R16i229R17R18gR19jR4:14:1aoR3r30R12aoR0y1:_R11jR4:10:0goR0y2:uvR11jR4:5:2i2r16ghghR20jR21:2:1jy12:hxsl.TGlobal:33:0gaoR14oR15i222R16i229R17R18gR19r37R20jR21:1:1oR0y7:textureR9i-80R5jR10:2:0R11r37ggoR14oR15i234R16i246R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y12:calculatedUVR9i-81R5r23R11r51gghgajy14:hxsl.Component:0:0jR30:1:0jR30:2:0hgghgR12ahghy4:varsar46r52r22r5hg";
Bf.SRC="oy4:namey18:h3d.shader.Texturey4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:0:0y3:refoR0y6:vertexy2:idi-94R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini425y3:maxi460y4:filey108:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FTexture.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i431R16i454R17R18gR19jR4:5:2i2jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i431R16i443R17R18gR19r17R20jR21:1:1oR0y12:calculatedUVR9i-91R5jR10:4:0R11r17ggoR14oR15i446R16i454R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y2:uvR9i-85y6:parentoR0y5:inputR9i-84R5jR10:1:0R11jR4:13:1ar27hgR5r29R11r26ggghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-95R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i486R16i713R17R18gR19r3R20jR21:4:1aoR14oR15i492R16i526R17R18gR19r3R20jR21:7:2oR0y1:cR9i-96R5r22R11jR4:5:2i4r16goR14oR15i500R16i525R17R18gR19r49R20jR21:8:2oR14oR15i500R16i507R17R18gR19jR4:14:1aoR3r49R12aoR0y1:_R11jR4:10:0goR0R25R11jR4:5:2i2r16ghghR20jR21:2:1jy12:hxsl.TGlobal:33:0gaoR14oR15i500R16i507R17R18gR19r58R20jR21:1:1oR0y7:textureR9i-90R5jR10:2:0R11r58ggoR14oR15i512R16i524R17R18gR19r17R20jR21:1:1r21ghggoR14oR15i531R16i586R17R18gR19r3R20jR21:10:3oR14oR15i535R16i576R17R18gR19jR4:2:0R20jR21:5:3jR23:14:0oR14oR15i535R16i544R17R18gR19r79R20jR21:1:1oR0y9:killAlphay10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-87R5r68R11r79ggoR14oR15i548R16i576R17R18gR19r79R20jR21:5:3jR23:9:0oR14oR15i548R16i572R17R18gR19jR4:3:0R20jR21:5:3jR23:3:0oR14oR15i548R16i551R17R18gR19r92R20jR21:9:2oR14oR15i548R16i549R17R18gR19r49R20jR21:1:1r48gajy14:hxsl.Component:3:0hgoR14oR15i554R16i572R17R18gR19r92R20jR21:1:1oR0y18:killAlphaThresholdR34ajR35:7:2d0d1hR9i-89R5r68R11r92gggoR14oR15i575R16i576R17R18gR19r92R20jR21:0:1jy10:hxsl.Const:3:1zgggoR14oR15i579R16i586R17R18gR19r3R20jR21:11:0gngoR14oR15i592R16i658R17R18gR19r3R20jR21:10:3oR14oR15i596R16i604R17R18gR19r79R20jR21:1:1oR0y8:additiveR34ajR35:0:1nhR9i-86R5r68R11r79ggoR14oR15i612R16i627R17R18gR19jR4:5:2i4r16R20jR21:5:3jR23:20:1jR23:0:0oR14oR15i612R16i622R17R18gR19r129R20jR21:1:1oR0y10:pixelColorR9i-92R5r22R11r129ggoR14oR15i626R16i627R17R18gR19r49R20jR21:1:1r48ggoR14oR15i643R16i658R17R18gR19r129R20jR21:5:3jR23:20:1jR23:1:0oR14oR15i643R16i653R17R18gR19r129R20jR21:1:1r134goR14oR15i657R16i658R17R18gR19r49R20jR21:1:1r48gggoR14oR15i664R16i707R17R18gR19r3R20jR21:10:3oR14oR15i668R16i681R17R18gR19r79R20jR21:1:1oR0y13:specularAlphaR34ajR35:0:1nhR9i-88R5r68R11r79ggoR14oR15i689R16i707R17R18gR19jR4:5:2i3r16R20jR21:5:3jR23:20:1r142oR14oR15i689R16i698R17R18gR19r162R20jR21:1:1oR0y9:specColorR9i-93R5r22R11r162ggoR14oR15i702R16i707R17R18gR19jR4:5:2i3r16R20jR21:9:2oR14oR15i702R16i703R17R18gR19r49R20jR21:1:1r48gar100r100r100hggnghgR12ahghy4:varsar28r123r83r156r104r67r21r134r166r5r38hg";
Bd.SRC="oy4:namey18:h3d.shader.UVDeltay4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:0:0y3:refoR0y6:vertexy2:idi-452R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini191y3:maxi250y4:filey108:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FUVDelta.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i197R16i244R17R18gR19jR4:5:2i2jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i197R16i209R17R18gR19r17R20jR21:1:1oR0y12:calculatedUVR9i-451R5jR10:4:0R11r17ggoR14oR15i212R16i244R17R18gR19jR4:5:2i2r16R20jR21:5:3jR23:0:0oR14oR15i212R16i234R17R18gR19jR4:5:2i2r16R20jR21:5:3jR23:1:0oR14oR15i212R16i224R17R18gR19r17R20jR21:1:1r21goR14oR15i227R16i234R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y7:uvScaleR9i-450R5jR10:2:0R11r37gggoR14oR15i237R16i244R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y7:uvDeltaR9i-449R5r39R11r44gggghgR12ahghy4:varsar45r38r21r5hg";
Of.SRC="oy4:namey27:h3d.shader.VertexColorAlphay4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:1:0y3:refoR0y8:fragmenty2:idi-261R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini227y3:maxi325y4:filey117:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FVertexColorAlpha.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i233R16i319R17R18gR19r3R20jR21:10:3oR14oR15i237R16i245R17R18gR19jR4:2:0R20jR21:1:1oR0y8:additivey10:qualifiersajy17:hxsl.VarQualifier:0:1nhR9i-260R5jR10:2:0R11r18ggoR14oR15i253R16i278R17R18gR19jR4:5:2i4jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:20:1jR26:0:0oR14oR15i253R16i263R17R18gR19r27R20jR21:1:1oR0y10:pixelColorR9i-259R5jR10:4:0R11r27ggoR14oR15i267R16i278R17R18gR19jR4:5:2i4r26R20jR21:1:1oR0y5:colorR9i-258y6:parentoR0y5:inputR9i-257R5jR10:1:0R11jR4:13:1ar38hgR5r40R11r37gggoR14oR15i294R16i319R17R18gR19r27R20jR21:5:3jR26:20:1jR26:1:0oR14oR15i294R16i304R17R18gR19r27R20jR21:1:1r32goR14oR15i308R16i319R17R18gR19r37R20jR21:1:1r38ggghgR12ahghy4:varsar39r32r19r5hg";
yf.SRC="oy4:namey22:h3d.shader.VolumeDecaly4:funsaoy3:retjy9:hxsl.Type:0:0y4:kindjy17:hxsl.FunctionKind:2:0y3:refoR0y14:__init__vertexy2:idi-250R5jy12:hxsl.VarKind:6:0y4:typejR4:14:1aoR3r3y4:argsahghgy4:exproy1:poy3:mini369y3:maxi530y4:filey112:%2Fhome%2Fchris%2Fdata-chris-aspire-5741%2FDocuments%2Fprogramming%2Fheaps-chfoo%2Fh3d%2Fshader%2FVolumeDecal.hxgy1:tr3y1:ejy13:hxsl.TExprDef:4:1aoR14oR15i375R16i441R17R18gR19jR4:5:2i3jy12:hxsl.VecType:1:0R20jR21:5:3jy16:haxe.macro.Binop:4:0oR14oR15i375R16i392R17R18gR19r17R20jR21:1:1oR0y17:transformedNormalR9i-231R5jR10:4:0R11r17ggoR14oR15i395R16i441R17R18gR19jR4:5:2i3r16R20jR21:8:2oR14oR15i395R16i429R17R18gR19jR4:14:1aoR3r26R12aoR0y1:_R11r26ghghR20jR21:2:1jy12:hxsl.TGlobal:31:0gaoR14oR15i395R16i429R17R18gR19r26R20jR21:3:1oR14oR15i396R16i428R17R18gR19r26R20jR21:5:3jR23:1:0oR14oR15i396R16i402R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y6:normalR9i-245R5jR10:2:0R11r44ggoR14oR15i405R16i428R17R18gR19jR4:6:0R20jR21:8:2oR14oR15i405R16i421R17R18gR19jR4:14:1ahR20jR21:2:1jR26:48:0gaoR14oR15i405R16i421R17R18gR19jR4:7:0R20jR21:1:1oR0y9:modelViewy10:qualifiersajy17:hxsl.VarQualifier:3:0hR9i-217y6:parentoR0y6:globalR9i-214R5jR10:0:0R11jR4:13:1aoR0y4:timeR9i-215R31r64R5r65R11jR4:3:0goR0y9:pixelSizeR9i-216R31r64R5r65R11jR4:5:2i2r16gr61oR0y16:modelViewInverseR29ar63hR9i-218R31r64R5r65R11r60ghgR5r65R11r60gghggghggoR14oR15i447R16i524R17R18gR19jR4:5:2i4r16R20jR21:5:3r18oR14oR15i447R16i465R17R18gR19r82R20jR21:1:1oR0y18:transformedTangentR9i-249R5r22R11r82ggoR14oR15i468R16i524R17R18gR19jR4:5:2i4r16R20jR21:8:2oR14oR15i468R16i472R17R18gR19jR4:14:1ahR20jR21:2:1jR26:40:0gaoR14oR15i473R16i520R17R18gR19r26R20jR21:8:2oR14oR15i473R16i508R17R18gR19jR4:14:1aoR3r26R12aoR0R25R11r26ghghR20jR21:2:1r34gaoR14oR15i473R16i508R17R18gR19r26R20jR21:3:1oR14oR15i474R16i507R17R18gR19r26R20jR21:5:3r41oR14oR15i474R16i481R17R18gR19jR4:5:2i3r16R20jR21:1:1oR0y7:tangentR9i-246R5r46R11r114ggoR14oR15i484R16i507R17R18gR19r50R20jR21:8:2oR14oR15i484R16i500R17R18gR19jR4:14:1ahR20jR21:2:1r55gaoR14oR15i484R16i500R17R18gR19r60R20jR21:1:1r61ghggghgoR14oR15i521R16i523R17R18gR19r68R20jR21:0:1jy10:hxsl.Const:3:1d1ghgghgR12ahgoR3r3R5jR6:1:0R7oR0y8:fragmentR9i-251R5r6R11jR4:14:1aoR3r3R12ahghgR13oR14oR15i556R16i1112R17R18gR19r3R20jR21:4:1aoR14oR15i562R16i624R17R18gR19r3R20jR21:7:2oR0y6:matrixR9i-252R5r22R11r60goR14oR15i575R16i623R17R18gR19r60R20jR21:5:3r41oR14oR15i575R16i597R17R18gR19r60R20jR21:1:1oR0y15:inverseViewProjR9i-210R31oR0y6:cameraR9i-203R5r65R11jR4:13:1aoR0y4:viewR9i-204R31r158R5r65R11r60goR0y4:projR9i-205R31r158R5r65R11r60goR0y8:positionR9i-206R31r158R5r65R11jR4:5:2i3r16goR0y8:projFlipR9i-207R31r158R5r65R11r68goR0y8:projDiagR9i-208R31r158R5r65R11jR4:5:2i3r16goR0y8:viewProjR9i-209R31r158R5r65R11r60gr157oR0y5:zNearR9i-211R31r158R5r65R11r68goR0y4:zFarR9i-212R31r158R5r65R11r68goR0y3:dirR9i-213R31r158R5jR10:3:0R11jR4:5:2i3r16ghgR5r65R11r60ggoR14oR15i600R16i623R17R18gR19r60R20jR21:1:1r71gggoR14oR15i629R16i688R17R18gR19r3R20jR21:7:2oR0y9:screenPosR9i-253R5r22R11jR4:5:2i2r16goR14oR15i645R16i687R17R18gR19r183R20jR21:5:3jR23:2:0oR14oR15i645R16i665R17R18gR19r183R20jR21:9:2oR14oR15i645R16i662R17R18gR19jR4:5:2i4r16R20jR21:1:1oR0y17:projectedPositionR9i-232R5r22R11r191ggajy14:hxsl.Component:0:0jR54:1:0hgoR14oR15i668R16i687R17R18gR19r68R20jR21:9:2oR14oR15i668R16i685R17R18gR19r191R20jR21:1:1r192gajR54:3:0hgggoR14oR15i693R16i780R17R18gR19r3R20jR21:7:2oR0y3:ruvR9i-254R5r22R11jR4:5:2i4r16goR14oR15i703R16i779R17R18gR19r211R20jR21:8:2oR14oR15i703R16i707R17R18gR19r93R20jR21:2:1r94gaoR14oR15i714R16i723R17R18gR19r183R20jR21:1:1r182goR14oR15i730R16i765R17R18gR19r68R20jR21:8:2oR14oR15i730R16i738R17R18gR19jR4:14:1aoR3r68R12aoR0R25R11jR4:17:1i1goR0y2:uvR11jR4:5:2i2r16ghghR20jR21:2:1jR26:61:0gaoR14oR15i730R16i738R17R18gR19r229R20jR21:1:1oR0y8:depthMapR9i-243R5r65R11r229ggoR14oR15i743R16i764R17R18gR19r231R20jR21:8:2oR14oR15i743R16i753R17R18gR19jR4:14:1aoR3r231R12aoR0R52R11r231ghghR20jR21:2:1jR26:56:0gaoR14oR15i754R16i763R17R18gR19r183R20jR21:1:1r182ghghgoR14oR15i772R16i773R17R18gR19r68R20jR21:0:1jR38:3:1i1ghggoR14oR15i785R16i809R17R18gR19r3R20jR21:7:2oR0y4:wposR9i-255R5r22R11jR4:5:2i4r16goR14oR15i796R16i808R17R18gR19r266R20jR21:5:3r41oR14oR15i796R16i799R17R18gR19r211R20jR21:1:1r210goR14oR15i802R16i808R17R18gR19r60R20jR21:1:1r152gggoR14oR15i814R16i854R17R18gR19r3R20jR21:7:2oR0y4:pposR9i-256R5r22R11r266goR14oR15i825R16i853R17R18gR19r266R20jR21:5:3r41oR14oR15i825R16i828R17R18gR19r211R20jR21:1:1r210goR14oR15i831R16i853R17R18gR19r60R20jR21:1:1r157gggoR14oR15i859R16i903R17R18gR19jR4:5:2i3r16R20jR21:5:3r18oR14oR15i859R16i883R17R18gR19r292R20jR21:1:1oR0y24:pixelTransformedPositionR9i-230R5r22R11r292ggoR14oR15i886R16i903R17R18gR19jR4:5:2i3r16R20jR21:5:3r186oR14oR15i886R16i894R17R18gR19r299R20jR21:9:2oR14oR15i886R16i890R17R18gR19r266R20jR21:1:1r279gar195r196jR54:2:0hgoR14oR15i897R16i903R17R18gR19r68R20jR21:9:2oR14oR15i897R16i901R17R18gR19r266R20jR21:1:1r279gar204hgggoR14oR15i909R16i950R17R18gR19jR4:5:2i2r16R20jR21:5:3r18oR14oR15i909R16i921R17R18gR19r319R20jR21:1:1oR0y12:calculatedUVR9i-248R5r22R11r319ggoR14oR15i924R16i950R17R18gR19jR4:5:2i2r16R20jR21:5:3r41oR14oR15i924R16i929R17R18gR19jR4:5:2i2r16R20jR21:1:1oR0y5:scaleR9i-244R5r46R11r329ggoR14oR15i932R16i950R17R18gR19jR4:5:2i2r16R20jR21:3:1oR14oR15i933R16i949R17R18gR19r334R20jR21:5:3r186oR14oR15i933R16i940R17R18gR19r334R20jR21:9:2oR14oR15i933R16i937R17R18gR19r266R20jR21:1:1r265gar195r196hgoR14oR15i943R16i949R17R18gR19r68R20jR21:9:2oR14oR15i943R16i947R17R18gR19r266R20jR21:1:1r265gar204hgggggoR14oR15i956R16i992R17R18gR19r3R20jR21:10:3oR14oR15i960R16i970R17R18gR19jR4:2:0R20jR21:1:1oR0y10:isCenteredR29ajR30:0:1nhR9i-247R5r46R11r359ggoR14oR15i973R16i992R17R18gR19r319R20jR21:5:3jR23:20:1jR23:0:0oR14oR15i973R16i985R17R18gR19r319R20jR21:1:1r322goR14oR15i989R16i992R17R18gR19r68R20jR21:0:1jR38:3:1d0.5ggngoR14oR15i998R16i1106R17R18gR19r3R20jR21:10:3oR14oR15i1002R16i1091R17R18gR19r359R20jR21:5:3jR23:9:0oR14oR15i1002R16i1087R17R18gR19r68R20jR21:8:2oR14oR15i1002R16i1005R17R18gR19jR4:14:1aoR3r68R12aoR0y1:aR11r68goR0y1:bR11r68ghghR20jR21:2:1jR26:21:0gaoR14oR15i1006R16i1041R17R18gR19r68R20jR21:8:2oR14oR15i1006R16i1009R17R18gR19jR4:14:1ar387hR20jR21:2:1r392gaoR14oR15i1010R16i1024R17R18gR19r68R20jR21:9:2oR14oR15i1010R16i1022R17R18gR19r319R20jR21:1:1r322gar195hgoR14oR15i1026R16i1040R17R18gR19r68R20jR21:9:2oR14oR15i1026R16i1038R17R18gR19r319R20jR21:1:1r322gar196hghgoR14oR15i1043R16i1086R17R18gR19r68R20jR21:8:2oR14oR15i1043R16i1046R17R18gR19jR4:14:1ar387hR20jR21:2:1r392gaoR14oR15i1047R16i1065R17R18gR19r68R20jR21:5:3jR23:3:0oR14oR15i1047R16i1048R17R18gR19r68R20jR21:0:1jR38:3:1i1goR14oR15i1051R16i1065R17R18gR19r68R20jR21:9:2oR14oR15i1051R16i1063R17R18gR19r319R20jR21:1:1r322gar195hggoR14oR15i1067R16i1085R17R18gR19r68R20jR21:5:3r428oR14oR15i1067R16i1068R17R18gR19r68R20jR21:0:1jR38:3:1i1goR14oR15i1071R16i1085R17R18gR19r68R20jR21:9:2oR14oR15i1071R16i1083R17R18gR19r319R20jR21:1:1r322gar196hgghghgoR14oR15i1090R16i1091R17R18gR19r68R20jR21:0:1jR38:3:1zggoR14oR15i1099R16i1106R17R18gR19r3R20jR21:11:0gnghgR12ahghy4:varsar158r64oR0y5:inputR9i-219R5jR10:1:0R11jR4:13:1aoR0R45R9i-220R31r469R5r470R11jR4:5:2i3r16goR0R27R9i-221R31r469R5r470R11jR4:5:2i3r16ghgoR0y6:outputR9i-222R5r22R11jR4:13:1aoR0R45R9i-223R31r477R5r22R11jR4:5:2i4r16goR0y5:colorR9i-224R31r477R5r22R11jR4:5:2i4r16goR0y5:depthR9i-225R31r477R5r22R11r68goR0R27R9i-226R31r477R5r22R11jR4:5:2i3r16goR0y9:worldDistR9i-227R31r477R5r22R11r68ghgoR0y16:relativePositionR9i-228R5r22R11jR4:5:2i3r16goR0y19:transformedPositionR9i-229R5r22R11jR4:5:2i3r16gr295r21r192oR0y10:pixelColorR9i-233R5r22R11jR4:5:2i4r16goR0R70R9i-234R5r22R11r68goR0y8:screenUVR9i-235R5r22R11jR4:5:2i2r16goR0y9:specPowerR9i-236R5r22R11r68goR0y9:specColorR9i-237R5r22R11jR4:5:2i3r16goR0R71R9i-238R5r22R11r68gr238r330r45r115r360r322r85r5r142hg";
bd.pending=[];bd.threadCount=0;Qb.DEFAULT_RESOLVER=new ci;Qb.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";cd.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";cd.BYTES=N.ofString(cd.CHARS);Ng.helper=new DataView(new ArrayBuffer(8));we.escapes=function(a){a=new ia;null!=L.lt?a.setReserved("lt","<"):a.h.lt="<";null!=L.gt?a.setReserved("gt",">"):a.h.gt=">";null!=L.amp?a.setReserved("amp","&"):a.h.amp="&";null!=L.quot?a.setReserved("quot",'"'):a.h.quot=
'"';null!=L.apos?a.setReserved("apos","'"):a.h.apos="'";return a}(this);mb.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];mb.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];mb.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];mb.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];
mb.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];Pb.ASCII=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";Pb.LATIN1="\u00a1\u00a2\u00a3\u00a4\u00a5\u00a6\u00a7\u00a8\u00a9\u00aa\u00ab\u00ac-\u00ae\u00af\u00b0\u00b1\u00b2\u00b3\u00b4\u00b5\u00b6\u00b7\u00b8\u00b9\u00ba\u00bb\u00bc\u00bd\u00be\u00bf\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d7\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f7\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u0153\u00e6\u0152\u00c6\u20ac";
Pb.CYRILLIC="\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f\u2014";Pb.POLISH="\u0104\u0106\u0118\u0141\u0143\u00d3\u015a\u0179\u017b\u0105\u0107\u0119\u0142\u0144\u00f3\u015b\u017a\u017c";
Pb.TURKISH="\u00c2\u00c7\u011eI\u0130\u00ce\u00d6\u015e\u00dc\u00db\u00e2\u00e7\u011f\u0131\u0130\u00ee\u00f6\u015f\u00fc\u00fb";Pb.JP_KANA="\u3000\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093\u304c\u304e\u3050\u3052\u3054\u3056\u3058\u305a\u305c\u305e\u3060\u3062\u3065\u3067\u3069\u3070\u3073\u3076\u3079\u307c\u3071\u3074\u3077\u307a\u307d\u3083\u3085\u3087\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3\u30ac\u30ae\u30b0\u30b2\u30b4\u30b6\u30b8\u30ba\u30bc\u30be\u30c0\u30c2\u30c5\u30c7\u30c9\u30d0\u30d3\u30d6\u30d9\u30dc\u30d1\u30d4\u30d7\u30da\u30dd\u30f4\u30e3\u3047\u3063\u30c3\u30e5\u30e7\u30a1\u30a3\u30a5\u30a7\u30a9\u30fb\u30fc\u300c\u300d\u3001\u3002\u300e\u300f\u201c\u201d\uff01\uff1a\uff1f\uff05\uff06\uff08\uff09\uff0d\uff10\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19";
Pb.UNICODE_SPECIALS="\ufffd\u25a1";Pb.DEFAULT_CHARS=Pb.ASCII+Pb.LATIN1;w.BACKSPACE=8;w.TAB=9;w.ENTER=13;w.SHIFT=16;w.CTRL=17;w.ALT=18;w.ESCAPE=27;w.SPACE=32;w.PGUP=33;w.PGDOWN=34;w.END=35;w.HOME=36;w.LEFT=37;w.UP=38;w.RIGHT=39;w.DOWN=40;w.INSERT=45;w.DELETE=46;w.QWERTY_EQUALS=187;w.QWERTY_MINUS=189;w.QWERTY_TILDE=192;w.QWERTY_BRACKET_LEFT=219;w.QWERTY_BRACKET_RIGHT=221;w.QWERTY_SEMICOLON=186;w.QWERTY_QUOTE=222;w.QWERTY_BACKSLASH=220;w.QWERTY_COMMA=188;w.QWERTY_PERIOD=190;w.QWERTY_SLASH=191;w.INTL_BACKSLASH=
226;w.LEFT_WINDOW_KEY=91;w.RIGHT_WINDOW_KEY=92;w.CONTEXT_MENU=93;w.PAUSE_BREAK=19;w.CAPS_LOCK=20;w.NUM_LOCK=144;w.SCROLL_LOCK=145;w.NUMBER_0=48;w.NUMBER_1=49;w.NUMBER_2=50;w.NUMBER_3=51;w.NUMBER_4=52;w.NUMBER_5=53;w.NUMBER_6=54;w.NUMBER_7=55;w.NUMBER_8=56;w.NUMBER_9=57;w.NUMPAD_0=96;w.NUMPAD_1=97;w.NUMPAD_2=98;w.NUMPAD_3=99;w.NUMPAD_4=100;w.NUMPAD_5=101;w.NUMPAD_6=102;w.NUMPAD_7=103;w.NUMPAD_8=104;w.NUMPAD_9=105;w.A=65;w.B=66;w.C=67;w.D=68;w.E=69;w.F=70;w.G=71;w.H=72;w.I=73;w.J=74;w.K=75;w.L=76;w.M=
77;w.N=78;w.O=79;w.P=80;w.Q=81;w.R=82;w.S=83;w.T=84;w.U=85;w.V=86;w.W=87;w.X=88;w.Y=89;w.Z=90;w.F1=112;w.F2=113;w.F3=114;w.F4=115;w.F5=116;w.F6=117;w.F7=118;w.F8=119;w.F9=120;w.F10=121;w.F11=122;w.F12=123;w.F13=124;w.F14=125;w.F15=126;w.F16=127;w.F17=128;w.F18=129;w.F19=130;w.F20=131;w.F21=132;w.F22=133;w.F23=134;w.F24=135;w.NUMPAD_MULT=106;w.NUMPAD_ADD=107;w.NUMPAD_ENTER=108;w.NUMPAD_SUB=109;w.NUMPAD_DOT=110;w.NUMPAD_DIV=111;w.MOUSE_LEFT=0;w.MOUSE_RIGHT=1;w.MOUSE_MIDDLE=2;w.MOUSE_BACK=3;w.MOUSE_FORWARD=
4;w.MOUSE_WHEEL_UP=5;w.MOUSE_WHEEL_DOWN=6;w.LOC_LEFT=256;w.LOC_RIGHT=512;w.LSHIFT=272;w.RSHIFT=528;w.LCTRL=273;w.RCTRL=529;w.LALT=274;w.RALT=530;w.initDone=!1;w.keyPressed=[];w.ALLOW_KEY_REPEAT=!1;I.PI=3.141592653589793;I.EPSILON=1E-10;Wf.R=0;Wf.G=1;Wf.B=2;Wf.A=3;Za.S3TC_SIZES=[0,-1,1,1,-1,1,1,1];da.wantedFPS=60;da.maxDeltaTime=0.5;da.smoothFactor=0.95;da.lastTimeStamp=Date.now()/1E3;da.elapsedTime=0;da.frameCount=0;da.dt=1/da.wantedFPS;da.currentDT=1/da.wantedFPS;X.setCursor=X.setNativeCursor;X.loopInit=
!1;Sc.DFloat=1;Sc.DVec2=2;Sc.DVec3=3;Sc.DVec4=4;Sc.DBytes4=9;Qg.QTMP=new Ad;ji.CURRENT_VERSION=2;Yf.BLEND=Ra.__empty_constructs__.slice();Yf.CULLING=Od.__empty_constructs__.slice();Eb.registeredElements=new ia;Eb.registeredExtensions=new ia;Eb._=Eb.register("prefab",Eb,"prefab");rc.LIVE_UPDATE=!1;We.Jpg=0;We.Png=1;We.Gif=2;We.Tga=3;We.Dds=4;gc.ALLOW_NPOT=!0;gc.DEFAULT_FILTER=le.Linear;gc.DEFAULT_ASYNC=!1;gc.ENABLE_AUTO_WATCH=!0;ra.BLOCKSIZE=64;ra.W1=2841;ra.W2=2676;ra.W3=2408;ra.W5=1609;ra.W6=1108;
ra.W7=565;ra.CF4A=-9;ra.CF4B=111;ra.CF4C=29;ra.CF4D=-3;ra.CF3A=28;ra.CF3B=109;ra.CF3C=-9;ra.CF3X=104;ra.CF3Y=27;ra.CF3Z=-3;ra.CF2A=139;ra.CF2B=-11;rd.ENABLE_AUTO_WATCH=!0;Zf.ID=0;Vg.ID=0;za.STREAM_DURATION=5;za.STREAM_BUFFER_SAMPLE_COUNT=44100;za.BUFFER_QUEUE_LENGTH=2;za.MAX_SOURCES=16;za.SOUND_BUFFER_CACHE_SIZE=256;za.BUFFER_STREAM_SPLIT=16;Z.pool=[];Z.bufferPool=[];Wg.FADE_START=10;bc.STOP_DELAY=200;bc.CHANNEL_BUFSIZE=8192;bc.ID=0;bc.all=new oa;Fc.ID=0;Fc.all=new oa;y.NATIVE_FREQ=(null==Z.getContext()?
44100:Z.getContext().sampleRate)|0;y.FORMAT_MONOF32=4368;y.FORMAT_STEREOF32=4369;y.NONE=0;y.FALSE=0;y.TRUE=1;y.SOURCE_RELATIVE=514;y.CONE_INNER_ANGLE=4097;y.CONE_OUTER_ANGLE=4098;y.PITCH=4099;y.POSITION=4100;y.DIRECTION=4101;y.VELOCITY=4102;y.LOOPING=4103;y.BUFFER=4105;y.GAIN=4106;y.MIN_GAIN=4109;y.MAX_GAIN=4110;y.ORIENTATION=4111;y.SOURCE_STATE=4112;y.INITIAL=4113;y.PLAYING=4114;y.PAUSED=4115;y.STOPPED=4116;y.BUFFERS_QUEUED=4117;y.BUFFERS_PROCESSED=4118;y.REFERENCE_DISTANCE=4128;y.ROLLOFF_FACTOR=
4129;y.CONE_OUTER_GAIN=4130;y.MAX_DISTANCE=4131;y.SEC_OFFSET=4132;y.SAMPLE_OFFSET=4133;y.BYTE_OFFSET=4134;y.SOURCE_TYPE=4135;y.STATIC=4136;y.STREAMING=4137;y.UNDETERMINED=4144;y.FORMAT_MONO8=4352;y.FORMAT_MONO16=4353;y.FORMAT_STEREO8=4354;y.FORMAT_STEREO16=4355;y.FREQUENCY=8193;y.BITS=8194;y.CHANNELS=8195;y.SIZE=8196;y.UNUSED=8208;y.PENDING=8209;y.PROCESSED=8210;y.NO_ERROR=0;y.INVALID_NAME=40961;y.INVALID_ENUM=40962;y.INVALID_VALUE=40963;y.INVALID_OPERATION=40964;y.OUT_OF_MEMORY=40965;y.VENDOR=45057;
y.VERSION=45058;y.RENDERER=45059;y.EXTENSIONS=45060;y.DOPPLER_FACTOR=49152;y.DOPPLER_VELOCITY=49153;y.SPEED_OF_SOUND=49155;y.DISTANCE_MODEL=53248;y.INVERSE_DISTANCE=53249;y.INVERSE_DISTANCE_CLAMPED=53250;y.LINEAR_DISTANCE=53251;y.LINEAR_DISTANCE_CLAMPED=53252;y.EXPONENT_DISTANCE=53253;y.EXPONENT_DISTANCE_CLAMPED=53254;$.FALSE=0;$.TRUE=1;$.FREQUENCY=4103;$.REFRESH=4104;$.SYNC=4105;$.MONO_SOURCES=4112;$.STEREO_SOURCES=4113;$.NO_ERROR=0;$.INVALID_DEVICE=40961;$.INVALID_CONTEXT=40962;$.INVALID_ENUM=40963;
$.INVALID_VALUE=40964;$.OUT_OF_MEMORY=40965;$.MAJOR_VERSION=4096;$.MINOR_VERSION=4097;$.ATTRIBUTES_SIZE=4098;$.ALL_ATTRIBUTES=4099;$.DEFAULT_DEVICE_SPECIFIER=4100;$.DEVICE_SPECIFIER=4101;$.EXTENSIONS=4102;$.EXT_CAPTURE=1;$.CAPTURE_DEVICE_SPECIFIER=784;$.CAPTURE_DEFAULT_DEVICE_SPECIFIER=785;$.CAPTURE_SAMPLES=786;$.ENUMERATE_ALL_EXT=1;$.DEFAULT_ALL_DEVICES_SPECIFIER=4114;$.ALL_DEVICES_SPECIFIER=4115;$f.EFX_MAJOR_VERSION=131073;$f.EFX_MINOR_VERSION=131074;$f.MAX_AUXILIARY_SENDS=131075;$f.METERS_PER_UNIT=
131076;$f.DIRECT_FILTER=131077;$f.FILTER_NULL=0;D.UID=0;D.SWIZ=aa.__empty_constructs__.slice();D.MAX_CHANNELS_BITS=3;ag.SRC="oy4:namey16:hxsl.BatchShadery4:funsahy4:varsaoR0y11:Batch_County10:qualifiersajy17:hxsl.VarQualifier:0:1i65536hy2:idi-71y4:kindjy12:hxsl.VarKind:2:0y4:typejy9:hxsl.Type:1:0goR0y12:Batch_BufferR7i-72R8r6R10jR11:16:2jR11:5:2i4jy12:hxsl.VecType:1:0jy13:hxsl.SizeDecl:1:1r3ghg";fb.KWD_LIST="input output discard dvec2 dvec3 dvec4 hvec2 hvec3 hvec4 fvec2 fvec3 fvec4 int float bool long short double half fixed unsigned superp lowp mediump highp precision invariant discard struct asm union template this packed goto sizeof namespace noline volatile external flat input output out attribute const uniform varying inout void".split(" ");
fb.KWDS=function(a){a=new ia;for(var b=0,c=fb.KWD_LIST;b<c.length;){var d=c[b];++b;null!=L[d]?a.setReserved(d,!0):a.h[d]=!0}return a}(this);fb.GLOBALS=function(a){a=new Cd;for(var b=0,c=G.__empty_constructs__.slice();b<c.length;){var d=c[b];++b;var e=""+r.string(d),e=e.charAt(0).toLowerCase()+z.substr(e,1,null);a.set(d,e)}a.set(G.ToInt,"int");a.set(G.ToFloat,"float");a.set(G.ToBool,"bool");a.set(G.LReflect,"reflect");a.set(G.Mat3x4,"_mat3x4");a.set(G.VertexID,"gl_VertexID");a.set(G.InstanceID,"gl_InstanceID");
for(b=a.iterator();b.hasNext();)c=b.next(),d=fb.KWDS,null!=L[c]?d.setReserved(c,!0):d.h[c]=!0;return a}(this);fb.MAT34="struct _mat3x4 { vec4 a; vec4 b; vec4 c; };";bg.UID=0;qa.SWIZ=["x","y","z","w"];Xg.UID=0;Xc.UNROLL_LOOPS=!1;sc.minCodePoint=0;sc.maxCodePoint=1114111;sc.minHighSurrogate=55296;sc.maxHighSurrogate=56319;sc.minLowSurrogate=56320;sc.maxLowSurrogate=57343;$e.main();bd.run()})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
